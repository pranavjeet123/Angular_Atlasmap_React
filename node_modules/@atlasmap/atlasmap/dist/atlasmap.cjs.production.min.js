"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@atlasmap/core"),n=e(require("ky")),a=require("react"),i=e(a),r=require("d3-scale"),o=require("react-use-gesture"),l=require("@patternfly/react-styles"),c=require("d3-shape"),s=require("@patternfly/react-core"),u=require("@patternfly/react-icons"),p=require("react-dnd"),d=require("react-dnd-html5-backend"),m=require("react-dnd-touch-backend"),g=e(require("@patternfly/react-styles/css/components/FormControl/form-control")),f=require("use-debounce"),v=require("react-dom"),E=require("@patternfly/react-topology"),h=require("react-sage"),b=require("@patternfly/react-table"),C=require("rxjs/operators");function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function S(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t.indexOf(n=r[a])>=0||(i[n]=e[n]);return i}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function M(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return T(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var F=function(e,n,a){try{var i=t.ConfigModel.getConfig();return O(e,i,n).inspectionParameters=a,Promise.resolve(i.mappingService.notifyMappingUpdated()).then((function(){return Promise.resolve(i.fileService.updateDigestFile()).then((function(){}))}))}catch(e){return Promise.reject(e)}},D=function(e,t,n,a,i){try{return Promise.resolve(new Promise((function(r){try{return t.initCfg.initialized=!1,t.initializationService.updateLoadingStatus("Importing Document "+e.name),t.documentService.importNonJavaDocument(e,n,a,i).then((function(){t.fileService.updateDigestFile().finally((function(){t.initializationService.updateStatus(),r(!0)}))})),Promise.resolve()}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}},I=function(){try{return Promise.resolve(new Promise((function(e,n){try{return t.ConfigModel.getConfig().documentService.getLibraryClassNames().then((function(t){e(t)})).catch((function(){n()})),Promise.resolve()}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}},k=function(e,n){try{return Promise.resolve(new Promise((function(a){try{return n.mappingService.removeDocumentReferenceFromAllMappings(e.id),t.CommonUtil.removeItemFromArray(e,e.isSource?n.sourceDocs:n.targetDocs),Promise.resolve(n.mappingService.notifyMappingUpdated()).then((function(){return Promise.resolve(n.fileService.updateDigestFile()).then((function(){a(!0)}))}))}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}},w=function(e,n,a){try{var i=t.ConfigModel.getConfig();return O(e,i,a).name=n,Promise.resolve(i.mappingService.notifyMappingUpdated()).then((function(){return Promise.resolve(i.fileService.updateDigestFile()).then((function(){}))}))}catch(e){return Promise.reject(e)}};function A(e,n,a,i,r){var o=t.ConfigModel.getConfig(),l=R(e,o,!0),c={alias:n,uri:a,locationUri:i,createdByUser:!0,isTarget:r,getPrettyLabel:function(){return n+" ["+a+"]"},copy:function(){return Object.assign({},c)},copyFrom:function(e){return Object.assign(c,e)}};l.namespaces.push(c),o.mappingService.notifyMappingUpdated()}function _(e,n,a,i,r,o){var l=t.ConfigModel.getConfig(),c=R(e,l,!0).getNamespaceForAlias(n);c.alias=a,c.uri=i,c.locationUri=r,c.isTarget=o,l.mappingService.notifyMappingUpdated()}function P(e,n){var a=t.ConfigModel.getConfig(),i=R(e,a,!0);i.namespaces=i.namespaces.filter((function(e){return e.alias!==n})),a.mappingService.notifyMappingUpdated()}function O(e,t,n){for(var a,i=M(t.getDocs(n));!(a=i()).done;){var r=a.value;if(r.id.match(e))return r}return null}function R(e,t,n){for(var a,i=M(t.getDocs(n));!(a=i()).done;){var r=a.value;if((r.getName(!1)+"."+r.type.toLowerCase()).match(e))return r}return null}function N(e,t,n,a){return new Promise((function(i){e.initCfg.initialized=!1,e.initializationService.updateLoadingStatus("Importing Document "+t),e.documentService.importJavaDocument(t,a,n).then((function(){e.fileService.updateDigestFile().finally((function(){e.initializationService.updateStatus(),i(!0)}))}))}))}function L(e){for(var n,a=t.ConfigModel.getConfig(),i=[{label:"Current Message Header",value:"current"},{label:"Camel Exchange Property",value:"camelExchangeProperty"}],r=M(e?a.sourceDocs:a.targetDocs);!(n=r()).done;){var o=n.value;i.push({value:o.id,label:o.name})}return i}function V(e,n){var a=O(e,t.ConfigModel.getConfig(),n);return null==a?void 0:a.inspectionParameters}function U(){var e,n=t.ConfigModel.getConfig();return!(null==n||null===(e=n.mappings)||void 0===e||!e.activeMapping)}var z=function(){function e(t){this.uuid=t+e.sequence++}return e.prototype.getUuid=function(){return this.uuid},e}();z.sequence=0;var B=function(e){function t(n){var a;return(a=e.call(this,t.PREFIX)||this).str=n,a}S(t,e);var n=t.prototype;return n.toText=function(){return this.str},n.toHTML=function(){return'<span id="'+this.uuid+'">'+this.str.replace(/ /g,"&nbsp;")+"</span>"},t}(z);B.PREFIX="expression-text-";var G=function(e){function t(n,a,i){var r;return(r=e.call(this,t.PREFIX)||this).mapping=n,r.mfield=a,!a&&i&&(r.field=n.getMappedFieldForIndex((i+1).toString(),!0)),r}S(t,e);var n=t.prototype;return n.toText=function(){return this.mapping&&this.field?"${"+(this.mapping.getIndexForMappedField(this.field)-1)+"}":""},n.toHTML=function(){return this.field?this.field&&this.field.field?'<span contenteditable="false" id="'+this.uuid+'" title="'+this.field.field.docDef.name+":"+this.field.field.path+'"\n        class="expressionFieldLabel label label-default">'+this.field.field.name+"</span>":'<span contenteditable="false" id="'+this.uuid+'"\n        title="Field index \''+(this.mapping.getIndexForMappedField(this.field)-1)+'\' is not available"\n        class="expressionFieldLabel label label-danger">N/A</span>':""},t}(z);function j(){var e,n=t.ConfigModel.getConfig();if(!U()||null===(e=n.mappings)||void 0===e||!e.activeMapping)return null;var a=n.mappings.activeMapping,i=a.transition.expression;return i?a.transition.expression&&a.transition.expression.setConfigModel(n):(a.transition.expression=new t.ExpressionModel(a,n),(i=a.transition.expression).generateInitialExpression(),i.updateFieldReference(a)),a.transition.expression}function q(){var e,n,a,i=t.ConfigModel.getConfig();return U()&&(null!==(e=i.mappings)&&void 0!==e&&null!==(n=e.activeMapping)&&void 0!==n&&null!==(a=n.transition)&&void 0!==a&&a.expression||j())&&i.mappings.activeMapping.transition.expression&&i.mappings.activeMapping.transition.enableExpression?i.mappings.activeMapping.transition.expression.toHTML():""}function H(e){var n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select();try{document.execCommand("copy")}catch(n){t.ConfigModel.getConfig().errorService.addError(new t.ErrorInfo({message:"Error copying "+e+" to clipboard",level:t.ErrorLevel.ERROR,scope:t.ErrorScope.APPLICATION,type:t.ErrorType.INTERNAL}))}document.body.removeChild(n)}G.PREFIX="expression-field-";var W=new t.InitializationService(n.create({headers:{"ATLASMAP-XSRF-TOKEN":"awesome"}})),J=W.cfg;function X(e){var t=e.children.map(K).filter((function(e){return e}));return t.length>0&&e.visibleInCurrentDocumentSearch?{id:(e.docDef.uri||e.docDef.type+"-"+e.scope)+":"+(e.docDef.isSource?"source":"target")+":"+e.path,name:e.name,type:e.type,isCollection:e.isCollection,isInCollection:e.isInCollection(),fields:t,amField:e}:null}function Y(e){var n,a=t.ConfigModel.getConfig(),i=e.partOfMapping;return(i?a.showMappedFields:a.showUnmappedFields&&e.visibleInCurrentDocumentSearch)?{id:(e.docDef.uri||e.docDef.type+"-"+e.scope)+":"+(e.docDef.isSource?"source":"target")+":"+e.path,name:e.getFieldLabel(!1,!1),type:e.type,path:e.path,scope:e.scope?e.scope:"",value:e.value,amField:e,mappings:(null===(n=a.mappings)||void 0===n?void 0:n.findMappingsForField(e).map(ie).filter((function(e){return e})))||[],hasTransformations:e.partOfTransformation,isAttribute:e.isAttribute,isCollection:e.isCollection,isInCollection:e.isInCollection(),isConnected:i,isDisabled:"UNSUPPORTED"===e.type||"COMPLEX"===e.type&&!e.enumeration,enumeration:e.enumeration}:null}function K(e){return e.children.length>0?X(e):Y(e)}function Q(e){return{alias:e.alias,uri:e.uri,locationUri:e.locationUri,isTarget:e.isTarget}}function Z(e){if(!e||!e.fields||0===e.fields.length)return null;var t=e.fields.map(K).filter((function(e){return e})),n=e.namespaces.map(Q).filter((function(e){return e}));return e.visibleInCurrentDocumentSearch&&t.length>0?{id:e.id,fields:t,name:e.name,type:e.type,namespaces:n}:null}function $(e){var n;return e.field&&e.field.docDef?{id:(e.field.docDef.uri||e.field.docDef.type+"-"+e.field.scope)+":"+(e.field.docDef.isSource?"source":"target")+":"+e.field.path,name:e.field.getFieldLabel(!1,!1),type:e.field.type,path:e.field.path,scope:null!==(n=e.field)&&void 0!==n&&n.scope?e.field.scope:"",value:e.field.value,hasTransformations:!1,mappings:[],isAttribute:!1,isCollection:!1,isInCollection:!1,isConnected:!1,isDisabled:!1,enumeration:!1,amField:e.field,transformations:e.actions.map((function(n){return{name:n.name,options:fe(e.isSource()).map((function(e){return{name:t.CommonUtil.toDisplayable(e.name),value:e.name}})),arguments:n.definition.arguments.map((function(e,a){var i,r;return{label:(null===(i=e.serviceObject)||void 0===i||null===(r=i.title)||void 0===r?void 0:r.length)>0?e.serviceObject.title:t.CommonUtil.toDisplayable(e.name),type:e.type,name:e.name,value:n.argumentValues[a].value,options:e.values?e.values.map((function(e){return{name:e,value:e}})):void 0}}))}}))}:null}function ee(e){switch(e){case t.ErrorLevel.INFO:return"info";case t.ErrorLevel.WARN:return"warning";case t.ErrorLevel.ERROR:return"danger";default:return"default"}}function te(e){switch(typeof e){case"string":return e;default:return(null==e?void 0:e.message)||JSON.stringify(e)}}function ne(e){switch(e){case t.ErrorType.INTERNAL:return"Internal";case t.ErrorType.USER:return"User";case t.ErrorType.VALIDATION:return"Validation";case t.ErrorType.PREVIEW:return"Preview";case t.ErrorType.FORM:return"Form"}}function ae(e){var n;return{variant:ee(e.level),title:e.mapping&&e.type!==t.ErrorType.PREVIEW?ne(e.type)+': "'+e.mapping.transition.getPrettyName()+'"':ne(e.type),description:te(e.message),id:e.identifier,mappingId:null===(n=e.mapping)||void 0===n?void 0:n.uuid}}function ie(e){return e?{id:e.uuid,name:e.transition.getPrettyName(),sourceFields:e.getUserMappedFields(!0).map($).filter((function(e){return e})),targetFields:e.getUserMappedFields(!1).map($).filter((function(e){return e})),mapping:e}:null}function re(e){return e?e.mappings.map(ie).filter((function(e){return e})):[]}function oe(e,t){return W.cfg.expressionService.executeFieldSearch(W.cfg,e,t)}function le(e,t,n,a,i){var r=W.cfg.mappings.activeMapping;r&&e&&t&&(J.expressionService.addFieldToExpression(r,e,t,n,a,i),W.cfg.mappingService.notifyMappingUpdated())}function ce(){if(W.cfg.mappings&&W.cfg.mappings.activeMapping){var e=W.cfg.mappings.activeMapping;e.getMappedFields(!0).filter((function(e){return e.isPadField()})).forEach((function(t){return e.removeMappedField(t)})),e.transition.expression?e.transition.expression.setConfigModel(W.cfg):(e.transition.expression=new t.ExpressionModel(e,W.cfg),e.transition.expression.generateInitialExpression()),e.transition.expression.updateFieldReference(e)}}function se(e,t,n){var a=W.cfg.mappings.activeMapping.transition.expression.clearText(e,t,n);return W.cfg.mappingService.notifyMappingUpdated(),a}function ue(e,t,n){W.cfg.mappings.activeMapping.transition.expression.insertText(e,t,n),W.cfg.mappingService.notifyMappingUpdated()}function pe(){var e,t,n;return null!==(e=W.cfg.mappings)&&void 0!==e&&null!==(t=e.activeMapping)&&void 0!==t&&null!==(n=t.transition)&&void 0!==n&&n.expression?W.cfg.mappings.activeMapping.transition.expression.expressionUpdated$:null}function de(e,t,n){W.cfg.mappings.activeMapping.transition.expression.removeToken(e,t,n),W.cfg.mappingService.notifyMappingUpdated()}function me(e,t){e.amField.value=t,W.cfg.mappingService.notifyMappingUpdated()}function ge(){W.cfg.expressionService.toggleExpressionMode(),W.cfg.mappingService.notifyMappingUpdated()}function fe(e){return W.cfg.fieldActionService.getActionsAppliesToField(W.cfg.mappings.activeMapping,e,t.Multiplicity.ONE_TO_ONE)}function ve(e){return e.transition.mode===t.TransitionMode.ONE_TO_MANY?W.cfg.fieldActionService.getActionsAppliesToField(e,!0,t.Multiplicity.ONE_TO_MANY):e.transition.mode===t.TransitionMode.MANY_TO_ONE?W.cfg.fieldActionService.getActionsAppliesToField(e,!0,t.Multiplicity.MANY_TO_ONE):[]}function Ee(){return t.TransitionModel.delimiterModels}function he(e,t){if(e.argumentValues=[],t.populateFieldAction(e),e.argumentValues.values()&&e.argumentValues.length>0&&t.arguments[0]&&t.arguments[0].values&&t.arguments[0].values.length>0)for(var n=0;n<e.argumentValues.length;n++)e.argumentValues[n].value=t.arguments[n].values[n];W.cfg.mappingService.notifyMappingUpdated()}function be(e,n,a){var i,r=t.ConfigModel.getConfig(),o=null===(i=r.mappings)||void 0===i?void 0:i.activeMapping;if(o){var l=o.getMappedFieldForIndex(""+(n+1),e);if(l){var c=0;if("number"==typeof a){if(c=a,a<=0||!o)return;var s=o.getMappedFields(e),u=s.length;a>u&&r.mappingService.addPlaceholders(a-s.length,o,u,e)}else{var p=o.getMappedFieldForField(a);if(!p)return;c=o.getIndexForMappedField(p)}r.mappingService.moveMappedFieldTo(o,l,c)}}}function Ce(e,n){var a,i=t.ConfigModel.getConfig(),r=null===(a=i.mappings)||void 0===a?void 0:a.activeMapping;if(r){var o=r.getMappedFieldForIndex(""+(n+1),e);if(o){var l=new t.FieldAction;fe(e)[0].populateFieldAction(l),o.actions.push(l),i.mappingService.notifyMappingUpdated()}}}function ye(e,n,a,i){var r,o=t.ConfigModel.getConfig(),l=null===(r=o.mappings)||void 0===r?void 0:r.activeMapping;if(l){var c=l.getMappedFieldForIndex(""+(n+1),e);if(c){var s=c.actions[a],u=fe(e).find((function(e){return e.name===i}));if(s&&u){if(s.argumentValues=[],u.populateFieldAction(s),s.argumentValues.values()&&s.argumentValues.length>0&&u.arguments[0]&&u.arguments[0].values&&u.arguments[0].values.length>0)for(var p=0;p<s.argumentValues.length;p++)s.argumentValues[p].value=u.arguments[p].values[p];o.mappingService.notifyMappingUpdated()}}}}function Se(e,n,a,i,r){var o,l=t.ConfigModel.getConfig(),c=null===(o=l.mappings)||void 0===o?void 0:o.activeMapping;if(c){var s=c.getMappedFieldForIndex(""+(n+1),e);if(s){var u=s.actions[a];u&&(u.setArgumentValue(i,r),l.mappingService.notifyMappingUpdated())}}}function xe(e,n,a){var i,r=t.ConfigModel.getConfig(),o=null===(i=r.mappings)||void 0===i?void 0:i.activeMapping;if(o){var l=o.getMappedFieldForIndex(""+(n+1),e);if(l){var c=l.actions[a];c&&(t.CommonUtil.removeItemFromArray(c,l.actions),r.mappingService.notifyMappingUpdated())}}}function Te(e,n){var a,i=null===(a=t.ConfigModel.getConfig().mappings)||void 0===a?void 0:a.activeMapping;if(i){var r=ve(i).find((function(e){return e.name===n}));if(e&&r){if(e.argumentValues=[],r.populateFieldAction(e),e.argumentValues.values()&&e.argumentValues.length>0&&r.arguments[0]&&r.arguments[0].values&&r.arguments[0].values.length>0)for(var o=0;o<e.argumentValues.length;o++)e.argumentValues[o].value=r.arguments[o].values[o];W.cfg.mappingService.notifyMappingUpdated()}}}function Me(e,n,a){var i=t.ConfigModel.getConfig();e.setArgumentValue(n,a),i.mappingService.notifyMappingUpdated()}function Fe(e){W.cfg.mappingService.selectMapping(e.mapping)}function De(){W.cfg.mappingService.deselectMapping()}function Ie(e,n,a,i){t.ConfigModel.getConfig().documentService.createConstant(e,n,a,i)}function ke(e){t.ConfigModel.getConfig().documentService.deleteConstant(e)}function we(e,n,a,i){t.ConfigModel.getConfig().documentService.editConstant(e,n,a,i)}function Ae(e){return t.ConfigModel.getConfig().documentService.getConstantType(e)}function _e(e,n,a,i,r){t.ConfigModel.getConfig().documentService.createProperty(e,n,a,i,r)}function Pe(e,n,a){t.ConfigModel.getConfig().documentService.deleteProperty(e,n,a)}function Oe(e,n,a,i,r,o){t.ConfigModel.getConfig().documentService.editProperty(e,n,a,i,r,o)}function Re(e,n,a){return t.ConfigModel.getConfig().documentService.getPropertyType(e,n,a)}function Ne(e,n){var a=t.ConfigModel.getConfig(),i=W.cfg.mappingService;if(n){var r,o;if((null===(r=a.mappings)||void 0===r||!r.activeMapping)&&(null!=e&&e.partOfMapping||n.partOfMapping))return void a.errorService.addError(new t.ErrorInfo({message:"Unable to map '"+e.name+"/"+n.name+"'.  Please select a mapping before adding to it.",level:t.ErrorLevel.INFO,scope:t.ErrorScope.MAPPING,type:t.ErrorType.USER}));if(e&&null!==(o=a.mappings)&&void 0!==o&&o.activeMapping&&(e.partOfMapping||n.partOfMapping)){var l,c,s,u;if(null!==(u=e.partOfMapping?i.getFieldSelectionExclusionReason(null===(l=a.mappings)||void 0===l?void 0:l.activeMapping,n):i.getFieldSelectionExclusionReason(null===(c=a.mappings)||void 0===c?void 0:c.activeMapping,e)))return void a.errorService.addError(new t.ErrorInfo({message:"The field '"+n.name+"' cannot be selected, "+u+".",level:t.ErrorLevel.ERROR,mapping:null===(s=a.mappings)||void 0===s?void 0:s.activeMapping,scope:t.ErrorScope.MAPPING,type:t.ErrorType.USER}));if(n.partOfMapping&&a.mappings.activeMapping.targetFields[0].field.path===n.path)return void Ue(e);if(e.partOfMapping&&a.mappings.activeMapping.sourceFields[0].field.path===e.path)return void Ue(n)}}e?a.mappingService.addNewMapping(e,!1):a.mappingService.newMapping(),n&&Ue(n)}function Le(){t.ConfigModel.getConfig().mappingService.newMapping()}function Ve(e){t.ConfigModel.getConfig().mappingService.removeMapping(e)}function Ue(e){t.ConfigModel.getConfig().mappingService.addFieldToActiveMapping(e)}function ze(e){var n,a=t.ConfigModel.getConfig(),i=null===(n=a.mappings)||void 0===n?void 0:n.activeMapping;if(i){var r=i.getMappedFieldForField(e);r&&(i.removeMappedField(r),a.mappingService.updateMappedField(i))}}function Be(e){var n,a=t.ConfigModel.getConfig(),i=null===(n=a.mappings)||void 0===n?void 0:n.activeMapping;i&&e&&(i.removeMappedField(e),a.mappingService.updateMappedField(i))}function Ge(){var e,n=t.ConfigModel.getConfig(),a=null===(e=n.mappings)||void 0===e?void 0:e.activeMapping;return a?W.cfg.mappingService.getEnumerationValues(n,a):[]}function je(e){var t,n=W.cfg.mappings.activeMapping.transition.expression.getNode(e);return n&&null!==(t=n.mappedField)&&void 0!==t&&t.field.enumeration?n.mappedField.field.enumValues:[]}function qe(e,t){var n,a=W.cfg.mappings.activeMapping,i=a.transition.expression.getNode(e);i&&null!==(n=i.mappedField)&&void 0!==n&&n.field.enumeration&&(W.cfg.mappingService.setEnumFieldValue(i.mappedField.field,t),a.transition.expression.updateFieldReference(a),W.cfg.mappingService.notifyMappingUpdated())}function He(e){var n,a=t.ConfigModel.getConfig(),i=null===(n=a.mappings)||void 0===n?void 0:n.activeMapping;i&&W.cfg.mappingService.updateEnumerationValues(a,i,e)}function We(){var e,n=t.ConfigModel.getConfig();return W.cfg.mappingService.isEnumerationMapping(null===(e=n.mappings)||void 0===e?void 0:e.activeMapping)}var Je=function(e,n){try{var a=t.ConfigModel.getConfig(),i=O(e,a,n);return Promise.resolve(k(i,a)).then((function(){a.initializationService.updateInitComplete()}))}catch(e){return Promise.reject(e)}};function Xe(e,n){return!!R(e.name,t.ConfigModel.getConfig(),n)}function Ye(e){return t.ConfigModel.getConfig().fileService.exportADMArchive(e)}function Ke(e,t){t.initializationService.initializeWithADMArchiveFile(e)}function Qe(e,t){t.fileService.importJarFile(e)}function Ze(){t.ConfigModel.getConfig().initializationService.resetAtlasMap()}function $e(){return t.ConfigModel.getConfig().initializationService.getRuntimeVersion()}function et(){return"2.3.8"}function tt(e){return t.ConfigModel.getConfig().previewService.toggleMappingPreview(e)}function nt(e){var n=t.ConfigModel.getConfig();return n.showMappedFields=e,n.initializationService.systemInitializedSource.next(),e}function at(e){var n=t.ConfigModel.getConfig();return n.showUnmappedFields=e,n.initializationService.systemInitializedSource.next(),e}function it(e,t){var n=a.useState(e),i=n[0],r=n[1];a.useEffect((function(){return r(e)}),[e]);var o=a.useCallback((function(){try{var e=function(e){r(e)};return Promise.resolve(t?Promise.resolve(t(!i)).then(e):e(!i))}catch(e){return Promise.reject(e)}}),[t,i]),l=a.useCallback((function(){return r(!1)}),[]),c=a.useCallback((function(){return r(!0)}),[]);return{state:i,toggle:o,toggleOff:l,toggleOn:c,setToggle:r}}var rt=a.createContext(null),ot=function(e){var t=e.children,n=e.allowPanning,r=void 0!==n&&n,l=e.initialWidth,c=void 0===l?0:l,s=e.initialHeight,u=void 0===s?0:s,p=e.initialZoom,d=void 0===p?1:p,m=e.initialPanX,g=void 0===m?0:m,f=e.initialPanY,v=void 0===f?0:f,E=a.useState({width:0,height:0,offsetLeft:0,offsetTop:0}),h=E[0],b=E[1],C=a.useRef([]),y=a.useCallback((function(e){C.current=C.current.filter((function(t){return t.id!==e}))}),[]),S=a.useCallback((function(e){y(e.id),C.current=[].concat(C.current,[e])}),[y]),x=a.useCallback((function(){return C.current}),[]),T=a.useRef([]),M=a.useCallback((function(e){T.current=[].concat(T.current,[e])}),[]),F=a.useCallback((function(e){T.current=T.current.filter((function(t){return t!==e}))}),[]);a.useEffect((function(){var e=requestAnimationFrame((function t(){e=requestAnimationFrame(t);for(var n=0,a=T.current.length;n<a;n++)T.current[n]()}));return function(){cancelAnimationFrame(e)}}),[]);var D=a.useState({x:g,y:v}),I=D[0],k=I.x,w=I.y,A=D[1],_=a.useState(d),P=_[0],O=_[1],R=a.useCallback((function(e){O((function(t){return Math.max(.2,Math.min(2,t+e))}))}),[O]),N=a.useCallback((function(){return O(1)}),[O]),L=a.useCallback((function(){return A({x:0,y:0})}),[A]),V=a.useState(!1),U=V[0],z=V[1],B=o.useGesture({onDrag:function(e){var t=e.movement,n=t[0],a=t[1],i=e.last,r=e.memo,o=void 0===r?[k,w]:r;return e.first&&z(!0),i&&z(!1),A({x:n+o[0],y:a+o[1]}),o},onWheel:function(e){R(-.001*e.delta[1])}},{drag:{delay:!0},enabled:r});return i.createElement(rt.Provider,{value:{initialWidth:c,initialHeight:u,dimensions:h,setDimension:b,panX:k,panY:w,addRedrawListener:M,removeRedrawListener:F,addRect:S,removeRect:y,getRects:x,zoom:P,updateZoom:R,resetZoom:N,pan:{x:k,y:w},setPan:A,resetPan:L,allowPanning:r,isPanning:U,bindCanvas:B}},t)};function lt(){var e=a.useContext(rt);if(!e)throw new Error("A CanvasProvider wrapper is required to use this hook.");var t=e.dimensions,n=t.width,i=t.height,o=e.zoom;return y({},e,{xDomain:a.useMemo((function(){return r.scaleLinear().range([0,n]).domain([0,n*o])}),[n,o]),yDomain:a.useMemo((function(){return r.scaleLinear().range([i,0]).domain([i*o,0])}),[i,o])})}var ct=function(e){var t=e.children,n=lt();return i.createElement("g",{transform:"\n        translate("+n.panX+" "+n.panY+")\n        scale("+n.zoom+")\n      "},t)},st={width:0,height:0,top:0,left:0,x:0,y:0,right:0,bottom:0};function ut(e){var t=(void 0===e?{}:e).liveMeasure,n=void 0===t||t,i=a.useRef(st),r=a.useState(st),o=r[0],l=r[1],c=a.useRef(null),s=a.useCallback((function(){if(c.current){var e=c.current.getBoundingClientRect();((t=e).width!==(n=i.current).width||t.height!==n.height||t.top!==n.top||t.left!==n.left||t.x!==n.x||t.y!==n.y||t.right!==n.right||t.bottom!==n.bottom)&&(l(e),i.current=e)}var t,n}),[l]);return a.useLayoutEffect((function(){return s(),n&&(window.addEventListener("resize",s),window.addEventListener("scroll",s)),function(){n&&(window.removeEventListener("resize",s),window.removeEventListener("scroll",s))}}),[n,s]),[c,o,s]}var pt=function(e){var t=e.children,n=e.className,r=e.style,o=e.isFilled,c=void 0===o||o,s=x(e,["children","className","style","isFilled"]),u=lt(),p=u.initialWidth,d=u.initialHeight,m=u.setDimension,g=u.addRedrawListener,f=u.removeRedrawListener,v=ut(),E=v[0],h=v[1],b=v[2];a.useEffect((function(){m({width:h.width,height:h.height,offsetLeft:h.left,offsetTop:h.top})}),[h,m]),a.useEffect((function(){return g(b),function(){return f(b)}}),[g,b,f]);var C=lt(),S=C.allowPanning,T=C.isPanning,M=C.zoom,F=C.bindCanvas,D=a.useMemo((function(){return y({cursor:S?T?"grabbing":"grab":void 0,userSelect:S&&T?"none":"auto",backgroundSize:30*M+"px "+30*M+"px",width:p||"100%",height:d||"100%"},r)}),[S,d,p,T,r,M]);return i.createElement("div",{ref:E,className:l.css(c&&"Canvas-module_canvasWrapper__2zUnn")},i.createElement("svg",Object.assign({},s,{className:l.css("Canvas-module_svg__21OUU",S&&"Canvas-module_panning__3mi51",n),style:D},F()),i.createElement(ct,null,t)))},dt=a.forwardRef((function(e,t){var n=e.children,a=e.width,r=e.height,o=e.x,c=e.y,s=e.className,u=x(e,["children","width","height","x","y","className"]);return i.createElement("foreignObject",Object.assign({width:a,height:r,x:o,y:c,className:l.css("HTMLObject-module_foreignObject__2v8cW",s)},u,{ref:t}),n)})),mt=function(e){var t=e.start,n=e.end,r=e.type,o=void 0===r?"horizontal":r,s=e.color,u=void 0===s?"grey":s,p=e.hoveredColor,d=void 0===p?u:p,m=e.strokeWidth,g=void 0===m?2:m,f=e.children,v=x(e,["start","end","type","color","hoveredColor","strokeWidth","startSideSize","endSideSize","sideStrokeWidth","className","children"]),E=it(!1),h=E.toggleOn,b=E.toggleOff,C=g,y=E.state?d:u,S=a.useMemo((function(){return("horizontal"===o?c.linkHorizontal:c.linkVertical)().context(null).source((function(e){return e.start})).target((function(e){return e.end})).x((function(e){return e.x})).y((function(e){return e.y}))}),[o])({start:t,end:n});return S?i.createElement("g",{onMouseEnter:h,onMouseLeave:b,style:{pointerEvents:"all"}},i.createElement("path",{d:S,stroke:y,strokeWidth:C,fill:"none"}),i.createElement("path",Object.assign({d:S,stroke:"transparent",strokeWidth:20,fill:"none",className:l.css(v.onClick&&"Arc-module_clickable__25tnx")},v)),f):null};function gt(){var e=lt(),t=e.xDomain,n=e.yDomain,i=e.dimensions,r=i.offsetLeft,o=i.offsetTop,l=e.panX,c=e.panY,s=a.useCallback((function(e){return t(e-r-l)}),[r,l,t]),u=a.useCallback((function(e){return n(e-o-c)}),[o,c,n]),p=a.useCallback((function(e){return{x:s(e.x),y:u(e.y),width:t(e.width),height:n(e.height),top:u(e.top),right:s(e.right),bottom:u(e.bottom),left:s(e.left)}}),[s,u,t,n]);return{getBoundingCanvasRect:a.useCallback((function(e){var t=e.getBoundingClientRect();return p(t)}),[p]),convertDOMRectToCanvasRect:p,convertClientX:s,convertClientY:u}}var ft=a.createContext(null),vt=function(e){var t=e.children,n=a.useRef({});return i.createElement(ft.Provider,{value:{nodes:n,setRef:function(e){for(var t=e.id,a=x(e,["id"]),i=t+"-"+Date.now(),r=Array.isArray(t)?t:[t],o=0;o<r.length;o++)r[o]&&(n.current[r[o]]=y({},a,{key:i}));return i},unsetRef:function(e,t){for(var a=Array.isArray(e)?e:[e],i=0;i<a.length;i++){var r,o=a[i];o&&(null===(r=n.current[o])||void 0===r?void 0:r.key)===t&&delete n.current[o]}}}},t)};function Et(e){var t=a.useContext(ft);a.useEffect((function(){if(t&&e.id){var n=t.unsetRef,a=(0,t.setRef)(e);return function(){return n(e.id,a)}}}),[t,e])}function ht(){var e=a.useContext(ft),t=gt().getBoundingCanvasRect,n=a.useCallback((function(a){if(!e)return null;var i=e.nodes.current[a],r=i?i.ref.current:void 0;if(r){var o,l=t(r);if(0===l.height&&i.parentId)return n(i.parentId);if(i.boundaryId&&(o=n(i.boundaryId))){var c=i.overrideWidth?n(i.overrideWidth):void 0,s=i.overrideHeight?n(i.overrideHeight):void 0,u=(null==c?void 0:c.width)||l.width,p=(null==s?void 0:s.height)||l.height,d=Math.min(Math.max((null==c?void 0:c.left)||l.left,o.left),o.width+o.left-l.width),m=d!==((null==c?void 0:c.x)||l.x),g=Math.min(Math.max((null==s?void 0:s.top)||l.top+l.height/2,o.top),o.height+o.top);return{width:u,height:p,x:d,y:g,left:d,top:g,right:d+u,bottom:g+p,toJSON:function(){return""},clipped:m||g===o.top||g===o.height+o.top}}return l}return null}),[e,t]);return n}var bt=a.forwardRef((function(e,t){var n=e.children,i=x(e,["children"]),r=a.Children.only(n),o=a.useRef(null);return Et(y({},i,{ref:o})),a.isValidElement(r)?a.cloneElement(r,{ref:function(e){t&&(t.current=e),o.current=e}}):null}));function Ct(e){return{x:e.left,y:e.y}}function yt(e){return{x:e.right,y:e.y}}function St(e){return{x:e.x,y:e.bottom}}var xt=function(e){var t=e.start,n=e.end,r=e.color,o=x(e,["start","end","color"]),l=lt(),c=l.addRedrawListener,s=l.removeRedrawListener,u=ht(),p=a.useState(null),d=p[0],m=p[1],g=a.useState("horizontal"),f=g[0],v=g[1],E=a.useCallback((function(){var e,a=u(t),i=u(n);if(a&&i){var r=a.width<i.width?[a,i]:[i,a],o=r[0],l=r[1];if(o.left>l.left&&o.left<l.right||o.right<l.right&&o.right>l.left){var c=a.top>i.top?[t,n]:[n,t],s=c[1],p=u(c[0]),d=u(s);p&&d?(m({start:(e=p,{x:e.x,y:e.top}),end:St(d),startSideSize:p.clipped?0:p.width,endSideSize:d.clipped?0:d.width}),v("vertical")):m(null)}else{var g=a.left>i.left?[t,n]:[n,t],f=g[1],E=u(g[0]),h=u(f);E&&h?(m({start:Ct(E),end:yt(h),startSideSize:E.clipped?0:E.height,endSideSize:h.clipped?0:h.height}),v("horizontal")):m(null)}}else m(null)}),[n,t,u]);return a.useEffect((function(){return c(E),function(){s(E)}}),[c,s,E]),d?i.createElement(mt,Object.assign({start:d.start,end:d.end,type:f,startSideSize:d.startSideSize,endSideSize:d.endSideSize,color:r||(0===(d.startSideSize&&d.endSideSize)?"var(--pf-global--Color--light-300)":"var(--pf-global--Color--dark-200)")},o)):null},Tt=function(e){var t=e.totalColumns,n=void 0===t?1:t,r=e.visible,o=void 0===r||r,c=e.children,s=x(e,["totalColumns","visible","children"]),u=a.useMemo((function(){return{flex:"0 0 "+100/n+"%"}}),[n]);return i.createElement("div",Object.assign({className:l.css("Column-module_column__1sNi2",!o&&"Column-module_hidden__rsQTt"),style:u},s),c)},Mt=a.forwardRef((function(e,t){return i.createElement("div",{className:"ColumnBody-module_body__2hALu",ref:t},e.children)})),Ft=function(e){return i.createElement("div",{className:"Actions-module_toolbar__TsQ-9"},a.Children.map(e.children,(function(e,t){return i.createElement("div",{className:"Actions-module_toolbarItem__3_5IA",key:t},e)})))},Dt=function(e){var t=e.title,n=e.actions,a=e.children;return i.createElement("div",{className:"ColumnHeader-module_header__V1RS7"},i.createElement("div",{className:l.css("ColumnHeader-module_toolbar__30am1","plain"===e.variant&&"ColumnHeader-module_plain__2oPqT")},i.createElement("div",{className:"ColumnHeader-module_title__2ysEf"},i.createElement(s.Title,{headingLevel:"h2",size:"lg"},t)),i.createElement(Ft,null,null==n?void 0:n.filter((function(e){return e})))),a)},It=function(e){var t=e.className,n=e.children,a=x(e,["className","children"]);return i.createElement(pt,Object.assign({},a,{className:l.css("ColumnMapper-module_canvas__MPzdp",t)}),n)},kt=function(e){var t=e.children,n=lt().dimensions;return i.createElement(dt,{width:n.width,height:n.height,x:0,y:0},i.createElement("div",{className:"Columns-module_wrapper__3eMnz"},t))},wt=function(e){var t=e.title,n=e.actions,r=void 0===n?[]:n,o=e.onSearch,l=a.useRef(null);return i.createElement(Dt,{title:t,actions:[i.createElement("form",{onSubmit:function(e){return l.current&&o(l.current.value),e.preventDefault(),!1},key:"search-form"},i.createElement(s.InputGroup,null,i.createElement(s.TextInput,{name:"search",id:"search-"+t,type:"search","aria-label":"Search fields",onChange:o,ref:l,"data-testid":"search-"+t+"-fields-input-field"}),i.createElement(s.Button,{type:"submit","aria-label":"Search","data-testid":"run-search-"+t+"-button",variant:"control"},i.createElement(u.SearchIcon,null))))].concat(r)})},At=window.matchMedia&&(window.matchMedia("(pointer: none)").matches||window.matchMedia("(pointer: coarse)").matches)&&window.matchMedia("(hover: none)").matches,_t=function(e){return i.createElement(p.DndProvider,{backend:m.TouchBackend,options:{enableMouseEvents:!0}},e.children)},Pt=function(e){return i.createElement(p.DndProvider,{backend:d.HTML5Backend},e.children)},Ot=a.createContext(null),Rt=function(e){var t=e.children,n=a.useRef(null);return i.createElement(At?_t:Pt,null,i.createElement(Ot.Provider,{value:{getHoveredTarget:function(){return n.current},setHoveredTarget:function(e){return n.current=e}}},t))};function Nt(){var e=a.useContext(Ot);if(!e)throw new Error("A FieldsDndProvider wrapper is required to use this hook.");return e}var Lt,Vt,Ut,zt,Bt,Gt=function(e){var t=e.children,n=Nt().getHoveredTarget,a=p.useDragLayer((function(e){return{draggedField:e.getItem(),currentOffset:e.getClientOffset(),isDragging:e.isDragging()}}));return t({isDragging:a.isDragging,currentOffset:a.currentOffset,draggedField:a.draggedField,getHoveredTarget:n})},jt=a.forwardRef((function(e,t){var n=e.field,r=e.onDrop,o=e.as,l=void 0===o?"div":o,c=e.children,s=x(e,["field","onDrop","as","children"]),u=p.useDrag({type:n.type,item:n,collect:function(e){return{isDragging:e.isDragging()}},end:function(e,t){t.didDrop()&&r(n,t.getDropResult())}}),m=u[0].isDragging,g=u[1],f=u[2];return a.useEffect((function(){f(d.getEmptyImage(),{captureDraggingState:!0})}),[f]),i.createElement(l,Object.assign({ref:function(e){t&&(t.current=e),g(e)}},s),c({isDragging:m}))})),qt=a.forwardRef((function(e,t){var n=e.accept,r=e.target,o=e.canDrop,l=e.as,c=void 0===l?"div":l,s=e.children,u=x(e,["accept","target","canDrop","as","children"]),d=Nt().setHoveredTarget,m=p.useDrop({accept:n,collect:function(e){return{isOver:e.isOver(),isDroppable:e.canDrop(),isTarget:e.isOver()&&e.canDrop(),field:e.getItem()}},canDrop:function(e,t){return o(t.getItem())},drop:function(){return r}}),g=m[0],f=g.isOver,v=g.isDroppable,E=g.isTarget,h=g.field,b=m[1],C=a.useRef(!1),y=a.useRef(!1);return a.useEffect((function(){f===C.current&&E===y.current||(E?d(r):f||d(null),C.current=f,y.current=E)}),[f,E,d,r]),i.createElement(c,Object.assign({ref:function(e){t&&(t.current=e),b(e)}},u),s({isDroppable:v,isOver:f,isTarget:E,field:h}))})),Ht=function(){var e=ut(),t=e[0],n=e[1];return a.useEffect(e[2]),i.createElement(Gt,null,(function(e){var a=e.currentOffset,r=e.draggedField;return e.isDragging&&a&&r?i.createElement("div",{style:{position:"absolute",zIndex:1e3,width:n.width,height:n.height,left:a.x-n.width/2,top:a.y-n.height},className:"FieldDragLayer-module_canvasObject__2cI4m"},i.createElement("div",{ref:t,className:"FieldDragLayer-module_canvasInner__3HxGR"},i.createElement(s.Label,null,r.name))):null}))},Wt=function(e){var t=e.fields,n=e.ariaLabelTypeAhead,r=e.placeholderText,o=e.isSource,l=a.useCallback((function(e,n){var a=e.split("\\"),i=t.find((function(e){return e.label===a[1]&&e.group===a[0]}));i&&i.onAdd()}),[t]);return i.createElement("div",null,i.createElement(s.FormSelect,{"aria-label":n,className:"AddFieldTypeahead-module_select__2irTI","data-testid":"mapping-details-add-field",id:n,onChange:l,placeholder:r},function(e,t){e.unshift(t);var n=e.reduce((function(t,n){var a=n.group+"\\"+n.label;return t[n.group]=[].concat(t[n.group]||[],[i.createElement(s.FormSelectOption,{isPlaceholder:0===n.group.length,isDisabled:!1,label:n.label,key:a+(o?"-source":"-target")+e.indexOf(n),value:a,"data-testid":"add-field-option-"+a,className:"AddFieldTypeahead-module_field__H5L5M"},n.label)]),t}),{});return Object.entries(n).map((function(e){var t=e[0];return i.createElement(s.FormSelectOptionGroup,{label:t,key:t},e[1])}))}(t,{label:r,group:"",onAdd:function(){}})))},Jt=function(e){var t=e.toggle,n=x(e,["toggle"]),a=it(!1),r=a.state,o=a.toggle;return i.createElement(s.Dropdown,Object.assign({},n,{isOpen:r,onSelect:o,toggle:t({isOpen:r,toggleOpen:o})}))},Xt="",Yt=function(e){var t=e.selectedNodeId,n=e.enumCandidates,a=e.clearEnumSelect,r=e.onEnumSelect,o="expr-enum-select-"+Xt,l=it(!0,u),c=l.toggleOff;function u(e){e||(n=[],a())}return i.createElement("div",{"aria-label":"Expression Enumeration",className:"enumSelectMenu","data-testid":"expression-enumeration-select"},i.createElement(s.Select,{onToggle:l.toggle,isOpen:l.state,value:Xt,id:o,onSelect:function(e,n,a){Xt=n,r(t,e.currentTarget.id.split("-").pop()),u(!1),c()},"data-testid":o},n.map((function(e,t){return function(e,t){return i.createElement(s.SelectOption,0===e[1].length?{isDisabled:!0,label:e,value:e,key:t,className:"ExpressionEnumSelect-module_document__20xcs"}:{label:e,value:e,key:t,className:"ExpressionEnumSelect-module_field__iFvbJ"})}(e.name,t)}))))},Kt="",Qt=function(e){var t=e.clearSearchMode,n=e.insertSelectedField,a=e.mappedFieldCandidates;function r(e){e||(a=[],t(!0),o=null)}var o,l="expr-field-search-"+Kt,c=it(!0,r),u=c.toggleOff;function p(e){e.srcElement&&(o=e.srcElement)}function d(e){o&&e&&(o.style.backgroundColor="white",e.focus(),(o=e).style.backgroundColor="lightblue")}function m(e,t,n){}return i.createElement("div",{"aria-label":"Expression Field Search",className:"ExpressionFieldSearch-module_searchMenu__ZA0PV","data-testid":"expression-field-search"},i.createElement(s.Select,{onToggle:c.toggle,isOpen:c.state,value:Kt,id:l,onKeyDown:function(e){"Enter"===e.key?e.preventDefault():"ArrowDown"===e.key?(e.preventDefault(),p(e),o&&d(o.nextElementSibling)):"ArrowUp"===e.key?(e.preventDefault(),p(e),o&&d(o.previousElementSibling)):"Tab"===e.key&&(!o&&e.srcElement?(o=e.srcElement.nextElementSibling.firstElementChild).style.backgroundColor="lightblue":o&&o.nextElementSibling&&(e.preventDefault(),d(o.nextElementSibling)))},onSelect:function(e,t,a){if(!a){var i=e.target.getAttribute("label");n(i,Kt=t)}r(!1),u()},"data-testid":l},a.map((function(e,t){return function(e,t){return i.createElement(s.SelectOption,"/"!==e[1][0]?{label:e[0],value:e[0],key:t,index:t,className:"ExpressionFieldSearch-module_document__LXQJd",isPlaceholder:!0}:{label:e[0],value:e[1],key:t,keyHandler:m,index:t,className:"ExpressionFieldSearch-module_field__2pam4"})}(e,t)}))))},Zt=-1,$t=[],en=null,tn=[],nn=null,an="",rn=!1,on="",ln="",cn="";function sn(e){if(nn)if(e)nn.innerHTML=ln;else{var t=Ut();nn.innerHTML=t+ln}}function un(){if(nn&&0!==cn.length){var e,t=nn.querySelector("#"+cn);t&&(window.getSelection().rangeCount>0?e=window.getSelection().getRangeAt(0):(e=document.createRange(),window.getSelection().addRange(e)),e.selectNode(t.childNodes[0]),e.setStart(t.childNodes[0],0),e.collapse(!0))}}function pn(e){if(nn&&e&&e.node){for(var t=0;t<nn.childNodes.length;t++){var n=nn.childNodes[t];if(n.id===e.node.uuid){var a=window.getSelection();if(a&&a.rangeCount){var i=a.getRangeAt(0),r=n.childNodes[0]?n.childNodes[0]:n;i.selectNode(r),e.offset<=r.length&&i.setStart(r,e.offset),i.collapse(!0)}return}}un()}}function dn(){zt();var e=Bt();e&&(Vt=e.subscribe((function(e){en=e}))),sn(),en?(pn(en),en=null):un()}var mn=function(e){var t,n,r,o,c,u=e.executeFieldSearch,p=e.getFieldEnums,d=e.mappingExpressionAddField,m=e.mappingExpressionClearText,f=e.isMappingExpressionEmpty,v=e.mappingExpressionInit,E=e.mappingExpressionInsertText,h=e.mappingExpressionObservable,b=e.mappingExpressionRemoveField,C=e.mappingExpression,y=e.trailerId,S=e.disabled,x=e.onToggle,T=e.setSelectedEnumValue,M=it(!1),F=M.state,D=M.toggleOn,I=M.toggleOff;function k(e){var t,n,a=window.getSelection();if(a&&nn)if(a.rangeCount){n=!(e||!a.focusNode||a.focusNode.nodeType!==a.focusNode.TEXT_NODE||a.focusOffset!==(null===(t=a.focusNode.textContent)||void 0===t?void 0:t.length));var i=a.getRangeAt(0),r=i.startContainer,o=i.startOffset;if(r===nn)return 0===o?void(e||f||b(A(),0)):void(e&&!f&&b());if(A(r)===cn)return e&&b(),void un();b(A(),e?o-1:o,n),A()===cn&&un()}else A()===cn&&e&&(b(),un())}function w(e){if(-1===Zt)return null;var t=Zt,a=t+an.length+1;return e===cn?n():n(e,t,a)}function A(e){var t,n,a=window.getSelection();if(!e){if(!a||0===a.rangeCount)return cn;e=a.getRangeAt(0).startContainer}return e.nodeType===(null==a||null===(t=a.focusNode)||void 0===t?void 0:t.TEXT_NODE)?e.parentElement.getAttribute("id"):null===(n=e.firstChild)||void 0===n?void 0:n.getAttribute("id")}function _(e){e&&w(A(Lt)),Zt=-1,Lt=void 0,rn=!1,an="",tn=[]}function P(){0===an.length?(tn=[],rn=!1):(an=an.substr(0,an.length-1),tn=r(an,!0))}function O(){on="",$t=[],I()}var R=a.useCallback((function(){dn()}),[]);return t=d,n=m,r=u,o=p,c=T,Ut=function(){return C||""},zt=v,Bt=h,ln='<span id="'+(cn=y)+'">&nbsp;</span>',a.useEffect((function(){if(void 0!==C)return R(),function(){Vt&&Vt.unsubscribe()}}),[C,R]),i.createElement(i.Fragment,null,i.createElement(s.Form,null,i.createElement(s.FormGroup,{fieldId:"expressionContent"},i.createElement(s.InputGroup,null,i.createElement(s.Tooltip,{content:"Enable/ Disable conditional mapping expression.",enableFlip:!0,entryDelay:750,exitDelay:100,position:"left"},i.createElement(s.Button,{variant:"control","aria-label":"Enable/ Disable conditional mapping expression",tabIndex:-1,onClick:x,"data-testid":"enable-disable-conditional-mapping-expression-button",isDisabled:S},i.createElement("i",null,"f",i.createElement("small",{style:{position:"relative",bottom:-3}},"(x)")))),S||void 0===C?i.createElement(s.TextInput,{isDisabled:!0,"aria-label":"Expression content"}):i.createElement(s.Tooltip,{content:"Enter text or '@' for source fields menu.",enableFlip:!0,entryDelay:750,exitDelay:100,position:"left"},i.createElement("div",{id:"expressionMarkup",key:"expressionMarkup-div","aria-label":"Expression Content",contentEditable:!0,className:l.css(g.formControl,"ExpressionFieldSearch"),suppressContentEditableWarning:!0,onChange:function(e){f&&R(),Vt&&Vt.unsubscribe(),Vt=Bt().subscribe((function(e){sn(),pn(e)})),sn()},onKeyDown:function(e){"Backspace"===e.key?(e.preventDefault(),k(!0),rn&&P()):"Delete"===e.key&&(e.preventDefault(),k(!1),rn&&P())},onKeyPress:function(e){e.ctrlKey||e.metaKey||e.altKey||e.key.length>1||(e.preventDefault(),f&&dn(),rn?e.key.match(/[a-z0-9]/i)&&(tn=r(an+=e.key,!0)):(rn="@"===e.key)&&(Lt=window.getSelection().getRangeAt(0).startContainer,Zt=window.getSelection().getRangeAt(0).startOffset,tn=r(an="",!0)),function(e){var t=window.getSelection().getRangeAt(0),n=t.startContainer,a=t.startOffset;if(nn&&n===nn)0===a?E(e,n.childNodes[0].getAttribute("id"),0):E(e);else{var i=A();i===cn?E(e):E(e,i,a)}}(e.key))},onPaste:function(e){if(e&&e.clipboardData){e.preventDefault();var t=e.clipboardData.getData("text/plain");E(t)}},onClick:function(e){on=A(),($t=o(on)).length>0&&(e.preventDefault(),D())},ref:function(e){return nn=e},tabIndex:-1,style:{paddingLeft:8}}))))),i.createElement("div",null,tn.length>0&&i.createElement("span",null,i.createElement(Qt,{clearSearchMode:_,insertSelectedField:function(e,n){var a=w(A(Lt));if(null!==a){var i=A(Lt)===cn;t(e,n,a,Zt,i),_(!1),nn.focus()}},mappedFieldCandidates:tn})),F&&i.createElement("span",null,i.createElement(Yt,{selectedNodeId:on,enumCandidates:$t,clearEnumSelect:O,onEnumSelect:function(e,t){c(e,t),O()}}))))},gn=function(e){return i.createElement(s.ToolbarGroup,{variant:"filter-group",className:"ConditionalExpressionInput-module_toolbarItem__1SRmf",role:"form"},i.createElement(s.ToolbarItem,{className:"ConditionalExpressionInput-module_toolbarItem__1SRmf"},i.createElement(mn,{disabled:e.disabled,executeFieldSearch:e.executeFieldSearch,getFieldEnums:e.getFieldEnums,mappingExpressionAddField:e.mappingExpressionAddField,mappingExpressionClearText:e.mappingExpressionClearText,isMappingExpressionEmpty:e.isMappingExpressionEmpty,mappingExpressionInit:e.mappingExpressionInit,mappingExpressionInsertText:e.mappingExpressionInsertText,mappingExpressionObservable:e.mappingExpressionObservable,mappingExpressionRemoveField:e.mappingExpressionRemoveField,mappingExpression:e.mappingExpression,trailerId:e.trailerId,onToggle:e.onToggle,setSelectedEnumValue:e.setSelectedEnumValue})))},fn=function(e){var t=e.onClose,n=e.uiVersion,a=e.runtimeVersion;return i.createElement(s.Modal,{variant:"small",title:e.title,isOpen:e.isOpen,onClose:t,actions:[i.createElement(s.Button,{key:"close",variant:"primary",onClick:t,"aria-label":"Close","data-testid":"about-dialog-close-button",isDisabled:!t},"Close")]},i.createElement("div",null,"UI Version: ",n),i.createElement("div",null,"Runtime Version: ",a))},vn=function(e){var t=e.onCancel,n=e.onConfirm,a=e.children;return i.createElement(s.Modal,{variant:"small",title:e.title,description:e.description,"data-testid":e.dataTestid,isOpen:e.isOpen,onClose:t,actions:[i.createElement(s.Button,{key:"confirm",variant:"primary",onClick:n,"aria-label":"Confirm","data-testid":"confirmation-dialog-confirm-button",isDisabled:!n},"Confirm"),i.createElement(s.Button,{key:"cancel",variant:"link",onClick:t,"aria-label":"Cancel","data-testid":"confirmation-dialog-cancel-button"},"Cancel")]},a)},En=function(e){var t=e.title,n=e.name,r=void 0===n?"":n,o=e.value,l=void 0===o?"":o,c=e.valueType,u=void 0===c?"":c,p=e.valueTypeOptions,d=e.isOpen,m=e.onCancel,g=e.onConfirm,f=e.onValidation,v=a.useState(r),E=v[0],h=v[1],b=a.useState(l),C=b[0],y=b[1],S=a.useState(u),x=S[0],T=S[1],M=a.useState(!0),F=M[0],D=M[1],I=a.useState(!1),k=I[0],w=I[1],A=a.useState(s.ValidatedOptions.default),_=A[0],P=A[1],O=a.useCallback((function(){h(r),y(l),T(u),w(!1),P(s.ValidatedOptions.default),D(!0)}),[r,l,u]),R=a.useCallback((function(){g({name:E,value:C,valueType:x}),O()}),[g,O,E,C,x]),N=a.useCallback((function(){m(),O()}),[m,O]);function L(e){V(e,C),h(e)}function V(e,t){if(!e||0===e.length)return P(s.ValidatedOptions.default),w(!1),!1;if(!/^[a-zA-Z0-9_@-]+$/.test(e))return P(s.ValidatedOptions.error),!1;P(s.ValidatedOptions.success);var n=f(e,t);return w(t.length>0&&n),D(n),n}return a.useEffect(O,[O]),i.createElement(vn,{title:t,onCancel:N,onConfirm:k?R:void 0,isOpen:d},i.createElement(s.Form,null,i.createElement(s.FormGroup,{label:"Name",fieldId:"name",isRequired:!0},F?i.createElement(s.TextInput,{value:E,onChange:L,id:"name",autoFocus:!0,isRequired:!0,"data-testid":"constant-name-text-input",validated:_}):i.createElement(s.Tooltip,{content:i.createElement("div",null,"A constant with this name already exists"),entryDelay:750,exitDelay:100},i.createElement(s.TextInput,{value:E,onChange:L,id:"name",autoFocus:!0,isRequired:!0,"data-testid":"constant-name-text-input-tooltip",style:{color:"red"}}))),i.createElement(s.FormGroup,{label:"Value",fieldId:"constvalue",isRequired:!0},i.createElement(s.TextInput,{value:C,onChange:function(e){V(E,e),y(e)},id:"constvalue",autoFocus:!0,isRequired:!0,"data-testid":"constant-value-text-input"})),i.createElement(s.FormGroup,{label:"Value type",fieldId:"valueType"},i.createElement(s.FormSelect,{value:x,"aria-label":"Select value type",onChange:T,"data-testid":"constant-type-form-select"},p.map((function(e,t){return i.createElement(s.FormSelectOption,{key:t,value:e.value,label:e.label})}))))))},hn=function(e){var t=e.title,n=e.customClassName,r=void 0===n?"":n,o=e.customClassNames,l=e.collectionType,c=void 0===l?"":l,u=e.collectionTypeOptions,p=e.isOpen,d=e.onCancel,m=e.onConfirm,g=a.useState(r),f=g[0],v=g[1],E=a.useState(c),h=E[0],b=E[1],C=a.useCallback((function(){v(r),b(c)}),[r,c]),y=a.useCallback((function(){m({customClassName:f,collectionType:h}),C()}),[m,C,f,h]),S=a.useCallback((function(){d(),C()}),[d,C]);return a.useEffect(C,[C]),i.createElement(vn,{title:t,onCancel:S,onConfirm:f.length>0?y:void 0,isOpen:p},i.createElement(s.Form,null,i.createElement(s.FormGroup,{label:"Custom class name",fieldId:"custom-class-name",isRequired:!0},i.createElement(s.FormSelect,{value:f,"aria-label":"Select class name",autoFocus:!0,onChange:v,"data-testid":"custom-class-name-form-select"},p&&o&&o.map((function(e,t){return i.createElement(s.FormSelectOption,{key:t,value:e,label:e})})))),i.createElement(s.FormGroup,{label:"Collection type",fieldId:"valueType"},i.createElement(s.FormSelect,{value:h,"aria-label":"Select value type",onChange:b,"data-testid":"collection-type-form-select"},u.map((function(e,t){return i.createElement(s.FormSelectOption,{key:t,value:e.value,label:e.label})}))))))},bn=function(e){var t=e.id,n=e.name,r=void 0===n?"":n,o=e.isSource,l=e.isOpen,c=e.onCancel,u=e.onConfirm,p=a.useState(r),d=p[0],m=p[1],g=a.useCallback((function(){m(r)}),[r]),f=a.useCallback((function(){t&&void 0!==o&&u({id:t,name:d,isSource:o}),g()}),[d,t,o,u,g]),v=a.useCallback((function(){c(),g()}),[c,g]);return a.useEffect(g,[g]),i.createElement(vn,{title:"Change selected document name?",onCancel:v,onConfirm:f,isOpen:l},i.createElement(s.TextInput,{value:d,onChange:function(e){m(e)},id:t,name:d,"data-testid":t+"-parameter-text-input"}))},Cn=function(e){var t=e.isOpen,n=e.onCancel,r=e.onConfirm,o=a.useState("atlasmap-mapping"),l=o[0];return i.createElement(vn,{title:"Export Mappings and Documents.",onCancel:n,onConfirm:l.length>0?function(){return r(l)}:void 0,isOpen:t,dataTestid:"export-catalog-dialog"},i.createElement(s.Form,null,i.createElement(s.FormGroup,{label:"Please enter a name for your exported catalog file",fieldId:"filename",isRequired:!0},i.createElement(s.InputGroup,null,i.createElement(s.TextInput,{value:l,onChange:o[1],id:"filename",isRequired:!0,autoFocus:!0,"data-testid":"export-catalog-dialog-text-input"}),i.createElement(s.InputGroupText,null,".adm")))))},yn=function(e){var t=e.enumerationValue,n=e.sourceKey,r=e.isOpen,o=a.useState(t.selectedTargetEnumValue),l=o[0],c=o[1];return i.createElement(s.Form,null,i.createElement(s.FormGroup,{className:"LookupTableDialog-module_iGroup__HpFO3",fieldId:"lookup-table-row"},i.createElement(s.Label,{className:"LookupTableDialog-module_iSelectLabel__k9YCw"},t.sourceEnumValue),i.createElement(s.FormSelect,{className:"LookupTableDialog-module_iSelectBody__2sDE3",value:l,"aria-label":"enum-map",autoFocus:!0,onChange:function(e,n){c(e),t.selectedTargetEnumValue=e},"data-testid":"enum-map-select",key:l+"-"+n},r&&t.targetEnumValues&&t.targetEnumValues.map((function(e,t){return i.createElement(s.FormSelectOption,{key:"tgtenum-"+t,value:e,label:e})})))))},Sn=function(e){var t=e.title,n=e.alias,r=void 0===n?"":n,o=e.uri,l=void 0===o?"":o,c=e.locationUri,u=void 0===c?"":c,p=e.targetNamespace,d=void 0!==p&&p,m=e.isOpen,g=e.onCancel,f=e.onConfirm,v=a.useState(r),E=v[0],h=v[1],b=a.useState(l),C=b[0],y=b[1],S=a.useState(u),x=S[0],T=S[1],M=a.useState(d),F=M[0],D=M[1],I=a.useCallback((function(){h(r),y(l),T(u),D(d)}),[r,u,d,l]),k=a.useCallback((function(){f({alias:E,uri:C,locationUri:x,targetNamespace:F}),I()}),[E,x,f,I,F,C]),w=a.useCallback((function(){g(),I()}),[g,I]);return a.useEffect(I,[I]),i.createElement(vn,{title:t,onCancel:w,onConfirm:E.length>0?k:void 0,isOpen:m},i.createElement(s.Form,null,i.createElement(s.FormGroup,{label:"Alias",fieldId:"alias",isRequired:!0},i.createElement(s.TextInput,{value:E,onChange:h,id:"alias",autoFocus:!0,isRequired:!0})),i.createElement(s.FormGroup,{label:"URI",fieldId:"uri"},i.createElement(s.TextInput,{value:C,onChange:y,id:"uri"})),i.createElement(s.FormGroup,{label:"Location URI",fieldId:"locationUri"},i.createElement(s.TextInput,{value:x,onChange:T,id:"locationUri"})),i.createElement(s.FormGroup,{fieldId:"targetNamespace"},i.createElement(s.Checkbox,{isChecked:F,onChange:D,id:"targetNamespace",label:"Target namespace"}))))},xn=function(e){var t=e.title,n=e.name,r=void 0===n?"":n,o=e.valueType,l=void 0===o?"":o,c=e.valueTypeOptions,u=e.scope,p=void 0===u?"":u,d=e.scopeOptions,m=e.isOpen,g=e.onCancel,f=e.onConfirm,v=e.onValidation,E=a.useState(r),h=E[0],b=E[1],C=a.useState(l),y=C[0],S=C[1],x=a.useState(p),T=x[0],M=x[1],F=a.useState(!1),D=F[0],I=F[1],k=a.useState(s.ValidatedOptions.default),w=k[0],A=k[1],_=a.useState(!1),P=_[0],O=_[1],R=a.useCallback((function(){b(r),S(l),M(p),I(!1),A(s.ValidatedOptions.default),O(!1)}),[r,l,p]),N=a.useCallback((function(){f({name:h,valueType:y,scope:T}),R()}),[h,f,R,y,T]),L=a.useCallback((function(){g(),R()}),[g,R]);function V(e){z(e,T),b(e)}function U(e){z(h,e)&&M(e)}function z(e,t){if(!e||0===e.length)return A(s.ValidatedOptions.default),I(!1),!1;if(!/^[a-zA-Z0-9_@]+$/.test(e))return A(s.ValidatedOptions.error),!1;A(s.ValidatedOptions.success);var n=v(e,t);return O(n),I(e.length>0&&n),n}return a.useEffect(R,[R]),i.createElement(vn,{title:t,onCancel:L,onConfirm:D?N:void 0,isOpen:m},i.createElement(s.Form,null,i.createElement(s.FormGroup,{label:"Name",fieldId:"name",isRequired:!0},P?i.createElement(s.TextInput,{value:h,onChange:V,id:"name",autoFocus:!0,isRequired:!0,"data-testid":"property-name-text-input",validated:w}):i.createElement(s.Tooltip,{content:i.createElement("div",null,"A property with this name and scope already exists"),entryDelay:750,exitDelay:100},i.createElement(s.TextInput,{value:h,onChange:V,id:"name",autoFocus:!0,isRequired:!0,"data-testid":"property-name-text-input-tooltip",style:{color:"red"}}))),i.createElement(s.FormGroup,{label:"Value type",fieldId:"valueType"},i.createElement(s.FormSelect,{value:y,"aria-label":"Select value type",onChange:S,"data-testid":"property-type-form-select"},c.map((function(e,t){return i.createElement(s.FormSelectOption,{key:t,value:e.value,label:e.label})})))),i.createElement(s.FormGroup,{label:"Scope",fieldId:"scope"},P?i.createElement(s.FormSelect,{value:T,"aria-label":"Select property scope",onChange:U,"data-testid":"property-scope-form-select"},d.map((function(e,t){return i.createElement(s.FormSelectOption,{key:t,label:e.label,value:e.value})}))):i.createElement(s.Tooltip,{content:i.createElement("div",null,"A property with this name and scope already exists"),entryDelay:750,exitDelay:100},i.createElement(s.FormSelect,{value:T,"aria-label":"Select property scope",onChange:U,"data-testid":"property-scope-form-select",style:{color:"red"}},d.map((function(e,t){return i.createElement(s.FormSelectOption,{key:t,label:e.label,value:e.value})})))))))},Tn=function(e){var t=e.title,n=e.parameters,r=void 0===n?[]:n,o=e.isOpen,l=e.onCancel,c=e.onConfirm,p=a.useState([]),d=p[0],m=p[1],g=r.filter((function(e){return!d.map((function(e){return e.name})).includes(e.name)})),f=a.useCallback((function(){m(r.filter((function(e){return e.required||e.enabled})))}),[r]),v=a.useCallback((function(){c(d)}),[d,c]),E=a.useCallback((function(){l(),f()}),[l,f]),h=a.useCallback((function(){m(d.concat(y({},g[0])))}),[d,g]),b=a.useCallback((function(e){m(d.filter((function(t){return t!==e})))}),[d]),C=a.useCallback((function(e,t){var n=[].concat(d),a=y({},n[e],{value:t});n[e]=a,m(n)}),[d]),S=a.useCallback((function(e,t){if(0!==t){var n=[].concat(d),a=y({},g[t-1]);n[e]=a,m(n)}}),[d,g]),x={"--pf-c-form__label--FontSize":"large","--pf-c-form--m-horizontal--md__group--GridTemplateColumns":"140px 1fr",marginBottom:"1.0rem"},T={"--pf-c-form--m-horizontal__group-label--md--GridColumnWidth":"380px","--pf-c-form--m-horizontal__group-label--md--PaddingTop":"0rem"};return a.useEffect(f,[f]),i.createElement(vn,{title:t,onCancel:E,onConfirm:d.length>0?v:void 0,isOpen:o},i.createElement(s.Form,{isHorizontal:!0,style:{"--pf-c-form--m-horizontal--md__group--GridTemplateColumns":"340px 1fr","--pf-c-form--GridGap":"0.5rem"}},d.map((function(e,t){return i.createElement(s.FormGroup,{fieldId:t+"-parameter",key:t,style:e.required?x:T,label:e.required?i.createElement("span",null,e.label):i.createElement(s.FormSelect,{id:"selected-paramater",value:"0",label:e.label,style:{display:"flex",marginLeft:"auto"},onChange:function(e){return S(t,e)}},[e].concat(g).map((function(e,t){return i.createElement(s.FormSelectOption,{key:t,value:t,label:e.label})})))},i.createElement(s.InputGroup,null,e.boolean?i.createElement("span",{style:{paddingTop:5,display:"inline",marginLeft:"auto",float:"right"}},i.createElement(s.Switch,{id:e.name,name:e.name,isChecked:"true"===e.value,onChange:function(e){C(t,String(e))}})):e.options&&e.options.length>0?i.createElement(s.FormSelect,{value:e.value,onChange:function(e){return C(t,e)},id:e.name,name:e.name,"data-testid":e.name+"-parameter-form-select"},e.options.map((function(e,t){return i.createElement(s.FormSelectOption,{key:t,value:e.value,label:e.label})}))):i.createElement(s.TextInput,{value:e.value,onChange:function(e){return C(t,e)},id:e.name,name:e.name,"data-testid":e.name+"-parameter-text-input"}),!e.required&&i.createElement(s.Button,{variant:"plain","aria-label":"Action",onClick:function(t){return b(e)},style:{display:"inline",marginLeft:"0",float:"right"}},i.createElement(u.TrashIcon,null))))})),i.createElement("span",null,i.createElement(s.Button,{style:{display:"inline",float:"left",marginTop:"1.0rem",width:"40"},isDisabled:0===g.length,onClick:h,variant:"link",icon:i.createElement(u.PlusIcon,null)},"Add parameter"))))},Mn=function(e){var t=e.value,n=e.delay,i=void 0===n?1e3:n,r=e.children,o=a.useState(t),l=o[0],c=o[1];return a.useEffect((function(){var e=setTimeout((function(){return c(t)}),i);return function(){return clearTimeout(e)}}),[i,t]),r(l)},Fn=function(e){var t=e.children;return i.createElement("span",{className:"TruncatedString-module_fieldName__3A5S8","data-title":e.title||("string"==typeof t?t:void 0)},t)},Dn=a.forwardRef((function(e,t){var n=e.title,r=e.actions,o=e.footer,c=e.selected,p=void 0!==c&&c,d=e.dropTarget,m=void 0!==d&&d,g=e.dropAccepted,f=void 0!==g&&g,v=e.stacked,E=void 0===v||v,h=e.selectable,b=void 0!==h&&h,C=e.noPadding,y=void 0!==C&&C,S=e.noShadows,T=void 0!==S&&S,M=e.startExpanded,F=e.onSelect,D=e.onDeselect,I=e.children,k=x(e,["id","title","actions","footer","selected","dropTarget","dropAccepted","stacked","selectable","scrollIntoView","noPadding","noShadows","startExpanded","onSelect","onDeselect","children"]),w=it(M),A=w.state,_=w.toggle,P=a.useCallback((function(e){e.stopPropagation(),F&&F()}),[F]),O=a.useCallback((function(e){switch(e.key){case"Enter":case"Space":F&&F();break;case"Escape":D&&D()}}),[D,F]),R=p||m||f;return i.createElement("div",Object.assign({className:l.css(E&&"Document-module_stacked__1U8tH"),onClick:P,onKeyDown:O,ref:t},k),i.createElement(s.Card,{isCompact:!0,className:l.css("Document-module_card__RGn2a",T&&"Document-module_noShadows__1O9rB",f&&!m&&"Document-module_dropAccepted__2mBxm",m&&"Document-module_dropTarget__3JRG3"),isSelected:R,isSelectable:R||b,"aria-label":n},(n||r)&&i.createElement(s.CardHeader,{"data-codemods":"true",className:l.css("Document-module_head__2cUCh")},i.createElement(s.CardActions,{className:l.css("Document-module_actions__TDpqD")},null==r?void 0:r.filter((function(e){return e}))),n&&i.createElement(s.CardTitle,{className:l.css("Document-module_header__K5DRL")},i.createElement(s.Button,{variant:"plain",onClick:_,"aria-label":"Expand/collapse this card","data-testid":"expand-collapse-"+n+"-button",className:l.css("Document-module_headerButton__3FK4r")},i.createElement(s.Title,{size:"lg",headingLevel:"h2","aria-label":n},i.createElement(Fn,{title:n},i.createElement(A?u.AngleDownIcon:u.AngleRightIcon,null)," ",n))))),i.createElement(s.CardBody,{className:l.css(y?"Document-module_bodyNoPadding__1QmMP":"Document-module_bodyWithPadding__6CL6F",!A&&"Document-module_hidden__3sH12")},I),o))})),In=a.forwardRef((function(e,t){var n=e.name,a=e.type,r=e.scope,o=e.icon,c=e.statusIcons,u=e.actions,p=e.showType,d=void 0!==p&&p,m=e.isDragging,g=void 0!==m&&m,f=e.isFocused,v=void 0!==f&&f,E=e.isSelected,h=void 0!==E&&E,b=e.isDisabled,C=void 0!==b&&b,y=e.children,S=it(!1),x=S.state,T=S.toggleOff,M=S.toggleOn;return i.createElement("div",{ref:t,className:l.css("DocumentField-module_element__3UquT",g&&"DocumentField-module_isDragging__bRkvB",h&&"DocumentField-module_isSelected__228o4",C&&"DocumentField-module_isDisabled__X2vKl"),onMouseEnter:C?void 0:M,onMouseLeave:C?void 0:T},i.createElement("div",{className:"DocumentField-module_row__42UJ1"},o&&i.createElement("div",{className:"DocumentField-module_nameIcon__1WpQQ"},o),i.createElement(s.Tooltip,{key:""+n,position:"auto",enableFlip:!0,content:r?n+" <"+r+">":""+n,entryDelay:750,exitDelay:100},i.createElement("div",{className:"DocumentField-module_nameWrapper__29uxt","data-testid":"document-"+n+"-field"},i.createElement(Fn,null,n),i.createElement("span",null,d&&" ("+a+")"),i.createElement("span",{className:"DocumentField-module_statusIcons__1beBv"},c&&(null==c?void 0:c.filter((function(e){return e})))))),(x||v)&&u&&!C&&i.createElement("div",{className:"DocumentField-module_actions__Y02bP"},null==u?void 0:u.filter((function(e){return e})))),y)})),kn=function(e){var t=e.id,n=e.value,a=f.useDebouncedCallback(e.onChange,200);return i.createElement(s.Form,{className:"DocumentFieldPreview-module_form__MOqh2",onClick:function(e){return e.stopPropagation()}},i.createElement(s.FormGroup,{label:"Mapping preview",fieldId:t},i.createElement(s.TextInput,{id:t,type:"text",onChange:a,defaultValue:n||"","aria-label":"Type sample data here",placeholder:"Type sample data here","data-testid":"input-document-mapping-preview-"+t+"-field"})))},wn=function(e){var t=e.id,n=e.value;return i.createElement(s.Form,{className:"DocumentFieldPreviewResults-module_form__2yX2v"},i.createElement(s.FormGroup,{label:"Preview results",fieldId:t},i.createElement(s.TextInput,{id:t,type:"text",value:void 0===n?"":n,"aria-label":"Mapping results preview",placeholder:"Results will be displayed here",isDisabled:!0,"data-testid":"results-document-mapping-preview-"+t+"-field"})))},An=function(e){return i.createElement(s.CardFooter,{className:"DocumentFooter-module_footer__2iOjg"},e.children)},_n=a.forwardRef((function(e,t){var n=e.name,r=e.type,o=e.icon,l=e.iconTooltip,c=e.showType,p=void 0!==c&&c,d=e.expanded,m=a.useRef(null);return i.createElement("span",{className:"DocumentGroup-module_buttonContent__2XWy9",ref:function(e){m.current=e,t&&("function"==typeof t?t(e):t.current=e)},"data-testid":"field-group-"+n+"-expanded-"+d+"-field"},i.createElement("span",{className:"DocumentGroup-module_buttonIcon__-gWtf"},i.createElement(d?u.FolderOpenIcon:u.FolderCloseIcon,null)),n,p&&" ("+r+")",o&&i.createElement(s.Tooltip,{enableFlip:!0,content:l},i.createElement("span",{className:"DocumentGroup-module_icon__3vO1x"},o)))})),Pn=function(){return i.createElement(s.EmptyState,{variant:s.EmptyStateVariant.full},i.createElement(s.EmptyStateIcon,{variant:"container",component:s.Spinner}),i.createElement(s.Title,{headingLevel:"h2",size:"lg"},"Loading"))},On={"--pf-c-form-control--FontSize":"small","--pf-c-form--GridGap":"0",marginTop:"0.4rem"},Rn={"--pf-c-form-control--FontSize":"small",marginTop:"1.0rem"},Nn={"--pf-c-form-control--FontSize":"small",marginTop:"0rem"},Ln=function(e){var n=e.name,r=e.transformationsArguments,o=void 0===r?[]:r,c=e.disableTransformation,p=e.onTransformationArgumentChange,d=e.onRemoveTransformation,m="user-field-action-"+n;return i.createElement(i.Fragment,null,i.createElement(s.FormGroup,{fieldId:m+"-transformation"},i.createElement(s.InputGroup,{style:{background:"transparent"}},i.createElement(s.FormSelect,{value:n,id:m,isDisabled:c,onChange:e.onTransformationChange,"data-testid":m,style:On},e.transformationsOptions.map((function(e,t){return i.createElement(s.FormSelectOption,{label:e.name,value:e.value,key:t})}))),d&&i.createElement(s.Button,{variant:"plain",onClick:d,"data-testid":"close-transformation-"+n+"-button","aria-label":"Remove the transformation"},i.createElement(u.TrashIcon,null)))),o.map((function(e,n){var r=m+"-transformation-"+n;switch(e.type){case t.FieldType.BOOLEAN:return function(e,t){return i.createElement(s.Checkbox,{className:l.css("MappingTransformation-module_transArgs__1bfr5"),id:e,"data-testid":e+"-checkbox",key:e,label:t.label,"aria-label":t.label,isChecked:"true"===t.value,onChange:function(e){return p(t.name,e.toString())}})}(r,e);default:return i.createElement(s.FormGroup,{className:l.css("MappingTransformation-module_transArgs__1bfr5"),fieldId:r,label:e.label,key:n,style:Rn},e.options?function(e,t,n,r){var o,l,c,u=function(e){return"User defined"===(null==e?void 0:e.name)},p=null===(o=t.options)||void 0===o?void 0:o.find((function(e){return u(e)})),d=null===(l=t.options)||void 0===l?void 0:l.find((function(e){return e.value===t.value}));d||(t.value?d=p:t.options&&(d=t.options[1],t.value=t.options[1].value));var m="";u(d)&&(m=t.value);var g=a.useState(!1),f=g[0],v=g[1],E=a.useState(d),h=E[0],b=E[1],C=a.useState(m),y=C[0],S=C[1];return i.createElement(s.Split,null,i.createElement(s.SplitItem,null,i.createElement(s.Select,{variant:s.SelectVariant.single,"aria-label":t.label,onSelect:function(e,n,a){v(!1);var i=t.options.find((function(e){return e.value===n}));i&&(b(i),t.value=u(i)?y||"":n.toString(),r(t.name,t.value))},selections:null==h?void 0:h.value,onToggle:function(e){v(e)},isOpen:f,placeholderText:"[None]",id:e,isDisabled:n,"data-testid":t.name,style:On},null===(c=t.options)||void 0===c?void 0:c.map((function(e,t){return i.createElement(s.SelectOption,{value:e.value,key:t},e.name)})))),u(h)&&i.createElement(s.SplitItem,null,i.createElement(s.TextInput,{id:"userDefined",type:"text",name:"userDefined",value:y,onChange:function(e){S(e),t.value=e,r(t.name,e)},style:Nn,"data-testid":"userDefined",autoFocus:!0})))}(r,e,c,p):function(e,t){return i.createElement(s.TextInput,{id:e,type:"text",name:t.name,isDisabled:c,value:t.value,onChange:function(e){return p(t.name,e)},"data-testid":"insert-transformation-parameter-"+t.name+"-input-field",style:Nn})}(r,e))}})))},Vn={"--pf-c-form-control--FontSize":"small"},Un=function(e){var t=e.field,n=e.name,r=e.info,o=e.index,c=e.canShowIndex,p=e.mappingExpressionEnabled,d=e.hasTransformations,m=e.onDelete,g=e.onIndexChange,f=e.onNewTransformation,v=e.children,E="mapping-field-"+n;return i.createElement(qt,{key:t?t.id:n,target:{id:t.id,name:t.name,type:"mapping",payload:t},canDrop:function(){return!0},accept:["mapping"]},(function(e){var h=e.isTarget;return i.createElement(jt,{field:{type:"mapping",id:t.id,name:t.name,payload:t},onDrop:function(e,t){g&&g(t.payload)}},(function(e){return i.createElement(bt,{id:[t.id,e.isDragging?"dnd-start":void 0,h?"dnd-target-field":void 0]},i.createElement("div",{className:"MappingField-module_field__U8VrI","aria-labelledby":E,"data-testid":E},i.createElement(s.Split,null,i.createElement(s.SplitItem,{isFilled:!0},i.createElement(s.Title,{headingLevel:"h6",size:"md",id:E,className:"MappingField-module_title__2hRMD"},c&&i.createElement(s.Tooltip,{position:"auto",enableFlip:!0,entryDelay:750,exitDelay:100,content:i.createElement("div",null,"Edit the index for this element by selecting the arrows or by dragging and dropping the element to the desired position. Placeholders may be automatically inserted to account for any gaps in the indexing.")},i.createElement(s.InputGroup,{className:"MappingField-module_fieldIndex__3Xgxl"},i.createElement(s.InputGroupText,null,"#"),i.createElement(s.TextInput,{type:"number",value:o,id:"index",onChange:g,"data-testid":"change-"+n+"-input-index",isDisabled:!g,style:Vn}))),i.createElement(s.Tooltip,{position:"auto",enableFlip:!0,entryDelay:750,exitDelay:100,content:i.createElement("div",null,r)},i.createElement("div",{className:"MappingField-module_fieldName__17AfY"},n," ",i.createElement(u.InfoAltIcon,null))))),!p&&f&&i.createElement(s.SplitItem,null,i.createElement(s.Tooltip,{position:"auto",enableFlip:!0,entryDelay:750,exitDelay:100,content:"Add a new transformation."},i.createElement(s.Button,{variant:"plain",onClick:f,className:"MappingField-module_link__3EapV","data-testid":"add-transformation-to-"+n+"-field-button"},i.createElement(u.BoltIcon,null)))),i.createElement(s.SplitItem,null,i.createElement(s.Tooltip,{position:"auto",enableFlip:!0,entryDelay:750,exitDelay:100,content:"Delete this field from the mapping."},i.createElement(s.Button,{variant:"plain",onClick:m,className:"MappingField-module_link__3EapV","data-testid":"remove-"+n+"-from-mapping-button"},i.createElement(u.TrashIcon,null))))),!p&&d&&v&&a.Children.count(v)>0&&i.createElement("div",{className:l.css("MappingField-module_transformationsWrapper__14gGs")},i.createElement(s.Title,{headingLevel:"h6",size:"md"},"Transformations"),i.createElement("div",{className:"MappingField-module_transformations__iIDte"},v))))}))}))},zn=function(e){var t=e.title,n=e.isSource,a=e.onCreateConstant,r=e.onCreateProperty,o=e.canAddToSelectedMapping,l=e.children,c=it(!0),p=c.state;return i.createElement("div",{className:"MappingFields-module_wrapper__1N9IY"},i.createElement(s.Button,{key:"expandable",variant:"plain","aria-label":"Ok",onClick:c.toggle,"data-testid":"mapping-fields-detail-"+t+"-toggle",style:{display:"inline",marginLeft:"auto"}},i.createElement(p?u.CaretDownIcon:u.CaretRightIcon,null)),t,i.createElement(s.Tooltip,{position:"top",enableFlip:!0,content:i.createElement("div",null,"Create and map a property."),key:"create-property",entryDelay:750,exitDelay:100},i.createElement(s.Button,{key:"create-prop",variant:"plain","aria-label":"Add Property",isDisabled:!o(n),onClick:function(){return r(n,null)},"data-testid":"mapping-details-add-property-button-test",style:{display:"inline",marginLeft:"auto",float:"right"}},i.createElement(u.AddCircleOIcon,null))),n&&i.createElement(s.Tooltip,{position:"top",enableFlip:!0,content:i.createElement("div",null,"Create and map a source constant."),key:"create-constant",entryDelay:750,exitDelay:100},i.createElement(s.Button,{key:"create-const",variant:"plain","aria-label":"Add Constant",isDisabled:!o(n),onClick:a,"data-testid":"mapping-details-add-constant-button-test",style:{display:"inline",marginLeft:"auto",float:"right"}},i.createElement(u.PlusIcon,null))),p&&l)},Bn=function(e){var t=e.variant,n=e.title,r=e.children,o=e.onTimeout,l=e.onClose,c=a.useState(8e3),u=c[0],p=c[1],d=it(!1),m=d.state,g=d.toggleOn,f=d.toggleOff;return a.useEffect((function(){var e=void 0;return u<=0?o():m||e?p(8e3):e=setInterval((function(){p((function(e){return e-100}))}),100),function(){return e&&clearTimeout(e)}}),[u,m,o]),i.createElement(s.Alert,{isLiveRegion:!0,variant:t,title:n,actionClose:i.createElement(s.AlertActionCloseButton,{title:n,variantLabel:t+" alert",onClose:l}),onMouseEnter:g,onMouseLeave:f},r)},Gn=a.createContext(null),jn=function(e){var t=e.children,n=a.useState(null);return i.createElement(Gn.Provider,{value:{focusedItem:n[0],setFocusedItem:n[1]}},t)},qn=function(e){var t=e.ref,n=e.isExpandable,i=void 0!==n&&n,r=e.isExpanded,o=void 0!==r&&r,l=e.collapseTreeitem,c=e.expandTreeitem,s=a.useContext(Gn);if(!s)throw new Error("useTreeFocus can be used only inside a Tree component");var u=s.focusedItem,p=s.setFocusedItem,d=function(e){var t;return Array.from((null===(t=e.closest("[role=tree]"))||void 0===t?void 0:t.querySelectorAll("[role=treeitem]"))||[]).filter((function(e){var t,n=null===(t=e.parentElement)||void 0===t?void 0:t.closest("[aria-expanded]");return!n||"true"===n.getAttribute("aria-expanded")}))},m=function(e,t){t.forEach((function(e){return e.setAttribute("tabindex","-1")})),t[e].setAttribute("tabindex","0"),t[e].focus()},g=function(){if(t.current){var e=d(t.current),n=null==e?void 0:e.indexOf(t.current);n<e.length-1&&m(n+1,e)}};return{focused:u&&u===t.current,handlers:{onKeyDown:function(e){if(e.target===t.current&&!(e.altKey||e.ctrlKey||e.metaKey))switch(e.key){case" ":case"Enter":e.target===t.current&&(e.target.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0})),p(t.current));break;case"Escape":p(null),e.preventDefault();break;case"ArrowUp":!function(){if(t.current){var e=d(t.current),n=null==e?void 0:e.indexOf(t.current);n>0&&m(n-1,e)}}();break;case"ArrowDown":g();break;case"ArrowRight":i&&(o?g():c&&c());break;case"ArrowLeft":i&&o&&l&&l();break;case"Home":!function(){if(t.current){var e=d(t.current);m(0,e)}}();break;case"End":!function(){if(t.current){var e=d(t.current);m(e.length-1,e)}}()}},onClick:function(e){if(t.current)if(i&&o)e.stopPropagation();else{var n=d(t.current),a=null==n?void 0:n.indexOf(t.current);m(a,n),p(t.current)}},onBlur:function(e){var n,a;(null===(n=e.relatedTarget)||void 0===n?void 0:n.closest("[role=tree]"))!==(null===(a=t.current)||void 0===a?void 0:a.closest("[role=tree]"))&&p(null)}}}},Hn=function(e){var t=e.children,n=a.useRef(null);return a.useLayoutEffect((function(){if(n.current&&!n.current.querySelector('[role=treeitem][tabindex="0"]')){var e=n.current.querySelector("[role=treeitem]");e&&e.setAttribute("tabindex","0")}})),i.createElement(jn,null,i.createElement("div",{ref:n},i.createElement(s.Accordion,{asDefinitionList:!1,className:"Tree-module_accordion__3FmHH",role:"tree"},t)))},Wn=a.forwardRef((function(e,t){var n=e.id,r=e.expanded,o=e.level,c=e.setSize,u=e.position,p=e.renderLabel,d=e.children,m=a.useRef(null),g=a.useState(!1),f=g[0],v=g[1],E=a.useCallback((function(){v(!f)}),[f]),h=a.useCallback((function(e){e.stopPropagation(),E()}),[E]),b=a.useCallback((function(){return v(!0)}),[]),C=a.useCallback((function(){return v(!1)}),[]);a.useEffect((function(){void 0!==r&&v(r)}),[r]);var y=qn({ref:m,isExpandable:!0,isExpanded:f,collapseTreeitem:C,expandTreeitem:b}),S=y.focused,x=y.handlers;return i.createElement("div",Object.assign({ref:function(e){m.current=e,t&&("function"==typeof t?t(e):t.current=e)},role:"treeitem","aria-level":o,"aria-setsize":c,"aria-posinset":u,"aria-expanded":f},x,{onClick:function(e){x.onClick(e),e.isPropagationStopped()||E()}}),i.createElement(s.AccordionItem,null,i.createElement(s.AccordionToggle,{isExpanded:f,id:n+"-toggle","data-testid":n+"-toggle",className:"TreeGroup-module_button__J0cG0",tabIndex:-1,component:function(e){return i.createElement("span",{role:"heading","aria-level":o+2},e.children)},onClick:h},p({expanded:f,focused:S||!1})),i.createElement(s.AccordionContent,{isHidden:!f,className:l.css("TreeGroup-module_content__36sz6",!f&&"TreeGroup-module_hiddenContent__35KLm"),role:"group"},d({expanded:f,focused:S||!1}))))})),Jn=a.forwardRef((function(e,t){var n=e.level,r=e.setSize,o=e.position,l=e.children,c=x(e,["level","setSize","position","children"]),s=a.useRef(null),u=qn({ref:s}),p=u.focused;return i.createElement("div",Object.assign({ref:function(e){s.current=e,t&&("function"==typeof t?t(e):t.current=e)},role:"treeitem","aria-level":n,"aria-setsize":r,"aria-posinset":o},u.handlers,c),l({focused:p||!1}))})),Xn=function(e){var t=e.children;return i.createElement(s.Toolbar,{id:"data-toolbar",className:l.css("Toolbar-module_toolbar__3-hXm"),role:"complementary"},i.createElement(s.ToolbarContent,{className:l.css("Toolbar-module_toolbarContent__18Jxq")},t))},Yn=function(e){var t=e.children;return i.createElement(s.Toolbar,{className:l.css("Toolbar-module_toolbar__3-hXm")},i.createElement(s.ToolbarContent,{className:l.css("Toolbar-module_toolbarContent__18Jxq")},t))},Kn=function(e){return i.createElement("div",{className:"MainContent-module_wrapper__1yI76",role:"main"},e.children)},Qn=function(e){var t=e.show;return i.createElement(E.TopologySideBar,{show:t,className:"Sidebar-module_sidebar___WsR3"},t&&(0,e.children)())},Zn=a.memo((function(e){var t=e.loading,n=e.showSidebar,a=e.contextToolbar,r=e.expressionToolbar,o=e.controlBar,l=e.children,c=i.createElement(Qn,{show:n},e.renderSidebar),u="pf-topology-container"+(c?" pf-topology-container__with-sidebar":"")+(n?" pf-topology-container__with-sidebar--open":"");return t?i.createElement(Pn,null):i.createElement(s.Stack,{className:"MainLayout-module_view__1QIGw"},a&&i.createElement(s.StackItem,{isFilled:!1},a),r&&i.createElement(s.StackItem,{isFilled:!1},r),i.createElement(s.StackItem,{isFilled:!0,className:u},i.createElement("div",{className:"pf-topology-content"},l,o&&i.createElement("span",{className:"pf-topology-control-bar"},o)),c))})),$n=function(e){var t=e.onDelete,n=e.onEditEnum,a=e.isEnumMapping,r=e.children;return i.createElement(s.Stack,{"data-testid":"column-mapping-details-area"},i.createElement(s.StackItem,null,i.createElement(Dt,{title:"Mapping Details",variant:"plain",actions:[i.createElement(s.Button,{onClick:e.onClose,variant:"plain","aria-label":"Close the mapping details panel","data-testid":"close-mapping-detail-button",key:"close"},i.createElement(u.CloseIcon,null)),i.createElement(s.Tooltip,{key:"edit-enum",position:"auto",enableFlip:!0,content:i.createElement("div",null,"Edit the enumeration mappings"),entryDelay:750,exitDelay:100},i.createElement(s.Button,{variant:"plain",onClick:n,"aria-label":"Edit the enumeration mappings","data-testid":"edit-enum-mapping-button",isDisabled:!a()},i.createElement(u.EditIcon,null))),i.createElement(s.Tooltip,{key:"remove",position:"auto",enableFlip:!0,content:i.createElement("div",null,"Remove the current mapping"),entryDelay:750,exitDelay:100},i.createElement(s.Button,{variant:"plain",onClick:t,"aria-label":"Remove the current mapping","data-testid":"remove-current-mapping-button"},i.createElement(u.TrashIcon,null)))]})),i.createElement(s.StackItem,{isFilled:!0,className:"MappingDetailsSidebar-module_content__qShUk"},r))},ea=function(e){var t=e.id,n=e.onClick;return i.createElement(s.Tooltip,{position:"auto",enableFlip:!0,content:i.createElement("div",null,"Capture Document ID to clipboard")},i.createElement(s.Button,{variant:"plain",onClick:n,"aria-label":"Capture Document ID to clipboard","data-testid":"capture-"+t+"-name-button"},i.createElement(u.ClipboardIcon,null)))},ta=function(e){var t=e.id,n=e.onClick;return i.createElement(s.Tooltip,{position:"auto",enableFlip:!0,content:i.createElement("div",null,"Change document name")},i.createElement(s.Button,{variant:"plain",onClick:n,"aria-label":"Change document name","data-testid":"change-"+t+"-name-button"},i.createElement(u.EditIcon,null)))},na=function(e){var t=e.id,n=e.onClick;return i.createElement(s.Tooltip,{position:"auto",enableFlip:!0,content:i.createElement("div",null,"Remove instance or schema file")},i.createElement(s.Button,{variant:"plain",onClick:n,"aria-label":"Remove instance or schema file","data-testid":"remove-"+t+"-instance-or-schema-file-button"},i.createElement(u.TrashIcon,null)))},aa=function(e){var t=e.id,n=e.onClick;return i.createElement(s.Tooltip,{position:"auto",enableFlip:!0,content:i.createElement("div",null,"Modify CSV Parameters")},i.createElement(s.Button,{variant:"plain",onClick:n,"aria-label":"Modify CSV parameters","data-testid":"modify-csv-params-"+t+"-button"},i.createElement(u.EditIcon,null)))},ia=function(e){var t=e.onCustomClassSearch,n=x(e,["onCustomClassSearch"]);return i.createElement(s.Tooltip,{position:"auto",enableFlip:!0,content:i.createElement("div",null,"Load a Java document based on classes from your previously imported Java archive.")},i.createElement(s.Button,Object.assign({variant:"plain",onClick:function(){t()},"aria-label":"Load a Java document based on classes from your previously imported Java archive."},n),i.createElement(u.AddCircleOIcon,null)))},ra=function(e){var t=e.id,n=e.onImport,r=h.useFilePicker({maxFileSize:1}),o=r.files,l=r.onClick,c=r.HiddenFileInput,p=a.useRef(null);return a.useEffect((function(){p.current!==o&&(p.current=o,1===(null==o?void 0:o.length)&&n(o[0]))}),[o,n]),i.createElement(s.Tooltip,{position:"auto",enableFlip:!0,content:i.createElement("div",null,"Import instance or schema file")},i.createElement(s.Button,{variant:"plain","aria-label":"Import instance or schema file","data-testid":"import-instance-or-schema-file-"+t+"-button",onClick:l},i.createElement(u.ImportIcon,null),i.createElement(c,{accept:".json, .xml, .xsd, .csv"})))},oa=function(e){var t=e.fieldId,n=e.group,a=e.showTypes,r=e.boundaryId,o=e.overrideWidth,l=e.parentId,c=e.level,s=void 0===c?1:c,p=e.position,d=void 0===p?1:p,m=e.setSize,g=void 0===m?1:m,f=e.children;return i.createElement(qt,{key:t,target:{id:n.id,name:n.name,type:e.draggableType},canDrop:function(){return!1},accept:[e.acceptDropType]},(function(e){return i.createElement(Mn,{value:e.isOver},(function(e){return i.createElement(bt,{id:t,parentId:l,boundaryId:r,overrideWidth:o},i.createElement(Wn,{id:t,level:s,position:d,setSize:g,expanded:!0===e||void 0,renderLabel:function(t){var r=t.expanded;return i.createElement(_n,{name:n.name,type:n.type,showType:a,icon:n.isCollection?i.createElement(u.LayerGroupIcon,null):void 0,iconTooltip:n.isCollection?"This object is a collection":void 0,expanded:e||r})}},f))}))}))},la=function(e){var t=e.fieldId,n=e.field,a=e.showTypes,r=e.boundaryId,o=e.overrideWidth,l=e.parentId,c=e.acceptDropType,p=e.draggableType,d=e.level,m=void 0===d?1:d,g=e.position,f=void 0===g?1:g,v=e.setSize,E=void 0===v?1:v,h=e.canDrop,b=e.onDrop,C=e.renderActions,y=void 0===C?function(){return[]}:C,S=e.renderPreview,x=S&&S(n);return i.createElement(qt,{key:t,target:{id:n.id,name:n.name,type:p,payload:n},canDrop:function(e){return h(n,e)},accept:[c]},(function(e){var c=e.isDroppable,d=e.isTarget;return i.createElement(jt,{field:{type:p,id:n.id,name:n.name,payload:n},onDrop:function(e,t){return b(n,t)}},(function(e){var p=e.isDragging;return i.createElement(bt,{id:[t,p?"dnd-start":void 0,d?"dnd-target-field":void 0],parentId:l,boundaryId:r,overrideWidth:o},i.createElement(Jn,{level:m,position:f,setSize:E},(function(e){var t=e.focused;return i.createElement(i.Fragment,null,i.createElement(In,{name:n.name,icon:c||d?i.createElement(s.Button,{variant:d?"link":"plain",tabIndex:-1,"aria-label":"Drop target",isDisabled:!c,"data-testid":"is-droppable-"+n.name+"-button"},i.createElement(u.BullseyeIcon,{size:"sm"})):i.createElement(s.Button,{variant:"plain",tabIndex:-1,"aria-hidden":!0,"data-testid":"grip-"+n.name+"-button"},i.createElement(u.GripVerticalIcon,null)),type:n.enumeration?"ENUM":n.type,scope:n.scope,showType:a,isDragging:p,isFocused:t,isSelected:!!x,isDisabled:n.isDisabled,statusIcons:[n.isConnected?i.createElement(s.Tooltip,{key:"connected",position:"auto",enableFlip:!0,entryDelay:750,exitDelay:100,content:i.createElement("div",null,"This field is connected")},i.createElement(u.CircleIcon,{label:"This field is connected",size:"sm",tabIndex:-1})):null,n.isCollection?i.createElement(s.Tooltip,{key:"collection",position:"auto",enableFlip:!0,entryDelay:750,exitDelay:100,content:i.createElement("div",null,"This field is a collection")},i.createElement(u.LayerGroupIcon,{label:"This field is a collection",size:"sm",tabIndex:-1})):null,n.hasTransformations?i.createElement(s.Tooltip,{key:"transformations",position:"auto",enableFlip:!0,entryDelay:750,exitDelay:100,content:i.createElement("div",null,"This field has transformations")},i.createElement(u.BoltIcon,{label:"This field has transformations",size:"sm",tabIndex:-1})):null,n.isAttribute?i.createElement(s.Tooltip,{key:"attribute",position:"auto",enableFlip:!0,entryDelay:750,exitDelay:100,content:i.createElement("div",null,"This field is an attribute")},i.createElement(u.AtIcon,{label:"This field is an attribute",size:"sm",tabIndex:-1})):null],actions:y(n)},x))})))}))}))};function ca(e,t){return e.reduce((function(e,n){return[].concat(e,[""+t+n.id],n.fields?ca(n.fields,t):[])}),[])}var sa=function(e){var t=e.fields,n=e.idPrefix,a=e.isVisible,r=void 0===a||a,o=x(e,["fields","idPrefix","isVisible"]);return r?i.createElement(i.Fragment,null,t.map((function(e,a){return i.createElement(ua,Object.assign({key:a,field:e,idPrefix:n,setSize:t.length,position:a+1,isVisible:r},o))}))):i.createElement(bt,{id:ca(t,n),boundaryId:o.boundaryId,parentId:o.parentId},i.createElement("div",null," "))},ua=function(e){var t=e.field,n=e.idPrefix,a=e.level,r=void 0===a?1:a,o=x(e,["field","idPrefix","level"]),l=""+n+t.id,c=t,s=t;return c.fields?i.createElement(oa,Object.assign({fieldId:l,group:c,level:r},o),(function(e){return i.createElement(sa,Object.assign({},o,{fields:c.fields,parentId:l,level:r+1,idPrefix:n,isVisible:e.expanded}))})):i.createElement(la,Object.assign({fieldId:l,field:s,level:r},o))};function pa(e){var t=e.connectedMappings,n=e.onShowMappingDetails,a=e.canAddFieldToSelectedMapping,r=e.onAddToSelectedMapping,o=e.canRemoveFromSelectedMapping,l=e.onRemoveFromSelectedMapping,c=e.canStartMapping,p=e.onStartMapping;return[i.createElement(s.Tooltip,{key:"select-mapping",position:"top",enableFlip:!0,content:i.createElement("div",null,"Show mapping details")},t.length>1?i.createElement(Jt,{toggle:function(e){return i.createElement(s.DropdownToggle,{toggleIndicator:null,"aria-label":"Show mapping details",onToggle:e.toggleOpen},i.createElement(u.ExchangeAltIcon,null))},isPlain:!0,position:"right",dropdownItems:t.map((function(e){return i.createElement(s.DropdownItem,{key:e.id,onClick:function(){return n(e)}},i.createElement(s.Title,{headingLevel:"h2",size:"lg"},e.name),i.createElement(s.Split,{hasGutter:!0},i.createElement(s.SplitItem,null,i.createElement(s.Title,{headingLevel:"h2",size:"md"},"Sources"),e.sourceFields.map((function(e){return i.createElement("div",{key:e.id},e.name)}))),i.createElement(s.SplitItem,null,i.createElement(s.Title,{headingLevel:"h2",size:"md"},"Targets"),e.targetFields.map((function(e){return i.createElement("div",{key:e.id},e.name)})))))})),disabled:0===t.length}):i.createElement(s.Button,{variant:"plain",onClick:function(){return n(t[0])},"aria-label":"Show mapping details",tabIndex:0,isDisabled:0===t.length,"data-testid":"show-mapping-details-button"},i.createElement(u.ExchangeAltIcon,null))),o?i.createElement(s.Tooltip,{key:"quick-remove",position:"top",enableFlip:!0,content:i.createElement("div",null,"Disconnect from the selected mapping")},i.createElement(s.Button,{variant:"plain",onClick:l,"aria-label":"Disconnect from the selected mapping","data-testid":"disconnect-from-the-selected-mapping-button",tabIndex:0},i.createElement(u.UnlinkIcon,null))):i.createElement(s.Tooltip,{key:"quick-add",position:"top",enableFlip:!0,content:i.createElement("div",null,"Connect to the selected mapping")},i.createElement(s.Button,{variant:"plain",onClick:r,"aria-label":"Connect to the selected mapping",tabIndex:0,isDisabled:!a,"data-testid":"connect-to-the-selected-mapping-button"},i.createElement(u.LinkIcon,null))),i.createElement(s.Tooltip,{key:"add",position:"top",enableFlip:!0,content:i.createElement("div",null,"Create new mapping")},i.createElement(s.Button,{variant:"plain",onClick:p,"aria-label":"Create new mapping",tabIndex:0,isDisabled:!c,"data-testid":"create-new-mapping-button"},i.createElement(u.ProjectDiagramIcon,null)))]}var da=function(e){var t=e.onShowMappingDetails,n=e.canAddFieldToSelectedMapping,a=e.onAddToSelectedMapping,r=e.canRemoveFromSelectedMapping,o=e.onRemoveFromSelectedMapping,l=e.onEditConstant,c=e.onDeleteConstant,p=e.canStartMapping,d=e.onStartMapping;return i.createElement(Hn,null,i.createElement(sa,{fields:e.fields,showTypes:!1,parentId:"sources-constants",boundaryId:"sources-height",overrideWidth:"sources-width",idPrefix:"sources-field-",acceptDropType:"target",draggableType:"source",onDrop:e.onDrop,canDrop:e.canDrop,renderActions:function(e){return[].concat(pa({connectedMappings:e.mappings,onShowMappingDetails:t,canAddFieldToSelectedMapping:n(e),onAddToSelectedMapping:function(){return a(e)},canRemoveFromSelectedMapping:r(e),onRemoveFromSelectedMapping:function(){return o(e)},canStartMapping:p(e),onStartMapping:function(){return d(e)}}),[i.createElement(s.Tooltip,{key:"edit",position:"top",enableFlip:!0,content:i.createElement("div",null,"Edit constant"),entryDelay:750,exitDelay:100},i.createElement(s.Button,{variant:"plain",onClick:function(){return l(e.name,e.value)},"aria-label":"Edit constant",tabIndex:0,"data-testid":"edit-constant-"+e.name+"-button"},i.createElement(u.EditIcon,null))),i.createElement(s.Tooltip,{key:"delete",position:"top",enableFlip:!0,content:i.createElement("div",null,"Remove constant"),entryDelay:750,exitDelay:100},i.createElement(s.Button,{variant:"plain",onClick:function(){return c(e.name)},"aria-label":"Remove constant",tabIndex:0,"data-testid":"remove-constant-"+e.name+"-button"},i.createElement(u.TrashIcon,null)))])},renderPreview:e.renderPreview}))},ma=function(e){var t=e.isSource,n=e.onShowMappingDetails,a=e.canAddFieldToSelectedMapping,r=e.onAddToSelectedMapping,o=e.canRemoveFromSelectedMapping,l=e.onRemoveFromSelectedMapping,c=e.onEditProperty,p=e.onDeleteProperty,d=e.canStartMapping,m=e.onStartMapping;return i.createElement(Hn,null,i.createElement(sa,{fields:e.fields,showTypes:e.showTypes,parentId:t?"sources-properties":"targets-properties",boundaryId:t?"sources-height":"targets-height",overrideWidth:t?"sources-width":"targets-width",idPrefix:t?"sources-field-":"targets-field-",acceptDropType:e.acceptDropType,draggableType:e.draggableType,onDrop:e.onDrop,canDrop:e.canDrop,renderActions:function(e){return[].concat(pa({connectedMappings:e.mappings,onShowMappingDetails:n,canAddFieldToSelectedMapping:a(e),onAddToSelectedMapping:function(){return r(e)},canRemoveFromSelectedMapping:o(e),onRemoveFromSelectedMapping:function(){return l(e)},canStartMapping:d(e),onStartMapping:function(){return m(e)}}),[i.createElement(s.Tooltip,{key:"edit",position:"top",enableFlip:!0,content:i.createElement("div",null,"Edit property"),entryDelay:750,exitDelay:100},i.createElement(s.Button,{variant:"plain",onClick:function(){return c(e.name,e.scope,t)},"aria-label":"Edit property",tabIndex:0,"data-testid":"edit-property-"+e.name+"-button"},i.createElement(u.EditIcon,null))),i.createElement(s.Tooltip,{key:"delete",position:"top",enableFlip:!0,content:i.createElement("div",null,"Remove property"),entryDelay:750,exitDelay:100},i.createElement(s.Button,{variant:"plain",onClick:function(){return p(e.name,e.scope,t)},"aria-label":"Remove property",tabIndex:0,"data-testid":"remove-property-"+e.name+"-button"},i.createElement(u.TrashIcon,null)))])},renderPreview:e.renderPreview}))},ga=function(e){var n=e.acceptDropType,r=e.draggableType,o=e.isSource,l=e.onCreateConstant,c=e.onEditConstant,p=e.onDeleteConstant,d=e.onCreateProperty,m=e.onCustomClassSearch,g=e.onEditProperty,f=e.onDeleteProperty,v=e.onImportDocument,E=e.onDeleteDocument,h=e.onCaptureDocumentID,b=e.onChangeDocumentName,C=e.onEditCSVParams,y=e.onSearch,S=e.canDrop,x=e.onDrop,T=e.onShowMappingDetails,M=e.canAddFieldToSelectedMapping,F=e.onAddToSelectedMapping,D=e.canRemoveFromSelectedMapping,I=e.onRemoveFromSelectedMapping,k=e.canStartMapping,w=e.onStartMapping,A=e.shouldShowMappingPreviewForField,_=e.onFieldPreviewChange,P=e.sourceProperties,O=e.constants,R=e.sources,N=e.showTypes,L=a.useCallback((function(e){return A(e)&&i.createElement(kn,{id:e.id,value:e.value,onChange:function(t){return _(e,t)}})}),[_,A]);return i.createElement(i.Fragment,null,i.createElement(wt,{title:"Source",onSearch:y,actions:[v&&i.createElement(ra,{id:"Source",onImport:v,key:"import"}),m&&i.createElement(ia,{onCustomClassSearch:function(){return m(!0)},"data-testid":"enable-specific-java-classes-Source-button",key:"java"})]}),i.createElement(bt,{id:"sources-height"},i.createElement(Mt,null,i.createElement(bt,{id:"sources-width"},i.createElement("div",null,i.createElement(bt,{id:"sources-properties",boundaryId:"sources-height",overrideWidth:"sources-width"},i.createElement(Dn,{title:"Properties",startExpanded:!!P,actions:[i.createElement(s.Tooltip,{position:"top",enableFlip:!0,content:i.createElement("div",null,"Create a source property for use in mapping"),key:"create-property",entryDelay:750,exitDelay:100},i.createElement(s.Button,{onClick:function(){return d(o)},variant:"plain","aria-label":"Create a source property for use in mapping","data-testid":"create-source-property-button"},i.createElement(u.PlusIcon,null)))],noPadding:!!P},P?i.createElement(ma,{acceptDropType:n,draggableType:r,isSource:o,onEditProperty:g,onDeleteProperty:f,canDrop:S,onDrop:x,onShowMappingDetails:T,canAddFieldToSelectedMapping:M,onAddToSelectedMapping:F,canRemoveFromSelectedMapping:D,onRemoveFromSelectedMapping:I,canStartMapping:k,onStartMapping:w,fields:P.fields,showTypes:N,renderPreview:L}):"No source properties")),i.createElement(bt,{id:"sources-constants",boundaryId:"sources-height",overrideWidth:"sources-width"},i.createElement(Dn,{title:"Constants",startExpanded:!!O,actions:[i.createElement(s.Tooltip,{position:"top",enableFlip:!0,content:i.createElement("div",null,"Create a constant for use in mapping"),key:"create-constant",entryDelay:750,exitDelay:100},i.createElement(s.Button,{onClick:l,variant:"plain","aria-label":"Create a constant for use in mapping","data-testid":"create-constant-button"},i.createElement(u.PlusIcon,null)))],noPadding:!!O},O?i.createElement(da,{onEditConstant:c,onDeleteConstant:p,canDrop:S,onDrop:x,onShowMappingDetails:T,canAddFieldToSelectedMapping:M,onAddToSelectedMapping:F,canRemoveFromSelectedMapping:D,onRemoveFromSelectedMapping:I,canStartMapping:k,onStartMapping:w,fields:O.fields,renderPreview:L}):i.createElement("p",null,"No constants"))),R.map((function(e){var a="sources-document-"+e.id;return i.createElement(bt,{key:e.id,id:a,boundaryId:"sources-height",overrideWidth:"sources-width"},i.createElement(Dn,{title:e.name,startExpanded:!0,footer:N?i.createElement(An,null,"Source document type: ",e.type):void 0,actions:e.type===t.DocumentType.CSV?[h&&i.createElement(ea,{id:a,onClick:function(){return h(e.id)},key:"capture-document-id"}),C&&i.createElement(aa,{id:a,onClick:function(){return C(e.id,!0)},key:"on-edit-csv-params"}),E&&i.createElement(na,{id:a,onClick:function(){return E(e.id)},key:"delete-document"})]:[h&&i.createElement(ea,{id:a,onClick:function(){return h(e.id)},key:"capture-document-id"}),b&&i.createElement(ta,{id:a,onClick:function(){return b(e.id,e.name)},key:"change-document-name"}),E&&i.createElement(na,{id:a,onClick:function(){return E(e.id)},key:"delete-document"})],noPadding:!0},i.createElement(Hn,null,i.createElement(sa,{fields:e.fields,showTypes:N,boundaryId:"sources-height",overrideWidth:"sources-width",parentId:a,idPrefix:"sources-field-",acceptDropType:n,draggableType:r,onDrop:x,canDrop:S,renderActions:function(e){return pa({connectedMappings:e.mappings,onShowMappingDetails:T,canAddFieldToSelectedMapping:M(e),onAddToSelectedMapping:function(){return F(e)},canRemoveFromSelectedMapping:D(e),onRemoveFromSelectedMapping:function(){return I(e)},canStartMapping:k(e),onStartMapping:function(){return w(e)}})},renderPreview:L}))))})))))))},fa=function(e){var n=e.acceptDropType,r=e.draggableType,o=e.isSource,l=e.onSearch,c=e.onImportDocument,p=e.onDeleteDocument,d=e.onCaptureDocumentID,m=e.onChangeDocumentName,g=e.onCustomClassSearch,f=e.onCreateProperty,v=e.onEditCSVParams,E=e.onEditProperty,h=e.onDeleteProperty,b=e.onDrop,C=e.canDrop,y=e.onShowMappingDetails,S=e.canAddFieldToSelectedMapping,x=e.onAddToSelectedMapping,T=e.canRemoveFromSelectedMapping,M=e.onRemoveFromSelectedMapping,F=e.canStartMapping,D=e.onStartMapping,I=e.shouldShowMappingPreviewForField,k=e.targets,w=e.showTypes,A=e.targetProperties,_=a.useCallback((function(e){return I(e)&&i.createElement(wn,{id:e.id,value:e.value})}),[I]);return i.createElement(i.Fragment,null,i.createElement(wt,{title:"Target",onSearch:l,actions:[c&&i.createElement(ra,{id:"Target",onImport:c,key:"import"}),g&&i.createElement(ia,{onCustomClassSearch:function(){return g(!1)},"data-testid":"enable-specific-java-classes-Target-button",key:"java"})]}),i.createElement(bt,{id:"targets-height"},i.createElement(Mt,null,i.createElement(bt,{id:"targets-width"},i.createElement("div",null,i.createElement(bt,{id:"targets-properties",boundaryId:"targets-height",overrideWidth:"targets-width"},i.createElement(Dn,{title:"Properties",startExpanded:!!A,actions:[i.createElement(s.Tooltip,{position:"top",enableFlip:!0,content:i.createElement("div",null,"Create a target property for use in mapping"),key:"create-target-property",entryDelay:750,exitDelay:100},i.createElement(s.Button,{onClick:function(){return f(o)},variant:"plain","aria-label":"Create a target property for use in mapping","data-testid":"create-target-property-button"},i.createElement(u.PlusIcon,null)))],noPadding:!!A},A?i.createElement(ma,{acceptDropType:n,draggableType:r,isSource:o,onEditProperty:E,onDeleteProperty:h,canDrop:C,onDrop:b,onShowMappingDetails:y,canAddFieldToSelectedMapping:S,onAddToSelectedMapping:x,canRemoveFromSelectedMapping:T,onRemoveFromSelectedMapping:M,canStartMapping:F,onStartMapping:D,fields:A.fields,showTypes:w,renderPreview:_}):"No target properties")),k.map((function(e){var a="targets-document-"+e.id;return i.createElement(bt,{key:e.id,id:a,boundaryId:"targets-height",overrideWidth:"targets-width"},i.createElement(Dn,{title:e.name,startExpanded:!0,footer:w?i.createElement(An,null,"Target document type: ",e.type):void 0,actions:e.type===t.DocumentType.CSV?[d&&i.createElement(ea,{id:a,onClick:function(){return d(e.id)},key:"capture-tgt-csv-document-id"}),v&&i.createElement(aa,{id:a,onClick:function(){return v(e.id,!1)},key:"on-edit-tgt-csv-params"}),p&&i.createElement(na,{id:a,onClick:function(){return p(e.id)},key:"delete-tgt-csv-document"})]:[d&&i.createElement(ea,{id:a,onClick:function(){return d(e.id)},key:"capture-tgt-document-id"}),m&&i.createElement(ta,{id:a,onClick:function(){return m(e.id,e.name)},key:"change-tgt-document-name"}),p&&i.createElement(na,{id:a,onClick:function(){return p(e.id)},key:"delete-tgt-documents"})],noPadding:!0},i.createElement(Hn,null,i.createElement(sa,{fields:e.fields,showTypes:w,boundaryId:"targets-height",overrideWidth:"targets-width",parentId:a,idPrefix:"targets-field-",acceptDropType:n,draggableType:r,onDrop:b,canDrop:C,renderActions:function(e){return pa({connectedMappings:e.mappings,onShowMappingDetails:y,canAddFieldToSelectedMapping:S(e),onAddToSelectedMapping:function(){return x(e)},canRemoveFromSelectedMapping:T(e),onRemoveFromSelectedMapping:function(){return M(e)},canStartMapping:F(e),onStartMapping:function(){return D(e)}})},renderPreview:_}))))})))))))},va=function(e){var t=e.mappings,n=e.selectedMappingId,r=e.onSelectMapping,o=a.useMemo((function(){return t.sort((function(e){return e.id===n?1:-1}))}),[t,n]);return i.createElement("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"}},o.map((function(e){return i.createElement(Ea,{mapping:e,onClick:function(){return r(e)},isSelected:e.id===n,key:e.id})})),i.createElement(xt,{start:"dnd-start",end:"dnd-target-field",color:"var(--pf-global--active-color--400)"}))},Ea=function(e){var t=e.mapping,n=e.isSelected,a=e.onClick,r=it(!1),o=r.state,l=r.toggleOn,c=r.toggleOff,s=function(e){a(),e.stopPropagation()},u=n?"var(--pf-global--active-color--100)":void 0,p=n?void 0:"var(--pf-global--active-color--400)",d=t.sourceFields.reduce((function(e,n){var a=t.targetFields.map((function(e){return i.createElement(xt,{key:""+n.id+e.id,start:"sources-field-"+n.id,end:"targets-field-"+e.id,color:o?p:u,onClick:s,onMouseEnter:l,onMouseLeave:c,className:"SourceTargetLinks-module_arc__2q0aJ"})}));return[].concat(e,a)}),[]);return i.createElement("g",{className:"group"},d)},ha=function(e){var t=e.notifications,n=e.sources,a=e.targets,r=e.addableSources,o=e.addableTargets,l=e.showSourcesIndex,c=e.showTargetsIndex,s=e.onClose,u=e.mappingExpressionEnabled,p=e.onRemoveMapping,d=e.onRemoveMappedField,m=e.onIndexChange,g=e.onNewTransformation,f=e.onTransformationChange,v=e.onTransformationArgumentChange,E=e.onRemoveTransformation,h=e.onAddFieldToMapping,b=e.onNotificationRead,C=e.onEditEnum,y=e.isEnumMapping,S=e.onCreateConstant,x=e.onCreateProperty,T=e.canAddToSelectedMapping,M=e.multiplicity,F={"--pf-c-form--GridGap":"0",marginTop:"1.0rem"},D=M&&i.createElement(Ln,{name:M.name,disableTransformation:u,transformationsOptions:M.transformationsOptions,transformationsArguments:M.transformationsArguments,onTransformationChange:M.onChange,onTransformationArgumentChange:M.onArgumentChange}),I={id:"",name:"Padding field",value:"",type:"",scope:"current",path:"",mappings:[],hasTransformations:!1,isAttribute:!1,isCollection:!1,isConnected:!1,isInCollection:!1,isDisabled:!1,amField:{},enumeration:!1},k=function(e,t,n,a){return n?i.createElement(Un,{key:n.id,field:n,name:n.name,info:n.scope?n.path+" <"+n.scope+"> ("+n.type+")":n.path+" ("+n.type+")",mappingExpressionEnabled:u,hasTransformations:n.transformations.length>0,onDelete:function(){return d(e,a)},onIndexChange:function(t){return m(e,a,"string"==typeof t?parseInt(t,10):t.amField)},onNewTransformation:function(){return g(e,a)},index:a+1,canShowIndex:t},i.createElement("div",{className:"pf-c-form",style:F},n.transformations.map((function(t,n){return i.createElement(Ln,{key:n,name:t.name,transformationsOptions:t.options,transformationsArguments:t.arguments,disableTransformation:u,onTransformationChange:function(t){return f(e,a,n,t)},onTransformationArgumentChange:function(t,i){return v(e,a,n,t,i)},onRemoveTransformation:function(){E(e,a,n)}})})))):i.createElement(Un,{field:I,key:a,name:"Padding field",info:"This padding field has been automatically added",mappingExpressionEnabled:u,hasTransformations:!1,onDelete:function(){return d(e,a)},index:a+1,canShowIndex:l})},w=t.filter((function(e){return"danger"===e.variant})),A=t.filter((function(e){return"warning"===e.variant})),_=t.filter((function(e){return"warning"!==e.variant&&"danger"!==e.variant}));return i.createElement($n,{onClose:s,onDelete:p,onEditEnum:C,isEnumMapping:y},w.length>0&&i.createElement(ba,{notifications:w,title:"Errors",onNotificationRead:b}),A.length>0&&i.createElement(ba,{notifications:A,title:"Warnings",onNotificationRead:b}),_.length>0&&i.createElement(ba,{notifications:_,title:"Messages",onNotificationRead:b}),i.createElement("div",{className:"pf-c-form",style:F},D,i.createElement(zn,{isSource:!0,title:"Sources",onCreateConstant:S,onCreateProperty:x,canAddToSelectedMapping:T},n.map((function(e,t){return k(!0,l,e,t)})),a.length<=1&&i.createElement(Wt,{ariaLabelTypeAhead:"Select source to add to the mapping",placeholderText:"Select source to add to the mapping",isSource:!0,fields:r.map((function(e){return{label:e.amField.isPropertyOrConstant()?e.name:e.path,group:e.amField.docDef.name,onAdd:function(){return h(!0,e)}}})),"data-testid":"add-source-to-mapping"})),i.createElement(zn,{isSource:!1,title:"Targets",onCreateConstant:S,onCreateProperty:x,canAddToSelectedMapping:T},a.map((function(e,t){return k(!1,c,e,t)})),n.length<=1&&i.createElement(Wt,{ariaLabelTypeAhead:"Select target to add to the mapping",placeholderText:"Select target to add to the mapping",isSource:!1,fields:o.map((function(e){return{label:e.amField.isProperty()?e.name:e.path,group:e.amField.docDef.name,onAdd:function(){return h(!1,e)}}})),"data-testid":"add-target-to-mapping"}))))},ba=function(e){var t=e.notifications,n=e.onNotificationRead;return i.createElement(Dn,{title:e.title,noShadows:!0,noPadding:!0,actions:[i.createElement(s.Badge,{key:1},t.length)]},i.createElement("div",{style:{maxHeight:200,overflow:"auto"}},t.map((function(e,t){return i.createElement(s.Alert,{key:t,variant:e.variant,title:e.description,isInline:!0,actionClose:i.createElement(s.AlertActionCloseButton,{title:e.title,variantLabel:e.variant+" alert",onClose:function(){return n(e.id)},"data-testid":"dismiss-mapping-notification-"+e.id})})}))))},Ca=[{heightAuto:!0,cells:[{props:{colSpan:8},title:i.createElement(s.Bullseye,null,i.createElement(s.EmptyState,{variant:s.EmptyStateVariant.small},i.createElement(s.EmptyStateIcon,{icon:u.TableIcon}),i.createElement(s.Title,{headingLevel:"h2",size:"lg"},"No mappings found")))}]}],ya=function(e){var t=e.mappings,n=e.onSelectMapping,a=e.shouldShowMappingPreview,r=e.onFieldPreviewChange,o=0===t.length?Ca:t.map((function(e){var t=e.sourceFields.map((function(t,n){var o=t;return i.createElement("div",{key:n},o.name,a(e)&&i.createElement(kn,{id:o.id,value:o.value,onChange:function(e){return r(o,e)}}))})),n=e.targetFields.map((function(t,n){var r=t;return i.createElement("div",{key:n},r.name,a(e)&&i.createElement(wn,{id:r.id,value:r.value}))}));return{cells:[{title:t,data:e.id},{title:n},{title:e.name}]}}));return i.createElement(Kn,null,i.createElement(s.Title,{size:"lg",headingLevel:"h1",className:"MappingTableView-module_title__1BqLH"},"Mappings"),i.createElement(b.Table,{"aria-label":"Mappings",cells:["Sources","Targets","Types"],rows:o},i.createElement(b.TableHeader,null),i.createElement(b.TableBody,{onRowClick:function(e,a){var i=t.find((function(e){var t;return(null===(t=a.cells)||void 0===t?void 0:t[0].data)===e.id}));i&&n(i)}})))},Sa=function(e){var t=e.onCreateNamespace,n=e.onEditNamespace,a=e.onDeleteNamespace,r=["Alias","URI","Location URI",{title:"Target Namespace",transforms:[b.textCenter],cellTransforms:[b.textCenter]}],o=e.sources.reduce((function(e,o){if("XML"!==o.type)return e;var l=o.namespaces&&0!==o.namespaces.length?o.namespaces.map((function(e){return{cells:[{title:e.alias},{title:e.uri},{title:e.locationUri},{title:e.isTarget?"✓":""}]}})):[{cells:["<None>"]}],c=[{title:"Edit",onClick:function(e,t,a,i){var r,l,c,s;n(o.name,null===(r=a.cells)||void 0===r?void 0:r[0].title,null===(l=a.cells)||void 0===l?void 0:l[1].title,null===(c=a.cells)||void 0===c?void 0:c[2].title,(null===(s=a.cells)||void 0===s?void 0:s[3].title.length)>0)}},{title:"Remove",onClick:function(e,t,n,i){return a(o.name,n.alias.title)}}];return[].concat(e,[i.createElement(s.Level,{key:"level"},i.createElement(s.LevelItem,{key:"title"},i.createElement(s.Title,{size:"lg",headingLevel:"h1",className:"NamespaceTableView-module_title__2TUGW"},"Namespaces for ",o.name)),i.createElement(s.LevelItem,{key:"actions"},i.createElement(Ft,null,i.createElement(s.Tooltip,{position:"top",enableFlip:!0,content:i.createElement("div",null,"Create a namespace"),key:"create-namespace"},i.createElement(s.Button,{onClick:function(){return t(o.name)},variant:"plain","aria-label":"Create a namespace","data-testid":"create-namespace-button"},i.createElement(u.PlusIcon,null)))))),i.createElement(b.Table,{key:"table","aria-label":"Namespaces",cells:r,rows:l,actions:o.namespaces&&o.namespaces.length>0?c:void 0},i.createElement(b.TableHeader,null),i.createElement(b.TableBody,null))])}),[]);return 0===o.length?i.createElement(s.Bullseye,null,i.createElement(s.EmptyState,{variant:s.EmptyStateVariant.small},i.createElement(s.EmptyStateIcon,{icon:u.TableIcon}),i.createElement(s.Title,{headingLevel:"h2",size:"lg"},"No XML sources found"))):i.createElement(Kn,null,o)},xa=function(e){var t=e.targetProperties,n=e.mappings,a=e.targets,r=e.showMappingPreview,o=e.showTypes,l=e.selectedMappingId,c=e.onSelectMapping,s=e.targetEvents;return i.createElement(i.Fragment,null,i.createElement(vt,null,i.createElement(It,{role:"main"},i.createElement(kt,null,i.createElement(Tt,{"data-testid":"column-source-area",totalColumns:2},i.createElement(ga,Object.assign({sourceProperties:e.sourceProperties,constants:e.constants,sources:e.sources,showTypes:o},e.sourceEvents))),i.createElement(Tt,{"data-testid":"column-target-area",totalColumns:2},i.createElement(fa,Object.assign({targetProperties:t,showMappingPreview:r,showTypes:o,targets:a},s))))),i.createElement(va,{mappings:n,selectedMappingId:l,onSelectMapping:c})))},Ta="toolbarItems-module_toggled__HUrZH",Ma=function(e){var t=e.showImportAtlasFileToolbarItem,n=e.showImportJarFileToolbarItem,a=e.showExportAtlasFileToolbarItem,r=e.showResetToolbarItem,o=e.onImportAtlasFile,l=e.onImportJarFile,c=e.onExportAtlasFile,p=e.onResetAtlasmap,d=it(!1),m=d.state,g=d.toggle,f=d.toggleOff,v=function(e){return function(){e.apply(void 0,arguments),f()}},E=[t&&i.createElement(Fa,{onFile:v(o),key:"import-catalog"}),n&&i.createElement(Da,{onFile:v(l),key:"import-java-archive"}),(t||n)&&i.createElement(s.DropdownSeparator,{key:"import-separator"}),a&&i.createElement(Ia,{onClick:v(c),key:"export-catalog"}),a&&i.createElement(s.DropdownSeparator,{key:"export-separator"}),r&&i.createElement(ka,{onClick:v(p),key:"reset-catalog"})].filter((function(e){return e}));return i.createElement(s.ToolbarItem,null,i.createElement(s.Dropdown,{toggle:i.createElement(s.DropdownToggle,{id:"atlasmap-toggle",onToggle:g,toggleIndicator:u.CaretDownIcon,"data-testid":"atlasmap-menu-button"},"AtlasMap"),isOpen:m,dropdownItems:E,isPlain:!0}))},Fa=function(e){var t=e.onFile,n=h.useFilePicker({maxFileSize:1}),r=n.files,o=n.onClick,l=n.HiddenFileInput,c=a.useRef(null);return a.useEffect((function(){c.current!==r&&(c.current=r,1===(null==r?void 0:r.length)&&(c.current=null,t(r[0])))}),[r,t]),i.createElement(s.DropdownItem,{icon:i.createElement(u.ImportIcon,null),onClick:o,"data-testid":"import-mappings-button"},"Import a catalog (.adm)",i.createElement(l,{accept:".adm",multiple:!1}))},Da=function(e){var t=e.onFile,n=h.useFilePicker({maxFileSize:1}),r=n.files,o=n.onClick,l=n.HiddenFileInput,c=a.useRef(null);return a.useEffect((function(){c.current!==r&&(c.current=r,1===(null==r?void 0:r.length)&&(c.current=null,t(r[0])))}),[r,t]),i.createElement(s.DropdownItem,{icon:i.createElement(u.ImportIcon,null),onClick:o,"data-testid":"import-archive-button"},"Import a Java archive (.jar)",i.createElement(l,{accept:".jar",multiple:!1}))},Ia=function(e){var t=e.onClick;return i.createElement(s.DropdownItem,{icon:i.createElement(u.ExportIcon,null),onClick:t,"data-testid":"export-mappings-button"},"Export the current mappings and support files into a catalog (.adm)")},ka=function(e){var t=e.onClick;return i.createElement(s.DropdownItem,{icon:i.createElement(u.TrashIcon,null),onClick:t,"data-testid":"reset-all-button"},"Reset all mappings and clear all imported documents")},wa=function(e){var t=e.toggled,n=e.disabled,a=void 0!==n&&n,r=e.onClick;return i.createElement(s.ToolbarItem,null,i.createElement(s.Tooltip,{position:"auto",enableFlip:!0,content:i.createElement("div",null,"Show column mapper")},i.createElement(s.Button,{variant:"plain","aria-label":"Show column mapper",onClick:r,isDisabled:a,className:l.css(t&&Ta),"data-testid":"show-column-mapper-button"},i.createElement(u.ColumnsIcon,null))))},Aa=function(e){var t=e.toggled,n=e.disabled,a=void 0!==n&&n,r=e.onClick;return i.createElement(s.ToolbarItem,null,i.createElement(s.Tooltip,{position:"auto",enableFlip:!0,content:i.createElement("div",null,"Show mapping table")},i.createElement(s.Button,{variant:"plain","aria-label":"Show/hide mapping table",onClick:r,isDisabled:a,className:l.css(t&&Ta),"data-testid":"show-hide-mapping-table-button"},i.createElement(u.TableIcon,null))))},_a=function(e){var t=e.toggled,n=e.disabled,a=void 0!==n&&n,r=e.onClick;return i.createElement(s.ToolbarItem,null,i.createElement(s.Tooltip,{position:"auto",enableFlip:!0,content:i.createElement("div",null,"Show namespace table")},i.createElement(s.Button,{variant:"plain","aria-label":"Show/hide namespace table",onClick:r,isDisabled:a,className:l.css(t&&Ta),"data-testid":"show-hide-namespace-table-button"},i.createElement(u.CodeIcon,null))))},Pa=function(e){var t=e.toggled,n=e.disabled,a=void 0!==n&&n,r=e.onClick;return i.createElement(s.ToolbarItem,null,i.createElement(s.Tooltip,{position:"auto",enableFlip:!0,content:i.createElement("div",null,"Show/hide mapping preview")},i.createElement(s.Button,{variant:"plain","aria-label":"Show/hide mapping preview",onClick:r,isDisabled:a,className:l.css(t&&Ta),"data-testid":"show-hide-mapping-preview-button"},i.createElement(u.EyeIcon,null))))},Oa=function(e){var t=e.toggled,n=e.disabled,a=void 0!==n&&n,r=e.onClick;return i.createElement(s.ToolbarItem,null,i.createElement(s.Tooltip,{position:"auto",enableFlip:!0,content:i.createElement("div",null,"Show/hide types")},i.createElement(s.Button,{variant:"plain","aria-label":"Show/hide types",onClick:r,isDisabled:a,className:l.css(t&&Ta),"data-testid":"show-hide-types-button"},i.createElement(u.InfoIcon,null))))},Ra=function(e){var t=e.toggled,n=e.disabled,a=void 0!==n&&n,r=e.onClick;return i.createElement(s.ToolbarItem,null,i.createElement(s.Tooltip,{position:"auto",enableFlip:!0,content:i.createElement("div",null,"Show/hide mapped fields")},i.createElement(s.Button,{variant:"plain","aria-label":"Show/hide mapped fields",onClick:r,isDisabled:a,className:l.css(t&&Ta),"data-testid":"show-hide-mapped-fields-button"},i.createElement(u.MapMarkedIcon,null))))},Na=function(e){var t=e.toggled,n=e.disabled,a=void 0!==n&&n,r=e.onClick;return i.createElement(s.ToolbarItem,null,i.createElement(s.Tooltip,{position:"auto",enableFlip:!0,content:i.createElement("div",null,"Show/hide unmapped fields")},i.createElement(s.Button,{variant:"plain","aria-label":"Show/hide unmapped fields",onClick:r,isDisabled:a,className:l.css(t&&Ta),"data-testid":"show-hide-unmapped-fields-button"},i.createElement(u.MapIcon,null))))},La=function(e){var t=e.onClick;return i.createElement(s.ToolbarItem,null,i.createElement(s.Tooltip,{position:"auto",enableFlip:!0,content:i.createElement("div",null,"Add a new mapping")},i.createElement(s.Button,{variant:"plain","aria-label":"Add a new mapping",onClick:t,"data-testid":"add-new-mapping-button"},i.createElement(u.PlusIcon,null))))},Va=function(e){var t=e.onClick;return i.createElement(s.ToolbarItem,null,i.createElement(s.Tooltip,{position:"auto",enableFlip:!0,content:i.createElement("div",null,"About AtlasMap")},i.createElement(s.Button,{variant:"plain","aria-label":"About AtlasMap",onClick:t,"data-testid":"about-button"},i.createElement(u.HelpIcon,null))))};function Ua(){return{pending:!1,error:!1,sourceProperties:null,targetProperties:null,constants:null,sources:[],targets:[],mappings:[],selectedMapping:null,flatSources:[],flatTargets:[]}}function za(e,t){switch(t.type){case"reset":return{pending:!1,error:!1,sourceProperties:null,targetProperties:null,constants:null,sources:[],targets:[],mappings:[],selectedMapping:null,flatSources:[],flatTargets:[]};case"loading":return y({},e,{pending:!0,error:!1});case"update":return y({},e,t.payload);case"error":return y({},{pending:!1,error:!1,sourceProperties:null,targetProperties:null,constants:null,sources:[],targets:[],mappings:[],selectedMapping:null,flatSources:[],flatTargets:[]});default:return e}}function Ba(){return{notifications:[]}}function Ga(e,t){switch(t.type){case"reset":return{notifications:[]};case"update":return{notifications:t.payload.notifications.map((function(t){var n;return y({},t,{isRead:null===(n=e.notifications.find((function(e){return e.id===t.id})))||void 0===n?void 0:n.isRead})}))};case"dismiss":return{notifications:e.notifications.map((function(e){return e.id===t.payload.id?y({},e,{isRead:!0}):e}))};default:return e}}var ja=a.createContext(null);function qa(){var e,n,i,r,o,l=a.useContext(ja);if(!l)throw new Error("useAtlasmap must be used inside an AtlasmapProvider component");var c=W.cfg,s=l.onReset,u=x(l,["onLoading","onReset"]),p=a.useCallback((function(e){return c.documentService.filterDocumentFields(e,!0)}),[c]),d=a.useCallback((function(e){return c.documentService.filterDocumentFields(e,!1)}),[c]),m=a.useCallback((function(e){Ke(e,c)}),[c]),g=a.useCallback((function(e){Qe(e,c)}),[c]),f=a.useCallback((function(){s(),Ze()}),[s]),v=a.useCallback((function(e){Ue(e.amField)}),[]),E=a.useCallback((function(e){ze(e.amField)}),[]),h=a.useCallback((function(e,t){Ne(null==e?void 0:e.amField,null==t?void 0:t.amField)}),[]),b=0===(null===(e=c.mappings)||void 0===e||null===(n=e.activeMapping)||void 0===n||null===(i=n.transition)||void 0===i||null===(r=i.expression)||void 0===r?void 0:r.nodes.length),C=a.useCallback((function(){return c.expressionService.willClearOutSourceFieldsOnTogglingExpression()}),[c]),S=a.useCallback((function(e){var n=l.selectedMapping;return!(!n||n.mapping.transition.mode===t.TransitionMode.ENUM&&n.sourceFields.length>0&&n.targetFields.length>0)&&(n.sourceFields.length<=1&&n.targetFields.length<=1||!(!e||!(n.targetFields.length<=1||0===n.sourceFields.length))||!e&&(n.sourceFields.length<=1||0===n.targetFields.length))}),[l]),T=a.useCallback((function(e,n,a){var i=l.selectedMapping,r="source"===e;if(!n||!n.amField.isTerminal()||"UNSUPPORTED"===(null==a?void 0:a.type)||i&&i.mapping.transition.mode===t.TransitionMode.ENUM&&i.sourceFields.length>0&&i.targetFields.length>0)return!1;if(!i||a&&!a.isConnected)return!0;if(i.sourceFields.length<=1&&i.targetFields.length<=1){if(r&&!i.sourceFields.find((function(e){return e.id===n.id})))return!0;if(n.isCollection||n.isInCollection||!n.isConnected&&!i.targetFields.find((function(e){return e.id===n.id})))return!0}else{if(r&&(i.targetFields.length<=1||0===i.sourceFields.length)&&!i.sourceFields.find((function(e){return e.id===n.id})))return!0;if(!r&&(n.isCollection||n.isInCollection||!n.isConnected&&(i.sourceFields.length<=1||0===i.targetFields.length)&&!i.targetFields.find((function(e){return e.id===n.id}))))return!0}return!1}),[l]),M=a.useCallback((function(e,t){return!!l.selectedMapping&&!!l.selectedMapping["source"===e?"sourceFields":"targetFields"].find((function(e){return e.id===t.id}))}),[l.selectedMapping]);return y({},u,{selectMapping:Fe,deselectMapping:De,deleteAtlasFile:Je,exportADMArchiveFile:Ye,importADMArchiveFile:m,importJarFile:g,resetAtlasmap:f,getUIVersion:et,getRuntimeVersion:$e,mappingExpressionClearText:se,isMappingExpressionEmpty:b,executeFieldSearch:oe,getFieldEnums:je,setSelectedEnumValue:qe,mappingExpressionAddField:le,mappingExpressionInit:ce,mappingExpressionInsertText:ue,mappingExpressionObservable:pe,mappingExpressionRemoveField:de,mappingHasSourceCollection:C,mappingExpressionEnabled:c.expressionService.isExpressionEnabledForActiveMapping(),currentMappingExpression:c.expressionService.getMappingExpressionStr(!0,null===(o=c.mappings)||void 0===o?void 0:o.activeMapping),getMappingExpression:q,toggleExpressionMode:ge,toggleMappingPreview:tt,toggleShowMappedFields:nt,toggleShowUnmappedFields:at,onFieldPreviewChange:me,addToCurrentMapping:Ue,removeFromCurrentMapping:ze,removeMappedFieldFromCurrentMapping:Be,fromMappedFieldToIMappingField:$,createMapping:Ne,newMapping:Le,removeMapping:Ve,documentExists:Xe,getMappingActions:fe,getMultiplicityActions:ve,getMultiplicityActionDelimiters:Ee,handleActionChange:he,handleIndexChange:be,handleNewTransformation:Ce,handleRemoveTransformation:xe,handleTransformationChange:ye,handleTransformationArgumentChange:Se,handleMultiplicityChange:Te,handleMultiplicityArgumentChange:Me,createConstant:Ie,deleteConstant:ke,editConstant:we,createProperty:_e,deleteProperty:Pe,editProperty:Oe,trailerId:"expression-trailer",canAddToSelectedMapping:S,isFieldAddableToSelection:T,isFieldRemovableFromSelection:M,searchSources:p,searchTargets:d,importInstanceSchema:D,enableCustomClass:N,createNamespace:A,editNamespace:_,deleteNamespace:P,onAddToMapping:v,onRemoveFromMapping:E,onCreateMapping:h,changeDocumentName:w,getEnumerationValues:Ge,isEnumerationMapping:We,configModel:c})}function Ha(e,t){var n=it(!1),r=n.state,o=n.toggleOn,l=n.toggleOff,c=a.useRef(null);return[i.createElement(vn,{key:"confirmation-dialog-"+e,title:e,onCancel:l,onConfirm:function(){c.current&&c.current(),l()},isOpen:r},i.createElement(s.TextContent,null,t)),function(e){c.current=e,o()}]}function Wa(e){var n=a.useState(null),r=n[0],o=n[1],l=a.useState({name:"",value:"",valueType:t.constantTypes[0][0]}),c=l[0],s=l[1],u=a.useState(null),p=u[0],d=u[1],m=it(!1),g=m.state,f=m.toggleOn,v=m.toggleOff,E=a.useCallback((function(e){r&&((null==c?void 0:c.name)!==e.name?r(e,null==c?void 0:c.name):r(e),v())}),[c,r,v]);return[i.createElement(En,Object.assign({title:e,isOpen:g,valueTypeOptions:t.constantTypes.map((function(e){return{value:e[0],label:e[1]}})),onCancel:v,onConfirm:E,onValidation:function(e){var t=!1;return p&&(t=p.fields.filter((function(t){return t.name===e})).length>0),e===(null==c?void 0:c.name)||!t}},c||{})),a.useCallback((function(e,t,n){o((function(){return e})),n&&s(n),t&&d(t),f()}),[f])]}var Ja="";function Xa(e){var t=a.useState(null),n=t[0],r=t[1],o=a.useState([]),l=o[0],c=o[1],s=it(!1),u=s.state,p=s.toggleOn,d=s.toggleOff,m=a.useCallback((function(){c([])}),[]),g=a.useCallback((function(e){n&&(n(e),d())}),[n,d]),f=i.createElement(Tn,{title:e,isOpen:u,onCancel:d,onConfirm:g,parameters:l}),v=a.useCallback((function(e,t){r((function(){return e})),t&&c(t),p()}),[p]);return a.useEffect(m,[m]),[f,v]}function Ya(e){var t=it(!1),n=it(e),r=a.useRef(null),o=function(){r.current&&r.current(n.state),t.toggleOff()};return[i.createElement(s.Modal,{key:"specify-instance-schema-dialog",variant:"small",title:"Specify Instance/ Schema",description:"Distinguish between instance and schema imported file formats.",isOpen:t.state,onClose:t.toggleOff,actions:[i.createElement(s.Button,{key:"confirm",variant:"primary",onClick:o,"aria-label":"Ok","data-testid":"specify-instance-schema-dialog-ok-button-test",isDisabled:!o,style:{display:"flex",marginLeft:"auto"}},"OK")]},i.createElement(i.Fragment,null,i.createElement(s.Radio,{isChecked:!n.state,name:"instance",onChange:function(){n.toggleOff()},label:"Instance",id:"instance-radio","data-testid":"instance-radio-button-test"}),i.createElement(s.Radio,{isChecked:n.state,name:"schema",onChange:function(){n.toggleOn()},label:"Schema",id:"schema-radio","data-testid":"schema-radio-button-test"}))),function(a){r.current=a,e?n.toggleOn():n.toggleOff(),t.toggleOn()}]}function Ka(e){var t=a.useState(null),n=t[0],r=t[1],o=a.useState(null),l=o[0],c=o[1],s=it(!1),u=s.state,p=s.toggleOn,d=s.toggleOff,m=a.useCallback((function(e){n&&(n(e),d())}),[n,d]);return[i.createElement(Sn,Object.assign({title:e,isOpen:u,onCancel:d,onConfirm:m},l||{})),a.useCallback((function(e,t){r((function(){return e})),t&&c(t),p()}),[p])]}function Qa(e,n){var r=a.useState(null),o=r[0],l=r[1],c=a.useState({name:"",valueType:t.propertyTypes[0][0],scope:n[0].value}),s=c[0],u=c[1],p=a.useState(null),d=p[0],m=p[1],g=it(!1),f=g.state,v=g.toggleOn,E=g.toggleOff,h=a.useCallback((function(e){o&&(o(e),E())}),[o,E]);return[i.createElement(xn,Object.assign({title:e,valueTypeOptions:t.propertyTypes.map((function(e){return{value:e[0],label:e[1]}})),scopeOptions:n,isOpen:f,onCancel:E,onConfirm:h,onValidation:function(e,t){var n=!1;return d&&(n=d.fields.filter((function(n){return n.name===e&&n.amField.scope===t})).length>0),e===(null==s?void 0:s.name)&&t===s.scope||!n}},s||{})),a.useCallback((function(e,t,n){l((function(){return e})),n&&u(n),m(t),v()}),[v])]}function Za(e){var n,r,o,l,c,s,u,p,d,m,g,f=e.modalContainer,E=qa(),h=E.configModel,b=E.selectedMapping,C=E.createConstant,y=E.editConstant,S=E.createProperty,x=E.editProperty,T=E.createNamespace,D=E.editNamespace,k=E.deleteNamespace,w=E.changeDocumentName,A=Wa("Create Constant"),_=A[0],P=A[1],O=a.useCallback((function(e,t){P((function(e){C(e.name,e.value,e.valueType,t)}),e)}),[C,P]),R=Wa("Edit Constant"),U=R[0],z=R[1],B=a.useCallback((function(e,t){z((function(e,t){y(e.name,e.value,e.valueType,t)}),t,e)}),[y,z]),G=function(){var e=qa().deleteConstant,t=Ha("Delete constant?","Are you sure you want to delete the selected constant and remove any associated mapping references?"),n=t[1];return[t[0],a.useCallback((function(t){return n((function(){return e(t)}))}),[e,n])]}(),j=G[0],q=G[1],W=a.useState(L(!0)),J=W[0],X=W[1],Y=Qa("Create Property",J),K=Y[0],Q=Y[1],Z=a.useCallback((function(e,t,n){X(L(e)),Q((function(t){S(t.name,t.valueType,t.scope,e,n)}),t)}),[S,Q]),$=Qa("Edit Property",J),ee=$[0],te=$[1],ne=a.useCallback((function(e,t,n){X(L(t)),te((function(n){x(e.name,n.valueType,e.scope,t,n.name,n.scope)}),n,e)}),[x,te]),ae=function(){var e=qa().deleteProperty,t=Ha("Delete property?","Are you sure you want to delete the selected property and remove any associated mapping references?"),n=t[1];return[t[0],a.useCallback((function(t,a,i){return n((function(){return e(t,a,i)}))}),[e,n])]}(),ie=ae[0],re=ae[1],oe=function(){var e=qa().importADMArchiveFile,t=Ha("Import ADM archive file?","Importing a new ADM archive file will discard all unsaved changes. To save the current mappings, use the Export feature."),n=t[1];return[t[0],a.useCallback((function(t){return n((function(){return e(t)}))}),[e,n])]}(),le=oe[0],ce=oe[1],se=function(){var e=it(!1),t=e.state,n=e.toggleOn,r=e.toggleOff,o=qa().exportADMArchiveFile,l=a.useCallback((function(e){o(e),r()}),[o,r]);return[i.createElement(Cn,{isOpen:t,onCancel:r,onConfirm:l}),n]}(),ue=se[0],pe=se[1],de=function(){var e=qa().resetAtlasmap,t=Ha("Reset All Mappings and Imports?","Are you sure you want to reset all mappings and clear all imported documents?"),n=t[1];return[t[0],a.useCallback((function(){return n(e)}),[n,e])]}(),me=de[0],ge=de[1],fe=function(){var e=qa(),t=e.getRuntimeVersion,n=(0,e.getUIVersion)(),r=a.useState("0.0"),o=r[0],l=r[1],c=it(!1),s=c.toggleOn;return[i.createElement(fn,{title:"AtlasMap Data Mapper",isOpen:c.state,onClose:c.toggleOff,uiVersion:n,runtimeVersion:o}),a.useCallback((function(){t().then((function(e){l(e),s()})).catch((function(e){l(e),s()}))}),[s,t])]}(),ve=fe[0],Ee=fe[1],he=function(){var e=qa(),t=e.mappingHasSourceCollection,n=e.toggleExpressionMode,i=Ha("Disable Expression?","If you disable an expression with a source collection, all source fields will be removed from the mapping.  Proceed with expression disable?"),r=i[1];return[i[0],a.useCallback((function(){t()?r(n):n()}),[t,r,n])]}(),be=he[0],Ce=he[1],ye=function(){var e=qa(),n=e.configModel,r=e.documentExists,o=e.importInstanceSchema,l=Ha("Confirm document import","A document with the selected name has already been imported into the specified panel. It will appear in addition to the pre-existing document."),c=l[0],s=l[1],u=Xa("Select CSV Processing Parameters"),p=u[0],d=u[1],m=a.useState(!1),g=m[1],f=Ya(m[0]),v=f[0],E=f[1],h=a.useCallback((function(e,a){if(e.name){var i=e.name.split("."),r=i[i.length-1].toUpperCase();if("CSV"===r)return void d((function(t){for(var i,r={},l=M(t);!(i=l()).done;){var c=i.value;r[c.name]=c.value}o(e,n,a,!1,r)}),t.getCsvParameterOptions());g("XSD"===r),E((function(t){o(e,n,a,t)}))}}),[n,o,d,E]),b=a.useCallback((function(e,t){r(e,t)?s((function(){return h(e,t)})):h(e,t)}),[r,h,s]);return[i.createElement(i.Fragment,null,c,p,v),b]}(),Se=ye[0],xe=ye[1],Te=function(){var e=qa().deleteAtlasFile,t=Ha("Delete selected document?","Are you sure you want to delete the selected document and remove any associated mappings?"),n=t[1];return[t[0],a.useCallback((function(t,a){return n((function(){return e(t,a)}))}),[e,n])]}(),Me=Te[0],Fe=Te[1],De=(l=(o=it(!1)).state,c=o.toggleOn,s=o.toggleOff,u=a.useRef(null),d=i.createElement(Bn,{variant:"info",title:"Capture Document ID",key:Ja,onClose:p=function(){s()},onTimeout:p},"Document ID "+Ja+" copied to clipboard."),l?u.current&&u.current():d=i.createElement("span",null),[(m=[d,function(e){u.current=e,c()}])[0],a.useCallback((function(e){Ja=e,g((function(){return H(e)}))}),[g=m[1]])]),Ie=De[0],ke=De[1],we=function(){var e=a.useState(null),t=e[0],n=e[1],r=a.useState({id:"",name:"",isSource:!1}),o=r[0],l=r[1],c=it(!1),s=c.state,u=c.toggleOn,p=c.toggleOff,d=a.useCallback((function(e){t&&(t(e),p())}),[t,p]);return[i.createElement(bn,Object.assign({isOpen:s,onCancel:p,onConfirm:d},o||{})),a.useCallback((function(e,t){n((function(){return e})),l(t),u()}),[u])]}(),Ae=we[0],_e=we[1],Pe=a.useCallback((function(e){_e((function(e){w(e.id,e.name,e.isSource)}),e)}),[w,_e]),Oe=Ka("Create namespace"),Re=Oe[0],Ne=Oe[1],Le=a.useCallback((function(e){Ne((function(t){return T(e,t.alias,t.uri,t.locationUri,t.targetNamespace)}))}),[T,Ne]),Ve=Ka("Edit namespace"),Ue=Ve[0],ze=Ve[1],Be=a.useCallback((function(e,t){ze((function(n){return D(e,t.alias,n.alias,n.uri,n.locationUri,n.targetNamespace)}),t)}),[D,ze]),je=[(n=Ha("Remove field?","Are you sure you want to remove this field?"))[0],a.useCallback((function(e){return r(e)}),[r=n[1]])],qe=je[0],We=je[1],Je=function(){var e=qa(),t=e.removeMapping,n=e.deselectMapping,i=Ha("Remove Mapping?","Are you sure you want to remove the current mapping?"),r=i[1];return[i[0],a.useCallback((function(e){r((function(){t(e.mapping),n()}))}),[n,r,t])]}(),Xe=Je[0],Ye=Je[1],Ke=a.useCallback((function(){b&&Ye(b)}),[Ye,b]),Qe=function(){var e=it(!1),t=e.state,n=e.toggleOn,r=e.toggleOff,o=a.useState([]),l=o[0],c=o[1],s=a.useCallback((function(){He(l),r()}),[l,r]);return[i.createElement(vn,{title:"Map Enumeration Values",description:"Map enumeration source values to target values.",onCancel:r,onConfirm:s,isOpen:t},t&&l&&l.map((function(e,n){return i.createElement("div",{key:n},i.createElement(yn,{enumerationValue:e,sourceKey:n,isOpen:t}))}))),a.useCallback((function(){c(Ge()),n()}),[n])]}(),Ze=Qe[0],$e=Qe[1],et=function(e){var n=a.useState(null),r=n[0],o=n[1],l=a.useState(null),c=l[0],s=l[1],u=a.useState([]),p=u[0],d=u[1],m=it(!1),g=m.state,f=m.toggleOn,v=m.toggleOff,E=a.useCallback((function(e){r&&(r(e),v())}),[r,v]);return[i.createElement(hn,Object.assign({title:"Load Java Document From Custom Class",isOpen:g,customClassName:p?p[0]:"",customClassNames:p,collectionTypeOptions:t.collectionTypes.map((function(e){return{value:e[0],label:e[1]}})),onCancel:v,onConfirm:E},c||{collectionType:"NONE"})),a.useCallback((function(e,t){o((function(){return e})),t&&s(t),function(){try{Promise.resolve(I()).then((function(e){d(e)}))}catch(e){return Promise.reject(e)}}(),f()}),[f])]}(),tt=et[0],nt=et[1],at=a.useCallback((function(e){nt((function(t){return N(h,t.customClassName,t.collectionType,e)}))}),[h,nt]),rt=Xa("Edit CSV Processing Parameters"),ot=rt[0],lt=rt[1],ct=a.useCallback((function(e,n){lt((function(t){for(var a,i={},r=M(t);!(a=r()).done;){var o=a.value;i[o.name]=o.value}F(e,n,i)}),function(e,n){for(var a,i=V(e,n),r=t.getCsvParameterOptions(),o=Object.keys(i).map((function(e){return e})),l=Object.values(i).map((function(e){return e})),c=M(r.map((function(e,t){return{index:t,value:e}})));!(a=c()).done;)for(var s,u=a.value.index,p=M(o.map((function(e,t){return{pindex:t,pvalue:e}})));!(s=p()).done;){var d=s.value;if(r[u].name===d.pvalue){r[u].value=l[d.pindex],r[u].enabled=!0;break}}return r}(e,n))}),[lt]),st=Ya(!1),ut=st[0],pt=st[1],dt=a.useMemo((function(){return v.createPortal(i.createElement(i.Fragment,null,le,ue,Se,Me,ut,Ie,Ae,_,j,U,K,ie,ee,me,ve,qe,Xe,tt,Re,Ue,be,Ze,ot),f)}),[_,tt,Re,K,j,Me,Ie,Ae,Xe,ie,U,Ue,ee,ue,le,Se,ut,f,qe,me,ve,be,Ze,ot]);return{handlers:{onImportADMArchive:ce,onExportADMArchive:pe,onCreateConstant:O,onDeleteConstant:q,onEditConstant:B,onCreateProperty:Z,onDeleteProperty:re,onEditProperty:ne,onResetAtlasmap:ge,onAbout:Ee,onImportDocument:xe,onDeleteDocument:Fe,onSpecifyInstanceSchema:pt,onCaptureDocumentID:ke,onChangeDocumentName:Pe,onRemoveMappedField:We,onDeleteMapping:Ye,onDeleteSelectedMapping:Ke,onEnableCustomClass:at,onCreateNamespace:Le,onEditNamespace:Be,deleteNamespace:k,onToggleExpressionMode:Ce,onEditMappingEnumeration:$e,onEditCSVParams:ct},dialogs:dt}}exports.AboutDialog=fn,exports.Actions=Ft,exports.AddFieldTypeahead=Wt,exports.Arc=mt,exports.ArcEdge=function(e){var t=e.start,n=e.end;return i.createElement("line",{x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:e.color,strokeWidth:e.strokeWidth})},exports.Atlasmap=function(e){var n=e.allowImport,r=void 0===n||n,o=e.allowExport,l=void 0===o||o,c=e.allowReset,u=void 0===c||c,p=e.allowDelete,d=void 0===p||p,m=e.allowCustomJavaClasses,g=void 0===m||m,f=e.modalsContainerId,v=void 0===f?"modals":f,E=e.toolbarOptions,h=qa(),b=h.pending,C=h.notifications,S=h.markNotificationRead,x=h.sourceProperties,T=h.targetProperties,M=h.constants,F=h.sources,D=h.targets,I=h.mappings,k=h.selectedMapping,w=h.selectMapping,A=h.onFieldPreviewChange,_=h.searchSources,P=h.searchTargets,O=h.importJarFile,R=h.currentMappingExpression,N=h.executeFieldSearch,L=h.getFieldEnums,V=h.setSelectedEnumValue,U=h.mappingExpressionAddField,z=h.mappingExpressionClearText,B=h.mappingExpressionInit,G=h.mappingExpressionInsertText,j=h.mappingExpressionObservable,q=h.mappingExpressionRemoveField,H=h.mappingExpressionEnabled,W=h.isMappingExpressionEmpty,J=h.trailerId,X=h.canAddToSelectedMapping,Y=h.isFieldAddableToSelection,K=h.isFieldRemovableFromSelection,Q=h.onAddToMapping,Z=h.onRemoveFromMapping,$=h.onCreateMapping,ee=h.isEnumerationMapping,te=Za({modalContainer:document.getElementById(v)}),ne=te.handlers,ae=te.dialogs,ie=function(e){var t=e.showImportAtlasFileToolbarItem,n=void 0===t||t,r=e.showImportJarFileToolbarItem,o=void 0===r||r,l=e.showExportAtlasFileToolbarItem,c=void 0===l||l,u=e.showResetToolbarItem,p=void 0===u||u,d=e.showColumnMapperViewToolbarItem,m=void 0===d||d,g=e.showMappingTableViewToolbarItem,f=void 0===g||g,v=e.showNamespaceTableViewToolbarItem,E=void 0===v||v,h=e.showToggleMappingPreviewToolbarItem,b=void 0===h||h,C=e.showToggleTypesToolbarItem,y=void 0===C||C,S=e.showToggleMappedFieldsToolbarItem,x=void 0===S||S,T=e.showToggleUnmappedFieldsToolbarItem,M=void 0===T||T,F=e.showAddNewMappingToolbarItem,D=void 0===F||F,I=e.onImportADMArchiveFile,k=e.onImportJarFile,w=e.onExportAtlasFile,A=e.onResetAtlasmap,_=e.onAbout,P=qa(),O=P.toggleMappingPreview,R=P.toggleShowMappedFields,N=P.toggleShowUnmappedFields,L=P.newMapping,V=a.useState("ColumnMapper"),U=V[0],z=V[1],B=it(!1,O),G=B.state,j=B.toggle,q=it(!0),H=q.state,W=q.toggle,J=it(!0,R),X=J.state,Y=J.toggle,K=it(!0,N),Q=K.state,Z=K.toggle,$=a.useMemo((function(){return i.createElement(Xn,null,(n||o||c||p)&&i.createElement(s.ToolbarGroup,{variant:"button-group",spacer:{default:"spacerMd"}},i.createElement(Ma,{showImportAtlasFileToolbarItem:n,showImportJarFileToolbarItem:o,showExportAtlasFileToolbarItem:c,showResetToolbarItem:p,onImportAtlasFile:I,onImportJarFile:k,onExportAtlasFile:w,onResetAtlasmap:A})),(m||f||E)&&i.createElement(s.ToolbarGroup,{variant:"icon-button-group",spacer:{default:"spacerMd"}},m&&i.createElement(wa,{toggled:"ColumnMapper"===U,onClick:function(){return z("ColumnMapper")}}),f&&i.createElement(Aa,{toggled:"MappingTable"===U,onClick:function(){return z("MappingTable")}}),E&&i.createElement(_a,{toggled:"NamespaceTable"===U,onClick:function(){return z("NamespaceTable")}})),i.createElement(s.ToolbarGroup,{variant:"icon-button-group"},b&&("ColumnMapper"===U||"MappingTable"===U)&&i.createElement(Pa,{toggled:G,onClick:j}),y&&("ColumnMapper"===U||"MappingTable"===U)&&i.createElement(Oa,{toggled:H,onClick:W}),x&&"ColumnMapper"===U&&i.createElement(Ra,{toggled:X,onClick:Y}),M&&"ColumnMapper"===U&&i.createElement(Na,{toggled:Q,onClick:Z}),D&&("ColumnMapper"===U||"MappingTable"===U)&&i.createElement(La,{onClick:L}),D&&("ColumnMapper"===U||"MappingTable"===U)&&i.createElement(Va,{onClick:_})))}),[n,o,c,p,I,k,w,A,_,m,f,E,U,b,G,j,y,H,W,x,X,Y,M,Q,Z,D,L]);return{activeView:U,showMappingPreview:G,showTypes:H,showMappedFields:X,showUnmappedFields:Q,contextToolbar:$}}(y({showImportAtlasFileToolbarItem:r,showImportJarFileToolbarItem:r,showExportAtlasFileToolbarItem:l,showResetToolbarItem:u},E,{onImportADMArchiveFile:ne.onImportADMArchive,onImportJarFile:function(e){return O(e)},onExportAtlasFile:ne.onExportADMArchive,onResetAtlasmap:ne.onResetAtlasmap,onAbout:ne.onAbout})),re=ie.activeView,oe=ie.showMappingPreview,le=ie.showTypes,ce=ie.contextToolbar,se=a.useCallback((function(e){return oe&&!!k&&e.isConnected&&!!e.mappings.find((function(e){return e.id===k.id}))}),[k,oe]),ue=a.useCallback((function(e){return oe&&!!k&&e.id===k.id}),[k,oe]),pe=i.createElement(Yn,null,i.createElement(gn,{mappingExpression:H?R:void 0,executeFieldSearch:N,getFieldEnums:L,mappingExpressionAddField:U,mappingExpressionClearText:z,isMappingExpressionEmpty:W,mappingExpressionInit:B,mappingExpressionInsertText:G,mappingExpressionObservable:j,mappingExpressionRemoveField:q,trailerId:J,disabled:!k,onToggle:ne.onToggleExpressionMode,setSelectedEnumValue:V})),de=a.useMemo((function(){return{isSource:!0,acceptDropType:"target",draggableType:"source",canDrop:function(e,t){return Y("target",t.payload,e)},onDrop:function(e,t){return $(e,null==t?void 0:t.payload)},onShowMappingDetails:w,onAddToSelectedMapping:Q,canAddToSelectedMapping:X,canAddFieldToSelectedMapping:function(e){return Y("source",e)},onAddFieldToSelectedMapping:Q,canRemoveFromSelectedMapping:function(e){return K("source",e)},onRemoveFromSelectedMapping:Z,onCreateConstant:function(){return ne.onCreateConstant(M)},onEditConstant:function(e,t){var n=e,a=t,i=Ae(n);ne.onEditConstant({name:n,value:a,valueType:i},M)},onDeleteConstant:ne.onDeleteConstant,onCreateProperty:function(e){ne.onCreateProperty(e,x)},onEditProperty:function(e,t,n){var a=e.split(" ")[0],i=Re(a,t,n);ne.onEditProperty({name:a,valueType:i,scope:t},!0,x)},onDeleteProperty:ne.onDeleteProperty,onDeleteDocument:d?function(e){return ne.onDeleteDocument(e,!0)}:void 0,onCaptureDocumentID:function(e){return ne.onCaptureDocumentID(e)},onChangeDocumentName:function(e,t){return ne.onChangeDocumentName({id:e,name:t,isSource:!0})},onCustomClassSearch:g?function(e){return ne.onEnableCustomClass(e)}:void 0,onImportDocument:r?function(e){return ne.onImportDocument(e,!0)}:void 0,onSearch:_,shouldShowMappingPreviewForField:se,onFieldPreviewChange:A,canStartMapping:function(){return!0},onStartMapping:function(e){return $(e,void 0)},onEditCSVParams:function(e,t){ne.onEditCSVParams(e,t)}}}),[w,Q,Z,ne,M,d,g,r,_,se,A,$,X,Y,K,x]),me=a.useMemo((function(){return{isSource:!1,acceptDropType:"source",draggableType:"target",canDrop:function(e,t){return Y("source",t.payload,e)},onDrop:function(e,t){return $(null==t?void 0:t.payload,e)},canAddToSelectedMapping:X,canAddFieldToSelectedMapping:function(e){return Y("target",e)},onShowMappingDetails:w,onAddToSelectedMapping:Q,canRemoveFromSelectedMapping:function(e){return K("target",e)},onRemoveFromSelectedMapping:Z,onCreateProperty:function(e){ne.onCreateProperty(e,T)},onEditProperty:function(e,t,n){var a=e.split(" ")[0],i=Re(a,t,n);ne.onEditProperty({name:a,valueType:i,scope:t},!1,T)},onDeleteProperty:ne.onDeleteProperty,onDeleteDocument:d?function(e){return ne.onDeleteDocument(e,!1)}:void 0,onCaptureDocumentID:function(e){return ne.onCaptureDocumentID(e)},onChangeDocumentName:function(e,t){return ne.onChangeDocumentName({id:e,name:t,isSource:!1})},onCustomClassSearch:g?function(e){return ne.onEnableCustomClass(e)}:void 0,onImportDocument:r?function(e){return ne.onImportDocument(e,!1)}:void 0,onSearch:P,shouldShowMappingPreviewForField:se,onFieldPreviewChange:A,canStartMapping:function(e){return!e.isConnected},onStartMapping:function(e){return $(void 0,e)},onEditCSVParams:function(e,t){ne.onEditCSVParams(e,t)}}}),[w,Q,Z,ne,d,g,r,P,se,A,$,X,Y,K,T]),ge=a.useMemo((function(){switch(re){case"ColumnMapper":return i.createElement(xa,{sourceProperties:x,targetProperties:T,constants:M,sources:F,mappings:I,targets:D,selectedMappingId:null==k?void 0:k.id,onSelectMapping:w,showMappingPreview:oe,showTypes:le,sourceEvents:de,targetEvents:me});case"MappingTable":return i.createElement(ya,{mappings:I,onSelectMapping:w,shouldShowMappingPreview:ue,onFieldPreviewChange:A});case"NamespaceTable":return i.createElement(Sa,{sources:F,onCreateNamespace:ne.onCreateNamespace,onEditNamespace:function(e,t,n,a,i){return ne.onEditNamespace(e,{alias:t,uri:n,locationUri:a,targetNamespace:i})},onDeleteNamespace:ne.deleteNamespace});default:return i.createElement(i.Fragment,null,"TODO")}}),[re,M,ne,I,A,x,T,w,k,ue,oe,le,de,F,me,D]),fe=function(e){var n=e.onCreateConstant,r=e.onCreateProperty,o=e.onRemoveMapping,l=e.onEditEnum,c=e.isEnumMapping,s=qa(),u=s.selectedMapping,p=s.deselectMapping,d=s.removeMappedFieldFromCurrentMapping,m=s.fromMappedFieldToIMappingField,g=s.flatSources,f=s.flatTargets,v=s.constants,E=s.sourceProperties,h=s.targetProperties,b=s.canAddToSelectedMapping,C=s.isFieldAddableToSelection,y=s.addToCurrentMapping,S=s.notifications,x=s.markNotificationRead,T=s.mappingExpressionEnabled,M=s.getMultiplicityActions,F=s.getMultiplicityActionDelimiters,D=s.handleIndexChange,I=s.handleNewTransformation,k=s.handleRemoveTransformation,w=s.handleTransformationChange,A=s.handleTransformationArgumentChange,_=s.handleMultiplicityChange,P=s.handleMultiplicityArgumentChange;return a.useCallback((function(){if(u){var e=u.mapping,a=e.getMappedFields(!0).map(m),s=e.getMappedFields(!1).map(m),O=a.length>1&&e.transition.isManyToOneMode()&&!e.transition.enableExpression,R=s.length>1&&e.transition.isOneToManyMode()&&!e.transition.enableExpression,N=e.transition.transitionFieldAction,L=void 0;if(N){var V=M(e).map((function(e){return{label:t.CommonUtil.toDisplayable(e.name),name:e.name,value:e.name}})),U=F().map((function(e){return{name:e.prettyName,value:e.actualDelimiter}}));L={name:N.name,transformationsOptions:V,transformationsArguments:N.argumentValues.map((function(e){var n,a;return{label:t.CommonUtil.toDisplayable(e.name),name:e.name,type:null===(n=N.definition)||void 0===n||null===(a=n.arguments.find((function(t){return t.name===e.name})))||void 0===a?void 0:a.type,value:e.value,options:"delimiter"===e.name?U:void 0}})),onChange:function(e){return _(N,e)},onArgumentChange:function(e,t){return P(N,e,t)}}}var z=[null==v?void 0:v.fields,null==E?void 0:E.fields,g].flatMap((function(e){return e||[]})).filter((function(e){return C("source",e)})),B=[null==h?void 0:h.fields,f].flatMap((function(e){return e||[]})).filter((function(e){return C("target",e)}));return i.createElement(ha,{notifications:S.filter((function(e){return e.mappingId===u.id&&!e.isRead})),sources:a,targets:s,addableSources:z,addableTargets:B,onClose:p,onRemoveMapping:o,onRemoveMappedField:function(e,t){var n=u.mapping.getMappedFieldForIndex(""+(t+1),e);n&&d(n)},showSourcesIndex:O,showTargetsIndex:R,mappingExpressionEnabled:T,multiplicity:L,onIndexChange:D,onNewTransformation:I,onRemoveTransformation:k,onTransformationChange:w,onTransformationArgumentChange:A,onAddFieldToMapping:function(e,t){return y(t.amField)},onNotificationRead:x,onEditEnum:l,isEnumMapping:c,onCreateConstant:n,onCreateProperty:function(e){r(e,e?E:h,!0)},canAddToSelectedMapping:b})}return i.createElement(i.Fragment,null,"TODO: error")}),[u,m,v,E,h,g,f,S,p,o,l,c,D,I,k,w,A,x,M,F,_,P,d,C,y,T,n,r,b])}({onCreateConstant:function(){ne.onCreateConstant(M,!0)},onCreateProperty:function(e){ne.onCreateProperty(e,e?x:T,!0)},onRemoveMapping:ne.onDeleteSelectedMapping,onEditEnum:ne.onEditMappingEnumeration,isEnumMapping:ee});return i.createElement(Rt,null,i.createElement(ot,null,i.createElement(Zn,{loading:b,contextToolbar:ce,expressionToolbar:"NamespaceTable"!==re&&pe,showSidebar:!!k,renderSidebar:fe},ge),i.createElement(Ht,null),i.createElement(s.AlertGroup,{isToast:!0},C.filter((function(e){return!e.isRead&&!e.mappingId})).slice(0,5).map((function(e){var t=e.id;return i.createElement(Bn,{variant:e.variant,title:e.title,key:t,onClose:function(){return S(t)},onTimeout:function(){return S(t)}},e.description)}))),ae))},exports.AtlasmapProvider=function(e){var n=e.baseJavaInspectionServiceUrl,r=e.baseXMLInspectionServiceUrl,o=e.baseJSONInspectionServiceUrl,l=e.baseCSVInspectionServiceUrl,c=e.baseMappingServiceUrl,s=e.externalDocument,u=e.onMappingChange,p=e.logLevel,d=e.children,m=a.useReducer(za,{},Ua),g=m[0],f=m[1],v=a.useReducer(Ga,{},Ba),E=v[0],h=v[1],b=function(){f({type:"reset"}),h({type:"reset"})},S=function(){f({type:"loading"})};a.useEffect((function(){var e;b(),W.resetConfig();var a=W.cfg;if(null===(e=a.logger)||void 0===e||e.setLevel(p),a.initCfg.baseMappingServiceUrl=c,a.initCfg.baseJavaInspectionServiceUrl=n,a.initCfg.baseXMLInspectionServiceUrl=r,a.initCfg.baseJSONInspectionServiceUrl=o,a.initCfg.baseCSVInspectionServiceUrl=l,s){s.inputDocuments.forEach((function(e){var n=new t.DocumentInitializationModel;n.type=e.documentType,n.inspectionType=e.inspectionType,n.inspectionSource=e.inspectionSource,n.inspectionParameters=e.inspectionParameters,n.inspectionResult=e.inspectionResult,n.id=e.id,n.name=e.name,n.description=e.description,n.isSource=!0,n.showFields=e.showFields,a.addDocument(n)}));var i=new t.DocumentInitializationModel;i.type=s.outputDocument.documentType,i.inspectionType=s.outputDocument.inspectionType,i.inspectionSource=s.outputDocument.inspectionSource,i.inspectionParameters=s.outputDocument.inspectionParameters,i.inspectionResult=s.outputDocument.inspectionResult,i.id=s.outputDocument.id,i.name=s.outputDocument.name,i.description=s.outputDocument.description,i.isSource=!1,i.showFields=s.outputDocument.showFields,a.addDocument(i),s.initialMappings&&(a.preloadedMappingJson=s.initialMappings)}W.initialize(),S()}),[l,o,n,c,r,s,p]);var x=W.cfg,T=a.useCallback((function(){return x.sourceDocs.map(Z).filter((function(e){return e}))}),[x]),M=a.useCallback((function(){return Z(x.constantDoc)}),[x]),F=a.useCallback((function(){return Z(x.sourcePropertyDoc)}),[x]),D=a.useCallback((function(){return Z(x.targetPropertyDoc)}),[x]),I=a.useCallback((function(){return x.targetDocs.map(Z).filter((function(e){return e}))}),[x]),k=a.useCallback((function(){return re(x.mappings)}),[x]),w=a.useCallback((function(){var e;return ie(null===(e=x.mappings)||void 0===e?void 0:e.activeMapping)}),[x]),A=a.useCallback((function(){return x.sourceDocs.flatMap((function(e){return e.getAllFields().flatMap((function(e){var t=Y(e);return t?[t]:[]}))}))}),[x]),_=a.useCallback((function(){return x.targetDocs.flatMap((function(e){return e.getAllFields().flatMap((function(e){var t=Y(e);return t?[t]:[]}))}))}),[x]),P=a.useCallback((function(e){var t;t={pending:!x.initCfg.initialized,error:x.initCfg.initializationErrorOccurred,sources:T(),constants:M(),sourceProperties:F(),targets:I(),targetProperties:D(),mappings:k(),selectedMapping:w(),flatSources:A(),flatTargets:_()},f({type:"update",payload:t}),h({type:"update",payload:{notifications:x.errorService.getErrors().reverse().filter((function(e){return"DEBUG"!==e.level})).map(ae)}})}),[x,M,k,w,T,F,A,I,D,_]);return a.useEffect((function(){var e=g.pending?1e3:50,t=W.systemInitializedSource.pipe(C.debounceTime(e)),n=x.mappingService.lineRefreshSource.pipe(C.debounceTime(e)),a=x.mappingService.mappingUpdatedSource.pipe(C.debounceTime(e)),i=x.previewService.mappingPreviewOutput$.pipe(C.debounceTime(e)),r=[t.subscribe((function(){return P("initializationObservable")})),a.subscribe((function(){return P("mappingUpdatedSource")})),i.subscribe((function(){return P("mappingPreviewOutput$")})),n.subscribe((function(){return P("lineRefreshObservable")})),x.errorService.subscribe((function(){return P("errorService")}))];return function(){r.forEach((function(e){return e.unsubscribe()}))}}),[n,r,o,l,c,x,g.pending,g.selectedMapping,P]),a.useEffect((function(){u&&x.mappingService.mappingUpdatedSource.subscribe((function(){x.initCfg.initialized&&u(JSON.stringify(t.MappingSerializer.serializeMappings(x)))}))}),[x,u]),i.createElement(ja.Provider,{value:y({},g,E,{onLoading:S,onReset:b,markNotificationRead:function(e){return h({type:"dismiss",payload:{id:e}})}})},d)},exports.AutoDropdown=Jt,exports.Canvas=pt,exports.CanvasProvider=ot,exports.CanvasTransforms=ct,exports.CaptureDocumentIDAction=ea,exports.ChangeDocumentNameAction=ta,exports.ChangeDocumentNameDialog=bn,exports.Column=Tt,exports.ColumnBody=Mt,exports.ColumnHeader=Dt,exports.ColumnMapper=It,exports.Columns=kt,exports.ConditionalExpressionInput=gn,exports.ConfirmationDialog=vn,exports.ConstantDialog=En,exports.ContextToolbar=Xn,exports.CustomClassDialog=hn,exports.DelayedBoolean=Mn,exports.DeleteDocumentAction=na,exports.DeleteMappingAction=function(e){var t=e.id,n=e.onClick;return i.createElement(s.Tooltip,{position:"auto",enableFlip:!0,content:i.createElement("div",null,"Remove the mapping")},i.createElement(s.Button,{variant:"plain",onClick:n,"aria-label":"Remove the mapping","data-testid":"remove-"+t+"-mapping-button"},i.createElement(u.TrashIcon,null)))},exports.Document=Dn,exports.DocumentActions=function(e){var t=e.onExpandFields,n=e.onCollapseFields,r=e.onDelete,o=a.useState(!1),l=o[0],c=o[1];return i.createElement(s.Dropdown,{toggle:i.createElement(s.DropdownToggle,{splitButtonItems:[i.createElement(s.DropdownToggleAction,{key:"action",onClick:t},i.createElement(u.FolderOpenIcon,null))],splitButtonVariant:"action",onToggle:function(e){return c(e)}}),isOpen:l,position:"right",dropdownItems:[i.createElement(s.DropdownItem,{icon:i.createElement(u.FolderCloseIcon,null),key:"collapse",onClick:n},"Collapse all"),i.createElement(s.DropdownSeparator,{key:"sep-1"}),i.createElement(s.DropdownItem,{icon:i.createElement(u.TrashIcon,null),key:"delete",onClick:r},"Remove instance or schema file")]})},exports.DocumentField=In,exports.DocumentFieldPreview=kn,exports.DocumentFieldPreviewResults=wn,exports.DocumentFooter=An,exports.DocumentGroup=_n,exports.DraggableField=jt,exports.DraggedField=Gt,exports.EditCSVParamsAction=aa,exports.EditMappingAction=function(e){var t=e.id,n=e.onClick;return i.createElement(s.Tooltip,{position:"auto",enableFlip:!0,content:i.createElement("div",null,"Modify the mapping")},i.createElement(s.Button,{variant:"plain",onClick:n,"aria-label":"Modify the mapping","data-testid":"modify-the-mapping-"+t+"-button"},i.createElement(u.ExchangeAltIcon,null)))},exports.EnableJavaClassAction=ia,exports.ExportCatalogDialog=Cn,exports.ExpressionContent=mn,exports.ExpressionNode=z,exports.ExpressionToolbar=Yn,exports.FieldDragLayer=Ht,exports.FieldDropTarget=qt,exports.FieldNode=G,exports.FieldsDndProvider=Rt,exports.HTMLObject=dt,exports.ImportAction=ra,exports.Loading=Pn,exports.LookupTableDialog=yn,exports.MAPPINGS_DOCUMENT_ID_PREFIX="mappings-document-",exports.MAPPINGS_DROP_TYPE="mapping",exports.MAPPINGS_FIELD_ID_PREFIX="mappings-field-",exports.MAPPINGS_HEIGHT_BOUNDARY_ID="mappings-height",exports.MAPPINGS_WIDTH_BOUNDARY_ID="mappings-width",exports.MainContent=Kn,exports.MainLayout=Zn,exports.MappingDetailsSidebar=$n,exports.MappingDetailsView=ha,exports.MappingField=Un,exports.MappingFields=zn,exports.MappingTableView=ya,exports.MappingTransformation=Ln,exports.NamespaceDialog=Sn,exports.NamespaceTableView=Sa,exports.NodeRef=bt,exports.NodeRefContext=ft,exports.NodeRefProvider=vt,exports.NodesArc=xt,exports.ParametersDialog=Tn,exports.PropertyDialog=xn,exports.SOURCES_CONSTANTS_ID="sources-constants",exports.SOURCES_DOCUMENT_ID_PREFIX="sources-document-",exports.SOURCES_DRAGGABLE_TYPE="source",exports.SOURCES_FIELD_ID_PREFIX="sources-field-",exports.SOURCES_HEIGHT_BOUNDARY_ID="sources-height",exports.SOURCES_PROPERTIES_ID="sources-properties",exports.SOURCES_WIDTH_BOUNDARY_ID="sources-width",exports.SearchableColumnHeader=wt,exports.Sidebar=Qn,exports.SourceTargetLinks=va,exports.SourceTargetView=xa,exports.SourcesColumn=ga,exports.TARGETS_DOCUMENT_ID_PREFIX="targets-document-",exports.TARGETS_DRAGGABLE_TYPE="target",exports.TARGETS_FIELD_ID_PREFIX="targets-field-",exports.TARGETS_HEIGHT_BOUNDARY_ID="targets-height",exports.TARGETS_PROPERTIES_ID="targets-properties",exports.TARGETS_WIDTH_BOUNDARY_ID="targets-width",exports.TargetsColumn=fa,exports.TextNode=B,exports.TimedToast=Bn,exports.TraverseFields=sa,exports.Tree=Hn,exports.TreeFocusProvider=jn,exports.TreeGroup=Wn,exports.TreeItem=Jn,exports.TruncatedString=Fn,exports.WithCanvas=function(e){return(0,e.children)(lt())},exports.addToCurrentMapping=Ue,exports.changeDocumentName=w,exports.commonActions=pa,exports.configModel=J,exports.copyToClipboard=H,exports.createConstant=Ie,exports.createMapping=Ne,exports.createNamespace=A,exports.createProperty=_e,exports.deleteAtlasFile=Je,exports.deleteConstant=ke,exports.deleteNamespace=P,exports.deleteProperty=Pe,exports.deselectMapping=De,exports.documentExists=Xe,exports.editConstant=we,exports.editNamespace=_,exports.editProperty=Oe,exports.enableCustomClass=N,exports.errorInfoToNotification=ae,exports.errorLevelToVariant=ee,exports.errorMessageToString=te,exports.errorTypeToString=ne,exports.executeFieldSearch=oe,exports.exportADMArchiveFile=Ye,exports.fromDocumentDefinitionToFieldGroup=Z,exports.fromFieldToIFields=K,exports.fromFieldToIFieldsGroup=X,exports.fromFieldToIFieldsNode=Y,exports.fromMappedFieldToIMappingField=$,exports.fromMappingDefinitionToIMappings=re,exports.fromMappingModelToImapping=ie,exports.fromNamespaceModelToINamespace=Q,exports.getConstantType=Ae,exports.getConstantTypeIndex=function(e){return t.ConfigModel.getConfig().documentService.getConstantTypeIndex(e)},exports.getCustomClassNameOptions=I,exports.getDocCSVParams=V,exports.getDocDef=O,exports.getDocDefByName=R,exports.getEnumerationValues=Ge,exports.getExpression=j,exports.getField=function(e,n){for(var a,i=null,r=M(W.cfg.getDocs(n));!(a=r()).done&&!(i=t.Field.getField(e,a.value.getAllFields())););return i},exports.getFieldEnums=je,exports.getMappingActions=fe,exports.getMappingExpression=q,exports.getMultiplicityActionDelimiters=Ee,exports.getMultiplicityActions=ve,exports.getPropertyScopeOptions=L,exports.getPropertyType=Re,exports.getPropertyTypeIndex=function(e,n,a){return t.ConfigModel.getConfig().documentService.getPropertyTypeIndex(e,n,a)},exports.getRuntimeVersion=$e,exports.getUIVersion=et,exports.handleActionChange=he,exports.handleIndexChange=be,exports.handleMultiplicityArgumentChange=Me,exports.handleMultiplicityChange=Te,exports.handleNewTransformation=Ce,exports.handleRemoveTransformation=xe,exports.handleTransformationArgumentChange=Se,exports.handleTransformationChange=ye,exports.importADMArchiveFile=Ke,exports.importInstanceSchema=D,exports.importJarFile=Qe,exports.initializationService=W,exports.initializeMappingExpression=dn,exports.isEnumerationMapping=We,exports.mappingExpressionAddField=le,exports.mappingExpressionClearText=se,exports.mappingExpressionInit=ce,exports.mappingExpressionInsertText=ue,exports.mappingExpressionObservable=pe,exports.mappingExpressionRemoveField=de,exports.newMapping=Le,exports.onFieldPreviewChange=me,exports.removeDocumentRef=k,exports.removeFromCurrentMapping=ze,exports.removeMappedFieldFromCurrentMapping=Be,exports.removeMapping=Ve,exports.resetAtlasmap=Ze,exports.selectMapping=Fe,exports.setDocCSVParams=F,exports.setSelectedEnumValue=qe,exports.toggleExpressionMode=ge,exports.toggleMappingPreview=tt,exports.toggleShowMappedFields=nt,exports.toggleShowUnmappedFields=at,exports.trailerId="expression-trailer",exports.updateEnumerationValues=He,exports.useAtlasmap=qa,exports.useAtlasmapDialogs=Za,exports.useBoundingCanvasRect=gt,exports.useCanvas=lt,exports.useDimensions=ut,exports.useFieldsDnd=Nt,exports.useInputTextSelectDialog=function(e){var t=e.title,n=e.textLabel1,r=e.textValue1,o=e.text1ReadOnly,l=e.textLabel2,c=e.textValue2,u=e.selectLabel,p=e.selectValues,d=e.selectDefault,m=e.modalContainer,g=a.useRef(),f=a.useRef(),E=a.useState(!1),h=E[0],b=E[1],C=a.useState(!0),y=C[0],S=C[1],x=a.useState(r.current),T=x[0],M=x[1],F=a.useState(c.current),D=F[0],I=F[1],k=a.useState(""),w=k[0],A=k[1],_=function(){return b(!1)},P=a.useCallback((function(){y&&g.current&&g.current(T,D,w),_()}),[g,T,D,w,y]),O=a.useCallback((function(){f.current&&f.current(),_()}),[f]);return[v.createPortal(i.createElement(s.Modal,{variant:"small",title:t,isOpen:h,onClose:_,actions:[i.createElement(s.Button,{key:"confirm",variant:"primary",onClick:P,isDisabled:!y,"aria-label":"Confirm","data-testid":"text-select-dialog-confirm-button"},"Confirm"),i.createElement(s.Button,{key:"cancel",variant:"link",onClick:O,"aria-label":"Cancel","data-testid":"text-select-dialog-cancel-button"},"Cancel")]},n&&i.createElement(i.Fragment,null,i.createElement(s.TextInput,{className:"useInputTextSelectDialog-module_iGroupTextLabel__2jreO",value:T,type:"text",onChange:function(e,t){M(e),S(t.target.reportValidity())},"aria-label":t,isRequired:!0,validated:y?"default":"error",isDisabled:o,placeholder:n,"data-testid":"itsd-value1-text-input",autoFocus:!0})),l.length>0&&i.createElement(i.Fragment,null,i.createElement(s.TextInput,{className:"useInputTextSelectDialog-module_iGroupTextLabel__2jreO",value:D,type:"text",onChange:function(e,t){I(e),S(t.target.reportValidity())},"aria-label":t,isRequired:!0,validated:y?"default":"error",placeholder:l,"data-testid":"itsd-value2-text-input"})),u&&i.createElement(i.Fragment,null,i.createElement(s.Label,{className:"useInputTextSelectDialog-module_iSelectLabel__VPLwx"},u),i.createElement(s.FormSelect,{className:"useInputTextSelectDialog-module_iSelectBody__3ldUg",value:w,id:w,onChange:function(e){A(e)},"data-testid":"itsd-form-select"},p.map((function(e,t){return i.createElement(s.FormSelectOption,{label:e[1],value:e[0],key:t})}))))),m),function(e,t){g.current=e,f.current=t,b(!0),M(r.current),I(c.current),A(p[d.current][0])}]},exports.useLatestValue=function(){var e=a.useState(),t=e[0],n=e[1],i=a.useRef();return[t,a.useCallback((function(e){i.current!==e&&(i.current=e,n(i.current))}),[n,i])]},exports.useNodeRect=ht,exports.useNodeRef=Et,exports.useToggle=it,exports.useTreeFocus=qn;
//# sourceMappingURL=atlasmap.cjs.production.min.js.map
