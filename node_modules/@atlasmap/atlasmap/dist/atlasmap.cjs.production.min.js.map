{"version":3,"file":"atlasmap.cjs.production.min.js","sources":["../src/impl/utils/document.ts","../src/impl/utils/expression.ts","../src/impl/utils/ui.ts","../src/impl/utils/field.ts","../src/impl/utils/toolbar.ts","../src/impl/utils/useToggle.ts","../src/UI/Canvas/CanvasContext.tsx","../src/UI/Canvas/CanvasTransforms.tsx","../src/UI/useDimensions.ts","../src/UI/Canvas/Canvas.tsx","../src/UI/Canvas/HTMLObject.tsx","../src/UI/Canvas/Arc.tsx","../src/UI/Canvas/useBoundingCanvasRect.ts","../src/UI/Canvas/NodeRefProvider.tsx","../src/UI/Canvas/NodeRef.tsx","../src/UI/Canvas/NodesArc.tsx","../src/UI/ColumnMapper/Column.tsx","../src/UI/ColumnMapper/ColumnBody.tsx","../src/UI/Actions.tsx","../src/UI/ColumnMapper/ColumnHeader.tsx","../src/UI/ColumnMapper/ColumnMapper.tsx","../src/UI/ColumnMapper/Columns.tsx","../src/UI/ColumnMapper/SearchableColumnHeader.tsx","../src/UI/dnd/FieldsDndProvider.tsx","../src/UI/ExpressionContent.tsx","../src/UI/dnd/DraggedField.tsx","../src/UI/dnd/DraggableField.tsx","../src/UI/dnd/FieldDropTarget.tsx","../src/UI/dnd/FieldDragLayer.tsx","../src/UI/AddFieldTypeahead.tsx","../src/UI/AutoDropdown.tsx","../src/UI/ExpressionEnumSelect.tsx","../src/UI/ExpressionFieldSearch.tsx","../src/UI/ConditionalExpressionInput.tsx","../src/UI/dialogs/AboutDialog.tsx","../src/UI/dialogs/ConfirmationDialog.tsx","../src/UI/dialogs/ConstantDialog.tsx","../src/UI/dialogs/CustomClassDialog.tsx","../src/UI/dialogs/ChangeDocumentNameDialog.tsx","../src/UI/dialogs/ExportCatalogDialog.tsx","../src/UI/dialogs/LookupTableDialog.tsx","../src/UI/dialogs/NamespaceDialog.tsx","../src/UI/dialogs/PropertyDialog.tsx","../src/UI/dialogs/ParametersDialog.tsx","../src/UI/DelayedBoolean.tsx","../src/UI/TruncatedString.tsx","../src/UI/Document.tsx","../src/UI/DocumentField.tsx","../src/UI/DocumentFieldPreview.tsx","../src/UI/DocumentFieldPreviewResults.tsx","../src/UI/DocumentFooter.tsx","../src/UI/DocumentGroup.tsx","../src/UI/Loading.tsx","../src/UI/MappingTransformation.tsx","../src/UI/MappingField.tsx","../src/UI/MappingFields.tsx","../src/UI/TimedToast.tsx","../src/UI/Tree/TreeFocusProvider.tsx","../src/UI/Tree/Tree.tsx","../src/UI/Tree/TreeGroup.tsx","../src/UI/Tree/TreeItem.tsx","../src/Layout/ContextToolbar.tsx","../src/Layout/ExpressionToolbar.tsx","../src/Layout/MainContent.tsx","../src/Layout/Sidebar.tsx","../src/Layout/MainLayout.tsx","../src/Layout/MappingDetailsSidebar.tsx","../src/Views/ColumnMapperView/Actions/CaptureDocumentIDAction.tsx","../src/Views/ColumnMapperView/Actions/ChangeDocumentNameAction.tsx","../src/Views/ColumnMapperView/Actions/DeleteDocumentAction.tsx","../src/Views/ColumnMapperView/Actions/EditCSVParamsAction.tsx","../src/Views/ColumnMapperView/Actions/EnableJavaClassAction.tsx","../src/Views/ColumnMapperView/Actions/ImportAction.tsx","../src/Views/ColumnMapperView/Columns/TreeGroupAndNodeRefsAndDnD.tsx","../src/Views/ColumnMapperView/Columns/TreeItemFieldAndNodeRefsAndDnD.tsx","../src/Views/ColumnMapperView/Columns/TraverseFields.tsx","../src/Views/ColumnMapperView/Columns/commonActions.tsx","../src/Views/ColumnMapperView/Columns/ConstantsTree.tsx","../src/Views/ColumnMapperView/Columns/constants.ts","../src/Views/ColumnMapperView/Columns/PropertiesTree.tsx","../src/Views/ColumnMapperView/Columns/SourcesColumn.tsx","../src/Views/ColumnMapperView/Columns/TargetsColumn.tsx","../src/Views/ColumnMapperView/Links/SourceTargetLinks.tsx","../src/Views/MappingDetailsView.tsx","../src/Views/MappingTableView.tsx","../src/Views/NamespaceTableView.tsx","../src/Views/SourceTargetView.tsx","../src/impl/toolbarItems.tsx","../src/impl/reducers/data.ts","../src/impl/reducers/notifications.ts","../src/impl/AtlasmapProvider.tsx","../src/impl/dialogs/useConfirmationDialog.tsx","../src/impl/dialogs/useConstantDialog.tsx","../src/impl/dialogs/useCaptureDocumentIDToast.tsx","../src/impl/dialogs/useParametersDialog.tsx","../src/impl/dialogs/useSpecifyInstanceSchemaDialog.tsx","../src/impl/dialogs/useNamespaceDialog.tsx","../src/impl/dialogs/usePropertyDialog.tsx","../src/impl/useAtlasmapDialogs.tsx","../src/impl/dialogs/useRemoveMappedFieldDialog.tsx","../src/impl/dialogs/useDeleteConstantDialog.tsx","../src/impl/dialogs/useDeletePropertyDialog.tsx","../src/impl/dialogs/useImportADMArchiveDialog.tsx","../src/impl/dialogs/useExportADMArchiveDialog.tsx","../src/impl/dialogs/useResetAtlasmapDialog.tsx","../src/impl/dialogs/useAboutDialog.tsx","../src/impl/dialogs/useToggleExpressionModeDialog.tsx","../src/impl/dialogs/useImportDocumentDialog.tsx","../src/impl/dialogs/useDeleteDocumentDialog.tsx","../src/impl/dialogs/useChangeDocumentNameDialog.tsx","../src/impl/dialogs/useDeleteMappingDialog.tsx","../src/impl/dialogs/useEditMappingEnumerationDialog.tsx","../src/impl/dialogs/useCustomClassDialog.tsx","../src/UI/Canvas/ArcEdge.tsx","../src/impl/Atlasmap.tsx","../src/impl/useContextToolbar.tsx","../src/impl/useSidebar.tsx","../src/Views/ColumnMapperView/Actions/DeleteMappingAction.tsx","../src/UI/DocumentActions.tsx","../src/Views/ColumnMapperView/Actions/EditMappingAction.tsx","../src/UI/useInputTextSelectDialog.tsx","../src/UI/useLatestValue.tsx"],"sourcesContent":["/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  CollectionType,\n  CommonUtil,\n  ConfigModel,\n  DocumentDefinition,\n  NamespaceModel,\n} from '@atlasmap/core';\n\n/**\n * Modify the document name of the document specified by the document ID.\n *\n * @param docId\n * @param newDocName\n * @param isSource\n */\nexport async function changeDocumentName(\n  docId: string,\n  newDocName: string,\n  isSource: boolean,\n) {\n  const cfg = ConfigModel.getConfig();\n  const docDef = getDocDef(docId, cfg, isSource);\n  docDef.name = newDocName;\n  await cfg.mappingService.notifyMappingUpdated();\n  await cfg.fileService.updateDigestFile();\n}\n\n/**\n * Create a new namespace for the supplied XML document.\n *\n * @param docName\n * @param alias\n * @param uri\n * @param locationUri\n */\nexport function createNamespace(\n  docName: string,\n  alias: string,\n  uri: string,\n  locationUri: string,\n  isTarget: boolean,\n) {\n  const cfg = ConfigModel.getConfig();\n  const docDef = getDocDefByName(docName, cfg, true);\n  const namespace: NamespaceModel = {\n    alias: alias,\n    uri: uri,\n    locationUri: locationUri,\n    createdByUser: true,\n    isTarget: isTarget,\n    getPrettyLabel: () => alias + ' [' + uri + ']',\n    copy: () => Object.assign({}, namespace),\n    copyFrom: (n: NamespaceModel) => Object.assign(namespace, n),\n  };\n  docDef.namespaces.push(namespace);\n  cfg.mappingService.notifyMappingUpdated();\n}\n\nexport function editNamespace(\n  docName: string,\n  initAlias: string,\n  alias: string,\n  uri: string,\n  locationUri: string,\n  isTarget: boolean,\n) {\n  const cfg = ConfigModel.getConfig();\n  const docDef = getDocDefByName(docName, cfg, true);\n  const namespace = docDef.getNamespaceForAlias(initAlias);\n  namespace.alias = alias;\n  namespace.uri = uri;\n  namespace.locationUri = locationUri;\n  namespace.isTarget = isTarget;\n  cfg.mappingService.notifyMappingUpdated();\n}\n\nexport function deleteNamespace(docName: string, alias: string) {\n  const cfg = ConfigModel.getConfig();\n  const docDef = getDocDefByName(docName, cfg, true);\n  docDef.namespaces = docDef.namespaces.filter(\n    (namespace: { alias: string }) => namespace.alias !== alias,\n  );\n  cfg.mappingService.notifyMappingUpdated();\n}\n\n/**\n * Remove a document from the UI and backend service.\n *\n * @param docDef\n * @param cfg\n */\nexport async function removeDocumentRef(\n  docDef: DocumentDefinition,\n  cfg: ConfigModel,\n): Promise<boolean> {\n  return new Promise<boolean>(async (resolve) => {\n    cfg.mappingService.removeDocumentReferenceFromAllMappings(docDef.id);\n    if (docDef.isSource) {\n      CommonUtil.removeItemFromArray(docDef, cfg.sourceDocs);\n    } else {\n      CommonUtil.removeItemFromArray(docDef, cfg.targetDocs);\n    }\n    await cfg.mappingService.notifyMappingUpdated();\n    await cfg.fileService.updateDigestFile();\n    resolve(true);\n  });\n}\n\n/**\n * Return the document definition associated with the specified document ID.\n *\n * @param docId - document ID\n * @param cfg\n * @param isSource\n */\nexport function getDocDef(\n  docId: string,\n  cfg: ConfigModel,\n  isSource: boolean,\n): DocumentDefinition {\n  for (const docDef of cfg.getDocs(isSource)) {\n    if (docDef.id.match(docId)) {\n      return docDef;\n    }\n  }\n  return null as unknown as DocumentDefinition;\n}\n\n/**\n * Return the document definition associated with the specified document name.\n *\n * @param docName - document name\n * @param cfg\n * @param isSource\n */\nexport function getDocDefByName(\n  docName: string,\n  cfg: ConfigModel,\n  isSource: boolean,\n): DocumentDefinition {\n  for (const docDef of cfg.getDocs(isSource)) {\n    const candidateDocName =\n      docDef.getName(false) + '.' + docDef.type.toLowerCase();\n    if (candidateDocName.match(docName)) {\n      return docDef;\n    }\n  }\n  return null as unknown as DocumentDefinition;\n}\n\n/**\n * Determine the user-defined class names associated with previously\n * imported JARs.\n */\nexport async function getCustomClassNameOptions(): Promise<string[]> {\n  return new Promise<string[]>(async (resolve, reject) => {\n    const cfg = ConfigModel.getConfig();\n    cfg.documentService\n      .getLibraryClassNames()\n      .then((classNames: string[]) => {\n        resolve(classNames);\n      })\n      .catch(() => {\n        reject();\n      });\n  });\n}\n\n/**\n * Import a CSV, instance or schema document into either the Source panel or Target\n * panel (CSV, JSON, XML, XSD).\n *\n * @param selectedFile\n * @param cfg\n * @param isSource\n * @param isSchema - user-specified instance/ schema (true === schema)\n * @param inspectionParameters - CSV parameters\n */\nexport async function importInstanceSchema(\n  selectedFile: File,\n  cfg: ConfigModel,\n  isSource: boolean,\n  isSchema: boolean,\n  inspectionParameters?: { [key: string]: string },\n) {\n  return new Promise<boolean>(async (resolve) => {\n    cfg.initCfg.initialized = false;\n    cfg.initializationService.updateLoadingStatus(\n      'Importing Document ' + selectedFile.name,\n    );\n    cfg.documentService\n      .importNonJavaDocument(\n        selectedFile,\n        isSource,\n        isSchema,\n        inspectionParameters,\n      )\n      .then(() => {\n        cfg.fileService.updateDigestFile().finally(() => {\n          cfg.initializationService.updateStatus();\n          resolve(true);\n        });\n      });\n  });\n}\n\n/**\n * Enable the specified class name and collection type in the targetted\n * panel for use in Java document loading. The user must have previously\n * imported a JAR file containing the class.\n *\n * @param selectedClass\n * @param selectedCollection\n * @param isSource\n */\nexport function enableCustomClass(\n  cfg: ConfigModel,\n  selectedClass: string,\n  selectedCollection: string,\n  isSource: boolean,\n) {\n  return new Promise<boolean>((resolve) => {\n    cfg.initCfg.initialized = false;\n    cfg.initializationService.updateLoadingStatus(\n      'Importing Document ' + selectedClass,\n    );\n    cfg.documentService\n      .importJavaDocument(\n        selectedClass,\n        isSource,\n        selectedCollection as CollectionType,\n      )\n      .then(() => {\n        cfg.fileService.updateDigestFile().finally(() => {\n          cfg.initializationService.updateStatus();\n          resolve(true);\n        });\n      });\n  });\n}\n\nexport function getPropertyScopeOptions(isSource: boolean): {\n  value: string;\n  label: string;\n}[] {\n  const cfg = ConfigModel.getConfig();\n  let scopeOptions: {\n    value: string;\n    label: string;\n  }[] = [\n    {\n      label: 'Current Message Header',\n      value: 'current',\n    },\n    {\n      label: 'Camel Exchange Property',\n      value: 'camelExchangeProperty',\n    },\n  ];\n  const propertyDocOptions: DocumentDefinition[] = isSource\n    ? cfg.sourceDocs\n    : cfg.targetDocs;\n  for (let propertyDocOption of propertyDocOptions) {\n    scopeOptions.push({\n      value: propertyDocOption.id,\n      label: propertyDocOption.name,\n    });\n  }\n  return scopeOptions;\n}\n\n/**\n * Return CSV document inspection parameters.\n *\n * @param docId\n * @param isSource\n * @returns\n */\nexport function getDocCSVParams(\n  docId: string,\n  isSource: boolean,\n): { [key: string]: string } {\n  const doc = getDocDef(docId, ConfigModel.getConfig(), isSource);\n  return doc?.inspectionParameters;\n}\n\n/**\n * Set CSV document inspection parameters.\n *\n * @param docId\n * @param isSource\n * @param parameters\n */\nexport async function setDocCSVParams(\n  docId: string,\n  isSource: boolean,\n  parameters: { [key: string]: string },\n) {\n  const cfg = ConfigModel.getConfig();\n  const docDef = getDocDef(docId, cfg, isSource);\n  docDef.inspectionParameters = parameters;\n  await cfg.mappingService.notifyMappingUpdated();\n  await cfg.fileService.updateDigestFile();\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  ConfigModel,\n  ExpressionModel,\n  MappedField,\n  MappingModel,\n} from '@atlasmap/core';\n\nexport const trailerId = 'expression-trailer';\n\nfunction activeMapping(): boolean {\n  const cfg = ConfigModel.getConfig();\n  return !!cfg?.mappings?.activeMapping;\n}\n\nexport abstract class ExpressionNode {\n  protected static sequence = 0;\n  protected uuid: string;\n  constructor(prefix: string) {\n    this.uuid = prefix + ExpressionNode.sequence++;\n  }\n  getUuid() {\n    return this.uuid;\n  }\n  abstract toText(): string;\n  abstract toHTML(): string;\n}\n\nexport class TextNode extends ExpressionNode {\n  static readonly PREFIX = 'expression-text-';\n  constructor(public str: string) {\n    super(TextNode.PREFIX);\n  }\n  toText(): string {\n    return this.str;\n  }\n  toHTML(): string {\n    return `<span id=\"${this.uuid}\">${this.str.replace(/ /g, '&nbsp;')}</span>`;\n  }\n}\n\nexport class FieldNode extends ExpressionNode {\n  protected field: MappedField | null | undefined;\n  static readonly PREFIX = 'expression-field-';\n\n  constructor(\n    private mapping: MappingModel,\n    public mfield?: MappedField,\n    index?: number,\n  ) {\n    super(FieldNode.PREFIX);\n    if (!mfield && index) {\n      this.field = mapping.getMappedFieldForIndex((index + 1).toString(), true);\n    }\n  }\n\n  toText(): string {\n    if (!this.mapping || !this.field) {\n      return '';\n    }\n    return '${' + (this.mapping.getIndexForMappedField(this.field)! - 1) + '}';\n  }\n\n  toHTML(): string {\n    if (!this.field) {\n      return '';\n    }\n    if (this.field && this.field.field) {\n      return `<span contenteditable=\"false\" id=\"${this.uuid}\" title=\"${this.field.field.docDef.name}:${this.field.field.path}\"\n        class=\"expressionFieldLabel label label-default\">${this.field.field.name}</span>`;\n    } else {\n      return `<span contenteditable=\"false\" id=\"${this.uuid}\"\n        title=\"Field index '${\n          this.mapping.getIndexForMappedField(this.field)! - 1\n        }' is not available\"\n        class=\"expressionFieldLabel label label-danger\">N/A</span>`;\n    }\n  }\n}\n\nexport function getExpression(): ExpressionModel | null | undefined {\n  const cfg = ConfigModel.getConfig();\n  if (!activeMapping() || !cfg.mappings?.activeMapping) {\n    return null;\n  }\n  const mapping = cfg.mappings!.activeMapping;\n  let expression = mapping!.transition.expression;\n  if (!expression) {\n    mapping!.transition.expression = new ExpressionModel(mapping!, cfg);\n    expression = mapping!.transition.expression;\n    expression.generateInitialExpression();\n    expression.updateFieldReference(mapping!);\n  } else {\n    if (mapping!.transition.expression) {\n      mapping!.transition.expression.setConfigModel(cfg);\n    }\n  }\n  return mapping!.transition.expression;\n}\n\nexport function getMappingExpression(): string {\n  const cfg = ConfigModel.getConfig();\n  if (!activeMapping()) {\n    return '';\n  }\n  if (!cfg.mappings?.activeMapping?.transition?.expression) {\n    if (!getExpression()) {\n      return '';\n    }\n  }\n  return cfg.mappings!.activeMapping!.transition.expression &&\n    cfg.mappings!.activeMapping!.transition.enableExpression\n    ? cfg.mappings!.activeMapping!.transition.expression.toHTML()\n    : '';\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  CommonUtil,\n  ConfigModel,\n  DocumentDefinition,\n  ErrorInfo,\n  ErrorLevel,\n  ErrorScope,\n  ErrorType,\n  ExpressionModel,\n  Field,\n  FieldAction,\n  FieldActionDefinition,\n  InitializationService,\n  MappedField,\n  MappingDefinition,\n  MappingModel,\n  Multiplicity,\n  NamespaceModel,\n  TransitionMode,\n  TransitionModel,\n} from '@atlasmap/core';\nimport {\n  IAtlasmapDocument,\n  IAtlasmapField,\n  IAtlasmapGroup,\n  IAtlasmapMappedField,\n  IAtlasmapMapping,\n  IAtlasmapNamespace,\n  INotification,\n} from '../../Views';\nimport { ITransformationArgument, ITransformationSelectOption } from '../../UI';\n\nimport { Observable } from 'rxjs';\nimport ky from 'ky';\n\nconst api = ky.create({ headers: { 'ATLASMAP-XSRF-TOKEN': 'awesome' } });\n\nexport function copyToClipboard(text: string) {\n  const textArea = document.createElement('textarea');\n  textArea.value = text;\n  document.body.appendChild(textArea);\n  textArea.select();\n  try {\n    document.execCommand('copy');\n  } catch (err) {\n    ConfigModel.getConfig().errorService.addError(\n      new ErrorInfo({\n        message: 'Error copying ' + text + ' to clipboard',\n        level: ErrorLevel.ERROR,\n        scope: ErrorScope.APPLICATION,\n        type: ErrorType.INTERNAL,\n      }),\n    );\n  }\n  document.body.removeChild(textArea);\n}\n\nexport const initializationService: InitializationService =\n  new InitializationService(api);\nexport const configModel = initializationService.cfg;\n\nexport function fromFieldToIFieldsGroup(field: Field): IAtlasmapGroup | null {\n  const fields = field.children\n    .map(fromFieldToIFields)\n    .filter((f) => f) as IAtlasmapField[];\n  return fields.length > 0 && field.visibleInCurrentDocumentSearch\n    ? {\n        id: `${field.docDef.uri || field.docDef.type + '-' + field.scope}:${\n          field.docDef.isSource ? 'source' : 'target'\n        }:${field.path}`,\n        name: field.name,\n        type: field.type,\n        isCollection: field.isCollection,\n        isInCollection: field.isInCollection(),\n        fields: fields,\n        amField: field,\n      }\n    : null;\n}\n\nexport function fromFieldToIFieldsNode(field: Field): IAtlasmapField | null {\n  const cfg = ConfigModel.getConfig();\n  const partOfMapping: boolean = field.partOfMapping;\n  const shouldBeVisible = partOfMapping\n    ? cfg.showMappedFields\n    : cfg.showUnmappedFields && field.visibleInCurrentDocumentSearch;\n  return shouldBeVisible\n    ? {\n        id: `${field.docDef.uri || field.docDef.type + '-' + field.scope}:${\n          field.docDef.isSource ? 'source' : 'target'\n        }:${field.path}`,\n        name: field.getFieldLabel(false, false),\n        type: field.type,\n        path: field.path,\n        scope: field.scope ? field.scope : '',\n        value: field.value,\n        amField: field,\n        mappings:\n          (cfg.mappings\n            ?.findMappingsForField(field)\n            .map(fromMappingModelToImapping)\n            .filter((d) => d) as IAtlasmapMapping[]) || [],\n        hasTransformations: field.partOfTransformation,\n        isAttribute: field.isAttribute,\n        isCollection: field.isCollection,\n        isInCollection: field.isInCollection(),\n        isConnected: partOfMapping,\n        isDisabled:\n          field.type === 'UNSUPPORTED' ||\n          (field.type === 'COMPLEX' && !field.enumeration),\n        enumeration: field.enumeration,\n      }\n    : null;\n}\n\nexport function fromFieldToIFields(field: Field) {\n  return field.children.length > 0\n    ? fromFieldToIFieldsGroup(field)\n    : fromFieldToIFieldsNode(field);\n}\n\nexport function fromNamespaceModelToINamespace(namespace: NamespaceModel) {\n  return {\n    alias: namespace.alias,\n    uri: namespace.uri,\n    locationUri: namespace.locationUri,\n    isTarget: namespace.isTarget,\n  };\n}\n\nexport function fromDocumentDefinitionToFieldGroup(\n  def: DocumentDefinition,\n): IAtlasmapDocument | null {\n  if (!def || !def.fields || def.fields.length === 0) {\n    return null;\n  }\n  const fields = def.fields\n    .map(fromFieldToIFields)\n    .filter((f) => f) as IAtlasmapField[];\n  const namespaces = def.namespaces\n    .map(fromNamespaceModelToINamespace)\n    .filter((n) => n) as IAtlasmapNamespace[];\n  return def.visibleInCurrentDocumentSearch && fields.length > 0\n    ? {\n        id: def.id,\n        fields,\n        name: def.name,\n        type: def.type,\n        namespaces,\n      }\n    : null;\n}\n\nexport function fromMappedFieldToIMappingField(\n  mappedField: MappedField,\n): IAtlasmapMappedField | null {\n  if (!mappedField.field || !mappedField.field.docDef) {\n    return null;\n  }\n  return {\n    id: `${\n      mappedField.field!.docDef.uri ||\n      mappedField.field!.docDef.type + '-' + mappedField.field!.scope\n    }:${mappedField.field!.docDef.isSource ? 'source' : 'target'}:${\n      mappedField.field!.path\n    }`,\n    name: mappedField.field!.getFieldLabel(false, false),\n    type: mappedField.field!.type,\n    path: mappedField.field!.path,\n    scope: mappedField.field?.scope ? mappedField.field.scope : '',\n    value: mappedField.field!.value,\n    hasTransformations: false,\n    mappings: [],\n    isAttribute: false,\n    isCollection: false,\n    isInCollection: false,\n    isConnected: false,\n    isDisabled: false,\n    enumeration: false,\n    amField: mappedField.field,\n    transformations: mappedField.actions.map((a) => ({\n      name: a.name,\n      options: getMappingActions(mappedField.isSource()).map(\n        (a): ITransformationSelectOption => ({\n          name: CommonUtil.toDisplayable(a.name),\n          value: a.name,\n        }),\n      ),\n      arguments: a.definition!.arguments.map(\n        (av, idx): ITransformationArgument => ({\n          label:\n            av.serviceObject?.title?.length > 0\n              ? av.serviceObject.title\n              : CommonUtil.toDisplayable(av.name),\n          type: av.type,\n          name: av.name,\n          value: a.argumentValues[idx].value,\n          options: av.values\n            ? av.values.map(\n                (avv): ITransformationSelectOption => ({\n                  name: avv,\n                  value: avv,\n                }),\n              )\n            : undefined,\n        }),\n      ),\n    })),\n  };\n}\n\nexport function errorLevelToVariant(\n  level: ErrorLevel,\n): INotification['variant'] {\n  switch (level) {\n    case ErrorLevel.INFO:\n      return 'info';\n    case ErrorLevel.WARN:\n      return 'warning';\n    case ErrorLevel.ERROR:\n      return 'danger';\n    default:\n      return 'default';\n  }\n}\n\nexport function errorMessageToString(message: any): string {\n  switch (typeof message) {\n    case 'string':\n      return message;\n    default:\n      return message?.message || JSON.stringify(message);\n  }\n}\n\nexport function errorTypeToString(type: ErrorType): string {\n  switch (type) {\n    case ErrorType.INTERNAL:\n      return 'Internal';\n    case ErrorType.USER:\n      return 'User';\n    case ErrorType.VALIDATION:\n      return 'Validation';\n    case ErrorType.PREVIEW:\n      return 'Preview';\n    case ErrorType.FORM:\n      return 'Form';\n  }\n}\n\nexport function errorInfoToNotification(e: ErrorInfo): INotification {\n  return {\n    variant: errorLevelToVariant(e.level),\n    title:\n      e.mapping && e.type !== ErrorType.PREVIEW\n        ? `${errorTypeToString(\n            e.type,\n          )}: \"${e.mapping.transition.getPrettyName()}\"`\n        : errorTypeToString(e.type),\n    description: errorMessageToString(e.message),\n    id: e.identifier,\n    mappingId: e.mapping?.uuid,\n  };\n}\n\nexport function fromMappingModelToImapping(\n  m: MappingModel | null | undefined,\n): IAtlasmapMapping | null {\n  return m\n    ? {\n        id: m.uuid,\n        name: m.transition.getPrettyName(),\n        sourceFields: m\n          .getUserMappedFields(true)\n          .map(fromMappedFieldToIMappingField)\n          .filter((f) => f) as IAtlasmapMappedField[],\n        targetFields: m\n          .getUserMappedFields(false)\n          .map(fromMappedFieldToIMappingField)\n          .filter((f) => f) as IAtlasmapMappedField[],\n        mapping: m,\n      }\n    : null;\n}\n\nexport function fromMappingDefinitionToIMappings(\n  def: MappingDefinition | null,\n): IAtlasmapMapping[] {\n  return def\n    ? (def.mappings\n        .map(fromMappingModelToImapping)\n        .filter((d) => d) as IAtlasmapMapping[])\n    : [];\n}\n\nexport function executeFieldSearch(\n  searchFilter: string,\n  isSource: boolean,\n): string[][] {\n  return initializationService.cfg.expressionService.executeFieldSearch(\n    initializationService.cfg,\n    searchFilter,\n    isSource,\n  );\n}\n\nexport function getField(fieldPath: string, isSource: boolean): Field | null {\n  let field: Field | null = null;\n  for (const doc of initializationService.cfg.getDocs(isSource)) {\n    field = Field.getField(fieldPath, doc.getAllFields());\n    if (field) {\n      break;\n    }\n  }\n  return field;\n}\n\nexport function mappingExpressionAddField(\n  selectedDocId: string,\n  selectedField: string,\n  newTextNode: any,\n  atIndex: number,\n  isTrailer: boolean,\n) {\n  const mapping = initializationService.cfg.mappings!.activeMapping;\n  if (!mapping || !selectedDocId || !selectedField) {\n    return;\n  }\n  configModel.expressionService.addFieldToExpression(\n    mapping,\n    selectedDocId,\n    selectedField,\n    newTextNode,\n    atIndex,\n    isTrailer,\n  );\n  initializationService.cfg.mappingService.notifyMappingUpdated();\n}\n\nexport function mappingExpressionInit() {\n  if (\n    !initializationService.cfg.mappings ||\n    !initializationService.cfg.mappings.activeMapping\n  ) {\n    return;\n  }\n  const mapping = initializationService.cfg.mappings!.activeMapping!;\n\n  // Filter out padding fields for expression mapping.\n  mapping\n    .getMappedFields(true)\n    .filter((mf) => mf.isPadField())\n    .forEach((mf) => mapping.removeMappedField(mf));\n\n  if (!mapping.transition.expression) {\n    mapping.transition.expression = new ExpressionModel(\n      mapping,\n      initializationService.cfg,\n    );\n    mapping.transition.expression.generateInitialExpression();\n  } else {\n    mapping.transition.expression.setConfigModel(initializationService.cfg);\n  }\n  mapping.transition.expression.updateFieldReference(mapping);\n}\nexport function mappingExpressionClearText(\n  nodeId?: string,\n  startOffset?: number,\n  endOffset?: number,\n) {\n  const uuidNode =\n    initializationService.cfg.mappings!.activeMapping!.transition.expression!.clearText(\n      nodeId!,\n      startOffset,\n      endOffset,\n    );\n  initializationService.cfg.mappingService.notifyMappingUpdated();\n  return uuidNode;\n}\nexport function mappingExpressionInsertText(\n  str: string,\n  nodeId?: string,\n  offset?: number,\n) {\n  initializationService.cfg.mappings!.activeMapping!.transition.expression!.insertText(\n    str,\n    nodeId,\n    offset,\n  );\n  initializationService.cfg.mappingService.notifyMappingUpdated();\n}\nexport function mappingExpressionObservable(): Observable<any> | null {\n  if (\n    !initializationService.cfg.mappings?.activeMapping?.transition?.expression\n  ) {\n    return null;\n  }\n  return initializationService.cfg.mappings.activeMapping.transition.expression\n    .expressionUpdated$;\n}\nexport function mappingExpressionRemoveField(\n  tokenPosition?: string,\n  offset?: number,\n  removeNext?: boolean,\n) {\n  initializationService.cfg.mappings!.activeMapping!.transition.expression!.removeToken(\n    tokenPosition,\n    offset,\n    removeNext,\n  );\n  initializationService.cfg.mappingService.notifyMappingUpdated();\n}\nexport function onFieldPreviewChange(field: IAtlasmapField, value: string) {\n  field.amField.value = value;\n  initializationService.cfg.mappingService.notifyMappingUpdated();\n}\n\nexport function toggleExpressionMode() {\n  initializationService.cfg.expressionService.toggleExpressionMode();\n  initializationService.cfg.mappingService.notifyMappingUpdated();\n}\n\nexport function getMappingActions(isSource: boolean) {\n  return initializationService.cfg.fieldActionService.getActionsAppliesToField(\n    initializationService.cfg.mappings!.activeMapping!,\n    isSource,\n    Multiplicity.ONE_TO_ONE,\n  );\n}\nexport function getMultiplicityActions(mapping: MappingModel) {\n  if (mapping.transition.mode === TransitionMode.ONE_TO_MANY) {\n    return initializationService.cfg.fieldActionService.getActionsAppliesToField(\n      mapping,\n      true,\n      Multiplicity.ONE_TO_MANY,\n    );\n  } else if (mapping.transition.mode === TransitionMode.MANY_TO_ONE) {\n    return initializationService.cfg.fieldActionService.getActionsAppliesToField(\n      mapping,\n      true,\n      Multiplicity.MANY_TO_ONE,\n    );\n  } else {\n    return [];\n  }\n}\nexport function getMultiplicityActionDelimiters() {\n  return TransitionModel.delimiterModels;\n}\n\nexport function handleActionChange(\n  action: FieldAction,\n  definition: FieldActionDefinition,\n) {\n  action.argumentValues = []; // Invalidate the previously selected field action arguments.\n  definition.populateFieldAction(action);\n\n  // If the field action configuration predefines argument values then populate the fields with\n  // default values.  Needed to support pull-down menus in action argument definitions.\n  if (\n    action.argumentValues.values() &&\n    action.argumentValues.length > 0 &&\n    definition.arguments[0] &&\n    definition.arguments[0].values &&\n    definition.arguments[0].values.length > 0\n  ) {\n    for (let i = 0; i < action.argumentValues.length; i++) {\n      action.argumentValues[i].value = definition.arguments[i].values![i];\n    }\n  }\n  initializationService.cfg.mappingService.notifyMappingUpdated();\n}\n\n/**\n * Process a mapped field index change.  The source field is represented by\n * currentIndex.  The target index is represented either by a number or by a\n * mapped field (depending on whether the index was physically modified or\n * d&d modified).\n *\n * @param isSource\n * @param currentIndex\n * @param target\n */\nexport function handleIndexChange(\n  isSource: boolean,\n  currentIndex: number,\n  target: number | Field,\n) {\n  const cfg = ConfigModel.getConfig();\n  const activeMapping = cfg.mappings?.activeMapping;\n  if (!activeMapping) {\n    return;\n  }\n  const sourceField = activeMapping.getMappedFieldForIndex(\n    '' + (currentIndex + 1),\n    isSource,\n  );\n  if (!sourceField) {\n    return;\n  }\n  let newIndex: number | null = 0;\n\n  // If the target is an actual index value then check for the need to add padding.\n  if (typeof target === 'number') {\n    newIndex = target;\n    if (target <= 0 || !activeMapping) {\n      return;\n    }\n    const mappedFields = activeMapping.getMappedFields(isSource);\n    const maxIndex = mappedFields.length;\n    if (target > maxIndex) {\n      // Add place-holders for each index value between the previous max index\n      // and the insertion index.\n      cfg.mappingService.addPlaceholders(\n        target - mappedFields.length,\n        activeMapping,\n        maxIndex,\n        isSource,\n      );\n    }\n    // If the target is a dropped field then extract the mapped field to determine the index.\n  } else {\n    const field = activeMapping.getMappedFieldForField(target!);\n    if (!field) {\n      return;\n    }\n    newIndex = activeMapping.getIndexForMappedField(field);\n  }\n  cfg.mappingService.moveMappedFieldTo(activeMapping, sourceField, newIndex!);\n}\n\nexport function handleNewTransformation(isSource: boolean, index: number) {\n  const cfg = ConfigModel.getConfig();\n  const activeMapping = cfg.mappings?.activeMapping;\n  if (!activeMapping) {\n    return;\n  }\n  const field = activeMapping.getMappedFieldForIndex(\n    '' + (index + 1),\n    isSource,\n  );\n  if (!field) {\n    return;\n  }\n  const action: FieldAction = new FieldAction();\n  const availableActions = getMappingActions(isSource);\n  availableActions[0].populateFieldAction(action);\n  field.actions.push(action);\n  cfg.mappingService.notifyMappingUpdated();\n}\n\nexport function handleTransformationChange(\n  isSource: boolean,\n  index: number,\n  currentTransformationIndex: number,\n  newTransformationName: string,\n) {\n  const cfg = ConfigModel.getConfig();\n  const activeMapping = cfg.mappings?.activeMapping;\n  if (!activeMapping) {\n    return;\n  }\n  const field = activeMapping.getMappedFieldForIndex(\n    '' + (index + 1),\n    isSource,\n  );\n  if (!field) {\n    return;\n  }\n  const action = field.actions[currentTransformationIndex];\n  const newAction = getMappingActions(isSource).find(\n    (a) => a.name === newTransformationName,\n  );\n\n  if (action && newAction) {\n    action.argumentValues = []; // Invalidate the previously selected field action arguments.\n    newAction.populateFieldAction(action);\n\n    // If the field action configuration predefines argument values then populate the fields with\n    // default values.  Needed to support pull-down menus in action argument definitions.\n    if (\n      action.argumentValues.values() &&\n      action.argumentValues.length > 0 &&\n      newAction.arguments[0] &&\n      newAction.arguments[0].values &&\n      newAction.arguments[0].values.length > 0\n    ) {\n      for (let i = 0; i < action.argumentValues.length; i++) {\n        action.argumentValues[i].value = newAction.arguments[i].values![i];\n      }\n    }\n    cfg.mappingService.notifyMappingUpdated();\n  }\n}\n\nexport function handleTransformationArgumentChange(\n  isSource: boolean,\n  index: number,\n  transformationIndex: number,\n  argumentName: string,\n  argumentValue: string,\n) {\n  const cfg = ConfigModel.getConfig();\n  const activeMapping = cfg.mappings?.activeMapping;\n  if (!activeMapping) {\n    return;\n  }\n  const field = activeMapping.getMappedFieldForIndex(\n    '' + (index + 1),\n    isSource,\n  );\n  if (!field) {\n    return;\n  }\n  const action = field.actions[transformationIndex];\n  if (action) {\n    action.setArgumentValue(argumentName, argumentValue);\n    cfg.mappingService.notifyMappingUpdated();\n  }\n}\n\nexport function handleRemoveTransformation(\n  isSource: boolean,\n  index: number,\n  transformationIndex: number,\n) {\n  const cfg = ConfigModel.getConfig();\n  const activeMapping = cfg.mappings?.activeMapping;\n  if (!activeMapping) {\n    return;\n  }\n  const field = activeMapping.getMappedFieldForIndex(\n    '' + (index + 1),\n    isSource,\n  );\n  if (!field) {\n    return;\n  }\n  const action = field.actions[transformationIndex];\n  if (action) {\n    CommonUtil.removeItemFromArray(action, field.actions);\n    cfg.mappingService.notifyMappingUpdated();\n  }\n}\n\nexport function handleMultiplicityChange(action: FieldAction, name: string) {\n  const cfg = ConfigModel.getConfig();\n  const activeMapping = cfg.mappings?.activeMapping;\n  if (!activeMapping) {\n    return;\n  }\n\n  const newAction = getMultiplicityActions(activeMapping).find(\n    (a) => a.name === name,\n  );\n\n  if (action && newAction) {\n    action.argumentValues = []; // Invalidate the previously selected field action arguments.\n    newAction.populateFieldAction(action);\n\n    // If the field action configuration predefines argument values then populate the fields with\n    // default values.  Needed to support pull-down menus in action argument definitions.\n    if (\n      action.argumentValues.values() &&\n      action.argumentValues.length > 0 &&\n      newAction.arguments[0] &&\n      newAction.arguments[0].values &&\n      newAction.arguments[0].values.length > 0\n    ) {\n      for (let i = 0; i < action.argumentValues.length; i++) {\n        action.argumentValues[i].value = newAction.arguments[i].values![i];\n      }\n    }\n    initializationService.cfg.mappingService.notifyMappingUpdated();\n  }\n}\nexport function handleMultiplicityArgumentChange(\n  multiplicityFieldAction: FieldAction,\n  argumentName: string,\n  argumentValue: string,\n) {\n  const cfg = ConfigModel.getConfig();\n\n  multiplicityFieldAction.setArgumentValue(argumentName, argumentValue);\n  cfg.mappingService.notifyMappingUpdated();\n}\n\nexport function selectMapping(mapping: IAtlasmapMapping) {\n  initializationService.cfg.mappingService.selectMapping(mapping.mapping);\n}\n\nexport function deselectMapping() {\n  initializationService.cfg.mappingService.deselectMapping();\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  ConfigModel,\n  ErrorInfo,\n  ErrorLevel,\n  ErrorScope,\n  ErrorType,\n  Field,\n  MappedField,\n  MappingModel,\n} from '@atlasmap/core';\n\nimport { LookupTableData } from '../../UI';\nimport { initializationService } from './ui';\n\nexport type EnumValue = {\n  name: string;\n  ordinal: number;\n};\n\nexport function createConstant(\n  constName: string,\n  constValue: string,\n  constType: string,\n  addToActiveMapping?: boolean,\n): void {\n  const cfg = ConfigModel.getConfig();\n  cfg.documentService.createConstant(\n    constName,\n    constValue,\n    constType,\n    addToActiveMapping,\n  );\n}\n\nexport function deleteConstant(constName: string): void {\n  const cfg = ConfigModel.getConfig();\n  cfg.documentService.deleteConstant(constName);\n}\n\nexport function editConstant(\n  constName: string,\n  constValue: string,\n  constType: string,\n  origName?: string,\n): void {\n  const cfg = ConfigModel.getConfig();\n  cfg.documentService.editConstant(constName, constValue, constType, origName);\n}\n\nexport function getConstantType(constName: string): string {\n  const cfg = ConfigModel.getConfig();\n  return cfg.documentService.getConstantType(constName);\n}\n\nexport function getConstantTypeIndex(constName: string): number {\n  const cfg = ConfigModel.getConfig();\n  return cfg.documentService.getConstantTypeIndex(constName);\n}\n\nexport function createProperty(\n  propName: string,\n  propType: string,\n  propScope: string,\n  isSource: boolean,\n  addToActiveMapping?: boolean,\n): void {\n  const cfg = ConfigModel.getConfig();\n  cfg.documentService.createProperty(\n    propName,\n    propType,\n    propScope,\n    isSource,\n    addToActiveMapping,\n  );\n}\n\nexport function deleteProperty(\n  propName: string,\n  propScope: string,\n  isSource: boolean,\n): void {\n  const cfg = ConfigModel.getConfig();\n  cfg.documentService.deleteProperty(propName, propScope, isSource);\n}\n\nexport function editProperty(\n  propName: string,\n  propType: string,\n  propScope: string,\n  isSource: boolean,\n  newName?: string,\n  newScope?: string,\n): void {\n  const cfg = ConfigModel.getConfig();\n  cfg.documentService.editProperty(\n    propName,\n    propType,\n    propScope,\n    isSource,\n    newName,\n    newScope,\n  );\n}\n\nexport function getPropertyType(\n  propName: string,\n  propScope: string,\n  isSource: boolean,\n): string {\n  const cfg = ConfigModel.getConfig();\n  return cfg.documentService.getPropertyType(propName, propScope, isSource);\n}\n\nexport function getPropertyTypeIndex(\n  propName: string,\n  propScope: string,\n  isSource: boolean,\n): number {\n  const cfg = ConfigModel.getConfig();\n  return cfg.documentService.getPropertyTypeIndex(\n    propName,\n    propScope,\n    isSource,\n  );\n}\n\n/**\n * Create a new mapping or modify the existing active mapping using the specified source and target IDs.\n *\n * @param source\n * @param target\n */\nexport function createMapping(source: Field | undefined, target?: Field): void {\n  const cfg = ConfigModel.getConfig();\n  const ms = initializationService.cfg.mappingService;\n\n  if (target) {\n    if (\n      !cfg.mappings?.activeMapping &&\n      (source?.partOfMapping || target.partOfMapping)\n    ) {\n      cfg.errorService.addError(\n        new ErrorInfo({\n          message: `Unable to map '${source!.name}/${\n            target.name\n          }'.  Please select a mapping before adding to it.`,\n          level: ErrorLevel.INFO,\n          scope: ErrorScope.MAPPING,\n          type: ErrorType.USER,\n        }),\n      );\n      return;\n    }\n    if (\n      source &&\n      cfg.mappings?.activeMapping &&\n      (source.partOfMapping || target.partOfMapping)\n    ) {\n      let exclusionReason = null;\n\n      if (!source.partOfMapping) {\n        exclusionReason = ms.getFieldSelectionExclusionReason(\n          cfg.mappings?.activeMapping!,\n          source,\n        );\n      } else {\n        exclusionReason = ms.getFieldSelectionExclusionReason(\n          cfg.mappings?.activeMapping!,\n          target,\n        );\n      }\n\n      if (exclusionReason !== null) {\n        cfg.errorService.addError(\n          new ErrorInfo({\n            message: `The field '${target.name}' cannot be selected, ${exclusionReason}.`,\n            level: ErrorLevel.ERROR,\n            mapping: cfg.mappings?.activeMapping!,\n            scope: ErrorScope.MAPPING,\n            type: ErrorType.USER,\n          }),\n        );\n        return;\n      }\n      if (\n        target.partOfMapping &&\n        cfg.mappings.activeMapping.targetFields[0]!.field!.path === target!.path\n      ) {\n        addToCurrentMapping(source);\n        return;\n      }\n      if (\n        source.partOfMapping &&\n        cfg.mappings.activeMapping.sourceFields[0]!.field!.path === source!.path\n      ) {\n        addToCurrentMapping(target);\n        return;\n      }\n    }\n  }\n  if (source) {\n    cfg.mappingService.addNewMapping(source, false);\n  } else {\n    cfg.mappingService.newMapping();\n  }\n  if (target) {\n    addToCurrentMapping(target);\n  }\n}\n\n/**\n * Create a new mapping.\n */\nexport function newMapping(): void {\n  const cfg = ConfigModel.getConfig();\n  cfg.mappingService.newMapping();\n}\n\n/**\n * Removes a mapping.\n */\nexport function removeMapping(mappingModel: MappingModel): void {\n  ConfigModel.getConfig().mappingService.removeMapping(mappingModel);\n}\n\n/**\n * Add the specified field to the current mapping.\n *\n * @param field\n */\nexport function addToCurrentMapping(field: Field): void {\n  const cfg = ConfigModel.getConfig();\n  cfg.mappingService.addFieldToActiveMapping(field);\n}\n\n/**\n * Remove the specified field from the current mapping.\n *\n * @param field\n */\nexport function removeFromCurrentMapping(field: Field): void {\n  const cfg = ConfigModel.getConfig();\n  const mapping = cfg.mappings?.activeMapping;\n  if (mapping) {\n    const mappedField = mapping.getMappedFieldForField(field);\n    if (mappedField) {\n      mapping.removeMappedField(mappedField);\n      cfg.mappingService.updateMappedField(mapping);\n    }\n  }\n}\n\n/**\n * Add the specified field to the current mapping.\n *\n * @param field\n */\nexport function removeMappedFieldFromCurrentMapping(field: MappedField): void {\n  const cfg = ConfigModel.getConfig();\n  const mapping = cfg.mappings?.activeMapping;\n  if (mapping && field) {\n    mapping.removeMappedField(field);\n    cfg.mappingService.updateMappedField(mapping);\n  }\n}\n\n/**\n * Return the enumeration mapping lookup table associated with the active mapping.\n *\n */\nexport function getEnumerationValues(): LookupTableData[] {\n  const cfg = ConfigModel.getConfig();\n  const activeMapping = cfg.mappings?.activeMapping;\n  if (!activeMapping) {\n    return [];\n  }\n  return initializationService.cfg.mappingService.getEnumerationValues(\n    cfg,\n    activeMapping,\n  );\n}\n\n/**\n * Retrieve the enumeration values for the specified field node ID.\n *\n * @param nodeId - enumeration field node ID\n */\nexport function getFieldEnums(nodeId: string): EnumValue[] {\n  const uuidNode =\n    initializationService.cfg.mappings!.activeMapping!.transition.expression!.getNode(\n      nodeId,\n    );\n  if (uuidNode && uuidNode.mappedField?.field.enumeration) {\n    return uuidNode.mappedField.field.enumValues;\n  }\n  return [];\n}\n\n/**\n * Set the value for a enumeration reference field.  This way the enumeration field may be\n * used in conditional expressions.  Not used for enumeration mappings.\n *\n * @param selectedEnumNodeId - enumeration field node ID\n * @param selectedEnumValueIndex - enumeration index value\n */\nexport function setSelectedEnumValue(\n  selectedEnumNodeId: string,\n  selectedEnumValueIndex: number,\n) {\n  const mapping = initializationService.cfg.mappings!.activeMapping!;\n  const uuidNode = mapping.transition.expression!.getNode(selectedEnumNodeId);\n  if (uuidNode && uuidNode.mappedField?.field.enumeration) {\n    initializationService.cfg.mappingService.setEnumFieldValue(\n      uuidNode.mappedField.field,\n      selectedEnumValueIndex,\n    );\n    mapping.transition.expression.updateFieldReference(mapping);\n    initializationService.cfg.mappingService.notifyMappingUpdated();\n  }\n}\n\nexport function updateEnumerationValues(\n  enumerationValues: LookupTableData[],\n): void {\n  const cfg = ConfigModel.getConfig();\n  const activeMapping = cfg.mappings?.activeMapping;\n  if (!activeMapping) {\n    return;\n  }\n  initializationService.cfg.mappingService.updateEnumerationValues(\n    cfg,\n    activeMapping,\n    enumerationValues,\n  );\n}\n\nexport function isEnumerationMapping(): boolean {\n  const cfg = ConfigModel.getConfig();\n  return initializationService.cfg.mappingService.isEnumerationMapping(\n    cfg.mappings?.activeMapping!,\n  );\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport * as constants from '../../atlasmap.json';\nimport { getDocDef, getDocDefByName, removeDocumentRef } from './document';\n\nimport { ConfigModel } from '@atlasmap/core';\n\n/**\n * Return true if the specified file object exists as a source or target\n * document, false otherwise.\n *\n * @param file - file object\n * @param isSource - source or target panel\n */\nexport function documentExists(file: File, isSource: boolean): boolean {\n  const docDef = getDocDefByName(file.name, ConfigModel.getConfig(), isSource);\n  return docDef ? true : false;\n}\n\n/**\n * Delete the specified source or target document.\n *\n * @param fileId - document ID to delete\n * @param isSource - source or target panel\n */\nexport async function deleteAtlasFile(fileId: string, isSource: boolean) {\n  const cfg = ConfigModel.getConfig();\n  const docDef = getDocDef(fileId, cfg, isSource);\n  await removeDocumentRef(docDef, cfg);\n  cfg.initializationService.updateInitComplete();\n}\n\n/**\n * The user has requested their current mappings be exported.  Use the mapping management\n * service to establish the file content and to push it down to the server.\n *\n * @param fileName - user-specified ADM archive file name\n */\nexport function exportADMArchiveFile(fileName: string) {\n  const cfg = ConfigModel.getConfig();\n  return cfg.fileService.exportADMArchive(fileName);\n}\n\n/**\n * Import an ADM archive file or a user JAR file.\n *\n * @param selectedFile\n * @param userFileSuffix\n * @param cfg\n */\nexport function importADMArchiveFile(selectedFile: File, cfg: ConfigModel) {\n  cfg.initializationService.initializeWithADMArchiveFile(selectedFile);\n}\n\n/**\n * Import a JAR file.\n *\n * @param selectedFile\n * @param userFileSuffix\n * @param cfg\n */\nexport function importJarFile(selectedFile: File, cfg: ConfigModel) {\n  cfg.fileService.importJarFile(selectedFile);\n}\n\n/**\n * Remove all documents and imported JARs from the server.\n */\nexport function resetAtlasmap() {\n  const cfg = ConfigModel.getConfig();\n  cfg.initializationService.resetAtlasMap();\n}\n\nexport function getRuntimeVersion(): Promise<string> {\n  const cfg = ConfigModel.getConfig();\n  return cfg.initializationService.getRuntimeVersion();\n}\n\nexport function getUIVersion(): string {\n  return constants.version;\n}\n\nexport function toggleMappingPreview(enabled: boolean) {\n  const cfg = ConfigModel.getConfig();\n  return cfg.previewService.toggleMappingPreview(enabled);\n}\n\nexport function toggleShowMappedFields(enabled: boolean) {\n  const cfg = ConfigModel.getConfig();\n\n  cfg.showMappedFields = enabled;\n  cfg.initializationService.systemInitializedSource.next();\n\n  return enabled;\n}\n\nexport function toggleShowUnmappedFields(enabled: boolean) {\n  const cfg = ConfigModel.getConfig();\n\n  cfg.showUnmappedFields = enabled;\n  cfg.initializationService.systemInitializedSource.next();\n\n  return enabled;\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { useCallback, useEffect, useState } from 'react';\n\ntype OnToggleReturnType = Promise<boolean> | boolean;\n\nexport function useToggle(\n  initialState: boolean,\n  onToggle?: (toggled: boolean) => OnToggleReturnType,\n) {\n  const [state, setState] = useState(initialState);\n  useEffect(() => setState(initialState), [initialState]);\n  const toggle = useCallback(async () => {\n    const newState = onToggle ? await onToggle(!state) : !state;\n    setState(newState);\n  }, [onToggle, state]);\n  const toggleOff = useCallback(() => setState(false), []);\n  const toggleOn = useCallback(() => setState(true), []);\n  return { state, toggle, toggleOff, toggleOn, setToggle: setState };\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Coords, RectWithId, Rects } from './models';\nimport { FunctionComponent, createContext, useContext } from 'react';\nimport React, {\n  ReactElement,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\n\nimport { scaleLinear } from 'd3-scale';\nimport { useGesture } from 'react-use-gesture';\n\ntype RedrawCallback = () => unknown;\ntype RedrawCallbacks = Array<RedrawCallback>;\n\nexport interface ICanvasDimension {\n  width: number;\n  height: number;\n  offsetTop: number;\n  offsetLeft: number;\n}\n\nexport interface ICanvasContext {\n  initialWidth?: number;\n  initialHeight?: number;\n  dimensions: ICanvasDimension;\n  setDimension: (dimension: ICanvasDimension) => void;\n  panX: number;\n  panY: number;\n  addRedrawListener: (callback: RedrawCallback) => void;\n  removeRedrawListener: (callback: RedrawCallback) => void;\n  addRect: (rect: RectWithId) => void;\n  removeRect: (id: string) => void;\n  getRects: () => Rects;\n  zoom: number;\n  updateZoom: (tick: number) => void;\n  resetZoom: () => void;\n  pan: Coords;\n  setPan: (pan: Coords) => void;\n  resetPan: () => void;\n  allowPanning: boolean;\n  isPanning: boolean;\n  bindCanvas: ReturnType<typeof useGesture>;\n}\nconst CanvasContext = createContext<ICanvasContext | null>(null);\n\nexport interface ICanvasProviderProps {\n  allowPanning?: boolean;\n  initialWidth?: number;\n  initialHeight?: number;\n  initialZoom?: number;\n  initialPanX?: number;\n  initialPanY?: number;\n}\nexport const CanvasProvider: FunctionComponent<ICanvasProviderProps> = ({\n  children,\n  allowPanning = false,\n  initialWidth = 0,\n  initialHeight = 0,\n  initialZoom = 1,\n  initialPanX = 0,\n  initialPanY = 0,\n}) => {\n  const [canvasDimension, setCanvasDimension] = useState<ICanvasDimension>({\n    width: 0,\n    height: 0,\n    offsetLeft: 0,\n    offsetTop: 0,\n  });\n  const rects = useRef<Rects>([]);\n  const removeRect = useCallback((id: string) => {\n    rects.current = rects.current.filter((r) => r.id !== id);\n  }, []);\n  const addRect = useCallback(\n    (rect: RectWithId) => {\n      removeRect(rect.id);\n      rects.current = [...rects.current, rect];\n    },\n    [removeRect],\n  );\n  const getRects = useCallback(() => rects.current, []);\n  const redrawCallbacks = useRef<RedrawCallbacks>([]);\n  const addRedrawListener = useCallback((cb: RedrawCallback) => {\n    redrawCallbacks.current = [...redrawCallbacks.current, cb];\n  }, []);\n  const removeRedrawListener = useCallback((cb: RedrawCallback) => {\n    redrawCallbacks.current = redrawCallbacks.current.filter((c) => c !== cb);\n  }, []);\n\n  useEffect(function effectLoop() {\n    let frame = requestAnimationFrame(function loop() {\n      frame = requestAnimationFrame(loop);\n\n      for (let i = 0, len = redrawCallbacks.current.length; i < len; i++) {\n        redrawCallbacks.current[i]();\n      }\n    });\n    return function cancelEffectLoop() {\n      cancelAnimationFrame(frame);\n    };\n  }, []);\n\n  const [{ x: panX, y: panY }, setPan] = useState<Coords>({\n    x: initialPanX,\n    y: initialPanY,\n  });\n  const [zoom, setZoom] = useState(initialZoom);\n\n  const updateZoom = useCallback(\n    (tick: number) => {\n      setZoom((currentZoom) => Math.max(0.2, Math.min(2, currentZoom + tick)));\n    },\n    [setZoom],\n  );\n\n  const resetZoom = useCallback(() => setZoom(1), [setZoom]);\n  const resetPan = useCallback(() => setPan({ x: 0, y: 0 }), [setPan]);\n  const [isPanning, setIsPanning] = useState(false);\n  const bindCanvas = useGesture(\n    {\n      onDrag: ({ movement: [x, y], first, last, memo = [panX, panY] }) => {\n        if (first) setIsPanning(true);\n        if (last) setIsPanning(false);\n        setPan({ x: x + memo[0], y: y + memo[1] });\n        return memo;\n      },\n      onWheel: ({ delta }) => {\n        updateZoom(delta[1] * -0.001);\n      },\n    },\n    {\n      drag: {\n        delay: true,\n      },\n      enabled: allowPanning,\n    },\n  );\n\n  return (\n    <CanvasContext.Provider\n      value={{\n        initialWidth,\n        initialHeight,\n        dimensions: canvasDimension,\n        setDimension: setCanvasDimension,\n        panX,\n        panY,\n        addRedrawListener,\n        removeRedrawListener,\n        addRect,\n        removeRect,\n        getRects,\n        zoom,\n        updateZoom,\n        resetZoom,\n        pan: { x: panX, y: panY },\n        setPan,\n        resetPan,\n        allowPanning,\n        isPanning,\n        bindCanvas,\n      }}\n    >\n      {children}\n    </CanvasContext.Provider>\n  );\n};\n\nexport function useCanvas() {\n  const context = useContext(CanvasContext);\n  if (!context) {\n    throw new Error('A CanvasProvider wrapper is required to use this hook.');\n  }\n  const {\n    dimensions: { width, height },\n    zoom,\n  } = context;\n\n  const xDomain = useMemo(\n    () =>\n      scaleLinear()\n        .range([0, width])\n        .domain([0, width * zoom]),\n    [width, zoom],\n  );\n  const yDomain = useMemo(\n    () =>\n      scaleLinear()\n        .range([height, 0])\n        .domain([height * zoom, 0]),\n    [height, zoom],\n  );\n\n  return {\n    ...context,\n    xDomain,\n    yDomain,\n  };\n}\n\nexport interface IWithCanvasProps {\n  children: (props: ICanvasContext) => ReactElement;\n}\n\nexport const WithCanvas: FunctionComponent<IWithCanvasProps> = ({\n  children,\n}) => {\n  const context = useCanvas();\n  return children(context);\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { FunctionComponent } from 'react';\nimport { useCanvas } from './CanvasContext';\n\nexport const CanvasTransforms: FunctionComponent = ({ children }) => {\n  const { panX, panY, zoom /* width, height, xDomain, yDomain*/ } = useCanvas();\n  // const originX = width / 2;\n  // const originY = height / 2;\n  // const x = xDomain(zoom * (panX + originX) - originX);\n  // const y = yDomain(zoom * (panY + originY) - originY);\n\n  return (\n    <g\n      transform={`\n        translate(${panX} ${panY})\n        scale(${zoom})\n      `}\n    >\n      {children}\n    </g>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  MutableRefObject,\n  useCallback,\n  useLayoutEffect,\n  useRef,\n  useState,\n} from 'react';\n\nconst noSize = {\n  width: 0,\n  height: 0,\n  top: 0,\n  left: 0,\n  x: 0,\n  y: 0,\n  right: 0,\n  bottom: 0,\n} as DOMRect;\n\nfunction areRectsDifferent(a: DOMRect, b: DOMRect) {\n  return (\n    a.width !== b.width ||\n    a.height !== b.height ||\n    a.top !== b.top ||\n    a.left !== b.left ||\n    a.x !== b.x ||\n    a.y !== b.y ||\n    a.right !== b.right ||\n    a.bottom !== b.bottom\n  );\n}\n\nexport interface UseDimensionsArgs {\n  liveMeasure?: boolean;\n}\n\nexport function useDimensions<T = HTMLDivElement>({\n  liveMeasure = true,\n}: UseDimensionsArgs = {}): [MutableRefObject<T | null>, DOMRect, () => void] {\n  const previousDimensions = useRef<DOMRect>(noSize);\n  const [dimensions, setDimensions] = useState<DOMRect>(noSize);\n  const ref = useRef<T>(null);\n\n  const measure = useCallback(() => {\n    if (ref.current) {\n      const d = (ref.current as unknown as HTMLElement).getBoundingClientRect();\n      if (\n        areRectsDifferent(d as DOMRect, previousDimensions.current as DOMRect)\n      ) {\n        setDimensions(d);\n        previousDimensions.current = d;\n      }\n    }\n  }, [setDimensions]);\n\n  useLayoutEffect(() => {\n    measure();\n\n    if (liveMeasure) {\n      window.addEventListener('resize', measure);\n      window.addEventListener('scroll', measure);\n    }\n    return () => {\n      if (liveMeasure) {\n        window.removeEventListener('resize', measure);\n        window.removeEventListener('scroll', measure);\n      }\n    };\n  }, [liveMeasure, measure]);\n\n  return [ref, dimensions, measure];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, {\n  CSSProperties,\n  FunctionComponent,\n  SVGAttributes,\n  useEffect,\n  useMemo,\n} from 'react';\nimport { CanvasTransforms } from './CanvasTransforms';\nimport { css } from '@patternfly/react-styles';\nimport styles from './Canvas.module.css';\nimport { useCanvas } from './CanvasContext';\nimport { useDimensions } from '../useDimensions';\n\nexport interface ICanvasProps extends SVGAttributes<SVGSVGElement> {\n  isFilled?: boolean;\n}\n\nexport const Canvas: FunctionComponent<ICanvasProps> = ({\n  children,\n  className,\n  style,\n  isFilled = true,\n  ...props\n}) => {\n  const {\n    initialWidth,\n    initialHeight,\n    setDimension,\n    addRedrawListener,\n    removeRedrawListener,\n  } = useCanvas();\n  const [dimensionsRef, dimensions, measure] = useDimensions();\n  useEffect(() => {\n    setDimension({\n      width: dimensions.width,\n      height: dimensions.height,\n      offsetLeft: dimensions.left,\n      offsetTop: dimensions.top,\n    });\n  }, [dimensions, setDimension]);\n\n  useEffect(() => {\n    addRedrawListener(measure);\n    return () => removeRedrawListener(measure);\n  }, [addRedrawListener, measure, removeRedrawListener]);\n\n  const { allowPanning, isPanning, zoom, bindCanvas } = useCanvas();\n  const svgStyle = useMemo(() => {\n    return {\n      cursor: allowPanning ? (isPanning ? 'grabbing' : 'grab') : undefined,\n      userSelect: allowPanning && isPanning ? 'none' : 'auto',\n      backgroundSize: `${30 * zoom}px ${30 * zoom}px`,\n      width: initialWidth || '100%',\n      height: initialHeight || '100%',\n      ...style,\n    } as CSSProperties;\n  }, [allowPanning, initialHeight, initialWidth, isPanning, style, zoom]);\n  return (\n    <div ref={dimensionsRef} className={css(isFilled && styles.canvasWrapper)}>\n      <svg\n        {...props}\n        className={css(styles.svg, allowPanning && styles.panning, className)}\n        style={svgStyle}\n        {...bindCanvas()}\n      >\n        <CanvasTransforms>{children}</CanvasTransforms>\n      </svg>\n    </div>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { SVGProps, forwardRef } from 'react';\nimport { css } from '@patternfly/react-styles';\nimport styles from './HTMLObject.module.css';\n\nexport interface IHTMLObjectProps extends SVGProps<SVGForeignObjectElement> {\n  width: number;\n  height: number;\n  x: number;\n  y: number;\n}\n\nexport const HTMLObject = forwardRef<SVGForeignObjectElement, IHTMLObjectProps>(\n  function HTMLObject(\n    { children, width, height, x, y, className, ...props },\n    ref,\n  ) {\n    return (\n      <foreignObject\n        width={width}\n        height={height}\n        x={x}\n        y={y}\n        className={css(styles.foreignObject, className)}\n        {...props}\n        ref={ref}\n      >\n        {children}\n      </foreignObject>\n    );\n  },\n);\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { FunctionComponent, SVGAttributes, useMemo } from 'react';\nimport { linkHorizontal, linkVertical } from 'd3-shape';\n\nimport { Coords } from './models';\nimport { css } from '@patternfly/react-styles';\nimport styles from './Arc.module.css';\nimport { useToggle } from '../../impl/utils';\n\nexport interface IArcProps extends Omit<SVGAttributes<SVGPathElement>, 'end'> {\n  start: Coords;\n  end: Coords;\n  startSideSize?: number;\n  endSideSize?: number;\n  type?: 'horizontal' | 'vertical';\n  strokeWidth?: number;\n  color?: string;\n  hoveredColor?: string;\n  sideStrokeWidth?: number;\n}\n\nexport const Arc: FunctionComponent<IArcProps> = ({\n  start,\n  end,\n  type = 'horizontal',\n  color = 'grey',\n  hoveredColor = color,\n  strokeWidth = 2,\n  startSideSize = strokeWidth,\n  endSideSize = strokeWidth,\n  sideStrokeWidth = 5,\n  className,\n  children,\n  ...props\n}) => {\n  const {\n    state: hovered,\n    toggleOn: toggleHoverOn,\n    toggleOff: toggleHoverOff,\n  } = useToggle(false);\n  const s = strokeWidth;\n  const appliedColor = hovered ? hoveredColor : color;\n\n  const link = useMemo(\n    () =>\n      (type === 'horizontal' ? linkHorizontal : linkVertical)<\n        any,\n        { start: Coords; end: Coords },\n        Coords\n      >()\n        .context(null)\n        .source((d) => d.start)\n        .target((d) => d.end)\n        .x((d) => d.x)\n        .y((d) => d.y),\n    [type],\n  );\n\n  const d = link({ start, end });\n\n  startSideSize = startSideSize / 2;\n  endSideSize = endSideSize / 2;\n  return d ? (\n    <g\n      onMouseEnter={toggleHoverOn}\n      onMouseLeave={toggleHoverOff}\n      style={{ pointerEvents: 'all' }}\n    >\n      <path d={d} stroke={appliedColor} strokeWidth={s} fill={'none'} />\n      <path\n        d={d}\n        stroke={'transparent'}\n        strokeWidth={20}\n        fill={'none'}\n        className={css(props.onClick && styles.clickable)}\n        {...props}\n      />\n      {children}\n    </g>\n  ) : null;\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { useCallback } from 'react';\nimport { useCanvas } from './CanvasContext';\n\nexport function useBoundingCanvasRect() {\n  const {\n    xDomain,\n    yDomain,\n    dimensions: { offsetLeft, offsetTop },\n    panX,\n    panY,\n  } = useCanvas();\n  const convertClientX = useCallback(\n    (x: number) => xDomain(x - offsetLeft - panX),\n    [offsetLeft, panX, xDomain],\n  );\n  const convertClientY = useCallback(\n    (y: number) => yDomain(y - offsetTop - panY),\n    [offsetTop, panY, yDomain],\n  );\n  const convertDOMRectToCanvasRect = useCallback(\n    (rect: DOMRect): DOMRect => {\n      return {\n        x: convertClientX(rect.x),\n        y: convertClientY(rect.y),\n        width: xDomain(rect.width),\n        height: yDomain(rect.height),\n        top: convertClientY(rect.top),\n        right: convertClientX(rect.right),\n        bottom: convertClientY(rect.bottom),\n        left: convertClientX(rect.left),\n      } as DOMRect;\n    },\n    [convertClientX, convertClientY, xDomain, yDomain],\n  );\n  return {\n    getBoundingCanvasRect: useCallback(\n      (element: Element): DOMRect => {\n        const rect = element.getBoundingClientRect() as DOMRect;\n        return convertDOMRectToCanvasRect(rect);\n      },\n      [convertDOMRectToCanvasRect],\n    ),\n    convertDOMRectToCanvasRect,\n    convertClientX,\n    convertClientY,\n  };\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, {\n  FunctionComponent,\n  MutableRefObject,\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n} from 'react';\nimport { useBoundingCanvasRect } from './useBoundingCanvasRect';\n\nexport interface NodeRect extends DOMRect {\n  clipped?: boolean;\n}\n\nexport interface NodeRefProps {\n  ref: MutableRefObject<HTMLElement | SVGElement | null>;\n  parentId?: string;\n  boundaryId?: string;\n  overrideWidth?: string;\n  overrideHeight?: string;\n}\n\nexport interface NodeRefPropsWithOptionalId extends NodeRefProps {\n  id: string | undefined | Array<string | undefined>;\n}\n\nexport interface NodeRefPropsWithId extends NodeRefProps {\n  id: string;\n}\n\nexport interface NodeRefPropsWithKey extends NodeRefProps {\n  key: string;\n}\n\nexport interface NodeRefMap {\n  [id: string]: NodeRefPropsWithKey;\n}\n\nexport interface INodeRefContext {\n  nodes: MutableRefObject<NodeRefMap>;\n  setRef: (props: NodeRefPropsWithId) => string;\n  unsetRef: (\n    id: string | undefined | Array<string | undefined>,\n    key: string,\n  ) => void;\n}\n\nexport const NodeRefContext = createContext<INodeRefContext | null>(null);\n\nexport const NodeRefProvider: FunctionComponent = ({ children }) => {\n  const nodes = useRef<NodeRefMap>({});\n  const setRef = ({ id, ...props }: NodeRefPropsWithId) => {\n    const key = `${id}-${Date.now()}`;\n    const ids = Array.isArray(id) ? id : [id];\n    for (let index = 0; index < ids.length; index++) {\n      const curId = ids[index];\n      if (curId) {\n        nodes.current[ids[index]] = {\n          ...props,\n          key,\n        };\n      }\n    }\n    return key;\n  };\n  const unsetRef = (\n    id: string | undefined | Array<string | undefined>,\n    key: string,\n  ) => {\n    const ids = Array.isArray(id) ? id : [id];\n    for (let index = 0; index < ids.length; index++) {\n      const curId = ids[index];\n      if (curId && nodes.current[curId]?.key === key) {\n        delete nodes.current[curId];\n      }\n    }\n  };\n\n  return (\n    <NodeRefContext.Provider\n      value={{\n        nodes,\n        setRef,\n        unsetRef,\n      }}\n    >\n      {children}\n    </NodeRefContext.Provider>\n  );\n};\n\nexport function useNodeRef(props: NodeRefPropsWithOptionalId) {\n  const context = useContext(NodeRefContext);\n  useEffect(() => {\n    if (context && props.id) {\n      const { setRef, unsetRef } = context;\n      const key = setRef(props as NodeRefPropsWithId);\n      return () => unsetRef(props.id!, key);\n    }\n    return;\n  }, [context, props]);\n}\n\nexport function useNodeRect() {\n  const context = useContext(NodeRefContext);\n  const { getBoundingCanvasRect } = useBoundingCanvasRect();\n  const getRect = useCallback(\n    (id: string): NodeRect | null => {\n      if (!context) {\n        return null;\n      }\n      const { nodes } = context;\n      const node = nodes.current[id];\n      const element = node ? node.ref.current : undefined;\n      if (element) {\n        let dimensions = getBoundingCanvasRect(element);\n        if (dimensions.height === 0 && node.parentId) {\n          return getRect(node.parentId);\n        }\n        let boundaryRect;\n        if (node.boundaryId && (boundaryRect = getRect(node.boundaryId))) {\n          const overrideWidthRect = node.overrideWidth\n            ? getRect(node.overrideWidth)\n            : undefined;\n          const overrideHeightRect = node.overrideHeight\n            ? getRect(node.overrideHeight)\n            : undefined;\n          const width = overrideWidthRect?.width || dimensions.width;\n          const height = overrideHeightRect?.height || dimensions.height;\n          const x = Math.min(\n            Math.max(\n              overrideWidthRect?.left || dimensions.left,\n              boundaryRect.left,\n            ),\n            boundaryRect.width + boundaryRect.left - dimensions.width,\n          );\n          const isXClipped = x !== (overrideWidthRect?.x || dimensions.x);\n          const y = Math.min(\n            Math.max(\n              overrideHeightRect?.top || dimensions.top + dimensions.height / 2,\n              boundaryRect.top,\n            ),\n            boundaryRect.height + boundaryRect.top,\n          );\n          const isYClipped =\n            y === boundaryRect.top ||\n            y === boundaryRect.height + boundaryRect.top;\n          return {\n            width,\n            height,\n            x,\n            y,\n            left: x,\n            top: y,\n            right: x + width,\n            bottom: y + height,\n            toJSON: () => '',\n            clipped: isXClipped || isYClipped,\n          };\n        }\n        return dimensions;\n      }\n      return null;\n    },\n    [context, getBoundingCanvasRect],\n  );\n  return getRect;\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  Children,\n  PropsWithChildren,\n  cloneElement,\n  forwardRef,\n  isValidElement,\n  useRef,\n} from 'react';\nimport { NodeRefPropsWithOptionalId, useNodeRef } from './NodeRefProvider';\n\nexport const NodeRef = forwardRef<\n  HTMLElement | SVGElement,\n  PropsWithChildren<Omit<NodeRefPropsWithOptionalId, 'ref'>>\n>(function NodeRef({ children, ...props }, ref) {\n  const node = Children.only(children);\n  const nodeRef = useRef<HTMLElement | SVGElement | null>(null);\n\n  useNodeRef({ ...props, ref: nodeRef });\n\n  const handleRef = (el: HTMLElement) => {\n    if (ref) {\n      // @ts-ignore\n      // by default forwardedRef.current is readonly. Let's ignore it\n      ref.current = el;\n    }\n    nodeRef.current = el;\n  };\n\n  return isValidElement(node)\n    ? cloneElement(node, {\n        ref: handleRef,\n      })\n    : null;\n});\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Arc, IArcProps } from './Arc';\nimport React, {\n  FunctionComponent,\n  useCallback,\n  useEffect,\n  useState,\n} from 'react';\n\nimport { Coords } from './models';\nimport { useCanvas } from './CanvasContext';\nimport { useNodeRect } from './NodeRefProvider';\n\nfunction leftCoords(rect: DOMRect) {\n  const { left, y } = rect;\n  return {\n    x: left,\n    y: y,\n  };\n}\n\nfunction rightCoords(rect: DOMRect) {\n  const { right, y } = rect;\n  return {\n    x: right,\n    y: y,\n  };\n}\n\nfunction topCoords(rect: DOMRect) {\n  const { x, top } = rect;\n  return {\n    x: x,\n    y: top,\n  };\n}\n\nfunction bottomCoords(rect: DOMRect) {\n  const { x, bottom } = rect;\n  return {\n    x: x,\n    y: bottom,\n  };\n}\n\nexport interface INodesArcProps\n  extends Omit<Omit<Omit<IArcProps, 'start'>, 'end'>, 'type'> {\n  start: string;\n  end: string;\n}\n\nexport const NodesArc: FunctionComponent<INodesArcProps> = ({\n  start: startId,\n  end: endId,\n  color,\n  ...props\n}) => {\n  const { addRedrawListener, removeRedrawListener } = useCanvas();\n  const getRect = useNodeRect();\n  const [coords, setCoords] = useState<{\n    start: Coords;\n    end: Coords;\n    startSideSize: number;\n    endSideSize: number;\n  } | null>(null);\n  const [linkType, setLinkType] = useState<'horizontal' | 'vertical'>(\n    'horizontal',\n  );\n\n  const calculateCoords = useCallback(\n    function calculateCoordsCb() {\n      const startRect = getRect(startId);\n      const endRect = getRect(endId);\n      if (startRect && endRect) {\n        const [smallRect, bigRect] =\n          startRect.width < endRect.width\n            ? [startRect, endRect]\n            : [endRect, startRect];\n        const sameVerticalSpace =\n          (smallRect.left > bigRect.left && smallRect.left < bigRect.right) ||\n          (smallRect.right < bigRect.right && smallRect.right > bigRect.left);\n        if (sameVerticalSpace) {\n          const [aboveId, bottomId] =\n            startRect.top > endRect.top ? [startId, endId] : [endId, startId];\n          const start = getRect(aboveId);\n          const end = getRect(bottomId);\n          if (start && end) {\n            setCoords({\n              start: topCoords(start),\n              end: bottomCoords(end),\n              startSideSize: start.clipped ? 0 : start.width,\n              endSideSize: end.clipped ? 0 : end.width,\n            });\n            setLinkType('vertical');\n          } else {\n            setCoords(null);\n          }\n        } else {\n          const [leftId, rightId] =\n            startRect.left > endRect.left ? [startId, endId] : [endId, startId];\n          const start = getRect(leftId);\n          const end = getRect(rightId);\n          if (start && end) {\n            setCoords({\n              start: leftCoords(start),\n              end: rightCoords(end),\n              startSideSize: start.clipped ? 0 : start.height,\n              endSideSize: end.clipped ? 0 : end.height,\n            });\n            setLinkType('horizontal');\n          } else {\n            setCoords(null);\n          }\n        }\n      } else {\n        setCoords(null);\n      }\n    },\n    [endId, startId, getRect],\n  );\n\n  useEffect(\n    function onNodeArcRedrawCb() {\n      addRedrawListener(calculateCoords);\n      return () => {\n        removeRedrawListener(calculateCoords);\n      };\n    },\n    [addRedrawListener, removeRedrawListener, calculateCoords],\n  );\n\n  return coords ? (\n    <Arc\n      start={coords.start}\n      end={coords.end}\n      type={linkType}\n      startSideSize={coords.startSideSize}\n      endSideSize={coords.endSideSize}\n      color={\n        color ||\n        ((coords.startSideSize && coords.endSideSize) === 0\n          ? 'var(--pf-global--Color--light-300)'\n          : 'var(--pf-global--Color--dark-200)')\n      }\n      {...props}\n    />\n  ) : null;\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { FunctionComponent, useMemo } from 'react';\nimport { css } from '@patternfly/react-styles';\nimport styles from './Column.module.css';\n\nexport interface IColumnProps {\n  totalColumns?: number;\n  visible?: boolean;\n}\n\nexport const Column: FunctionComponent<IColumnProps> = ({\n  totalColumns = 1,\n  visible = true,\n  children,\n  ...props\n}) => {\n  const style = useMemo(\n    () => ({ flex: `0 0 ${100 / totalColumns}%` }),\n    [totalColumns],\n  );\n  return (\n    <div\n      className={css(styles.column, !visible && styles.hidden)}\n      style={style}\n      {...props}\n    >\n      {children}\n    </div>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { PropsWithChildren, forwardRef } from 'react';\nimport styles from './ColumnBody.module.css';\n\nexport const ColumnBody = forwardRef<HTMLDivElement, PropsWithChildren<{}>>(\n  function ColumnBody({ children }, ref) {\n    return (\n      <div className={styles.body} ref={ref}>\n        {children}\n      </div>\n    );\n  },\n);\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { Children, FunctionComponent } from 'react';\nimport styles from './Actions.module.css';\n\nexport const Actions: FunctionComponent = ({ children }) => (\n  <div className={styles.toolbar}>\n    {Children.map(children, (c, idx) => (\n      <div className={styles.toolbarItem} key={idx}>\n        {c}\n      </div>\n    ))}\n  </div>\n);\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { FunctionComponent, ReactElement } from 'react';\n\nimport { Actions } from '../Actions';\n\nimport { Title } from '@patternfly/react-core';\nimport { css } from '@patternfly/react-styles';\nimport styles from './ColumnHeader.module.css';\n\nexport interface IColumnHeaderProps {\n  title: string;\n  variant?: 'default' | 'plain';\n  actions?: (ReactElement | null | undefined)[];\n}\n\nexport const ColumnHeader: FunctionComponent<IColumnHeaderProps> = ({\n  title,\n  actions,\n  variant,\n  children,\n}) => {\n  return (\n    <div className={styles.header}>\n      <div className={css(styles.toolbar, variant === 'plain' && styles.plain)}>\n        <div className={styles.title}>\n          <Title headingLevel=\"h2\" size=\"lg\">\n            {title}\n          </Title>\n        </div>\n        <Actions>{actions?.filter((a) => a)}</Actions>\n      </div>\n      {children}\n    </div>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Canvas, ICanvasProps } from '../Canvas';\nimport React, { FunctionComponent } from 'react';\nimport { css } from '@patternfly/react-styles';\nimport styles from './ColumnMapper.module.css';\n\nexport interface IColumnMapperProps extends ICanvasProps {}\n\nexport const ColumnMapper: FunctionComponent<IColumnMapperProps> = ({\n  className,\n  children,\n  ...props\n}) => {\n  return (\n    <Canvas {...props} className={css(styles.canvas, className)}>\n      {children}\n    </Canvas>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { HTMLObject, useCanvas } from '../Canvas';\nimport React, { FunctionComponent } from 'react';\nimport styles from './Columns.module.css';\n\nexport const Columns: FunctionComponent = ({ children }) => {\n  const {\n    dimensions: { width, height },\n  } = useCanvas();\n  return (\n    <HTMLObject width={width} height={height} x={0} y={0}>\n      <div className={styles.wrapper}>{children}</div>\n    </HTMLObject>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Button, InputGroup, TextInput } from '@patternfly/react-core';\nimport { ColumnHeader, IColumnHeaderProps } from './ColumnHeader';\nimport React, { FormEvent, FunctionComponent, useRef } from 'react';\n\nimport { SearchIcon } from '@patternfly/react-icons';\n\nexport interface ISearchableColumnHeaderProps extends IColumnHeaderProps {\n  onSearch: (content: string) => void;\n}\n\nexport const SearchableColumnHeader: FunctionComponent<ISearchableColumnHeaderProps> =\n  ({ title, actions = [], onSearch }) => {\n    const searchRef = useRef<HTMLInputElement | null>(null);\n    const onSearchSubmit = (event: FormEvent<HTMLFormElement>) => {\n      if (searchRef.current) {\n        onSearch(searchRef.current.value);\n      }\n      event.preventDefault();\n      return false;\n    };\n    return (\n      <ColumnHeader\n        title={title}\n        actions={[\n          <form onSubmit={onSearchSubmit} key=\"search-form\">\n            <InputGroup>\n              <TextInput\n                name={'search'}\n                id={`search-${title}`}\n                type=\"search\"\n                aria-label=\"Search fields\"\n                onChange={onSearch}\n                ref={searchRef}\n                data-testid={`search-${title}-fields-input-field`}\n              />\n              <Button\n                type={'submit'}\n                aria-label=\"Search\"\n                data-testid={`run-search-${title}-button`}\n                variant={'control'}\n              >\n                <SearchIcon />\n              </Button>\n            </InputGroup>\n          </form>,\n          ...actions,\n        ]}\n      />\n    );\n  };\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, {\n  FunctionComponent,\n  createContext,\n  useContext,\n  useRef,\n} from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { IDragAndDropField } from './models';\nimport { TouchBackend } from 'react-dnd-touch-backend';\n\nconst probablyTouch =\n  window.matchMedia &&\n  (window.matchMedia('(pointer: none)').matches ||\n    window.matchMedia('(pointer: coarse)').matches) &&\n  window.matchMedia('(hover: none)').matches;\n\nconst TouchAndPointerProvider: FunctionComponent = ({ children }) => {\n  return (\n    <DndProvider backend={TouchBackend} options={{ enableMouseEvents: true }}>\n      {children}\n    </DndProvider>\n  );\n};\n\nconst MouseOnlyProvider: FunctionComponent = ({ children }) => (\n  <DndProvider backend={HTML5Backend}>{children}</DndProvider>\n);\n\ninterface IFieldsDndContext {\n  getHoveredTarget: () => IDragAndDropField | null;\n  setHoveredTarget: (target: IDragAndDropField | null) => void;\n}\n\nconst FieldsDndContext = createContext<IFieldsDndContext | null>(null);\n\nexport const FieldsDndProvider: FunctionComponent = ({ children }) => {\n  const hoveredTarget = useRef<IDragAndDropField | null>(null);\n  const getHoveredTarget = () => hoveredTarget.current;\n  const setHoveredTarget = (target: IDragAndDropField | null) =>\n    (hoveredTarget.current = target);\n  const Provider = probablyTouch ? TouchAndPointerProvider : MouseOnlyProvider;\n  return (\n    <Provider>\n      <FieldsDndContext.Provider value={{ getHoveredTarget, setHoveredTarget }}>\n        {children}\n      </FieldsDndContext.Provider>\n    </Provider>\n  );\n};\n\nexport function useFieldsDnd() {\n  const context = useContext(FieldsDndContext);\n  if (!context) {\n    throw new Error(\n      'A FieldsDndProvider wrapper is required to use this hook.',\n    );\n  }\n\n  return context;\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  Button,\n  Form,\n  FormGroup,\n  InputGroup,\n  TextInput,\n  Tooltip,\n} from '@patternfly/react-core';\nimport { EnumValue, useToggle } from '../impl/utils';\nimport { Observable, Subscription } from 'rxjs';\nimport React, {\n  FunctionComponent,\n  KeyboardEvent,\n  MouseEvent,\n  useCallback,\n  useEffect,\n} from 'react';\n\nimport { ExpressionEnumSelect } from './ExpressionEnumSelect';\nimport { ExpressionFieldSearch } from './ExpressionFieldSearch';\nimport { IExpressionNode } from '@atlasmap/core';\nimport { css } from '@patternfly/react-styles';\nimport styles from '@patternfly/react-styles/css/components/FormControl/form-control';\n\nlet atIndex = -1;\nlet atContainer: Node | undefined;\nlet enumCandidates: EnumValue[] = [];\nlet expressionUpdatedSubscription: Subscription | null;\nlet lastUpdatedEvent: IExpressionUpdatedEvent | null = null;\nlet mappedFieldCandidates: string[][] = [];\nlet markup: HTMLDivElement | null = null;\nlet searchFilter = '';\nlet searchMode = false;\nlet selectedNodeId: string = '';\nlet trailerHTML = '';\nlet trailerID = '';\nlet getMappingExpression: () => string;\nlet mappingExprInit: () => void;\nlet mappingExprObservable: () => Observable<IExpressionUpdatedEvent> | null;\n\ninterface IExpressionUpdatedEvent {\n  node: IExpressionNode;\n  offset: number;\n}\n\nexport interface IExpressionContentProps {\n  executeFieldSearch: (searchFilter: string, isSource: boolean) => string[][];\n  getFieldEnums: (nodeId: string) => EnumValue[];\n  mappingExpressionAddField: (\n    selectedDocId: string,\n    selectedField: string,\n    newTextNode: IExpressionNode,\n    atIndex: number,\n    isTrailer: boolean,\n  ) => void;\n  mappingExpressionClearText: (\n    nodeId?: string,\n    startOffset?: number,\n    endOffset?: number,\n  ) => IExpressionNode | null;\n  isMappingExpressionEmpty: boolean;\n  mappingExpressionInit: () => void;\n  mappingExpressionInsertText: (\n    str: string,\n    nodeId?: string | undefined,\n    offset?: number | undefined,\n  ) => void;\n  mappingExpressionObservable: () => Observable<IExpressionUpdatedEvent> | null;\n  mappingExpressionRemoveField: (\n    tokenPosition?: string,\n    offset?: number,\n    removeNext?: boolean,\n  ) => void;\n  mappingExpression?: string;\n  trailerId: string;\n  disabled: boolean;\n  onToggle: () => void;\n  setSelectedEnumValue: (\n    selectedEnum: string,\n    selectedEnumValueIndex: number,\n  ) => void;\n}\n\nfunction updateExpressionMarkup(reset?: boolean) {\n  if (!markup) {\n    return;\n  }\n  if (reset) {\n    markup.innerHTML = trailerHTML;\n  } else {\n    const currentExpression = getMappingExpression();\n    markup.innerHTML = currentExpression + trailerHTML;\n  }\n}\n\nfunction moveCaretToEnd() {\n  if (!markup || trailerID.length === 0) {\n    return;\n  }\n  const trailerNode = markup.querySelector('#' + trailerID);\n  if (!trailerNode) {\n    return;\n  }\n  let range;\n  if (window.getSelection()!.rangeCount > 0) {\n    range = window.getSelection()!.getRangeAt(0);\n  } else {\n    range = document.createRange();\n    window.getSelection()!.addRange(range);\n  }\n  range.selectNode(trailerNode.childNodes[0]);\n  range.setStart(trailerNode.childNodes[0], 0);\n  range.collapse(true);\n}\n\nfunction restoreCaretPosition(event: IExpressionUpdatedEvent) {\n  if (!markup || !event || !event.node) {\n    return;\n  }\n\n  for (let i = 0; i < markup.childNodes.length; i++) {\n    const target: any = markup.childNodes[i];\n    if (target.id === event.node.uuid) {\n      const selection = window.getSelection();\n      if (selection && selection.rangeCount) {\n        const range = selection.getRangeAt(0);\n        const actualNode = target.childNodes[0] ? target.childNodes[0] : target;\n        range.selectNode(actualNode);\n        if (event.offset <= actualNode.length) {\n          range.setStart(actualNode, event.offset);\n        }\n        range.collapse(true);\n      }\n      return;\n    }\n  }\n  moveCaretToEnd();\n}\n\nexport function initializeMappingExpression() {\n  mappingExprInit();\n  const mappingExprObs = mappingExprObservable();\n  if (mappingExprObs) {\n    expressionUpdatedSubscription = mappingExprObs.subscribe(\n      (updatedEvent: IExpressionUpdatedEvent) => {\n        lastUpdatedEvent = updatedEvent;\n      },\n    );\n  }\n  updateExpressionMarkup();\n  if (!lastUpdatedEvent) {\n    moveCaretToEnd();\n  } else {\n    restoreCaretPosition(lastUpdatedEvent);\n    lastUpdatedEvent = null;\n  }\n}\n\nexport const ExpressionContent: FunctionComponent<IExpressionContentProps> = ({\n  executeFieldSearch,\n  getFieldEnums,\n  mappingExpressionAddField,\n  mappingExpressionClearText,\n  isMappingExpressionEmpty,\n  mappingExpressionInit,\n  mappingExpressionInsertText,\n  mappingExpressionObservable,\n  mappingExpressionRemoveField,\n  mappingExpression,\n  trailerId,\n  disabled,\n  onToggle,\n  setSelectedEnumValue,\n}) => {\n  let addFieldToExpression: (\n    selectedDocId: string,\n    selectedField: string,\n    newTextNode: IExpressionNode,\n    atIndex: number,\n    isTrailer: boolean,\n  ) => void;\n  let clearText: (\n    nodeId?: string,\n    startOffset?: number,\n    endOffset?: number,\n  ) => IExpressionNode | null;\n  let fieldSearch: (searchFilter: string, isSource: boolean) => string[][];\n  let getEnums: (enumFieldName: string) => EnumValue[];\n  let setSelEnumValue: (\n    selectedEnumNodeId: string,\n    selectedEnumValueIndex: number,\n  ) => void;\n\n  const {\n    state: showEnumSelect,\n    toggleOn: toggleEnumSelOn,\n    toggleOff: toggleEnumSelOff,\n  } = useToggle(false);\n\n  /**\n   * An enumeration value has been selected for the specified selected field node ID.\n   *\n   * @param selectedEnumNodeId - selected field node ID\n   * @param selectedEnumValueIndex - selected enumeration index\n   */\n  function onEnumSelect(\n    selectedEnumNodeId: string,\n    selectedEnumValueIndex: number,\n  ) {\n    setSelEnumValue(selectedEnumNodeId, selectedEnumValueIndex);\n    clearEnumSelect();\n  }\n\n  function insertTextAtCaretPosition(key: string) {\n    const range = window.getSelection()!.getRangeAt(0);\n    const startContainer = range.startContainer;\n    const startOffset = range.startOffset;\n\n    // On initial caret positioning before the first field node, the markup\n    // and start container are the same.\n    if (markup && startContainer === markup) {\n      if (startOffset === 0) {\n        const initialElement = startContainer.childNodes[0] as Element;\n        mappingExpressionInsertText(key, initialElement.getAttribute('id')!, 0);\n      } else {\n        mappingExpressionInsertText(key);\n      }\n      return;\n    }\n    const nodeId = getCaretPositionNodeId();\n\n    if (nodeId === trailerID) {\n      mappingExpressionInsertText(key);\n    } else {\n      mappingExpressionInsertText(key, nodeId, startOffset);\n    }\n  }\n\n  function removeTokenAtCaretPosition(before: boolean) {\n    const selection = window.getSelection();\n    let removeNext: boolean = false;\n    if (!selection || !markup) {\n      return;\n    }\n    if (!selection.rangeCount) {\n      if (getCaretPositionNodeId() === trailerID) {\n        if (before) {\n          mappingExpressionRemoveField();\n          moveCaretToEnd();\n        }\n      }\n      return;\n    }\n    // The window selection node will be the text node if the cursor lies\n    // at the boundary between the text node and a field node.  In that\n    // case remove the next node.\n    removeNext =\n      !before &&\n      selection.focusNode &&\n      selection.focusNode.nodeType === selection.focusNode.TEXT_NODE &&\n      selection.focusOffset === selection.focusNode.textContent?.length\n        ? true\n        : false;\n    const range = selection.getRangeAt(0);\n    const startContainer = range.startContainer;\n    const startOffset = range.startOffset;\n\n    if (startContainer === markup) {\n      if (startOffset === 0) {\n        // head of expression\n        if (!before && !isMappingExpressionEmpty) {\n          mappingExpressionRemoveField(getCaretPositionNodeId(), 0);\n        }\n        return;\n      }\n      // end of expression\n      if (before && !isMappingExpressionEmpty) {\n        mappingExpressionRemoveField();\n      }\n      return;\n    }\n\n    if (getCaretPositionNodeId(startContainer) === trailerID) {\n      if (before) {\n        mappingExpressionRemoveField();\n      }\n      moveCaretToEnd();\n      return;\n    }\n    mappingExpressionRemoveField(\n      getCaretPositionNodeId(),\n      before ? startOffset - 1 : startOffset,\n      removeNext,\n    );\n    if (getCaretPositionNodeId() === trailerID) {\n      moveCaretToEnd();\n    }\n  }\n\n  /**\n   * Handle key down events.\n   *\n   * @param event - expression keyboard event\n   */\n  function onKeyDown(event: KeyboardEvent<HTMLDivElement>): void {\n    if ('Backspace' === event.key) {\n      // TODO handle cursor position\n      event.preventDefault();\n      removeTokenAtCaretPosition(true);\n      if (searchMode) {\n        updateSearchMode();\n      }\n    } else if ('Delete' === event.key) {\n      event.preventDefault();\n      removeTokenAtCaretPosition(false);\n      if (searchMode) {\n        updateSearchMode();\n      }\n    }\n  }\n\n  /**\n   * A mouse click has occurred within the expression box.\n   *\n   * @param event - mouse event\n   */\n  function onExprClick(event: MouseEvent<HTMLElement>) {\n    selectedNodeId = getCaretPositionNodeId();\n\n    // Check for clicking on an enumeration field node.\n    enumCandidates = getEnums(selectedNodeId);\n    if (enumCandidates.length > 0) {\n      event.preventDefault();\n      toggleEnumSelOn();\n    }\n  }\n\n  function onKeyPress(event: KeyboardEvent<HTMLDivElement>) {\n    if (event.ctrlKey || event.metaKey || event.altKey) {\n      return;\n    }\n    if (event.key.length > 1) {\n      return;\n    }\n    event.preventDefault();\n\n    if (isMappingExpressionEmpty) {\n      initializeMappingExpression();\n    }\n    if (searchMode) {\n      if (event.key.match(/[a-z0-9]/i)) {\n        searchFilter += event.key;\n        mappedFieldCandidates = fieldSearch(searchFilter, true);\n      }\n    } else {\n      searchMode = event.key === '@' ? true : false;\n      if (searchMode) {\n        atContainer = window.getSelection()!.getRangeAt(0).startContainer;\n        atIndex = window.getSelection()!.getRangeAt(0).startOffset;\n        searchFilter = '';\n        mappedFieldCandidates = fieldSearch(searchFilter, true);\n      }\n    }\n    insertTextAtCaretPosition(event.key);\n  }\n\n  function onChange(_event: React.FormEvent<HTMLDivElement>) {\n    if (isMappingExpressionEmpty) {\n      initMappingExpression();\n    }\n    if (expressionUpdatedSubscription) {\n      expressionUpdatedSubscription.unsubscribe();\n    }\n    expressionUpdatedSubscription = mappingExprObservable()!.subscribe(\n      (updatedEvent: IExpressionUpdatedEvent) => {\n        updateExpressionMarkup();\n        restoreCaretPosition(updatedEvent);\n      },\n    );\n    updateExpressionMarkup();\n  }\n\n  function onPaste(event: React.ClipboardEvent<HTMLDivElement>) {\n    if (!event || !event.clipboardData) {\n      return;\n    }\n    event.preventDefault();\n    const pasted = event.clipboardData.getData('text/plain');\n    // TODO handle cursor position... for now just append to the end\n    mappingExpressionInsertText(pasted);\n  }\n\n  /**\n   * The user has selected a field from the search select menu.  Extract\n   * the field name and the scope if it is present.\n   *\n   * @param selectedDocId\n   * @param selectedField\n   * @returns\n   */\n  function insertSelectedField(\n    selectedDocId: string,\n    selectedField: string,\n  ): void {\n    const newTextNode = clearAtText(getCaretPositionNodeId(atContainer));\n    if (newTextNode === null) {\n      return;\n    }\n    const isTrailer = getCaretPositionNodeId(atContainer) === trailerID;\n    addFieldToExpression(\n      selectedDocId,\n      selectedField,\n      newTextNode,\n      atIndex,\n      isTrailer,\n    );\n    clearSearchMode(false);\n    markup!.focus();\n  }\n\n  /**\n   * Clear user input from the selected range offset within the TextNode at\n   * the specified node ID.  The input will become a FieldNode so we don't\n   * need the text.  Return the new UUID position indicator.\n   */\n  function clearAtText(nodeId: string): IExpressionNode | null {\n    if (atIndex === -1) {\n      return null;\n    }\n    const startOffset = atIndex;\n    const endOffset = startOffset + searchFilter.length + 1;\n    let updatedTextNode = null;\n\n    if (nodeId === trailerID) {\n      updatedTextNode = clearText();\n    } else {\n      updatedTextNode = clearText(nodeId, startOffset, endOffset);\n    }\n    return updatedTextNode;\n  }\n\n  /**\n   * Return the UUID string representing the caret position as defined\n   * by the user-specified starting container.  If no container is\n   * specified then return the current caret position node ID value.\n   *\n   * @param startContainer\n   */\n  function getCaretPositionNodeId(startContainer?: Node): string {\n    const selection = window.getSelection();\n    if (!startContainer) {\n      if (!selection || selection.rangeCount === 0) {\n        return trailerID;\n      }\n      startContainer = selection!.getRangeAt(0).startContainer;\n    }\n    if (startContainer.nodeType === selection?.focusNode?.TEXT_NODE) {\n      return startContainer.parentElement!.getAttribute('id')!;\n    } else {\n      return (startContainer.firstChild! as HTMLElement)?.getAttribute('id')!;\n    }\n  }\n\n  /**\n   * Clear elements associated with mapped-field searching.\n   */\n  function clearSearchMode(clearAtSign: boolean): void {\n    if (clearAtSign) {\n      clearAtText(getCaretPositionNodeId(atContainer));\n    }\n    atIndex = -1;\n    atContainer = undefined;\n    searchMode = false;\n    searchFilter = '';\n    mappedFieldCandidates = [];\n  }\n\n  function updateSearchMode(): void {\n    if (searchFilter.length === 0) {\n      mappedFieldCandidates = [];\n      searchMode = false;\n    } else {\n      searchFilter = searchFilter.substr(0, searchFilter.length - 1);\n      mappedFieldCandidates = fieldSearch(searchFilter, true);\n    }\n  }\n\n  function clearEnumSelect() {\n    selectedNodeId = '';\n    enumCandidates = [];\n    toggleEnumSelOff();\n  }\n\n  const initMappingExpression = useCallback(() => {\n    initializeMappingExpression();\n  }, []);\n\n  addFieldToExpression = mappingExpressionAddField;\n  clearText = mappingExpressionClearText;\n  fieldSearch = executeFieldSearch;\n  getEnums = getFieldEnums;\n  setSelEnumValue = setSelectedEnumValue;\n\n  getMappingExpression = () => mappingExpression || '';\n  mappingExprInit = mappingExpressionInit;\n  mappingExprObservable = mappingExpressionObservable;\n  trailerID = trailerId;\n  trailerHTML = `<span id=\"${trailerID}\">&nbsp;</span>`;\n\n  const uninitializeMappingExpression = () => {\n    if (expressionUpdatedSubscription) {\n      expressionUpdatedSubscription.unsubscribe();\n    }\n  };\n\n  useEffect(() => {\n    if (mappingExpression !== undefined) {\n      initMappingExpression();\n      return () => uninitializeMappingExpression();\n    }\n    return;\n  }, [mappingExpression, initMappingExpression]);\n\n  return (\n    <>\n      <Form>\n        <FormGroup fieldId=\"expressionContent\">\n          <InputGroup>\n            <Tooltip\n              content={'Enable/ Disable conditional mapping expression.'}\n              enableFlip={true}\n              entryDelay={750}\n              exitDelay={100}\n              position={'left'}\n            >\n              <Button\n                variant={'control'}\n                aria-label=\"Enable/ Disable conditional mapping expression\"\n                tabIndex={-1}\n                onClick={onToggle}\n                data-testid={\n                  'enable-disable-conditional-mapping-expression-button'\n                }\n                isDisabled={disabled}\n              >\n                <i>\n                  f\n                  <small style={{ position: 'relative', bottom: -3 }}>\n                    (x)\n                  </small>\n                </i>\n              </Button>\n            </Tooltip>\n            {!disabled && mappingExpression !== undefined ? (\n              <Tooltip\n                content={\"Enter text or '@' for sourcefields menu.\"}\n                enableFlip={true}\n                entryDelay={750}\n                exitDelay={100}\n                position={'left'}\n              >\n                <div\n                  id=\"expressionMarkup\"\n                  key=\"expressionMarkup-div\"\n                  aria-label=\"Expression Content\"\n                  contentEditable\n                  className={css(styles.formControl, 'ExpressionFieldSearch')}\n                  suppressContentEditableWarning={true}\n                  onChange={onChange}\n                  onKeyDown={onKeyDown}\n                  onKeyPress={onKeyPress}\n                  onPaste={onPaste}\n                  onClick={onExprClick}\n                  ref={(el) => (markup = el)}\n                  tabIndex={-1}\n                  style={{ paddingLeft: 8 }}\n                />\n              </Tooltip>\n            ) : (\n              <TextInput\n                isDisabled={true}\n                aria-label={'Expression content'}\n              /> /* this to render a disabled field */\n            )}\n          </InputGroup>\n        </FormGroup>\n      </Form>\n      <div>\n        {mappedFieldCandidates.length > 0 && (\n          <span>\n            <ExpressionFieldSearch\n              clearSearchMode={clearSearchMode}\n              insertSelectedField={insertSelectedField}\n              mappedFieldCandidates={mappedFieldCandidates}\n            />\n          </span>\n        )}\n        {showEnumSelect && (\n          <span>\n            <ExpressionEnumSelect\n              selectedNodeId={selectedNodeId}\n              enumCandidates={enumCandidates!}\n              clearEnumSelect={clearEnumSelect}\n              onEnumSelect={onEnumSelect}\n            />\n          </span>\n        )}\n      </div>\n    </>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { FunctionComponent, ReactElement } from 'react';\nimport { XYCoord, useDragLayer } from 'react-dnd';\n\nimport { IDragAndDropField } from './models';\nimport { useFieldsDnd } from './FieldsDndProvider';\n\nexport interface IIDraggedFieldChildrenProps {\n  isDragging: boolean;\n  currentOffset: XYCoord | null;\n  draggedField: IDragAndDropField | null;\n  getHoveredTarget: () => IDragAndDropField | null;\n}\n\nexport interface IDraggedFieldProps {\n  children: (props: IIDraggedFieldChildrenProps) => ReactElement | null;\n}\n\nexport const DraggedField: FunctionComponent<IDraggedFieldProps> = ({\n  children,\n}) => {\n  const { getHoveredTarget } = useFieldsDnd();\n  const { isDragging, draggedField, currentOffset } = useDragLayer<\n    Omit<IIDraggedFieldChildrenProps, 'getHoveredTarget'>\n  >((monitor) => ({\n    draggedField: monitor.getItem(),\n    currentOffset: monitor.getClientOffset(),\n    isDragging: monitor.isDragging(),\n  }));\n\n  return children({\n    isDragging,\n    currentOffset,\n    draggedField,\n    getHoveredTarget,\n  });\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, {\n  ElementType,\n  HTMLAttributes,\n  ReactElement,\n  forwardRef,\n  useEffect,\n} from 'react';\n\nimport { IDragAndDropField } from './models';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport { useDrag } from 'react-dnd';\n\nexport interface IDraggableChildrenProps {\n  isDragging: boolean;\n}\n\nexport interface IDraggableProps\n  extends Omit<HTMLAttributes<HTMLElement>, 'onDrop'> {\n  field: IDragAndDropField;\n  onDrop: (source: IDragAndDropField, target: IDragAndDropField | null) => void;\n  as?: ElementType;\n  children: (props: IDraggableChildrenProps) => ReactElement;\n}\n\nexport const DraggableField = forwardRef<HTMLElement, IDraggableProps>(\n  function DraggableField(\n    { field, onDrop, as: As = 'div', children, ...props },\n    ref,\n  ) {\n    const [{ isDragging }, dragRef, preview] = useDrag<\n      IDragAndDropField,\n      IDragAndDropField,\n      Omit<IDraggableChildrenProps, 'dragRef'>\n    >({\n      type: field.type,\n      item: field,\n      collect: (monitor) => ({\n        isDragging: monitor.isDragging(),\n      }),\n      end: (_, monitor) => {\n        if (monitor.didDrop()) {\n          onDrop(field, monitor.getDropResult());\n        }\n      },\n    });\n\n    useEffect(() => {\n      preview(getEmptyImage(), { captureDraggingState: true });\n    }, [preview]);\n\n    const handleRef = (el: HTMLElement) => {\n      if (ref) {\n        // @ts-ignore\n        // by default forwardedRef.current is readonly. Let's ignore it\n        ref.current = el;\n      }\n      dragRef(el);\n    };\n\n    return (\n      <As ref={handleRef} {...props}>\n        {children({\n          isDragging,\n        })}\n      </As>\n    );\n  },\n);\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, {\n  ElementType,\n  HTMLAttributes,\n  ReactElement,\n  forwardRef,\n  useEffect,\n  useRef,\n  // useEffect,\n} from 'react';\nimport { IDragAndDropField } from './models';\nimport { useDrop } from 'react-dnd';\nimport { useFieldsDnd } from './FieldsDndProvider';\n\nexport interface IFieldDropTargetChildren {\n  isOver: boolean;\n  isDroppable: boolean;\n  isTarget: boolean;\n  field: IDragAndDropField;\n}\n\nexport interface IFieldDropTargetProps\n  extends Omit<HTMLAttributes<HTMLElement>, 'onDrop'> {\n  accept: string[];\n  target: IDragAndDropField;\n  canDrop: (draggedField: IDragAndDropField) => boolean;\n  as?: ElementType;\n  children: (props: IFieldDropTargetChildren) => ReactElement;\n}\n\nexport const FieldDropTarget = forwardRef<HTMLElement, IFieldDropTargetProps>(\n  function FieldDropTarget(\n    { accept, target, canDrop, as: As = 'div', children, ...props },\n    ref,\n  ) {\n    const { setHoveredTarget } = useFieldsDnd();\n    const [{ isOver, isDroppable, isTarget, field }, dropRef] = useDrop<\n      IDragAndDropField,\n      IDragAndDropField,\n      IFieldDropTargetChildren\n    >({\n      accept,\n      collect: (monitor) => ({\n        isOver: monitor.isOver(),\n        isDroppable: monitor.canDrop(),\n        isTarget: monitor.isOver() && monitor.canDrop(),\n        field: monitor.getItem(),\n      }),\n      canDrop: (_, monitor) => canDrop(monitor.getItem()),\n      drop: () => target,\n    });\n\n    const handleRef = (el: HTMLElement) => {\n      if (ref) {\n        // @ts-ignore\n        // by default forwardedRef.current is readonly. Let's ignore it\n        ref.current = el;\n      }\n      dropRef(el);\n    };\n\n    const wasOver = useRef(false);\n    const wasTarget = useRef(false);\n    useEffect(() => {\n      if (isOver !== wasOver.current || isTarget !== wasTarget.current) {\n        if (isTarget) {\n          setHoveredTarget(target);\n        } else if (!isOver) {\n          setHoveredTarget(null);\n        }\n        wasOver.current = isOver;\n        wasTarget.current = isTarget;\n      }\n    }, [isOver, isTarget, setHoveredTarget, target]);\n\n    return (\n      <As ref={handleRef} {...props}>\n        {children({ isDroppable, isOver, isTarget, field })}\n      </As>\n    );\n  },\n);\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { FunctionComponent, useEffect } from 'react';\n\nimport { DraggedField } from './DraggedField';\nimport { Label } from '@patternfly/react-core';\nimport styles from './FieldDragLayer.module.css';\nimport { useDimensions } from '../useDimensions';\n\nexport const FieldDragLayer: FunctionComponent = () => {\n  const [ref, dimensions, measure] = useDimensions();\n  useEffect(measure);\n\n  return (\n    <DraggedField>\n      {({ isDragging, currentOffset, draggedField }) =>\n        isDragging && currentOffset && draggedField ? (\n          <div\n            style={{\n              position: 'absolute',\n              zIndex: 1000,\n              width: dimensions.width,\n              height: dimensions.height,\n              left: currentOffset.x - dimensions.width / 2,\n              top: currentOffset.y - dimensions.height,\n            }}\n            className={styles.canvasObject}\n          >\n            <div ref={ref} className={styles.canvasInner}>\n              <Label>{draggedField.name}</Label>\n            </div>\n          </div>\n        ) : null\n      }\n    </DraggedField>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  FormSelect,\n  FormSelectOption,\n  FormSelectOptionGroup,\n} from '@patternfly/react-core';\nimport React, { FunctionComponent, ReactElement, useCallback } from 'react';\n\nimport styles from './AddFieldTypeahead.module.css';\n\nexport interface IAddFieldTypeaheadField {\n  label: string;\n  group: string;\n  onAdd: () => void;\n}\n\nexport interface IAddFieldTypeaheadProps {\n  fields: IAddFieldTypeaheadField[];\n  ariaLabelTypeAhead: string;\n  placeholderText: string;\n  isSource: boolean;\n}\n\nexport const AddFieldTypeahead: FunctionComponent<IAddFieldTypeaheadProps> = ({\n  fields,\n  ariaLabelTypeAhead,\n  placeholderText,\n  isSource,\n}) => {\n  const renderOptions = (\n    fields: IAddFieldTypeaheadField[],\n    placeholderField: IAddFieldTypeaheadField,\n  ) => {\n    fields.unshift(placeholderField);\n    const groups = fields.reduce<{ [group: string]: ReactElement[] }>(\n      (groups, f) => {\n        const optValue = f.group + '\\\\' + f.label;\n        groups[f.group] = [\n          ...(groups[f.group] || []),\n          <FormSelectOption\n            isPlaceholder={f.group.length === 0}\n            isDisabled={false}\n            label={f.label}\n            key={\n              optValue + (isSource ? '-source' : '-target') + fields.indexOf(f)\n            }\n            value={optValue}\n            data-testid={`add-field-option-${optValue}`}\n            className={styles.field}\n          >\n            {f.label}\n          </FormSelectOption>,\n        ];\n        return groups;\n      },\n      {},\n    );\n    return Object.entries<ReactElement[]>(groups).map(\n      ([groupName, elements]) => (\n        <FormSelectOptionGroup label={groupName} key={groupName}>\n          {elements}\n        </FormSelectOptionGroup>\n      ),\n    );\n  };\n\n  const onChange = useCallback(\n    (value: string, _e: React.FormEvent<HTMLSelectElement>) => {\n      const valueComps = value.split('\\\\');\n      const selField = fields.find(\n        (f) => f.label === valueComps[1] && f.group === valueComps[0],\n      );\n      if (selField) {\n        (selField as IAddFieldTypeaheadField).onAdd();\n      }\n    },\n    [fields],\n  );\n\n  const placeholderField: IAddFieldTypeaheadField = {\n    label: placeholderText,\n    group: '',\n    onAdd: () => void {},\n  };\n\n  return (\n    <div>\n      <FormSelect\n        aria-label={ariaLabelTypeAhead}\n        className={styles.select}\n        data-testid={'mapping-details-add-field'}\n        id={ariaLabelTypeAhead}\n        onChange={onChange}\n        placeholder={placeholderText}\n      >\n        {renderOptions(fields, placeholderField)}\n      </FormSelect>\n    </div>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Dropdown, DropdownProps } from '@patternfly/react-core';\nimport React, { FunctionComponent, ReactElement } from 'react';\n\nimport { useToggle } from '../impl/utils';\n\nexport interface IAutoDropdown\n  extends Omit<Omit<DropdownProps, 'css'>, 'toggle'> {\n  toggle: (props: { isOpen: boolean; toggleOpen: () => void }) => ReactElement;\n}\n\nexport const AutoDropdown: FunctionComponent<IAutoDropdown> = ({\n  toggle,\n  ...props\n}) => {\n  const { state: isOpen, toggle: toggleOpen } = useToggle(false);\n\n  return (\n    <Dropdown\n      {...props}\n      isOpen={isOpen}\n      onSelect={toggleOpen}\n      toggle={toggle({ isOpen, toggleOpen })}\n    />\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { EnumValue, useToggle } from '../impl/utils';\nimport {\n  Select,\n  SelectOption,\n  SelectOptionObject,\n} from '@patternfly/react-core';\n\nimport { FunctionComponent } from 'react';\nimport React from 'react';\nimport styles from './ExpressionEnumSelect.module.css';\n\nexport interface IExpressionEnumSelectProps {\n  selectedNodeId: string;\n  enumCandidates: EnumValue[];\n  clearEnumSelect: () => void;\n  onEnumSelect: (selectedNodeId: string, selectedIndex: number) => void;\n}\nlet selectValue = '';\n\nexport const ExpressionEnumSelect: FunctionComponent<IExpressionEnumSelectProps> =\n  ({ selectedNodeId, enumCandidates, clearEnumSelect, onEnumSelect }) => {\n    const id = `expr-enum-select-${selectValue}`;\n    const { state, toggle, toggleOff } = useToggle(true, onToggleEnumSelect);\n\n    function onToggleEnumSelect(toggled: boolean): any {\n      if (!toggled) {\n        enumCandidates = [];\n        clearEnumSelect();\n      }\n    }\n\n    function selectionChanged(\n      event: any,\n      value: string | SelectOptionObject,\n      _isPlaceholder?: boolean | undefined,\n    ): void {\n      selectValue = value as string;\n      onEnumSelect(selectedNodeId, event.currentTarget.id.split('-').pop());\n      onToggleEnumSelect(false);\n      toggleOff();\n    }\n\n    function createSelectOption(selectField: string, idx: number): any {\n      if (selectField[1].length === 0) {\n        return (\n          <SelectOption\n            isDisabled={true}\n            label={selectField}\n            value={selectField}\n            key={idx}\n            className={styles.document}\n          />\n        );\n      } else {\n        return (\n          <SelectOption\n            label={selectField}\n            value={selectField}\n            key={idx}\n            className={styles.field}\n          />\n        );\n      }\n    }\n\n    return (\n      <div\n        aria-label=\"Expression Enumeration\"\n        className=\"enumSelectMenu\"\n        data-testid={'expression-enumeration-select'}\n      >\n        <Select\n          onToggle={toggle}\n          isOpen={state}\n          value={selectValue}\n          id={id}\n          onSelect={selectionChanged}\n          data-testid={id}\n        >\n          {enumCandidates.map((s, idx: number) =>\n            createSelectOption(s.name, idx),\n          )}\n        </Select>\n      </div>\n    );\n  };\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  Select,\n  SelectOption,\n  SelectOptionObject,\n} from '@patternfly/react-core';\nimport { FunctionComponent } from 'react';\nimport React from 'react';\nimport styles from './ExpressionFieldSearch.module.css';\nimport { useToggle } from '../impl/utils';\n\nexport interface IExpressionFieldSearchProps {\n  clearSearchMode: (clearAtSign: boolean) => void;\n  insertSelectedField: (docId: string, fieldStr: string) => void;\n  mappedFieldCandidates: string[][];\n}\nlet selectedField = '';\n\nexport const ExpressionFieldSearch: FunctionComponent<IExpressionFieldSearchProps> =\n  ({ clearSearchMode, insertSelectedField, mappedFieldCandidates }) => {\n    function onToggleFieldSearch(toggled: boolean): any {\n      if (!toggled) {\n        mappedFieldCandidates = [];\n        clearSearchMode(true);\n        candidateSrcElement = null;\n      }\n    }\n\n    const id = `expr-field-search-${selectedField}`;\n    let candidateSrcElement: any;\n    const { state, toggle, toggleOff } = useToggle(true, onToggleFieldSearch);\n\n    /**\n     * Track a candidate selection from either a mouse hover or arrow\n     * key navigation.\n     *\n     * @param event\n     * @param index\n     */\n    function trackSelection(event: any): void {\n      if (event.srcElement) {\n        // const docId = event.target.getAttribute('label');\n        candidateSrcElement = event.srcElement;\n      }\n    }\n\n    /**\n     * Update the candidate source element and reset the focus.\n     *\n     * @param sibling\n     */\n    function updateCandidate(sibling: any): void {\n      if (candidateSrcElement && sibling) {\n        candidateSrcElement.style.backgroundColor = 'white';\n        sibling.focus();\n        candidateSrcElement = sibling;\n        candidateSrcElement.style.backgroundColor = 'lightblue';\n      }\n    }\n\n    function onKeyHandler(\n      _index: number,\n      _innerIndex: number,\n      _position: string,\n    ): void {\n      // TODO\n    }\n\n    function onKeyDown(event: any): void {\n      if ('Enter' === event.key) {\n        event.preventDefault();\n        if (candidateSrcElement) {\n          // insertSelectedField(candidateIndex);\n        }\n      } else if ('ArrowDown' === event.key) {\n        event.preventDefault();\n        trackSelection(event);\n        if (candidateSrcElement) {\n          updateCandidate(candidateSrcElement.nextElementSibling);\n        }\n      } else if ('ArrowUp' === event.key) {\n        event.preventDefault();\n        trackSelection(event);\n        if (candidateSrcElement) {\n          updateCandidate(candidateSrcElement.previousElementSibling);\n        }\n      } else if ('Tab' === event.key) {\n        if (!candidateSrcElement && event.srcElement) {\n          candidateSrcElement =\n            event.srcElement.nextElementSibling.firstElementChild;\n          candidateSrcElement.style.backgroundColor = 'lightblue';\n        } else if (\n          candidateSrcElement &&\n          candidateSrcElement.nextElementSibling\n        ) {\n          event.preventDefault();\n          updateCandidate(candidateSrcElement!.nextElementSibling);\n        }\n      }\n    }\n\n    function selectionChanged(\n      event: any,\n      value: string | SelectOptionObject,\n      isPlaceholder?: boolean | undefined,\n    ): void {\n      if (!isPlaceholder) {\n        const docId = event.target.getAttribute('label');\n        selectedField = value as string;\n        insertSelectedField(docId, selectedField);\n      }\n      onToggleFieldSearch(false);\n      toggleOff();\n    }\n\n    function createSelectOption(selectField: string[], idx: number): any {\n      // Use the display name for documents and field path for fields.\n      if (selectField[1][0] !== '/') {\n        return (\n          <SelectOption\n            label={selectField[0]}\n            value={selectField[0]}\n            key={idx}\n            index={idx}\n            className={styles.document}\n            isPlaceholder={true}\n          />\n        );\n      } else {\n        return (\n          <SelectOption\n            label={selectField[0]}\n            value={selectField[1]}\n            key={idx}\n            keyHandler={onKeyHandler}\n            index={idx}\n            className={styles.field}\n          />\n        );\n      }\n    }\n\n    return (\n      <div\n        aria-label=\"Expression Field Search\"\n        className={styles.searchMenu}\n        data-testid={'expression-field-search'}\n      >\n        <Select\n          onToggle={toggle}\n          isOpen={state}\n          value={selectedField}\n          id={id}\n          onKeyDown={onKeyDown}\n          onSelect={selectionChanged}\n          data-testid={id}\n        >\n          {mappedFieldCandidates.map((s, idx: number) =>\n            createSelectOption(s, idx),\n          )}\n        </Select>\n      </div>\n    );\n  };\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  ExpressionContent,\n  IExpressionContentProps,\n} from './ExpressionContent';\nimport React, { FunctionComponent } from 'react';\nimport { ToolbarGroup, ToolbarItem } from '@patternfly/react-core';\nimport styles from './ConditionalExpressionInput.module.css';\n\nexport interface IConditionalExpressionInputProps\n  extends IExpressionContentProps {}\n\nexport const ConditionalExpressionInput: FunctionComponent<IConditionalExpressionInputProps> =\n  ({\n    executeFieldSearch,\n    getFieldEnums,\n    mappingExpressionAddField,\n    mappingExpressionClearText,\n    isMappingExpressionEmpty,\n    mappingExpressionInit,\n    mappingExpressionInsertText,\n    mappingExpressionObservable,\n    mappingExpressionRemoveField,\n    mappingExpression,\n    trailerId,\n    disabled,\n    onToggle,\n    setSelectedEnumValue,\n  }) => {\n    return (\n      <ToolbarGroup\n        variant=\"filter-group\"\n        className={styles.toolbarItem}\n        role={'form'}\n      >\n        <ToolbarItem className={styles.toolbarItem}>\n          <ExpressionContent\n            disabled={disabled}\n            executeFieldSearch={executeFieldSearch}\n            getFieldEnums={getFieldEnums}\n            mappingExpressionAddField={mappingExpressionAddField}\n            mappingExpressionClearText={mappingExpressionClearText}\n            isMappingExpressionEmpty={isMappingExpressionEmpty}\n            mappingExpressionInit={mappingExpressionInit}\n            mappingExpressionInsertText={mappingExpressionInsertText}\n            mappingExpressionObservable={mappingExpressionObservable}\n            mappingExpressionRemoveField={mappingExpressionRemoveField}\n            mappingExpression={mappingExpression}\n            trailerId={trailerId}\n            onToggle={onToggle}\n            setSelectedEnumValue={setSelectedEnumValue}\n          />\n        </ToolbarItem>\n      </ToolbarGroup>\n    );\n  };\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Button, Modal } from '@patternfly/react-core';\nimport React, { FunctionComponent } from 'react';\n\nexport type CloseCallback = () => void;\n\nexport interface IAboutDialogProps {\n  title: string;\n  onClose: CloseCallback;\n  isOpen: boolean;\n  uiVersion: string;\n  runtimeVersion: string;\n}\n\nexport const AboutDialog: FunctionComponent<IAboutDialogProps> = ({\n  title,\n  onClose,\n  isOpen,\n  uiVersion,\n  runtimeVersion,\n}) => {\n  return (\n    <Modal\n      variant=\"small\"\n      title={title}\n      isOpen={isOpen}\n      onClose={onClose}\n      actions={[\n        <Button\n          key={'close'}\n          variant={'primary'}\n          onClick={onClose}\n          aria-label=\"Close\"\n          data-testid={'about-dialog-close-button'}\n          isDisabled={!onClose}\n        >\n          Close\n        </Button>,\n      ]}\n    >\n      <div>UI Version: {uiVersion}</div>\n      <div>Runtime Version: {runtimeVersion}</div>\n    </Modal>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Button, Modal } from '@patternfly/react-core';\nimport React, { FunctionComponent } from 'react';\n\nexport type ConfirmCallback = () => void;\nexport type CancelCallback = () => void;\n\nexport interface IConfirmationDialogProps {\n  title: string;\n  description?: string;\n  dataTestid?: string;\n  onConfirm?: ConfirmCallback;\n  onCancel: CancelCallback;\n  isOpen: boolean;\n}\n\nexport const ConfirmationDialog: FunctionComponent<IConfirmationDialogProps> =\n  ({\n    title,\n    description,\n    dataTestid,\n    onCancel,\n    onConfirm,\n    isOpen,\n    children,\n  }) => {\n    return (\n      <Modal\n        variant=\"small\"\n        title={title}\n        description={description}\n        data-testid={dataTestid}\n        isOpen={isOpen}\n        onClose={onCancel}\n        actions={[\n          <Button\n            key={'confirm'}\n            variant={'primary'}\n            onClick={onConfirm}\n            aria-label=\"Confirm\"\n            data-testid={'confirmation-dialog-confirm-button'}\n            isDisabled={!onConfirm}\n          >\n            Confirm\n          </Button>,\n          <Button\n            key={'cancel'}\n            variant={'link'}\n            onClick={onCancel}\n            aria-label=\"Cancel\"\n            data-testid={'confirmation-dialog-cancel-button'}\n          >\n            Cancel\n          </Button>,\n        ]}\n      >\n        {children}\n      </Modal>\n    );\n  };\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  ConfirmationDialog,\n  IConfirmationDialogProps,\n} from './ConfirmationDialog';\nimport {\n  Form,\n  FormGroup,\n  FormSelect,\n  FormSelectOption,\n  TextInput,\n  Tooltip,\n  ValidatedOptions,\n} from '@patternfly/react-core';\n\nimport React, {\n  FunctionComponent,\n  useCallback,\n  useEffect,\n  useState,\n} from 'react';\n\ninterface ValueTypeOption {\n  label: string;\n  value: string;\n}\n\nexport interface IConstant {\n  name: string;\n  value: string;\n  valueType: string;\n}\n\nexport interface IConstantDialogProps {\n  title: string;\n  name?: string;\n  value?: string;\n  valueType?: string;\n  valueTypeOptions: ValueTypeOption[];\n  isOpen: IConfirmationDialogProps['isOpen'];\n  onCancel: IConfirmationDialogProps['onCancel'];\n  onConfirm: (constant: IConstant) => void;\n  onValidation: (name: string, value: string) => boolean;\n}\nexport const ConstantDialog: FunctionComponent<IConstantDialogProps> = ({\n  title,\n  name: initialName = '',\n  value: initialValue = '',\n  valueType: initialValueType = '',\n  valueTypeOptions,\n  isOpen,\n  onCancel,\n  onConfirm,\n  onValidation,\n}) => {\n  const [name, setName] = useState(initialName);\n  const [value, setValue] = useState(initialValue);\n  const [valueType, setValueType] = useState(initialValueType);\n  const [isConstantNameUnique, setConstantNameUnique] = useState(true);\n  const [isConstantValid, setConstantValid] = useState(false);\n  const [isConstantNameValid, setConstantNameValid] = useState(\n    ValidatedOptions.default,\n  );\n\n  const reset = useCallback(() => {\n    setName(initialName);\n    setValue(initialValue);\n    setValueType(initialValueType);\n    setConstantValid(false);\n    setConstantNameValid(ValidatedOptions.default);\n    setConstantNameUnique(true);\n  }, [initialName, initialValue, initialValueType]);\n\n  const handleOnConfirm = useCallback(() => {\n    onConfirm({ name, value: value, valueType });\n    reset();\n  }, [onConfirm, reset, name, value, valueType]);\n\n  const handleOnCancel = useCallback(() => {\n    onCancel();\n    reset();\n  }, [onCancel, reset]);\n\n  function handleOnNameChange(name: string) {\n    validateConstant(name, value);\n    setName(name);\n  }\n\n  function handleOnValueChange(value: string) {\n    validateConstant(name, value);\n    setValue(value);\n  }\n\n  function validateConstant(name: string, value: string): boolean {\n    if (!name || name.length === 0) {\n      setConstantNameValid(ValidatedOptions.default);\n      setConstantValid(false);\n      return false;\n    }\n    const nameRegex = /^[a-zA-Z0-9_@-]+$/;\n    if (!nameRegex.test(name)) {\n      setConstantNameValid(ValidatedOptions.error);\n      return false;\n    }\n    setConstantNameValid(ValidatedOptions.success);\n    const isValid = onValidation(name, value);\n    setConstantValid(value.length > 0 && isValid);\n    setConstantNameUnique(isValid);\n    return isValid;\n  }\n\n  // make sure to resync the internal state to the values passed in as props\n  useEffect(reset, [reset]);\n\n  return (\n    <ConfirmationDialog\n      title={title}\n      onCancel={handleOnCancel}\n      onConfirm={isConstantValid ? handleOnConfirm : undefined}\n      isOpen={isOpen}\n    >\n      <Form>\n        <FormGroup label={'Name'} fieldId={'name'} isRequired={true}>\n          {!isConstantNameUnique ? (\n            <Tooltip\n              content={<div>A constant with this name already exists</div>}\n              entryDelay={750}\n              exitDelay={100}\n            >\n              <TextInput\n                value={name}\n                onChange={handleOnNameChange}\n                id={'name'}\n                autoFocus={true}\n                isRequired={true}\n                data-testid={'constant-name-text-input-tooltip'}\n                style={{ color: 'red' }}\n              />\n            </Tooltip>\n          ) : (\n            <TextInput\n              value={name}\n              onChange={handleOnNameChange}\n              id={'name'}\n              autoFocus={true}\n              isRequired={true}\n              data-testid={'constant-name-text-input'}\n              validated={isConstantNameValid}\n            />\n          )}\n        </FormGroup>\n        <FormGroup label={'Value'} fieldId={'constvalue'} isRequired={true}>\n          <TextInput\n            value={value}\n            onChange={handleOnValueChange}\n            id={'constvalue'}\n            autoFocus={true}\n            isRequired={true}\n            data-testid={'constant-value-text-input'}\n          />\n        </FormGroup>\n        <FormGroup label={'Value type'} fieldId={'valueType'}>\n          <FormSelect\n            value={valueType}\n            aria-label={'Select value type'}\n            onChange={setValueType}\n            data-testid={'constant-type-form-select'}\n          >\n            {valueTypeOptions.map(({ label, value }, idx) => (\n              <FormSelectOption key={idx} value={value} label={label} />\n            ))}\n          </FormSelect>\n        </FormGroup>\n      </Form>\n    </ConfirmationDialog>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  ConfirmationDialog,\n  IConfirmationDialogProps,\n} from './ConfirmationDialog';\nimport {\n  Form,\n  FormGroup,\n  FormSelect,\n  FormSelectOption,\n} from '@patternfly/react-core';\nimport React, {\n  FunctionComponent,\n  useCallback,\n  useEffect,\n  useState,\n} from 'react';\n\ninterface ValueTypeOption {\n  label: string;\n  value: string;\n}\n\nexport interface ICustomClass {\n  customClassName: string;\n  collectionType: string;\n}\n\nexport interface ICustomClassDialogProps {\n  title: string;\n  customClassName: string;\n  customClassNames: string[] | null;\n  collectionType?: string;\n  collectionTypeOptions: ValueTypeOption[];\n  isOpen: IConfirmationDialogProps['isOpen'];\n  onCancel: IConfirmationDialogProps['onCancel'];\n  onConfirm: (constant: ICustomClass) => void;\n}\nexport const CustomClassDialog: FunctionComponent<ICustomClassDialogProps> = ({\n  title,\n  customClassName: initialCustomClassName = '',\n  customClassNames,\n  collectionType: initialCollectionType = '',\n  collectionTypeOptions,\n  isOpen,\n  onCancel,\n  onConfirm,\n}) => {\n  const [customClassName, setCustomClassName] = useState(\n    initialCustomClassName,\n  );\n  const [collectionType, setCollectionType] = useState(initialCollectionType);\n\n  const reset = useCallback(() => {\n    setCustomClassName(initialCustomClassName);\n    setCollectionType(initialCollectionType);\n  }, [initialCustomClassName, initialCollectionType]);\n\n  const handleOnConfirm = useCallback(() => {\n    onConfirm({\n      customClassName: customClassName,\n      collectionType: collectionType,\n    });\n    reset();\n  }, [onConfirm, reset, customClassName, collectionType]);\n\n  const handleOnCancel = useCallback(() => {\n    onCancel();\n    reset();\n  }, [onCancel, reset]);\n\n  // make sure to resync the internal state to the values passed in as props\n  useEffect(reset, [reset]);\n\n  return (\n    <ConfirmationDialog\n      title={title}\n      onCancel={handleOnCancel}\n      onConfirm={customClassName.length > 0 ? handleOnConfirm : undefined}\n      isOpen={isOpen}\n    >\n      <Form>\n        <FormGroup\n          label={'Custom class name'}\n          fieldId={'custom-class-name'}\n          isRequired={true}\n        >\n          <FormSelect\n            value={customClassName}\n            aria-label={'Select class name'}\n            autoFocus={true}\n            onChange={setCustomClassName}\n            data-testid={'custom-class-name-form-select'}\n          >\n            {isOpen &&\n              customClassNames &&\n              customClassNames.map((value, idx) => (\n                <FormSelectOption key={idx} value={value} label={value} />\n              ))}\n          </FormSelect>\n        </FormGroup>\n        <FormGroup label={'Collection type'} fieldId={'valueType'}>\n          <FormSelect\n            value={collectionType}\n            aria-label={'Select value type'}\n            onChange={setCollectionType}\n            data-testid={'collection-type-form-select'}\n          >\n            {collectionTypeOptions.map(({ label, value }, idx) => (\n              <FormSelectOption key={idx} value={value} label={label} />\n            ))}\n          </FormSelect>\n        </FormGroup>\n      </Form>\n    </ConfirmationDialog>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  ConfirmationDialog,\n  IConfirmationDialogProps,\n} from './ConfirmationDialog';\nimport React, {\n  FunctionComponent,\n  useCallback,\n  useEffect,\n  useState,\n} from 'react';\n\nimport { TextInput } from '@patternfly/react-core';\n\nexport interface IDocumentName {\n  id: string;\n  name: string;\n  isSource: boolean;\n}\nexport interface IChangeDocumentNameDialogProps {\n  id?: string;\n  name?: string;\n  isSource?: boolean;\n  isOpen: IConfirmationDialogProps['isOpen'];\n  onCancel: IConfirmationDialogProps['onCancel'];\n  onConfirm: (updatedDocNameInfo: IDocumentName) => void;\n}\nexport const ChangeDocumentNameDialog: FunctionComponent<IChangeDocumentNameDialogProps> =\n  ({ id, name: initialName = '', isSource, isOpen, onCancel, onConfirm }) => {\n    const [documentName, setDocumentName] = useState(initialName);\n\n    const reset = useCallback(() => {\n      setDocumentName(initialName);\n    }, [initialName]);\n\n    const handleOnConfirm = useCallback(() => {\n      if (id && isSource !== undefined) {\n        onConfirm({ id: id, name: documentName, isSource: isSource });\n      }\n      reset();\n    }, [documentName, id, isSource, onConfirm, reset]);\n\n    const handleOnCancel = useCallback(() => {\n      onCancel();\n      reset();\n    }, [onCancel, reset]);\n\n    function handleOnNameChange(name: string) {\n      setDocumentName(name);\n    }\n\n    // resync the internal state to the values passed in as props\n    useEffect(reset, [reset]);\n\n    return (\n      <ConfirmationDialog\n        title={'Change selected document name?'}\n        onCancel={handleOnCancel}\n        onConfirm={handleOnConfirm}\n        isOpen={isOpen}\n      >\n        <TextInput\n          value={documentName}\n          onChange={(value) => handleOnNameChange(value)}\n          id={id}\n          name={documentName}\n          data-testid={id + '-parameter-text-input'}\n        />\n      </ConfirmationDialog>\n    );\n  };\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  ConfirmationDialog,\n  IConfirmationDialogProps,\n} from './ConfirmationDialog';\nimport {\n  Form,\n  FormGroup,\n  InputGroup,\n  InputGroupText,\n  TextInput,\n} from '@patternfly/react-core';\nimport React, { FunctionComponent, useState } from 'react';\n\nexport interface IExportCatalogDialogProps {\n  isOpen: IConfirmationDialogProps['isOpen'];\n  onCancel: IConfirmationDialogProps['onCancel'];\n  onConfirm: (filename: string) => void;\n}\nexport const ExportCatalogDialog: FunctionComponent<IExportCatalogDialogProps> =\n  ({ isOpen, onCancel, onConfirm }) => {\n    const defaultCatalogName = 'atlasmap-mapping';\n    const [filename, setFilename] = useState(defaultCatalogName);\n    const handleOnConfirm =\n      filename.length > 0 ? () => onConfirm(filename) : undefined;\n    return (\n      <ConfirmationDialog\n        title={'Export Mappings and Documents.'}\n        onCancel={onCancel}\n        onConfirm={handleOnConfirm}\n        isOpen={isOpen}\n        dataTestid={'export-catalog-dialog'}\n      >\n        <Form>\n          <FormGroup\n            label={'Please enter a name for your exported catalog file'}\n            fieldId={'filename'}\n            isRequired={true}\n          >\n            <InputGroup>\n              <TextInput\n                value={filename}\n                onChange={setFilename}\n                id={'filename'}\n                isRequired={true}\n                autoFocus={true}\n                data-testid={'export-catalog-dialog-text-input'}\n              />\n              <InputGroupText>.adm</InputGroupText>\n            </InputGroup>\n          </FormGroup>\n        </Form>\n      </ConfirmationDialog>\n    );\n  };\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  Form,\n  FormGroup,\n  FormSelect,\n  FormSelectOption,\n  Label,\n} from '@patternfly/react-core';\nimport React, { FunctionComponent, useState } from 'react';\n\nimport { IConfirmationDialogProps } from './ConfirmationDialog';\nimport styles from './LookupTableDialog.module.css';\n\nexport type LookupTableData = {\n  sourceEnumValue: string;\n  targetEnumValues: string[];\n  selectedTargetEnumValue: string;\n};\nexport interface ILookupTableDialogProps {\n  enumerationValue: LookupTableData;\n  sourceKey: number;\n  isOpen: IConfirmationDialogProps['isOpen'];\n}\n\nexport const LookupTableDialog: FunctionComponent<ILookupTableDialogProps> = ({\n  enumerationValue,\n  sourceKey,\n  isOpen,\n}) => {\n  const [targetEnum, setTargetEnum] = useState(\n    enumerationValue.selectedTargetEnumValue,\n  );\n\n  const onChangeTargetEnum = (\n    enumValue: string,\n    _event: React.FormEvent<HTMLSelectElement>,\n  ) => {\n    setTargetEnum(enumValue);\n    enumerationValue.selectedTargetEnumValue = enumValue;\n  };\n\n  return (\n    <Form>\n      <FormGroup className={styles.iGroup} fieldId={'lookup-table-row'}>\n        <Label className={styles.iSelectLabel}>\n          {enumerationValue.sourceEnumValue}\n        </Label>\n        <FormSelect\n          className={styles.iSelectBody}\n          value={targetEnum}\n          aria-label={'enum-map'}\n          autoFocus={true}\n          onChange={onChangeTargetEnum}\n          data-testid={'enum-map-select'}\n          key={`${targetEnum}-${sourceKey}`}\n        >\n          {isOpen &&\n            enumerationValue.targetEnumValues &&\n            enumerationValue.targetEnumValues.map((value, idx) => (\n              <FormSelectOption\n                key={`tgtenum-${idx}`}\n                value={value}\n                label={value}\n              />\n            ))}\n        </FormSelect>\n      </FormGroup>\n    </Form>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Checkbox, Form, FormGroup, TextInput } from '@patternfly/react-core';\nimport {\n  ConfirmationDialog,\n  IConfirmationDialogProps,\n} from './ConfirmationDialog';\nimport React, {\n  FunctionComponent,\n  useCallback,\n  useEffect,\n  useState,\n} from 'react';\n\nexport interface INamespace {\n  alias: string;\n  uri: string;\n  locationUri: string;\n  targetNamespace: boolean;\n}\n\nexport interface INamespaceDialogProps {\n  title: string;\n  alias?: string;\n  uri?: string;\n  locationUri?: string;\n  targetNamespace?: boolean;\n  isOpen: IConfirmationDialogProps['isOpen'];\n  onCancel: IConfirmationDialogProps['onCancel'];\n  onConfirm: (namespace: INamespace) => void;\n}\nexport const NamespaceDialog: FunctionComponent<INamespaceDialogProps> = ({\n  title,\n  alias: initialAlias = '',\n  uri: initialUri = '',\n  locationUri: initialLocationUri = '',\n  targetNamespace: initialTargetNamespace = false,\n  isOpen,\n  onCancel,\n  onConfirm,\n}) => {\n  const [alias, setAlias] = useState(initialAlias);\n  const [uri, setUri] = useState(initialUri);\n  const [locationUri, setLocationUri] = useState(initialLocationUri);\n  const [targetNamespace, setTargetNamespace] = useState(\n    initialTargetNamespace,\n  );\n\n  const reset = useCallback(() => {\n    setAlias(initialAlias);\n    setUri(initialUri);\n    setLocationUri(initialLocationUri);\n    setTargetNamespace(initialTargetNamespace);\n  }, [initialAlias, initialLocationUri, initialTargetNamespace, initialUri]);\n\n  const handleOnConfirm = useCallback(() => {\n    onConfirm({ alias, uri, locationUri, targetNamespace });\n    reset();\n  }, [alias, locationUri, onConfirm, reset, targetNamespace, uri]);\n\n  const handleOnCancel = useCallback(() => {\n    onCancel();\n    reset();\n  }, [onCancel, reset]);\n\n  // make sure to resync the internal state to the values passed in as props\n  useEffect(reset, [reset]);\n\n  return (\n    <ConfirmationDialog\n      title={title}\n      onCancel={handleOnCancel}\n      onConfirm={alias.length > 0 ? handleOnConfirm : undefined}\n      isOpen={isOpen}\n    >\n      <Form>\n        <FormGroup label={'Alias'} fieldId={'alias'} isRequired={true}>\n          <TextInput\n            value={alias}\n            onChange={setAlias}\n            id={'alias'}\n            autoFocus={true}\n            isRequired={true}\n          />\n        </FormGroup>\n        <FormGroup label={'URI'} fieldId={'uri'}>\n          <TextInput value={uri} onChange={setUri} id={'uri'} />\n        </FormGroup>\n        <FormGroup label={'Location URI'} fieldId={'locationUri'}>\n          <TextInput\n            value={locationUri}\n            onChange={setLocationUri}\n            id={'locationUri'}\n          />\n        </FormGroup>\n        <FormGroup fieldId={'targetNamespace'}>\n          <Checkbox\n            isChecked={targetNamespace}\n            onChange={setTargetNamespace}\n            id={'targetNamespace'}\n            label={'Target namespace'}\n          />\n        </FormGroup>\n      </Form>\n    </ConfirmationDialog>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  ConfirmationDialog,\n  IConfirmationDialogProps,\n} from './ConfirmationDialog';\nimport {\n  Form,\n  FormGroup,\n  FormSelect,\n  FormSelectOption,\n  TextInput,\n  Tooltip,\n  ValidatedOptions,\n} from '@patternfly/react-core';\nimport React, {\n  FunctionComponent,\n  useCallback,\n  useEffect,\n  useState,\n} from 'react';\n\ninterface ValueLabelOption {\n  label: string;\n  value: string;\n}\n\nexport interface IProperty {\n  name: string;\n  valueType: string;\n  scope: string;\n}\n\nexport interface IPropertyDialogProps {\n  title: string;\n  name?: string;\n  valueType?: string;\n  valueTypeOptions: ValueLabelOption[];\n  scope?: string;\n  scopeOptions: ValueLabelOption[];\n  isOpen: IConfirmationDialogProps['isOpen'];\n  onCancel: IConfirmationDialogProps['onCancel'];\n  onConfirm: (property: IProperty) => void;\n  onValidation: (name: string, scope: string) => boolean;\n}\nexport const PropertyDialog: FunctionComponent<IPropertyDialogProps> = ({\n  title,\n  name: initialName = '',\n  valueType: initialValueType = '',\n  valueTypeOptions,\n  scope: initialScope = '',\n  scopeOptions,\n  isOpen,\n  onCancel,\n  onConfirm,\n  onValidation,\n}) => {\n  const [name, setName] = useState(initialName);\n  const [valueType, setValueType] = useState(initialValueType);\n  const [scope, setScope] = useState(initialScope);\n  const [isPropertyValid, setPropertyValid] = useState(false);\n  const [isPropertyNameValid, setPropertyNameValid] = useState(\n    ValidatedOptions.default,\n  );\n  const [isNameAndScopeUnique, setNameAndScopeUnique] = useState(false);\n\n  const reset = useCallback(() => {\n    setName(initialName);\n    setValueType(initialValueType);\n    setScope(initialScope);\n    setPropertyValid(false);\n    setPropertyNameValid(ValidatedOptions.default);\n    setNameAndScopeUnique(false);\n  }, [initialName, initialValueType, initialScope]);\n\n  const handleOnConfirm = useCallback(() => {\n    onConfirm({ name, valueType, scope });\n    reset();\n  }, [name, onConfirm, reset, valueType, scope]);\n\n  const handleOnCancel = useCallback(() => {\n    onCancel();\n    reset();\n  }, [onCancel, reset]);\n\n  function handleOnNameChange(name: string) {\n    validateProperty(name, scope);\n    setName(name);\n  }\n\n  function handleOnScopeChange(scope: string) {\n    if (validateProperty(name, scope)) {\n      setScope(scope);\n    }\n  }\n\n  function validateProperty(name: string, scope: string): boolean {\n    if (!name || name.length === 0) {\n      setPropertyNameValid(ValidatedOptions.default);\n      setPropertyValid(false);\n      return false;\n    }\n    const nameRegex = /^[a-zA-Z0-9_@]+$/;\n    if (!nameRegex.test(name)) {\n      setPropertyNameValid(ValidatedOptions.error);\n      return false;\n    }\n    setPropertyNameValid(ValidatedOptions.success);\n    const isValid = onValidation(name, scope);\n    setNameAndScopeUnique(isValid);\n    setPropertyValid(name.length > 0 && isValid);\n    return isValid;\n  }\n\n  // make sure to resync the internal state to the values passed in as props\n  useEffect(reset, [reset]);\n\n  return (\n    <ConfirmationDialog\n      title={title}\n      onCancel={handleOnCancel}\n      onConfirm={isPropertyValid ? handleOnConfirm : undefined}\n      isOpen={isOpen}\n    >\n      <Form>\n        <FormGroup label={'Name'} fieldId={'name'} isRequired={true}>\n          {!isNameAndScopeUnique ? (\n            <Tooltip\n              content={\n                <div>A property with this name and scope already exists</div>\n              }\n              entryDelay={750}\n              exitDelay={100}\n            >\n              <TextInput\n                value={name}\n                onChange={handleOnNameChange}\n                id={'name'}\n                autoFocus={true}\n                isRequired={true}\n                data-testid={'property-name-text-input-tooltip'}\n                style={{ color: 'red' }}\n              />\n            </Tooltip>\n          ) : (\n            <TextInput\n              value={name}\n              onChange={handleOnNameChange}\n              id={'name'}\n              autoFocus={true}\n              isRequired={true}\n              data-testid={'property-name-text-input'}\n              validated={isPropertyNameValid}\n            />\n          )}\n        </FormGroup>\n        <FormGroup label={'Value type'} fieldId={'valueType'}>\n          <FormSelect\n            value={valueType}\n            aria-label={'Select value type'}\n            onChange={setValueType}\n            data-testid={'property-type-form-select'}\n          >\n            {valueTypeOptions.map(({ label, value }, idx) => (\n              <FormSelectOption key={idx} value={value} label={label} />\n            ))}\n          </FormSelect>\n        </FormGroup>\n        <FormGroup label={'Scope'} fieldId={'scope'}>\n          {!isNameAndScopeUnique ? (\n            <Tooltip\n              content={\n                <div>A property with this name and scope already exists</div>\n              }\n              entryDelay={750}\n              exitDelay={100}\n            >\n              <FormSelect\n                value={scope}\n                aria-label={'Select property scope'}\n                onChange={handleOnScopeChange}\n                data-testid={'property-scope-form-select'}\n                style={{ color: 'red' }}\n              >\n                {scopeOptions.map(({ label, value }, idx) => (\n                  <FormSelectOption key={idx} label={label} value={value} />\n                ))}\n              </FormSelect>\n            </Tooltip>\n          ) : (\n            <FormSelect\n              value={scope}\n              aria-label={'Select property scope'}\n              onChange={handleOnScopeChange}\n              data-testid={'property-scope-form-select'}\n            >\n              {scopeOptions.map(({ label, value }, idx) => (\n                <FormSelectOption key={idx} label={label} value={value} />\n              ))}\n            </FormSelect>\n          )}\n        </FormGroup>\n      </Form>\n    </ConfirmationDialog>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  Button,\n  Form,\n  FormGroup,\n  FormSelect,\n  FormSelectOption,\n  InputGroup,\n  Switch,\n  TextInput,\n} from '@patternfly/react-core';\nimport {\n  ConfirmationDialog,\n  IConfirmationDialogProps,\n} from './ConfirmationDialog';\nimport { PlusIcon, TrashIcon } from '@patternfly/react-icons';\nimport React, {\n  FunctionComponent,\n  useCallback,\n  useEffect,\n  useState,\n} from 'react';\nimport { IParameter } from '@atlasmap/core';\n\nexport interface IParametersDialogProps {\n  title: string;\n  parameters: IParameter[];\n  isOpen: IConfirmationDialogProps['isOpen'];\n  onCancel: IConfirmationDialogProps['onCancel'];\n  onConfirm: (parameters: IParameter[]) => void;\n}\n\nexport const ParametersDialog: FunctionComponent<IParametersDialogProps> = ({\n  title,\n  parameters: initialParameters = [],\n  isOpen,\n  onCancel,\n  onConfirm,\n}) => {\n  const [definedParameters, setDefinedParameters] = useState<IParameter[]>([]);\n\n  const availableParameters: IParameter[] = initialParameters.filter(\n    (param) => !definedParameters.map((p) => p.name).includes(param.name),\n  );\n\n  const reset = useCallback(() => {\n    setDefinedParameters(\n      initialParameters.filter((p) => p.required || p.enabled),\n    );\n  }, [initialParameters]);\n\n  const handleOnConfirm = useCallback(() => {\n    onConfirm(definedParameters);\n  }, [definedParameters, onConfirm]);\n\n  const handleOnCancel = useCallback(() => {\n    onCancel();\n    reset();\n  }, [onCancel, reset]);\n\n  const handleAddParameter = useCallback(() => {\n    setDefinedParameters(\n      definedParameters.concat({ ...availableParameters[0] }),\n    );\n  }, [definedParameters, availableParameters]);\n\n  const handleRemoveParameter = useCallback(\n    (parameter: IParameter) => {\n      setDefinedParameters(definedParameters.filter((p) => p !== parameter));\n    },\n    [definedParameters],\n  );\n\n  const handleChangeParameterValue = useCallback(\n    (index, value) => {\n      const parameters = [...definedParameters];\n      const parameter = { ...parameters[index], value: value };\n      parameters[index] = parameter;\n      setDefinedParameters(parameters);\n    },\n    [definedParameters],\n  );\n\n  const handleChangeParameter = useCallback(\n    (index, availableParameterIndex) => {\n      if (availableParameterIndex === 0) {\n        return; //nothing changed\n      }\n      const parameters = [...definedParameters];\n      const parameter = { ...availableParameters[availableParameterIndex - 1] };\n      parameters[index] = parameter;\n      setDefinedParameters(parameters);\n    },\n    [definedParameters, availableParameters],\n  );\n\n  const formLabelColumnWidth = {\n    '--pf-c-form--m-horizontal--md__group--GridTemplateColumns': '340px 1fr',\n    '--pf-c-form--GridGap': '0.5rem',\n  } as React.CSSProperties;\n  const formLabelParamRequired = {\n    '--pf-c-form__label--FontSize': 'large',\n    '--pf-c-form--m-horizontal--md__group--GridTemplateColumns': '140px 1fr',\n    marginBottom: '1.0rem',\n  } as React.CSSProperties;\n  const formLabelTopPadding = {\n    '--pf-c-form--m-horizontal__group-label--md--GridColumnWidth': '380px',\n    '--pf-c-form--m-horizontal__group-label--md--PaddingTop': '0rem',\n  } as React.CSSProperties;\n\n  useEffect(reset, [reset]);\n\n  return (\n    <ConfirmationDialog\n      title={title}\n      onCancel={handleOnCancel}\n      onConfirm={definedParameters.length > 0 ? handleOnConfirm : undefined}\n      isOpen={isOpen}\n    >\n      <Form isHorizontal style={formLabelColumnWidth}>\n        {definedParameters.map((parameter, index) => (\n          <FormGroup\n            fieldId={`${index}-parameter`}\n            key={index}\n            style={\n              !parameter.required ? formLabelTopPadding : formLabelParamRequired\n            }\n            label={\n              parameter.required ? (\n                <span>{parameter.label}</span>\n              ) : (\n                <FormSelect\n                  id=\"selected-paramater\"\n                  value=\"0\"\n                  label={parameter.label}\n                  style={{ display: 'flex', marginLeft: 'auto' }}\n                  onChange={(availableParameterIndex) =>\n                    handleChangeParameter(index, availableParameterIndex)\n                  }\n                >\n                  {[parameter]\n                    .concat(availableParameters)\n                    .map((parameter, index) => (\n                      <FormSelectOption\n                        key={index}\n                        value={index}\n                        label={parameter.label}\n                      />\n                    ))}\n                </FormSelect>\n              )\n            }\n          >\n            <InputGroup>\n              {parameter.boolean ? (\n                <span\n                  style={{\n                    paddingTop: 5,\n                    display: 'inline',\n                    marginLeft: 'auto',\n                    float: 'right',\n                  }}\n                >\n                  <Switch\n                    id={parameter.name}\n                    name={parameter.name}\n                    isChecked={parameter.value === 'true'}\n                    onChange={(checked) => {\n                      handleChangeParameterValue(index, String(checked));\n                    }}\n                  />\n                </span>\n              ) : parameter.options && parameter.options.length > 0 ? (\n                <FormSelect\n                  value={parameter.value}\n                  onChange={(value) => handleChangeParameterValue(index, value)}\n                  id={parameter.name}\n                  name={parameter.name}\n                  data-testid={parameter.name + '-parameter-form-select'}\n                >\n                  {parameter.options.map(({ label, value }, idx) => (\n                    <FormSelectOption key={idx} value={value} label={label} />\n                  ))}\n                </FormSelect>\n              ) : (\n                <TextInput\n                  value={parameter.value}\n                  onChange={(value) => handleChangeParameterValue(index, value)}\n                  id={parameter.name}\n                  name={parameter.name}\n                  data-testid={parameter.name + '-parameter-text-input'}\n                />\n              )}\n              {!parameter.required && (\n                <Button\n                  variant=\"plain\"\n                  aria-label=\"Action\"\n                  onClick={(_event) => handleRemoveParameter(parameter)}\n                  style={{ display: 'inline', marginLeft: '0', float: 'right' }}\n                >\n                  <TrashIcon />\n                </Button>\n              )}\n            </InputGroup>\n          </FormGroup>\n        ))}\n        <span>\n          <Button\n            style={{\n              display: 'inline',\n              float: 'left',\n              marginTop: '1.0rem',\n              width: '40',\n            }}\n            isDisabled={availableParameters.length === 0}\n            onClick={handleAddParameter}\n            variant=\"link\"\n            icon={<PlusIcon />}\n          >\n            Add parameter\n          </Button>\n        </span>\n      </Form>\n    </ConfirmationDialog>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { FunctionComponent, ReactElement, useEffect, useState } from 'react';\n\nexport interface IDelayedBooleanProps {\n  value: boolean;\n  delay?: number;\n  children: (value: boolean) => ReactElement | null;\n}\n\nexport const DelayedBoolean: FunctionComponent<IDelayedBooleanProps> = ({\n  value,\n  delay = 1000,\n  children,\n}) => {\n  const [delayedValue, setDelayedValue] = useState(value);\n  useEffect(() => {\n    const updateValue = () => setDelayedValue(value);\n    const timer = setTimeout(updateValue, delay);\n    return () => clearTimeout(timer);\n  }, [delay, value]);\n  return children(delayedValue);\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { FunctionComponent } from 'react';\nimport styles from './TruncatedString.module.css';\n\nexport interface ITruncatedStringProps {\n  title?: string;\n}\n\nexport const TruncatedString: FunctionComponent<ITruncatedStringProps> = ({\n  title,\n  children,\n}) => (\n  <span\n    className={styles.fieldName}\n    data-title={title || (typeof children === 'string' ? children : undefined)}\n  >\n    {children}\n  </span>\n);\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { AngleDownIcon, AngleRightIcon } from '@patternfly/react-icons';\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardBody,\n  CardHeader,\n  CardTitle,\n  Title,\n} from '@patternfly/react-core';\nimport React, {\n  HTMLAttributes,\n  KeyboardEvent,\n  MouseEvent,\n  PropsWithChildren,\n  ReactElement,\n  ReactNode,\n  forwardRef,\n  useCallback,\n} from 'react';\n\nimport { TruncatedString } from './TruncatedString';\nimport { css } from '@patternfly/react-styles';\nimport styles from './Document.module.css';\nimport { useToggle } from '../impl/utils';\n\nexport interface IDocumentProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'title'> {\n  title?: string;\n  actions?: (ReactElement | null | undefined)[];\n  footer?: ReactNode;\n  selected?: boolean;\n  selectable?: boolean;\n  dropTarget?: boolean;\n  dropAccepted?: boolean;\n  stacked?: boolean;\n  scrollIntoView?: boolean;\n  noPadding?: boolean;\n  noShadows?: boolean;\n  startExpanded?: boolean;\n  onSelect?: () => void;\n  onDeselect?: () => void;\n}\n\nexport const Document = forwardRef<\n  HTMLDivElement,\n  PropsWithChildren<IDocumentProps>\n>(function Document(\n  {\n    id,\n    title,\n    actions,\n    footer,\n    selected = false,\n    dropTarget = false,\n    dropAccepted = false,\n    stacked = true,\n    selectable = false,\n    scrollIntoView = false,\n    noPadding = false,\n    noShadows = false,\n    startExpanded,\n    onSelect,\n    onDeselect,\n    children,\n    ...props\n  },\n  ref,\n) {\n  const { state: isExpanded, toggle: toggleExpanded } = useToggle(\n    startExpanded!,\n  );\n  const handleClick = useCallback(\n    (event: MouseEvent) => {\n      event.stopPropagation();\n      if (onSelect) {\n        onSelect();\n      }\n    },\n    [onSelect],\n  );\n  const handleKey = useCallback(\n    (event: KeyboardEvent) => {\n      switch (event.key) {\n        case 'Enter':\n        case 'Space':\n          if (onSelect) {\n            onSelect();\n          }\n          break;\n        case 'Escape':\n          if (onDeselect) {\n            onDeselect();\n          }\n          break;\n      }\n    },\n    [onDeselect, onSelect],\n  );\n  const makeCardSelected = selected || dropTarget || dropAccepted;\n\n  return (\n    <div\n      className={css(stacked && styles.stacked)}\n      onClick={handleClick}\n      onKeyDown={handleKey}\n      ref={ref}\n      {...props}\n    >\n      <Card\n        isCompact={true}\n        className={css(\n          styles.card,\n          noShadows && styles.noShadows,\n          dropAccepted && !dropTarget && styles.dropAccepted,\n          dropTarget && styles.dropTarget,\n        )}\n        isSelected={makeCardSelected}\n        isSelectable={makeCardSelected || selectable}\n        aria-label={title}\n      >\n        {(title || actions) && (\n          <CardHeader data-codemods=\"true\" className={css(styles.head)}>\n            <CardActions className={css(styles.actions)}>\n              {actions?.filter((a) => a)}\n            </CardActions>\n            {title && (\n              <CardTitle className={css(styles.header)}>\n                <Button\n                  variant={'plain'}\n                  onClick={toggleExpanded}\n                  aria-label={'Expand/collapse this card'}\n                  data-testid={`expand-collapse-${title}-button`}\n                  className={css(styles.headerButton)}\n                >\n                  <Title size=\"lg\" headingLevel={'h2'} aria-label={title}>\n                    <TruncatedString title={title}>\n                      {isExpanded ? <AngleDownIcon /> : <AngleRightIcon />}{' '}\n                      {title}\n                    </TruncatedString>\n                  </Title>\n                </Button>\n              </CardTitle>\n            )}\n          </CardHeader>\n        )}\n        <CardBody\n          className={css(\n            noPadding ? styles.bodyNoPadding : styles.bodyWithPadding,\n            !isExpanded && styles.hidden,\n          )}\n        >\n          {children}\n        </CardBody>\n        {footer}\n      </Card>\n    </div>\n  );\n});\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, {\n  PropsWithChildren,\n  ReactChild,\n  ReactElement,\n  forwardRef,\n} from 'react';\n\nimport { Tooltip } from '@patternfly/react-core';\nimport { TruncatedString } from './TruncatedString';\nimport { css } from '@patternfly/react-styles';\nimport styles from './DocumentField.module.css';\nimport { useToggle } from '../impl/utils';\n\nexport interface IDocumentFieldProps {\n  name: ReactChild;\n  type: string;\n  scope?: string;\n  icon?: ReactElement;\n  statusIcons?: (ReactElement | null)[];\n  actions?: (ReactElement | null)[];\n  showType?: boolean;\n  isDragging?: boolean;\n  isFocused?: boolean;\n  isSelected?: boolean;\n  isDisabled?: boolean;\n}\n\nexport const DocumentField = forwardRef<\n  HTMLDivElement,\n  PropsWithChildren<IDocumentFieldProps>\n>(function DocumentField(\n  {\n    name,\n    type,\n    scope,\n    icon,\n    statusIcons,\n    actions,\n    showType = false,\n    isDragging = false,\n    isFocused = false,\n    isSelected = false,\n    isDisabled = false,\n    children,\n  },\n  ref,\n) {\n  const {\n    state: isHovering,\n    toggleOff: hideActions,\n    toggleOn: showActions,\n  } = useToggle(false);\n  return (\n    <div\n      ref={ref}\n      className={css(\n        styles.element,\n        isDragging && styles.isDragging,\n        isSelected && styles.isSelected,\n        isDisabled && styles.isDisabled,\n      )}\n      onMouseEnter={!isDisabled ? showActions : undefined}\n      onMouseLeave={!isDisabled ? hideActions : undefined}\n    >\n      <div className={styles.row}>\n        {icon && <div className={styles.nameIcon}>{icon}</div>}\n        <Tooltip\n          key={`${name}`}\n          position={'auto'}\n          enableFlip={true}\n          content={scope ? `${name} <${scope}>` : `${name}`}\n          entryDelay={750}\n          exitDelay={100}\n        >\n          <div\n            className={styles.nameWrapper}\n            data-testid={`document-${name}-field`}\n          >\n            <TruncatedString>{name}</TruncatedString>\n            <span>{showType && ` (${type})`}</span>\n            <span className={styles.statusIcons}>\n              {statusIcons && statusIcons?.filter((a) => a)}\n            </span>\n          </div>\n        </Tooltip>\n        {(isHovering || isFocused) && actions && !isDisabled && (\n          <div className={styles.actions}>{actions?.filter((a) => a)}</div>\n        )}\n      </div>\n      {children}\n    </div>\n  );\n});\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Form, FormGroup, TextInput } from '@patternfly/react-core';\nimport React, { FunctionComponent } from 'react';\n\nimport styles from './DocumentFieldPreview.module.css';\nimport { useDebouncedCallback } from 'use-debounce';\n\nexport interface IDocumentFieldPreviewProps {\n  id: string;\n  value: string;\n  onChange: (value: string) => void;\n}\n\nexport const DocumentFieldPreview: FunctionComponent<IDocumentFieldPreviewProps> =\n  ({ id, value, onChange }) => {\n    const debouncedOnChange = useDebouncedCallback(onChange, 200);\n    return (\n      <Form\n        className={styles.form}\n        onClick={(event) => event.stopPropagation()}\n      >\n        <FormGroup label=\"Mapping preview\" fieldId={id}>\n          <TextInput\n            id={id}\n            type=\"text\"\n            onChange={debouncedOnChange}\n            defaultValue={value || ''}\n            aria-label=\"Type sample data here\"\n            placeholder=\"Type sample data here\"\n            data-testid={`input-document-mapping-preview-${id}-field`}\n          />\n        </FormGroup>\n      </Form>\n    );\n  };\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Form, FormGroup, TextInput } from '@patternfly/react-core';\nimport React, { FunctionComponent } from 'react';\nimport styles from './DocumentFieldPreviewResults.module.css';\n\nexport interface IDocumentFieldPreviewResultsProps {\n  id: string;\n  value: string;\n}\n\nexport const DocumentFieldPreviewResults: FunctionComponent<IDocumentFieldPreviewResultsProps> =\n  ({ id, value }) => {\n    return (\n      <Form className={styles.form}>\n        <FormGroup label=\"Preview results\" fieldId={id}>\n          <TextInput\n            id={id}\n            type=\"text\"\n            value={value === undefined ? '' : value}\n            aria-label=\"Mapping results preview\"\n            placeholder=\"Results will be displayed here\"\n            isDisabled={true}\n            data-testid={`results-document-mapping-preview-${id}-field`}\n          />\n        </FormGroup>\n      </Form>\n    );\n  };\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { FunctionComponent } from 'react';\n\nimport { CardFooter } from '@patternfly/react-core';\nimport styles from './DocumentFooter.module.css';\n\nexport const DocumentFooter: FunctionComponent = ({ children }) => {\n  return <CardFooter className={styles.footer}>{children}</CardFooter>;\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { FolderCloseIcon, FolderOpenIcon } from '@patternfly/react-icons';\nimport React, {\n  PropsWithChildren,\n  ReactElement,\n  forwardRef,\n  useRef,\n} from 'react';\nimport { Tooltip } from '@patternfly/react-core';\nimport styles from './DocumentGroup.module.css';\n\nexport interface IDocumentGroupProps {\n  name: string;\n  icon?: ReactElement;\n  iconTooltip?: string;\n  type?: string;\n  showType?: boolean;\n  expanded?: boolean;\n}\n\nexport const DocumentGroup = forwardRef<\n  HTMLSpanElement,\n  PropsWithChildren<IDocumentGroupProps>\n>(function DocumentGroup(\n  { name, type, icon, iconTooltip, showType = false, expanded },\n  ref,\n) {\n  const spanRef = useRef<HTMLSpanElement | null>(null);\n\n  const handleRef = (el: HTMLSpanElement | null) => {\n    spanRef.current = el;\n    if (ref) {\n      if (typeof ref === 'function') {\n        ref(el);\n      } else {\n        // @ts-ignore\n        ref.current = el;\n      }\n    }\n  };\n\n  return (\n    <span\n      className={styles.buttonContent}\n      ref={handleRef}\n      data-testid={`field-group-${name}-expanded-${expanded}-field`}\n    >\n      <span className={styles.buttonIcon}>\n        {expanded ? <FolderOpenIcon /> : <FolderCloseIcon />}\n      </span>\n      {name}\n      {showType && ` (${type})`}\n      {icon && (\n        <Tooltip enableFlip content={iconTooltip}>\n          <span className={styles.icon}>{icon}</span>\n        </Tooltip>\n      )}\n    </span>\n  );\n});\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  EmptyState,\n  EmptyStateIcon,\n  EmptyStateVariant,\n  Spinner,\n  Title,\n} from '@patternfly/react-core';\nimport React, { FunctionComponent } from 'react';\n\nexport const Loading: FunctionComponent = () => (\n  <EmptyState variant={EmptyStateVariant.full}>\n    <EmptyStateIcon variant=\"container\" component={Spinner} />\n    <Title headingLevel=\"h2\" size=\"lg\">\n      Loading\n    </Title>\n  </EmptyState>\n);\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  Button,\n  Checkbox,\n  FormGroup,\n  FormSelect,\n  FormSelectOption,\n  InputGroup,\n  Select,\n  SelectOption,\n  SelectOptionObject,\n  SelectVariant,\n  Split,\n  SplitItem,\n  TextInput,\n} from '@patternfly/react-core';\nimport React, { FunctionComponent, useState } from 'react';\n\nimport { FieldType } from '@atlasmap/core';\nimport { TrashIcon } from '@patternfly/react-icons';\nimport { css } from '@patternfly/react-styles';\nimport styles from './MappingTransformation.module.css';\n\nexport interface ITransformationSelectOption {\n  name: string;\n  value: string;\n}\n\nexport interface ITransformationArgument {\n  label: string;\n  name: string;\n  value: string;\n  type?: FieldType;\n  options?: ITransformationSelectOption[];\n}\n\nexport interface IMappingTransformationProps {\n  name: string;\n  transformationsOptions: ITransformationSelectOption[];\n  transformationsArguments?: ITransformationArgument[];\n  disableTransformation: boolean;\n  onTransformationArgumentChange: (name: string, value: string) => void;\n  onTransformationChange: (value: string) => void;\n  onRemoveTransformation?: () => void;\n  noPaddings?: boolean;\n}\n\nconst formTransStyle = {\n  '--pf-c-form-control--FontSize': 'small',\n  '--pf-c-form--GridGap': '0',\n  marginTop: '0.4rem',\n} as React.CSSProperties;\n\nconst formTransGroupStyle = {\n  '--pf-c-form-control--FontSize': 'small',\n  marginTop: '1.0rem',\n} as React.CSSProperties;\n\nconst formTransTextInputStyle = {\n  '--pf-c-form-control--FontSize': 'small',\n  marginTop: '0rem',\n} as React.CSSProperties;\n\nexport const MappingTransformation: FunctionComponent<IMappingTransformationProps> =\n  ({\n    name,\n    transformationsOptions,\n    transformationsArguments = [],\n    disableTransformation,\n    onTransformationArgumentChange,\n    onTransformationChange,\n    onRemoveTransformation,\n  }) => {\n    const RenderTransformationArgumentOptions = (\n      argId: string,\n      arg: ITransformationArgument,\n      disableTransformation: boolean,\n      onTransformationArgumentChange: (name: string, value: string) => void,\n    ) => {\n      /** If the option name is 'User defined', we assume it accepts a user input */\n      const isUserDefined = (option?: ITransformationSelectOption) => {\n        return option?.name === 'User defined';\n      };\n\n      const userDefinedOption = arg.options?.find((option) =>\n        isUserDefined(option),\n      );\n\n      let initialSelected = arg.options?.find(\n        (option) => option.value === arg.value,\n      );\n      if (!initialSelected) {\n        if (arg.value) {\n          initialSelected = userDefinedOption;\n        } else if (arg.options) {\n          initialSelected = arg.options[1];\n          arg.value = arg.options[1].value;\n        }\n      }\n      let initialUserDefined = '';\n      if (isUserDefined(initialSelected)) {\n        initialUserDefined = arg.value;\n      }\n\n      const [isOpen, setIsOpen] = useState(false);\n      const [selected, setSelected] = useState<\n        ITransformationSelectOption | undefined\n      >(initialSelected);\n      const [userDefinedValue, setUserDefinedValue] =\n        useState<string>(initialUserDefined);\n\n      const onToggle = (isOpen: boolean) => {\n        setIsOpen(isOpen);\n      };\n\n      const onSelect = (\n        _event:\n          | React.MouseEvent<Element, MouseEvent>\n          | React.ChangeEvent<Element>,\n        selection: string | SelectOptionObject,\n        _isPlaceholder?: boolean,\n      ) => {\n        setIsOpen(false);\n        const selectedOption = arg.options!.find(\n          (option) => option.value === selection,\n        );\n        if (!selectedOption) {\n          return;\n        }\n        setSelected(selectedOption);\n        arg.value = isUserDefined(selectedOption)\n          ? userDefinedValue\n            ? userDefinedValue\n            : ''\n          : selection.toString();\n        onTransformationArgumentChange(arg.name, arg.value);\n      };\n\n      const onChangeUserDefinedValue = (value: string) => {\n        setUserDefinedValue(value);\n        arg.value = value;\n        onTransformationArgumentChange(arg.name, value);\n      };\n\n      return (\n        <Split>\n          <SplitItem>\n            <Select\n              variant={SelectVariant.single}\n              aria-label={arg.label}\n              onSelect={onSelect}\n              selections={selected?.value}\n              onToggle={onToggle}\n              isOpen={isOpen}\n              placeholderText={'[None]'}\n              id={argId}\n              isDisabled={disableTransformation}\n              data-testid={arg.name}\n              style={formTransStyle}\n            >\n              {arg.options?.map((option, optIndx) => {\n                return (\n                  <SelectOption value={option.value} key={optIndx}>\n                    {option.name}\n                  </SelectOption>\n                );\n              })}\n            </Select>\n          </SplitItem>\n          {isUserDefined(selected) && (\n            <SplitItem>\n              <TextInput\n                id=\"userDefined\"\n                type=\"text\"\n                name=\"userDefined\"\n                value={userDefinedValue}\n                onChange={onChangeUserDefinedValue}\n                style={formTransTextInputStyle}\n                data-testid={`userDefined`}\n                autoFocus\n              />\n            </SplitItem>\n          )}\n        </Split>\n      );\n    };\n\n    const renderTransformationArgumentText = (\n      argId: string,\n      a: ITransformationArgument,\n    ) => {\n      return (\n        <TextInput\n          id={argId}\n          type=\"text\"\n          name={a.name}\n          isDisabled={disableTransformation}\n          value={a.value}\n          onChange={(value) => onTransformationArgumentChange(a.name, value)}\n          data-testid={`insert-transformation-parameter-${a.name}-input-field`}\n          style={formTransTextInputStyle}\n        />\n      );\n    };\n\n    const renderTransformationArgumentBoolean = (\n      argId: string,\n      a: ITransformationArgument,\n    ) => {\n      return (\n        <Checkbox\n          className={css(styles.transArgs)}\n          id={argId}\n          data-testid={argId + '-checkbox'}\n          key={argId}\n          label={a.label}\n          aria-label={a.label}\n          isChecked={a.value === 'true'}\n          onChange={(value) =>\n            onTransformationArgumentChange(a.name, value.toString())\n          }\n        />\n      );\n    };\n\n    const renderTransformationArgument = (\n      a: ITransformationArgument,\n      idx: number,\n    ) => {\n      const argId = `${id}-transformation-${idx}`;\n      switch (a.type) {\n        case FieldType.BOOLEAN: {\n          return renderTransformationArgumentBoolean(argId, a);\n        }\n        default: {\n          return (\n            <FormGroup\n              className={css(styles.transArgs)}\n              fieldId={argId}\n              label={a.label}\n              key={idx}\n              style={formTransGroupStyle}\n            >\n              {a.options\n                ? RenderTransformationArgumentOptions(\n                    argId,\n                    a,\n                    disableTransformation,\n                    onTransformationArgumentChange,\n                  )\n                : renderTransformationArgumentText(argId, a)}\n            </FormGroup>\n          );\n        }\n      }\n    };\n\n    const id = `user-field-action-${name}`;\n    return (\n      <>\n        <FormGroup fieldId={`${id}-transformation`}>\n          <InputGroup style={{ background: 'transparent' }}>\n            <FormSelect\n              value={name}\n              id={id}\n              isDisabled={disableTransformation}\n              onChange={onTransformationChange}\n              data-testid={id}\n              style={formTransStyle}\n            >\n              {transformationsOptions.map((a, idx) => (\n                <FormSelectOption label={a.name} value={a.value} key={idx} />\n              ))}\n            </FormSelect>\n            {onRemoveTransformation && (\n              <Button\n                variant={'plain'}\n                onClick={onRemoveTransformation}\n                data-testid={`close-transformation-${name}-button`}\n                aria-label=\"Remove the transformation\"\n              >\n                <TrashIcon />\n              </Button>\n            )}\n          </InputGroup>\n        </FormGroup>\n        {transformationsArguments.map(renderTransformationArgument)}\n      </>\n    );\n  };\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { BoltIcon, InfoAltIcon, TrashIcon } from '@patternfly/react-icons';\nimport {\n  Button,\n  InputGroup,\n  InputGroupText,\n  Split,\n  SplitItem,\n  TextInput,\n  Title,\n  Tooltip,\n} from '@patternfly/react-core';\nimport { DraggableField, FieldDropTarget } from './dnd';\nimport React, { Children, FunctionComponent } from 'react';\n\nimport { IAtlasmapField } from '../../src/Views/models';\nimport { NodeRef } from './Canvas/NodeRef';\nimport { css } from '@patternfly/react-styles';\nimport styles from './MappingField.module.css';\n\nexport interface IMappingFieldProps {\n  field: IAtlasmapField;\n  name: string;\n  info: string;\n  index: number;\n  canShowIndex: boolean;\n  mappingExpressionEnabled: boolean;\n  hasTransformations: boolean;\n  onDelete: () => void;\n  onIndexChange?: (value: string | IAtlasmapField) => void;\n  onNewTransformation?: () => void;\n}\n\nconst formTransInputGroup = {\n  '--pf-c-form-control--FontSize': 'small',\n} as React.CSSProperties;\n\nexport const MappingField: FunctionComponent<IMappingFieldProps> = ({\n  field,\n  name,\n  info,\n  index,\n  canShowIndex,\n  mappingExpressionEnabled,\n  hasTransformations,\n  onDelete,\n  onIndexChange,\n  onNewTransformation,\n  children,\n}) => {\n  const id = `mapping-field-${name}`;\n  return (\n    <FieldDropTarget\n      key={field ? field.id : name}\n      target={{\n        id: field.id,\n        name: field.name,\n        type: 'mapping',\n        payload: field,\n      }}\n      canDrop={() => {\n        return true;\n      }}\n      accept={['mapping']}\n    >\n      {({ isTarget }) => (\n        <DraggableField\n          field={{\n            type: 'mapping',\n            id: field.id,\n            name: field.name,\n            payload: field,\n          }}\n          onDrop={(_, target) => {\n            if (!onIndexChange) {\n              return;\n            }\n            onIndexChange(target!.payload as IAtlasmapField);\n          }}\n        >\n          {({ isDragging }) => (\n            <NodeRef\n              id={[\n                field.id,\n                isDragging ? 'dnd-start' : undefined,\n                isTarget ? 'dnd-target-field' : undefined,\n              ]}\n            >\n              <div\n                className={styles.field}\n                aria-labelledby={id}\n                data-testid={id}\n              >\n                <Split>\n                  <SplitItem isFilled>\n                    <Title\n                      headingLevel=\"h6\"\n                      size=\"md\"\n                      id={id}\n                      className={styles.title}\n                    >\n                      {canShowIndex && (\n                        <Tooltip\n                          position={'auto'}\n                          enableFlip={true}\n                          entryDelay={750}\n                          exitDelay={100}\n                          content={\n                            <div>\n                              Edit the index for this element by selecting the\n                              arrows or by dragging and dropping the element to\n                              the desired position. Placeholders may be\n                              automatically inserted to account for any gaps in\n                              the indexing.\n                            </div>\n                          }\n                        >\n                          <InputGroup className={styles.fieldIndex}>\n                            <InputGroupText>#</InputGroupText>\n                            <TextInput\n                              type={'number'}\n                              value={index}\n                              id={'index'}\n                              onChange={onIndexChange}\n                              data-testid={`change-${name}-input-index`}\n                              isDisabled={!onIndexChange}\n                              style={formTransInputGroup}\n                            />\n                          </InputGroup>\n                        </Tooltip>\n                      )}\n                      <Tooltip\n                        position={'auto'}\n                        enableFlip={true}\n                        entryDelay={750}\n                        exitDelay={100}\n                        content={<div>{info}</div>}\n                      >\n                        <div className={styles.fieldName}>\n                          {name} <InfoAltIcon />\n                        </div>\n                      </Tooltip>\n                    </Title>\n                  </SplitItem>\n                  {!mappingExpressionEnabled && onNewTransformation && (\n                    <SplitItem>\n                      <Tooltip\n                        position={'auto'}\n                        enableFlip={true}\n                        entryDelay={750}\n                        exitDelay={100}\n                        content={'Add a new transformation.'}\n                      >\n                        <Button\n                          variant={'plain'}\n                          onClick={onNewTransformation}\n                          className={styles.link}\n                          data-testid={`add-transformation-to-${name}-field-button`}\n                        >\n                          <BoltIcon />\n                        </Button>\n                      </Tooltip>\n                    </SplitItem>\n                  )}\n                  <SplitItem>\n                    <Tooltip\n                      position={'auto'}\n                      enableFlip={true}\n                      entryDelay={750}\n                      exitDelay={100}\n                      content={'Delete this field from the mapping.'}\n                    >\n                      <Button\n                        variant={'plain'}\n                        onClick={onDelete}\n                        className={styles.link}\n                        data-testid={`remove-${name}-from-mapping-button`}\n                      >\n                        <TrashIcon />\n                      </Button>\n                    </Tooltip>\n                  </SplitItem>\n                </Split>\n                {/*\n                  Show established field action transformations associated with this\n                  field.\n                  */}\n                {!mappingExpressionEnabled &&\n                  hasTransformations &&\n                  children &&\n                  Children.count(children) > 0 && (\n                    <div className={css(styles.transformationsWrapper)}>\n                      <Title headingLevel=\"h6\" size=\"md\">\n                        Transformations\n                      </Title>\n                      <div className={styles.transformations}>{children}</div>\n                    </div>\n                  )}\n              </div>\n            </NodeRef>\n          )}\n        </DraggableField>\n      )}\n    </FieldDropTarget>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  AddCircleOIcon,\n  CaretDownIcon,\n  CaretRightIcon,\n  PlusIcon,\n} from '@patternfly/react-icons';\nimport { Button, Tooltip } from '@patternfly/react-core';\nimport React, { FunctionComponent } from 'react';\n\nimport styles from './MappingFields.module.css';\nimport { useToggle } from '../impl/utils';\n\nexport interface IMappingFieldsProps {\n  isSource: boolean;\n  title: string;\n  canAddToSelectedMapping: (isSource: boolean) => boolean;\n  onCreateConstant: (constants: any | null) => void;\n  onCreateProperty: (isSource: boolean, props: any | null) => void;\n}\n\nexport interface IMappedFieldsProps {}\n\nexport const MappingFields: FunctionComponent<IMappingFieldsProps> = ({\n  title,\n  isSource,\n  onCreateConstant,\n  onCreateProperty,\n  canAddToSelectedMapping,\n  children,\n}) => {\n  const { state: expanded, toggle: toggleExpanded } = useToggle(true);\n\n  return (\n    <div className={styles.wrapper}>\n      <Button\n        key={'expandable'}\n        variant={'plain'}\n        aria-label=\"Ok\"\n        onClick={toggleExpanded}\n        data-testid={`mapping-fields-detail-${title}-toggle`}\n        style={{ display: 'inline', marginLeft: 'auto' }}\n      >\n        {expanded ? <CaretDownIcon /> : <CaretRightIcon />}\n      </Button>\n      {title}\n      <Tooltip\n        position={'top'}\n        enableFlip={true}\n        content={<div>Create and map a property.</div>}\n        key={'create-property'}\n        entryDelay={750}\n        exitDelay={100}\n      >\n        <Button\n          key={'create-prop'}\n          variant={'plain'}\n          aria-label=\"Add Property\"\n          isDisabled={!canAddToSelectedMapping(isSource)}\n          onClick={() => onCreateProperty(isSource, null)}\n          data-testid={'mapping-details-add-property-button-test'}\n          style={{ display: 'inline', marginLeft: 'auto', float: 'right' }}\n        >\n          <AddCircleOIcon />\n        </Button>\n      </Tooltip>\n      {isSource && (\n        <Tooltip\n          position={'top'}\n          enableFlip={true}\n          content={<div>Create and map a source constant.</div>}\n          key={'create-constant'}\n          entryDelay={750}\n          exitDelay={100}\n        >\n          <Button\n            key={'create-const'}\n            variant={'plain'}\n            aria-label=\"Add Constant\"\n            isDisabled={!canAddToSelectedMapping(isSource)}\n            onClick={onCreateConstant}\n            data-testid={'mapping-details-add-constant-button-test'}\n            style={{ display: 'inline', marginLeft: 'auto', float: 'right' }}\n          >\n            <PlusIcon />\n          </Button>\n        </Tooltip>\n      )}\n      {expanded && children}\n    </div>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  Alert,\n  AlertActionCloseButton,\n  AlertProps,\n  // Progress,\n} from '@patternfly/react-core';\nimport React, { FunctionComponent, useEffect, useState } from 'react';\n\nimport { useToggle } from '../impl/utils';\n\nexport interface ITimedToastProps {\n  variant: AlertProps['variant'];\n  title: string;\n  onTimeout: () => void;\n  onClose: () => void;\n}\n\nexport const TimedToast: FunctionComponent<ITimedToastProps> = ({\n  variant,\n  title,\n  children,\n  onTimeout,\n  onClose,\n}) => {\n  const showTime = 8000;\n  const intervalTime = 100;\n  const [elapsed, setElapsed] = useState(showTime);\n  const {\n    state: hovering,\n    toggleOn: hoveringOn,\n    toggleOff: hoveringOff,\n  } = useToggle(false);\n  useEffect(() => {\n    const tick = () => {\n      setElapsed((elapsed) => elapsed - intervalTime);\n    };\n    let timer: NodeJS.Timer | undefined = undefined;\n    if (elapsed <= 0) {\n      onTimeout();\n    } else if (!hovering && !timer) {\n      timer = setInterval(tick, intervalTime);\n    } else {\n      setElapsed(showTime);\n    }\n    return () => timer && clearTimeout(timer);\n  }, [elapsed, hovering, onTimeout]);\n  return (\n    <Alert\n      isLiveRegion\n      variant={variant}\n      title={title}\n      actionClose={\n        <AlertActionCloseButton\n          title={title}\n          variantLabel={`${variant} alert`}\n          onClose={onClose}\n        />\n      }\n      onMouseEnter={hoveringOn}\n      onMouseLeave={hoveringOff}\n    >\n      {children}\n      {/* {!hovering && (\n        <Progress\n          size={\"sm\"}\n          measureLocation={\"none\"}\n          value={elapsed}\n          max={8000}\n        />\n      )} */}\n    </Alert>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, {\n  FocusEvent,\n  FunctionComponent,\n  KeyboardEvent,\n  MouseEvent as ReactMouseEvent,\n  RefObject,\n  createContext,\n  useContext,\n  useState,\n} from 'react';\n\ninterface ITreeFocusContext {\n  focusedItem: HTMLElement | null;\n  setFocusedItem: (item: HTMLElement | null) => void;\n}\n\nconst TreeFocusContext = createContext<ITreeFocusContext | null>(null);\n\nexport const TreeFocusProvider: FunctionComponent = ({ children }) => {\n  const [focusedItem, setFocusedItem] = useState<HTMLElement | null>(null);\n  return (\n    <TreeFocusContext.Provider value={{ focusedItem, setFocusedItem }}>\n      {children}\n    </TreeFocusContext.Provider>\n  );\n};\n\nexport interface IUseTreeFocusProps {\n  ref: RefObject<HTMLDivElement | null>;\n  isExpandable?: boolean;\n  isExpanded?: boolean;\n  collapseTreeitem?: () => void;\n  expandTreeitem?: () => void;\n}\n\nexport const useTreeFocus = ({\n  ref,\n  isExpandable = false,\n  isExpanded = false,\n  collapseTreeitem,\n  expandTreeitem,\n}: IUseTreeFocusProps) => {\n  const context = useContext(TreeFocusContext);\n  if (!context) {\n    throw new Error(`useTreeFocus can be used only inside a Tree component`);\n  }\n  const { focusedItem, setFocusedItem } = context;\n  const getFocusableItems = (el: HTMLElement) => {\n    return Array.from<HTMLElement>(\n      el.closest('[role=tree]')?.querySelectorAll('[role=treeitem]') || [],\n    ).filter((el) => {\n      const group = el.parentElement?.closest('[aria-expanded]');\n      if (group) {\n        return group.getAttribute('aria-expanded') === 'true';\n      }\n      return true;\n    });\n  };\n\n  const setFocus = (index: number, nodes: HTMLElement[]) => {\n    nodes.forEach((n) => n.setAttribute('tabindex', '-1'));\n    nodes[index].setAttribute('tabindex', '0');\n    nodes[index].focus();\n  };\n\n  const setFocusToPreviousItem = () => {\n    if (ref.current) {\n      const nodes = getFocusableItems(ref.current);\n      const idx = nodes?.indexOf(ref.current);\n      if (idx > 0) {\n        setFocus(idx - 1, nodes);\n      }\n    }\n  };\n  const setFocusToNextItem = () => {\n    if (ref.current) {\n      const nodes = getFocusableItems(ref.current);\n      const idx = nodes?.indexOf(ref.current);\n      if (idx < nodes.length - 1) {\n        setFocus(idx + 1, nodes);\n      }\n    }\n  };\n  // const setFocusToParentItem = () => {\n  //   if (level > 1 && parentItem) {\n  //     setFocus({ level: level - 1, position: parentItem.position });\n  //   }\n  // };\n  const setFocusToFirstItem = () => {\n    if (ref.current) {\n      const nodes = getFocusableItems(ref.current);\n      setFocus(0, nodes);\n    }\n  };\n  const setFocusToLastItem = () => {\n    if (ref.current) {\n      const nodes = getFocusableItems(ref.current);\n      setFocus(nodes.length - 1, nodes);\n    }\n  };\n  const onKeyDown = (event: KeyboardEvent) => {\n    // don't handle keyboard events performed on child elements\n    if (event.target !== ref.current) {\n      return;\n    }\n    // ignore special keys\n    if (event.altKey || event.ctrlKey || event.metaKey) {\n      return;\n    }\n    switch (event.key) {\n      case ' ':\n      case 'Enter':\n        if (event.target === ref.current) {\n          // Create simulated mouse event to mimic the behavior of ATs\n          // and let the event handler handleClick do the housekeeping.\n          event.target.dispatchEvent(\n            new MouseEvent('click', {\n              view: window,\n              bubbles: true,\n              cancelable: true,\n            }),\n          );\n          setFocusedItem(ref.current);\n        }\n        break;\n      case 'Escape':\n        setFocusedItem(null);\n        event.preventDefault();\n        break;\n      case 'ArrowUp':\n        setFocusToPreviousItem();\n        break;\n      case 'ArrowDown':\n        setFocusToNextItem();\n        break;\n      case 'ArrowRight':\n        if (isExpandable) {\n          if (isExpanded) {\n            setFocusToNextItem();\n          } else {\n            if (expandTreeitem) {\n              expandTreeitem();\n            }\n          }\n        }\n        break;\n      case 'ArrowLeft':\n        if (isExpandable && isExpanded) {\n          if (collapseTreeitem) {\n            collapseTreeitem();\n          }\n        } else {\n          // if (itemLevel === level) {\n          //   setFocusToParentItem();\n          // }\n        }\n        break;\n      case 'Home':\n        setFocusToFirstItem();\n        break;\n      case 'End':\n        setFocusToLastItem();\n        break;\n      default:\n        break;\n    }\n  };\n  const onClick = (event: ReactMouseEvent<HTMLElement>) => {\n    if (ref.current) {\n      if (isExpandable && isExpanded) {\n        event.stopPropagation();\n      } else {\n        const nodes = getFocusableItems(ref.current);\n        const idx = nodes?.indexOf(ref.current);\n        setFocus(idx, nodes);\n        setFocusedItem(ref.current);\n      }\n    }\n  };\n  return {\n    focused: focusedItem && focusedItem === ref.current,\n    handlers: {\n      onKeyDown,\n      onClick,\n      onBlur: (event: FocusEvent<HTMLElement>) => {\n        if (\n          (event.relatedTarget as HTMLElement | null)?.closest(\n            '[role=tree]',\n          ) !== ref.current?.closest('[role=tree]')\n        ) {\n          setFocusedItem(null);\n        }\n      },\n    },\n  };\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { FunctionComponent, useLayoutEffect, useRef } from 'react';\n\nimport { Accordion } from '@patternfly/react-core';\nimport { TreeFocusProvider } from './TreeFocusProvider';\nimport styles from './Tree.module.css';\n\nexport const Tree: FunctionComponent = ({ children }) => {\n  const ref = useRef<HTMLDivElement | null>(null);\n\n  useLayoutEffect(() => {\n    if (ref.current) {\n      const itemInTabSequence = ref.current.querySelector(\n        `[role=treeitem][tabindex=\"0\"]`,\n      );\n      if (!itemInTabSequence) {\n        const firstTreeItem = ref.current.querySelector('[role=treeitem]');\n        if (firstTreeItem) {\n          firstTreeItem.setAttribute('tabindex', '0');\n        }\n      }\n    }\n  });\n  return (\n    <TreeFocusProvider>\n      <div ref={ref}>\n        <Accordion\n          asDefinitionList={false}\n          className={styles.accordion}\n          role={'tree'}\n        >\n          {children}\n        </Accordion>\n      </div>\n    </TreeFocusProvider>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  AccordionContent,\n  AccordionItem,\n  AccordionToggle,\n} from '@patternfly/react-core';\nimport React, {\n  FunctionComponent,\n  MouseEvent,\n  PropsWithChildren,\n  ReactNode,\n  forwardRef,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\n\nimport { css } from '@patternfly/react-styles';\nimport styles from './TreeGroup.module.css';\nimport { useTreeFocus } from './TreeFocusProvider';\n\nexport interface ITreeGroupProps {\n  id: string;\n  level: number;\n  setSize: number;\n  position: number;\n  expanded?: boolean;\n  renderLabel: (props: { expanded: boolean; focused: boolean }) => ReactNode;\n  children: (props: { expanded: boolean; focused: boolean }) => ReactNode;\n}\n\nexport const TreeGroup = forwardRef<\n  HTMLDivElement,\n  PropsWithChildren<ITreeGroupProps>\n>(function TreeGroup(\n  { id, expanded, level, setSize, position, renderLabel, children },\n  ref,\n) {\n  const divRef = useRef<HTMLDivElement | null>(null);\n  const [isExpanded, setIsExpanded] = useState(false);\n  const toggleExpand = useCallback(() => {\n    setIsExpanded(!isExpanded);\n  }, [isExpanded]);\n  const toggleExpandNoPropagation = useCallback(\n    (event: MouseEvent) => {\n      event.stopPropagation();\n      toggleExpand();\n    },\n    [toggleExpand],\n  );\n\n  const expand = useCallback(() => setIsExpanded(true), []);\n  const collapse = useCallback(() => setIsExpanded(false), []);\n\n  useEffect(() => {\n    if (expanded !== undefined) {\n      setIsExpanded(expanded);\n    }\n  }, [expanded]);\n\n  const { focused, handlers: focusHandlers } = useTreeFocus({\n    ref: divRef,\n    isExpandable: true,\n    isExpanded,\n    collapseTreeitem: collapse,\n    expandTreeitem: expand,\n  });\n\n  const handleRef = (el: HTMLDivElement | null) => {\n    divRef.current = el;\n    if (ref) {\n      if (typeof ref === 'function') {\n        ref(el);\n      } else {\n        // @ts-ignore\n        ref.current = el;\n      }\n    }\n  };\n\n  const Component: FunctionComponent = ({ children }) => (\n    <span role={'heading'} aria-level={level + 2}>\n      {children}\n    </span>\n  );\n\n  return (\n    <div\n      ref={handleRef}\n      role={'treeitem'}\n      aria-level={level}\n      aria-setsize={setSize}\n      aria-posinset={position}\n      aria-expanded={isExpanded}\n      {...focusHandlers}\n      onClick={(event) => {\n        focusHandlers.onClick(event);\n        if (!event.isPropagationStopped()) {\n          toggleExpand();\n        }\n      }}\n    >\n      <AccordionItem>\n        <AccordionToggle\n          isExpanded={isExpanded}\n          id={`${id}-toggle`}\n          data-testid={`${id}-toggle`}\n          className={styles.button}\n          tabIndex={-1}\n          component={Component}\n          onClick={toggleExpandNoPropagation}\n        >\n          {renderLabel({ expanded: isExpanded, focused: focused || false })}\n        </AccordionToggle>\n        <AccordionContent\n          isHidden={!isExpanded}\n          className={css(styles.content, !isExpanded && styles.hiddenContent)}\n          role=\"group\"\n        >\n          {children({ expanded: isExpanded, focused: focused || false })}\n        </AccordionContent>\n      </AccordionItem>\n    </div>\n  );\n});\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, {\n  HTMLAttributes,\n  PropsWithChildren,\n  ReactNode,\n  forwardRef,\n  useRef,\n} from 'react';\n\nimport { useTreeFocus } from './TreeFocusProvider';\n\nexport interface ITreeItemProps extends HTMLAttributes<HTMLDivElement> {\n  level: number;\n  setSize: number;\n  position: number;\n  children: (props: { focused: boolean }) => ReactNode;\n}\n\nexport const TreeItem = forwardRef<\n  HTMLDivElement,\n  PropsWithChildren<ITreeItemProps>\n>(function TreeItem({ level, setSize, position, children, ...props }, ref) {\n  const divRef = useRef<HTMLDivElement | null>(null);\n  const { focused, handlers: focusHandlers } = useTreeFocus({\n    ref: divRef,\n  });\n\n  const handleRef = (el: HTMLDivElement | null) => {\n    divRef.current = el;\n    if (ref) {\n      if (typeof ref === 'function') {\n        ref(el);\n      } else {\n        // @ts-ignore\n        ref.current = el;\n      }\n    }\n  };\n  return (\n    <div\n      ref={handleRef}\n      role={'treeitem'}\n      aria-level={level}\n      aria-setsize={setSize}\n      aria-posinset={position}\n      {...focusHandlers}\n      {...props}\n    >\n      {children({ focused: focused || false })}\n    </div>\n  );\n});\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { FunctionComponent } from 'react';\nimport { Toolbar, ToolbarContent } from '@patternfly/react-core';\n\nimport { css } from '@patternfly/react-styles';\nimport styles from './Toolbar.module.css';\n\nexport const ContextToolbar: FunctionComponent = ({ children }) => (\n  <Toolbar\n    id=\"data-toolbar\"\n    className={css(styles.toolbar)}\n    role={'complementary'}\n  >\n    <ToolbarContent className={css(styles.toolbarContent)}>\n      {children}\n    </ToolbarContent>\n  </Toolbar>\n);\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { FunctionComponent } from 'react';\nimport { Toolbar, ToolbarContent } from '@patternfly/react-core';\n\nimport { css } from '@patternfly/react-styles';\nimport styles from './Toolbar.module.css';\n\nexport const ExpressionToolbar: FunctionComponent = ({ children }) => {\n  return (\n    <Toolbar className={css(styles.toolbar)}>\n      <ToolbarContent className={css(styles.toolbarContent)}>\n        {children}\n      </ToolbarContent>\n    </Toolbar>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { FunctionComponent } from 'react';\nimport styles from './MainContent.module.css';\n\nexport const MainContent: FunctionComponent = ({ children }) => (\n  <div className={styles.wrapper} role={'main'}>\n    {children}\n  </div>\n);\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { FunctionComponent, ReactElement } from 'react';\nimport { TopologySideBar } from '@patternfly/react-topology';\nimport styles from './Sidebar.module.css';\n\nexport interface ISidebarProps {\n  show: boolean;\n  children: () => ReactElement;\n}\n\nexport const Sidebar: FunctionComponent<ISidebarProps> = ({\n  show,\n  children,\n}) => {\n  return (\n    <TopologySideBar show={show} className={styles.sidebar}>\n      {show && children()}\n    </TopologySideBar>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { FunctionComponent, ReactElement, ReactNode, memo } from 'react';\nimport { Stack, StackItem } from '@patternfly/react-core';\n\nimport { Loading } from '../UI';\nimport { Sidebar } from './Sidebar';\nimport styles from './MainLayout.module.css';\n\nexport interface IMainLayoutProps {\n  loading: boolean;\n  showSidebar: boolean;\n  contextToolbar?: ReactNode;\n  expressionToolbar?: ReactNode;\n  controlBar?: ReactNode;\n  renderSidebar: () => ReactElement;\n}\n\nexport const MainLayout: FunctionComponent<IMainLayoutProps> = memo(\n  function MainLayout({\n    loading,\n    showSidebar,\n    renderSidebar,\n    contextToolbar,\n    expressionToolbar,\n    controlBar,\n    children,\n  }) {\n    const sideBar = <Sidebar show={showSidebar}>{renderSidebar}</Sidebar>;\n    const containerClasses =\n      'pf-topology-container' +\n      `${sideBar ? ' pf-topology-container__with-sidebar' : ''}` +\n      `${showSidebar ? ' pf-topology-container__with-sidebar--open' : ''}`;\n\n    return loading ? (\n      <Loading />\n    ) : (\n      <Stack className={styles.view}>\n        {contextToolbar && (\n          <StackItem isFilled={false}>{contextToolbar}</StackItem>\n        )}\n        {expressionToolbar && (\n          <StackItem isFilled={false}>{expressionToolbar}</StackItem>\n        )}\n        <StackItem isFilled className={containerClasses}>\n          <div className=\"pf-topology-content\">\n            {children}\n            {controlBar && (\n              <span className=\"pf-topology-control-bar\">{controlBar}</span>\n            )}\n          </div>\n          {sideBar}\n        </StackItem>\n      </Stack>\n    );\n  },\n);\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Button, Stack, StackItem, Tooltip } from '@patternfly/react-core';\nimport { CloseIcon, EditIcon, TrashIcon } from '@patternfly/react-icons';\nimport React, { FunctionComponent } from 'react';\n\nimport { ColumnHeader } from '../UI';\nimport styles from './MappingDetailsSidebar.module.css';\n\nexport interface IMappingDetailsSidebarProps {\n  onDelete: () => void;\n  onClose: () => void;\n  onEditEnum: (cb: any) => void;\n  isEnumMapping: () => boolean;\n}\n\nexport const MappingDetailsSidebar: FunctionComponent<IMappingDetailsSidebarProps> =\n  ({ onDelete, onClose, onEditEnum, isEnumMapping, children }) => {\n    return (\n      <Stack data-testid=\"column-mapping-details-area\">\n        <StackItem>\n          <ColumnHeader\n            title={'Mapping Details'}\n            variant={'plain'}\n            actions={[\n              <Button\n                onClick={onClose}\n                variant={'plain'}\n                aria-label=\"Close the mapping details panel\"\n                data-testid={'close-mapping-detail-button'}\n                key={'close'}\n              >\n                <CloseIcon />\n              </Button>,\n              <Tooltip\n                key={'edit-enum'}\n                position={'auto'}\n                enableFlip={true}\n                content={<div>Edit the enumeration mappings</div>}\n                entryDelay={750}\n                exitDelay={100}\n              >\n                <Button\n                  variant={'plain'}\n                  onClick={onEditEnum}\n                  aria-label=\"Edit the enumeration mappings\"\n                  data-testid={'edit-enum-mapping-button'}\n                  isDisabled={!isEnumMapping()}\n                >\n                  <EditIcon />\n                </Button>\n              </Tooltip>,\n              <Tooltip\n                key={'remove'}\n                position={'auto'}\n                enableFlip={true}\n                content={<div>Remove the current mapping</div>}\n                entryDelay={750}\n                exitDelay={100}\n              >\n                <Button\n                  variant={'plain'}\n                  onClick={onDelete}\n                  aria-label=\"Remove the current mapping\"\n                  data-testid={'remove-current-mapping-button'}\n                >\n                  <TrashIcon />\n                </Button>\n              </Tooltip>,\n            ]}\n          />\n        </StackItem>\n        <StackItem isFilled={true} className={styles.content}>\n          {children}\n        </StackItem>\n      </Stack>\n    );\n  };\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Button, Tooltip } from '@patternfly/react-core';\nimport React, { FunctionComponent } from 'react';\n\nimport { ClipboardIcon } from '@patternfly/react-icons';\n\nexport interface ICaptureDocumentIDActionProps {\n  id: string;\n  onClick: () => void;\n}\nexport const CaptureDocumentIDAction: FunctionComponent<ICaptureDocumentIDActionProps> =\n  ({ id, onClick }) => (\n    <Tooltip\n      position={'auto'}\n      enableFlip={true}\n      content={<div>Capture Document ID to clipboard</div>}\n    >\n      <Button\n        variant=\"plain\"\n        onClick={onClick}\n        aria-label=\"Capture Document ID to clipboard\"\n        data-testid={`capture-${id}-name-button`}\n      >\n        <ClipboardIcon />\n      </Button>\n    </Tooltip>\n  );\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Button, Tooltip } from '@patternfly/react-core';\nimport React, { FunctionComponent } from 'react';\n\nimport { EditIcon } from '@patternfly/react-icons';\n\nexport interface IChangeDocumentNameActionProps {\n  id: string;\n  onClick: () => void;\n}\nexport const ChangeDocumentNameAction: FunctionComponent<IChangeDocumentNameActionProps> =\n  ({ id, onClick }) => (\n    <Tooltip\n      position={'auto'}\n      enableFlip={true}\n      content={<div>Change document name</div>}\n    >\n      <Button\n        variant=\"plain\"\n        onClick={onClick}\n        aria-label=\"Change document name\"\n        data-testid={`change-${id}-name-button`}\n      >\n        <EditIcon />\n      </Button>\n    </Tooltip>\n  );\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Button, Tooltip } from '@patternfly/react-core';\nimport React, { FunctionComponent } from 'react';\n\nimport { TrashIcon } from '@patternfly/react-icons';\n\nexport interface IDeleteDocumentActionProps {\n  id: string;\n  onClick: () => void;\n}\nexport const DeleteDocumentAction: FunctionComponent<IDeleteDocumentActionProps> =\n  ({ id, onClick }) => (\n    <Tooltip\n      position={'auto'}\n      enableFlip={true}\n      content={<div>Remove instance or schema file</div>}\n    >\n      <Button\n        variant=\"plain\"\n        onClick={onClick}\n        aria-label=\"Remove instance or schema file\"\n        data-testid={`remove-${id}-instance-or-schema-file-button`}\n      >\n        <TrashIcon />\n      </Button>\n    </Tooltip>\n  );\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Button, Tooltip } from '@patternfly/react-core';\nimport React, { FunctionComponent } from 'react';\n\nimport { EditIcon } from '@patternfly/react-icons';\n\nexport interface IEditCSVParamsActionProps {\n  id: string;\n  onClick: () => void;\n}\nexport const EditCSVParamsAction: FunctionComponent<IEditCSVParamsActionProps> =\n  ({ id, onClick }) => (\n    <Tooltip\n      position={'auto'}\n      enableFlip={true}\n      content={<div>Modify CSV Parameters</div>}\n    >\n      <Button\n        variant=\"plain\"\n        onClick={onClick}\n        aria-label=\"Modify CSV parameters\"\n        data-testid={`modify-csv-params-${id}-button`}\n      >\n        <EditIcon />\n      </Button>\n    </Tooltip>\n  );\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Button, Tooltip } from '@patternfly/react-core';\nimport React, { FunctionComponent } from 'react';\n\nimport { AddCircleOIcon } from '@patternfly/react-icons';\n\nexport interface IEnableJavaClassActionProps {\n  onCustomClassSearch: () => void;\n}\n\nexport const EnableJavaClassAction: FunctionComponent<IEnableJavaClassActionProps> =\n  ({ onCustomClassSearch, ...props }) => {\n    function onEnableClassSearch(): void {\n      onCustomClassSearch();\n    }\n\n    return (\n      <Tooltip\n        position={'auto'}\n        enableFlip={true}\n        content={\n          <div>\n            Load a Java document based on classes from your previously imported\n            Java archive.\n          </div>\n        }\n      >\n        <Button\n          variant=\"plain\"\n          onClick={onEnableClassSearch}\n          aria-label=\"Load a Java document based on classes from your previously imported Java archive.\"\n          {...props}\n        >\n          <AddCircleOIcon />\n        </Button>\n      </Tooltip>\n    );\n  };\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Button, Tooltip } from '@patternfly/react-core';\nimport React, { FunctionComponent, useEffect, useRef } from 'react';\n\nimport { ImportIcon } from '@patternfly/react-icons';\nimport { useFilePicker } from 'react-sage';\n\nexport interface IImportActionProps {\n  id: string;\n  onImport: (selectedFile: File) => void;\n}\nexport const ImportAction: FunctionComponent<IImportActionProps> = ({\n  id,\n  onImport,\n}) => {\n  const { files, onClick, HiddenFileInput } = useFilePicker({\n    maxFileSize: 1,\n  });\n  const previouslyUploadedFiles = useRef<File[] | null>(null);\n\n  useEffect(() => {\n    if (previouslyUploadedFiles.current !== files) {\n      previouslyUploadedFiles.current = files;\n      if (files?.length === 1) {\n        onImport(files[0]);\n      }\n    }\n  }, [files, onImport]);\n\n  return (\n    <Tooltip\n      position={'auto'}\n      enableFlip={true}\n      content={<div>Import instance or schema file</div>}\n    >\n      <Button\n        variant=\"plain\"\n        aria-label=\"Import instance or schema file\"\n        data-testid={`import-instance-or-schema-file-${id}-button`}\n        onClick={onClick}\n      >\n        <ImportIcon />\n        <HiddenFileInput accept={'.json, .xml, .xsd, .csv'} />\n      </Button>\n    </Tooltip>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { AtlasmapDocumentType, IAtlasmapGroup } from '../../../Views';\nimport {\n  DelayedBoolean,\n  DocumentGroup,\n  FieldDropTarget,\n  ITreeGroupProps,\n  NodeRef,\n  TreeGroup,\n} from '../../../UI';\nimport React, { FunctionComponent } from 'react';\n\nimport { LayerGroupIcon } from '@patternfly/react-icons';\n\nexport interface ITreeGroupAndNodeRefsAndDnDProps {\n  fieldId: string;\n  group: IAtlasmapGroup;\n  showTypes: boolean;\n  boundaryId?: string;\n  overrideWidth?: string;\n  parentId: string;\n  acceptDropType: AtlasmapDocumentType;\n  draggableType: AtlasmapDocumentType;\n  level?: number;\n  position?: number;\n  setSize?: number;\n  children: ITreeGroupProps['children'];\n}\n\nexport const TreeGroupAndNodeRefsAndDnD: FunctionComponent<ITreeGroupAndNodeRefsAndDnDProps> =\n  ({\n    fieldId,\n    group,\n    showTypes,\n    boundaryId,\n    overrideWidth,\n    parentId,\n    acceptDropType,\n    draggableType,\n    level = 1,\n    position = 1,\n    setSize = 1,\n    children,\n  }) => (\n    <FieldDropTarget\n      key={fieldId}\n      target={{\n        id: group.id,\n        name: group.name,\n        type: draggableType,\n      }}\n      canDrop={() => false}\n      accept={[acceptDropType]}\n    >\n      {({ isOver }) => (\n        <DelayedBoolean value={isOver}>\n          {(isOver) => (\n            <NodeRef\n              id={fieldId}\n              parentId={parentId}\n              boundaryId={boundaryId}\n              overrideWidth={overrideWidth}\n            >\n              <TreeGroup\n                id={fieldId}\n                level={level}\n                position={position}\n                setSize={setSize}\n                expanded={isOver === true ? true : undefined}\n                renderLabel={({ expanded }) => (\n                  <DocumentGroup\n                    name={group.name}\n                    type={group.type}\n                    showType={showTypes}\n                    icon={group.isCollection ? <LayerGroupIcon /> : undefined}\n                    iconTooltip={\n                      group.isCollection\n                        ? 'This object is a collection'\n                        : undefined\n                    }\n                    expanded={isOver || expanded}\n                  />\n                )}\n              >\n                {children}\n              </TreeGroup>\n            </NodeRef>\n          )}\n        </DelayedBoolean>\n      )}\n    </FieldDropTarget>\n  );\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  AtIcon,\n  BoltIcon,\n  BullseyeIcon,\n  CircleIcon,\n  GripVerticalIcon,\n  LayerGroupIcon,\n} from '@patternfly/react-icons';\nimport { AtlasmapDocumentType, IAtlasmapField } from '../../../Views';\nimport { Button, Tooltip } from '@patternfly/react-core';\nimport {\n  DocumentField,\n  DraggableField,\n  FieldDropTarget,\n  IDocumentFieldProps,\n  IDragAndDropField,\n  NodeRef,\n  TreeItem,\n} from '../../../UI';\nimport React, { FunctionComponent, ReactNode } from 'react';\n\nexport interface ITreeItemFieldAndNodeRefsAndDnDProps {\n  fieldId: string;\n  field: IAtlasmapField;\n  showTypes: boolean;\n  boundaryId?: string;\n  overrideWidth?: string;\n  parentId: string;\n  acceptDropType: AtlasmapDocumentType;\n  draggableType: AtlasmapDocumentType;\n  level?: number;\n  position?: number;\n  setSize?: number;\n  renderActions?: (field: IAtlasmapField) => IDocumentFieldProps['actions'];\n  renderPreview?: (field: IAtlasmapField) => ReactNode;\n  canDrop: (source: IAtlasmapField, target: IDragAndDropField) => boolean;\n  onDrop: (source: IAtlasmapField, target: IDragAndDropField | null) => void;\n}\n\nexport const TreeItemWithFieldAndNodeRefsAndDnD: FunctionComponent<ITreeItemFieldAndNodeRefsAndDnDProps> =\n  ({\n    fieldId,\n    field,\n    showTypes,\n    boundaryId,\n    overrideWidth,\n    parentId,\n    acceptDropType,\n    draggableType,\n    level = 1,\n    position = 1,\n    setSize = 1,\n    canDrop,\n    onDrop,\n    renderActions = () => [],\n    renderPreview,\n  }) => {\n    const preview = renderPreview && renderPreview(field);\n    return (\n      <FieldDropTarget\n        key={fieldId}\n        target={{\n          id: field.id,\n          name: field.name,\n          type: draggableType,\n          payload: field,\n        }}\n        canDrop={(item) => canDrop(field, item)}\n        accept={[acceptDropType]}\n      >\n        {({ isDroppable, isTarget }) => (\n          <DraggableField\n            field={{\n              type: draggableType,\n              id: field.id,\n              name: field.name,\n              payload: field,\n            }}\n            onDrop={(_, target) => onDrop(field, target)}\n          >\n            {({ isDragging }) => (\n              <NodeRef\n                id={[\n                  fieldId,\n                  isDragging ? 'dnd-start' : undefined,\n                  isTarget ? 'dnd-target-field' : undefined,\n                ]}\n                parentId={parentId}\n                boundaryId={boundaryId}\n                overrideWidth={overrideWidth}\n              >\n                <TreeItem level={level} position={position} setSize={setSize}>\n                  {({ focused }) => (\n                    <>\n                      <DocumentField\n                        name={field.name}\n                        icon={\n                          isDroppable || isTarget ? (\n                            <Button\n                              variant={isTarget ? 'link' : 'plain'}\n                              tabIndex={-1}\n                              aria-label={'Drop target'}\n                              isDisabled={!isDroppable}\n                              data-testid={`is-droppable-${field.name}-button`}\n                            >\n                              <BullseyeIcon size=\"sm\" />\n                            </Button>\n                          ) : (\n                            <Button\n                              variant={'plain'}\n                              tabIndex={-1}\n                              aria-hidden={true}\n                              data-testid={`grip-${field.name}-button`}\n                            >\n                              <GripVerticalIcon />\n                            </Button>\n                          )\n                        }\n                        type={field.enumeration ? 'ENUM' : field.type}\n                        scope={field.scope}\n                        showType={showTypes}\n                        isDragging={isDragging}\n                        isFocused={focused}\n                        isSelected={!!preview}\n                        isDisabled={field.isDisabled}\n                        statusIcons={[\n                          field.isConnected ? (\n                            <Tooltip\n                              key=\"connected\"\n                              position={'auto'}\n                              enableFlip={true}\n                              entryDelay={750}\n                              exitDelay={100}\n                              content={<div>This field is connected</div>}\n                            >\n                              <CircleIcon\n                                label={'This field is connected'}\n                                size=\"sm\"\n                                tabIndex={-1}\n                              />\n                            </Tooltip>\n                          ) : null,\n                          field.isCollection ? (\n                            <Tooltip\n                              key={'collection'}\n                              position={'auto'}\n                              enableFlip={true}\n                              entryDelay={750}\n                              exitDelay={100}\n                              content={<div>This field is a collection</div>}\n                            >\n                              <LayerGroupIcon\n                                label={'This field is a collection'}\n                                size=\"sm\"\n                                tabIndex={-1}\n                              />\n                            </Tooltip>\n                          ) : null,\n                          field.hasTransformations ? (\n                            <Tooltip\n                              key={'transformations'}\n                              position={'auto'}\n                              enableFlip={true}\n                              entryDelay={750}\n                              exitDelay={100}\n                              content={\n                                <div>This field has transformations</div>\n                              }\n                            >\n                              <BoltIcon\n                                label={'This field has transformations'}\n                                size=\"sm\"\n                                tabIndex={-1}\n                              />\n                            </Tooltip>\n                          ) : null,\n                          field.isAttribute ? (\n                            <Tooltip\n                              key={'attribute'}\n                              position={'auto'}\n                              enableFlip={true}\n                              entryDelay={750}\n                              exitDelay={100}\n                              content={<div>This field is an attribute</div>}\n                            >\n                              <AtIcon\n                                label={'This field is an attribute'}\n                                size=\"sm\"\n                                tabIndex={-1}\n                              />\n                            </Tooltip>\n                          ) : null,\n                        ]}\n                        actions={renderActions(field)}\n                      >\n                        {preview}\n                      </DocumentField>\n                    </>\n                  )}\n                </TreeItem>\n              </NodeRef>\n            )}\n          </DraggableField>\n        )}\n      </FieldDropTarget>\n    );\n  };\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { AtlasmapFields, IAtlasmapField, IAtlasmapGroup } from '../../../Views';\nimport {\n  ITreeGroupAndNodeRefsAndDnDProps,\n  TreeGroupAndNodeRefsAndDnD,\n} from './TreeGroupAndNodeRefsAndDnD';\nimport {\n  ITreeItemFieldAndNodeRefsAndDnDProps,\n  TreeItemWithFieldAndNodeRefsAndDnD,\n} from './TreeItemFieldAndNodeRefsAndDnD';\nimport React, { FunctionComponent } from 'react';\n\nimport { NodeRef } from '../../../UI';\n\nfunction getChildrenIds(\n  fields: AtlasmapFields,\n  idPrefix: string,\n): (string | undefined)[] {\n  return fields.reduce<(string | undefined)[]>(\n    (ids, f) => [\n      ...ids,\n      `${idPrefix}${f.id}`,\n      ...((f as IAtlasmapGroup).fields\n        ? getChildrenIds((f as IAtlasmapGroup).fields, idPrefix)\n        : []),\n    ],\n    [],\n  );\n}\n\nexport interface ITraverseFieldsProps\n  extends Omit<Omit<IFieldOrGroupProps, 'field'>, 'fieldId'> {\n  fields: AtlasmapFields;\n}\n\nexport const TraverseFields: FunctionComponent<ITraverseFieldsProps> = ({\n  fields,\n  idPrefix,\n  isVisible = true,\n  ...props\n}) => {\n  return isVisible ? (\n    <>\n      {fields.map((field, idx) => (\n        <FieldOrGroup\n          key={idx}\n          field={field}\n          idPrefix={idPrefix}\n          setSize={fields.length}\n          position={idx + 1}\n          isVisible={isVisible}\n          {...props}\n        />\n      ))}\n    </>\n  ) : (\n    <NodeRef\n      id={getChildrenIds(fields, idPrefix)}\n      boundaryId={props.boundaryId}\n      parentId={props.parentId}\n    >\n      <div>&nbsp;</div>\n    </NodeRef>\n  );\n};\n\nexport interface IFieldOrGroupProps\n  extends Omit<Omit<ITreeItemFieldAndNodeRefsAndDnDProps, 'field'>, 'fieldId'>,\n    Omit<\n      Omit<Omit<ITreeGroupAndNodeRefsAndDnDProps, 'group'>, 'fieldId'>,\n      'children'\n    > {\n  idPrefix: string;\n  field: IAtlasmapGroup | IAtlasmapField;\n  isVisible?: boolean;\n}\n\nconst FieldOrGroup: FunctionComponent<IFieldOrGroupProps> = ({\n  field,\n  idPrefix,\n  level = 1,\n  ...props\n}) => {\n  const fieldId = `${idPrefix}${field.id}`;\n  const maybeGroup = field as IAtlasmapGroup;\n  const maybeField = field as IAtlasmapField;\n  if (maybeGroup.fields) {\n    return (\n      <TreeGroupAndNodeRefsAndDnD\n        fieldId={fieldId}\n        group={maybeGroup}\n        level={level}\n        {...props}\n      >\n        {({ expanded }) => (\n          <TraverseFields\n            {\n              ...props /* spreading the props must be done before everything else so to override the values fed to the Group */\n            }\n            fields={maybeGroup.fields as AtlasmapFields}\n            parentId={fieldId}\n            level={level + 1}\n            idPrefix={idPrefix}\n            isVisible={expanded}\n          />\n        )}\n      </TreeGroupAndNodeRefsAndDnD>\n    );\n  }\n  return (\n    <TreeItemWithFieldAndNodeRefsAndDnD\n      fieldId={fieldId}\n      field={maybeField}\n      level={level}\n      {...props}\n    />\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  Button,\n  DropdownItem,\n  DropdownToggle,\n  Split,\n  SplitItem,\n  Title,\n  Tooltip,\n} from '@patternfly/react-core';\nimport {\n  ExchangeAltIcon,\n  LinkIcon,\n  ProjectDiagramIcon,\n  UnlinkIcon,\n} from '@patternfly/react-icons';\n\nimport { AutoDropdown } from '../../../UI';\nimport { IAtlasmapMapping } from '../../../Views';\nimport React from 'react';\n\nexport interface ICommonActionsProps {\n  connectedMappings: IAtlasmapMapping[];\n  onShowMappingDetails: (mapping: IAtlasmapMapping) => void;\n  canAddFieldToSelectedMapping: boolean;\n  onAddToSelectedMapping: () => void;\n  canRemoveFromSelectedMapping: boolean;\n  onRemoveFromSelectedMapping: () => void;\n  canStartMapping: boolean;\n  onStartMapping: () => void;\n}\n\nexport function commonActions({\n  connectedMappings,\n  onShowMappingDetails,\n  canAddFieldToSelectedMapping,\n  onAddToSelectedMapping,\n  canRemoveFromSelectedMapping,\n  onRemoveFromSelectedMapping,\n  canStartMapping,\n  onStartMapping,\n}: ICommonActionsProps) {\n  return [\n    <Tooltip\n      key={'select-mapping'}\n      position={'top'}\n      enableFlip={true}\n      content={<div>Show mapping details</div>}\n    >\n      {connectedMappings.length > 1 ? (\n        <AutoDropdown\n          toggle={({ toggleOpen }) => (\n            <DropdownToggle\n              toggleIndicator={null}\n              aria-label=\"Show mapping details\"\n              onToggle={toggleOpen}\n            >\n              <ExchangeAltIcon />\n            </DropdownToggle>\n          )}\n          isPlain={true}\n          position={'right'}\n          dropdownItems={connectedMappings.map((m) => (\n            <DropdownItem key={m.id} onClick={() => onShowMappingDetails(m)}>\n              <Title headingLevel=\"h2\" size=\"lg\">\n                {m.name}\n              </Title>\n              <Split hasGutter>\n                <SplitItem>\n                  <Title headingLevel=\"h2\" size=\"md\">\n                    Sources\n                  </Title>\n                  {m.sourceFields.map((s) => (\n                    <div key={s.id}>{s.name}</div>\n                  ))}\n                </SplitItem>\n                <SplitItem>\n                  <Title headingLevel=\"h2\" size=\"md\">\n                    Targets\n                  </Title>\n                  {m.targetFields.map((t) => (\n                    <div key={t.id}>{t.name}</div>\n                  ))}\n                </SplitItem>\n              </Split>\n            </DropdownItem>\n          ))}\n          disabled={connectedMappings.length === 0}\n        />\n      ) : (\n        <Button\n          variant=\"plain\"\n          onClick={() => onShowMappingDetails(connectedMappings[0])}\n          aria-label=\"Show mapping details\"\n          tabIndex={0}\n          isDisabled={connectedMappings.length === 0}\n          data-testid={'show-mapping-details-button'}\n        >\n          <ExchangeAltIcon />\n        </Button>\n      )}\n    </Tooltip>,\n    canRemoveFromSelectedMapping ? (\n      <Tooltip\n        key={'quick-remove'}\n        position={'top'}\n        enableFlip={true}\n        content={<div>Disconnect from the selected mapping</div>}\n      >\n        <Button\n          variant=\"plain\"\n          onClick={onRemoveFromSelectedMapping}\n          aria-label={'Disconnect from the selected mapping'}\n          data-testid={'disconnect-from-the-selected-mapping-button'}\n          tabIndex={0}\n        >\n          <UnlinkIcon />\n        </Button>\n      </Tooltip>\n    ) : (\n      <Tooltip\n        key={'quick-add'}\n        position={'top'}\n        enableFlip={true}\n        content={<div>Connect to the selected mapping</div>}\n      >\n        <Button\n          variant=\"plain\"\n          onClick={onAddToSelectedMapping}\n          aria-label={'Connect to the selected mapping'}\n          tabIndex={0}\n          isDisabled={!canAddFieldToSelectedMapping}\n          data-testid={'connect-to-the-selected-mapping-button'}\n        >\n          <LinkIcon />\n        </Button>\n      </Tooltip>\n    ),\n    <Tooltip\n      key={'add'}\n      position={'top'}\n      enableFlip={true}\n      content={<div>Create new mapping</div>}\n    >\n      <Button\n        variant=\"plain\"\n        onClick={onStartMapping}\n        aria-label={'Create new mapping'}\n        tabIndex={0}\n        isDisabled={!canStartMapping}\n        data-testid={'create-new-mapping-button'}\n      >\n        <ProjectDiagramIcon />\n      </Button>\n    </Tooltip>,\n  ];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Button, Tooltip } from '@patternfly/react-core';\nimport { EditIcon, TrashIcon } from '@patternfly/react-icons';\nimport {\n  IAtlasmapDocument,\n  IAtlasmapField,\n  IAtlasmapMapping,\n} from '../../models';\nimport { IDragAndDropField, Tree } from '../../../UI';\nimport { ITraverseFieldsProps, TraverseFields } from './TraverseFields';\nimport React, { FunctionComponent } from 'react';\nimport {\n  SOURCES_CONSTANTS_ID,\n  SOURCES_DRAGGABLE_TYPE,\n  SOURCES_FIELD_ID_PREFIX,\n  SOURCES_HEIGHT_BOUNDARY_ID,\n  SOURCES_WIDTH_BOUNDARY_ID,\n  TARGETS_DRAGGABLE_TYPE,\n} from './constants';\n\nimport { commonActions } from './commonActions';\n\nexport interface IConstantsTreeCallbacks {\n  onDrop: (source: IAtlasmapField, target: IDragAndDropField | null) => void;\n  canDrop: (source: IAtlasmapField, target: IDragAndDropField) => boolean;\n  onShowMappingDetails: (mapping: IAtlasmapMapping) => void;\n  canAddFieldToSelectedMapping: (source: IAtlasmapField) => boolean;\n  onAddToSelectedMapping: (source: IAtlasmapField) => void;\n  canRemoveFromSelectedMapping: (source: IAtlasmapField) => boolean;\n  onRemoveFromSelectedMapping: (source: IAtlasmapField) => void;\n  onEditConstant: (name: string, value: string) => void;\n  onDeleteConstant: (name: string) => void;\n  canStartMapping: (field: IAtlasmapField) => boolean;\n  onStartMapping: (field: IAtlasmapField) => void;\n}\n\nexport interface IConstantsTreeProps extends IConstantsTreeCallbacks {\n  fields: IAtlasmapDocument['fields'];\n  renderPreview: ITraverseFieldsProps['renderPreview'];\n}\n\nexport const ConstantsTree: FunctionComponent<IConstantsTreeProps> = ({\n  fields,\n  onDrop,\n  canDrop,\n  onShowMappingDetails,\n  canAddFieldToSelectedMapping,\n  onAddToSelectedMapping,\n  canRemoveFromSelectedMapping,\n  onRemoveFromSelectedMapping,\n  onEditConstant,\n  onDeleteConstant,\n  canStartMapping,\n  onStartMapping,\n  renderPreview,\n}) => (\n  <Tree>\n    <TraverseFields\n      fields={fields}\n      showTypes={false}\n      parentId={SOURCES_CONSTANTS_ID}\n      boundaryId={SOURCES_HEIGHT_BOUNDARY_ID}\n      overrideWidth={SOURCES_WIDTH_BOUNDARY_ID}\n      idPrefix={SOURCES_FIELD_ID_PREFIX}\n      acceptDropType={TARGETS_DRAGGABLE_TYPE}\n      draggableType={SOURCES_DRAGGABLE_TYPE}\n      onDrop={onDrop}\n      canDrop={canDrop}\n      renderActions={(field) => [\n        ...commonActions({\n          connectedMappings: field.mappings,\n          onShowMappingDetails: onShowMappingDetails,\n          canAddFieldToSelectedMapping: canAddFieldToSelectedMapping(field),\n          onAddToSelectedMapping: () => onAddToSelectedMapping(field),\n          canRemoveFromSelectedMapping: canRemoveFromSelectedMapping(field),\n          onRemoveFromSelectedMapping: () => onRemoveFromSelectedMapping(field),\n          canStartMapping: canStartMapping(field),\n          onStartMapping: () => onStartMapping(field),\n        }),\n        <Tooltip\n          key={'edit'}\n          position={'top'}\n          enableFlip={true}\n          content={<div>Edit constant</div>}\n          entryDelay={750}\n          exitDelay={100}\n        >\n          <Button\n            variant=\"plain\"\n            onClick={() => onEditConstant(field.name, field.value)}\n            aria-label={'Edit constant'}\n            tabIndex={0}\n            data-testid={`edit-constant-${field.name}-button`}\n          >\n            <EditIcon />\n          </Button>\n        </Tooltip>,\n        <Tooltip\n          key={'delete'}\n          position={'top'}\n          enableFlip={true}\n          content={<div>Remove constant</div>}\n          entryDelay={750}\n          exitDelay={100}\n        >\n          <Button\n            variant=\"plain\"\n            onClick={() => onDeleteConstant(field.name)}\n            aria-label={'Remove constant'}\n            tabIndex={0}\n            data-testid={`remove-constant-${field.name}-button`}\n          >\n            <TrashIcon />\n          </Button>\n        </Tooltip>,\n      ]}\n      renderPreview={renderPreview}\n    />\n  </Tree>\n);\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nexport const SOURCES_DRAGGABLE_TYPE = 'source';\nexport const SOURCES_HEIGHT_BOUNDARY_ID = 'sources-height';\nexport const SOURCES_WIDTH_BOUNDARY_ID = 'sources-width';\nexport const SOURCES_PROPERTIES_ID = 'sources-properties';\nexport const SOURCES_CONSTANTS_ID = 'sources-constants';\nexport const SOURCES_DOCUMENT_ID_PREFIX = 'sources-document-';\nexport const SOURCES_FIELD_ID_PREFIX = 'sources-field-';\n\nexport const MAPPINGS_DROP_TYPE = 'mapping';\nexport const MAPPINGS_HEIGHT_BOUNDARY_ID = 'mappings-height';\nexport const MAPPINGS_WIDTH_BOUNDARY_ID = 'mappings-width';\nexport const MAPPINGS_DOCUMENT_ID_PREFIX = 'mappings-document-';\nexport const MAPPINGS_FIELD_ID_PREFIX = 'mappings-field-';\n\nexport const TARGETS_DRAGGABLE_TYPE = 'target';\nexport const TARGETS_HEIGHT_BOUNDARY_ID = 'targets-height';\nexport const TARGETS_PROPERTIES_ID = 'targets-properties';\nexport const TARGETS_WIDTH_BOUNDARY_ID = 'targets-width';\nexport const TARGETS_DOCUMENT_ID_PREFIX = 'targets-document-';\nexport const TARGETS_FIELD_ID_PREFIX = 'targets-field-';\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  AtlasmapDocumentType,\n  IAtlasmapDocument,\n  IAtlasmapField,\n  IAtlasmapMapping,\n} from '../../models';\nimport { Button, Tooltip } from '@patternfly/react-core';\nimport { EditIcon, TrashIcon } from '@patternfly/react-icons';\nimport { IDragAndDropField, Tree } from '../../../UI';\nimport { ITraverseFieldsProps, TraverseFields } from './TraverseFields';\nimport React, { FunctionComponent } from 'react';\nimport {\n  SOURCES_FIELD_ID_PREFIX,\n  SOURCES_HEIGHT_BOUNDARY_ID,\n  SOURCES_PROPERTIES_ID,\n  SOURCES_WIDTH_BOUNDARY_ID,\n  TARGETS_FIELD_ID_PREFIX,\n  TARGETS_HEIGHT_BOUNDARY_ID,\n  TARGETS_PROPERTIES_ID,\n  TARGETS_WIDTH_BOUNDARY_ID,\n} from './constants';\n\nimport { commonActions } from './commonActions';\n\nexport interface IPropertiesTreeCallbacks {\n  acceptDropType: AtlasmapDocumentType;\n  draggableType: AtlasmapDocumentType;\n  isSource: boolean;\n  onDrop: (source: IAtlasmapField, target: IDragAndDropField | null) => void;\n  canDrop: (source: IAtlasmapField, target: IDragAndDropField) => boolean;\n  onShowMappingDetails: (mapping: IAtlasmapMapping) => void;\n  canAddFieldToSelectedMapping: (source: IAtlasmapField) => boolean;\n  onAddToSelectedMapping: (source: IAtlasmapField) => void;\n  canRemoveFromSelectedMapping: (source: IAtlasmapField) => boolean;\n  onRemoveFromSelectedMapping: (source: IAtlasmapField) => void;\n  onEditProperty: (name: string, scope: string, isSource: boolean) => void;\n  onDeleteProperty: (name: string, scope: string, isSource: boolean) => void;\n  canStartMapping: (field: IAtlasmapField) => boolean;\n  onStartMapping: (field: IAtlasmapField) => void;\n}\n\nexport interface IPropertiesTreeProps extends IPropertiesTreeCallbacks {\n  fields: IAtlasmapDocument['fields'];\n  showTypes: boolean;\n  renderPreview: ITraverseFieldsProps['renderPreview'];\n}\n\nexport const PropertiesTree: FunctionComponent<IPropertiesTreeProps> = ({\n  acceptDropType,\n  draggableType,\n  isSource,\n  fields,\n  showTypes,\n  onDrop,\n  canDrop,\n  onShowMappingDetails,\n  canAddFieldToSelectedMapping,\n  onAddToSelectedMapping,\n  canRemoveFromSelectedMapping,\n  onRemoveFromSelectedMapping,\n  onEditProperty,\n  onDeleteProperty,\n  canStartMapping,\n  onStartMapping,\n  renderPreview,\n}) => (\n  <Tree>\n    <TraverseFields\n      fields={fields}\n      showTypes={showTypes}\n      parentId={isSource ? SOURCES_PROPERTIES_ID : TARGETS_PROPERTIES_ID}\n      boundaryId={\n        isSource ? SOURCES_HEIGHT_BOUNDARY_ID : TARGETS_HEIGHT_BOUNDARY_ID\n      }\n      overrideWidth={\n        isSource ? SOURCES_WIDTH_BOUNDARY_ID : TARGETS_WIDTH_BOUNDARY_ID\n      }\n      idPrefix={isSource ? SOURCES_FIELD_ID_PREFIX : TARGETS_FIELD_ID_PREFIX}\n      acceptDropType={acceptDropType}\n      draggableType={draggableType}\n      onDrop={onDrop}\n      canDrop={canDrop}\n      renderActions={(field) => [\n        ...commonActions({\n          connectedMappings: field.mappings,\n          onShowMappingDetails: onShowMappingDetails,\n          canAddFieldToSelectedMapping: canAddFieldToSelectedMapping(field),\n          onAddToSelectedMapping: () => onAddToSelectedMapping(field),\n          canRemoveFromSelectedMapping: canRemoveFromSelectedMapping(field),\n          onRemoveFromSelectedMapping: () => onRemoveFromSelectedMapping(field),\n          canStartMapping: canStartMapping(field),\n          onStartMapping: () => onStartMapping(field),\n        }),\n        <Tooltip\n          key={'edit'}\n          position={'top'}\n          enableFlip={true}\n          content={<div>Edit property</div>}\n          entryDelay={750}\n          exitDelay={100}\n        >\n          <Button\n            variant=\"plain\"\n            onClick={() => onEditProperty(field.name, field.scope, isSource)}\n            aria-label={'Edit property'}\n            tabIndex={0}\n            data-testid={`edit-property-${field.name}-button`}\n          >\n            <EditIcon />\n          </Button>\n        </Tooltip>,\n        <Tooltip\n          key={'delete'}\n          position={'top'}\n          enableFlip={true}\n          content={<div>Remove property</div>}\n          entryDelay={750}\n          exitDelay={100}\n        >\n          <Button\n            variant=\"plain\"\n            onClick={() => onDeleteProperty(field.name, field.scope, isSource)}\n            aria-label={'Remove property'}\n            tabIndex={0}\n            data-testid={`remove-property-${field.name}-button`}\n          >\n            <TrashIcon />\n          </Button>\n        </Tooltip>,\n      ]}\n      renderPreview={renderPreview}\n    />\n  </Tree>\n);\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  AtlasmapDocumentType,\n  GroupId,\n  IAtlasmapDocument,\n  IAtlasmapField,\n  IAtlasmapMapping,\n} from '../../models';\nimport { Button, Tooltip } from '@patternfly/react-core';\nimport {\n  CaptureDocumentIDAction,\n  ChangeDocumentNameAction,\n  DeleteDocumentAction,\n  EditCSVParamsAction,\n  EnableJavaClassAction,\n  ImportAction,\n} from '../Actions';\nimport {\n  ColumnBody,\n  Document,\n  DocumentFieldPreview,\n  DocumentFooter,\n  IDragAndDropField,\n  NodeRef,\n  SearchableColumnHeader,\n  Tree,\n} from '../../../UI';\nimport { ConstantsTree, IConstantsTreeCallbacks } from './ConstantsTree';\nimport { IPropertiesTreeCallbacks, PropertiesTree } from './PropertiesTree';\nimport React, { FunctionComponent, useCallback } from 'react';\nimport {\n  SOURCES_CONSTANTS_ID,\n  SOURCES_DOCUMENT_ID_PREFIX,\n  SOURCES_FIELD_ID_PREFIX,\n  SOURCES_HEIGHT_BOUNDARY_ID,\n  SOURCES_PROPERTIES_ID,\n  SOURCES_WIDTH_BOUNDARY_ID,\n} from './constants';\n\nimport { DocumentType } from '@atlasmap/core';\nimport { PlusIcon } from '@patternfly/react-icons';\nimport { TraverseFields } from './TraverseFields';\nimport { commonActions } from './commonActions';\n\nexport interface ISourceColumnCallbacks\n  extends IConstantsTreeCallbacks,\n    IPropertiesTreeCallbacks {\n  acceptDropType: AtlasmapDocumentType;\n  draggableType: AtlasmapDocumentType;\n  isSource: boolean;\n  onCreateConstant: () => void;\n  onCreateProperty: (isSource: boolean) => void;\n  onCustomClassSearch?: (isSource: boolean) => void;\n  onCaptureDocumentID?: (id: string) => void;\n  onChangeDocumentName?: (id: string, name: string) => void;\n  onImportDocument?: (selectedFile: File) => void;\n  onDeleteDocument?: (id: GroupId) => void;\n  onSearch: (content: string) => void;\n  canDrop: (source: IAtlasmapField, target: IDragAndDropField) => boolean;\n  onDrop: (source: IAtlasmapField, target: IDragAndDropField | null) => void;\n  onShowMappingDetails: (mapping: IAtlasmapMapping) => void;\n  canAddFieldToSelectedMapping: (source: IAtlasmapField) => boolean;\n  onAddToSelectedMapping: (source: IAtlasmapField) => void;\n  canRemoveFromSelectedMapping: (source: IAtlasmapField) => boolean;\n  canStartMapping: (field: IAtlasmapField) => boolean;\n  onStartMapping: (field: IAtlasmapField) => void;\n  onRemoveFromSelectedMapping: (source: IAtlasmapField) => void;\n  shouldShowMappingPreviewForField: (field: IAtlasmapField) => boolean;\n  onFieldPreviewChange: (field: IAtlasmapField, value: string) => void;\n  canAddToSelectedMapping: (isSource: boolean) => boolean;\n  onEditCSVParams: (id: string, isSource: boolean) => void;\n}\n\nexport interface ISourcesColumnData {\n  sourceProperties?: IAtlasmapDocument | null;\n  constants?: IAtlasmapDocument | null;\n  sources: Array<IAtlasmapDocument>;\n  showTypes: boolean;\n}\n\nexport const SourcesColumn: FunctionComponent<\n  ISourcesColumnData & ISourceColumnCallbacks\n> = ({\n  acceptDropType,\n  draggableType,\n  isSource,\n  onCreateConstant,\n  onEditConstant,\n  onDeleteConstant,\n  onCreateProperty,\n  onCustomClassSearch,\n  onEditProperty,\n  onDeleteProperty,\n  onImportDocument,\n  onDeleteDocument,\n  onCaptureDocumentID,\n  onChangeDocumentName,\n  onEditCSVParams,\n  onSearch,\n  canDrop,\n  onDrop,\n  onShowMappingDetails,\n  canAddFieldToSelectedMapping,\n  onAddToSelectedMapping,\n  canRemoveFromSelectedMapping,\n  onRemoveFromSelectedMapping,\n  canStartMapping,\n  onStartMapping,\n  shouldShowMappingPreviewForField,\n  onFieldPreviewChange,\n  sourceProperties,\n  constants,\n  sources,\n  showTypes,\n}) => {\n  const renderPreview = useCallback(\n    (field: IAtlasmapField) =>\n      shouldShowMappingPreviewForField(field) && (\n        <DocumentFieldPreview\n          id={field.id}\n          value={field.value}\n          onChange={(value) => onFieldPreviewChange(field, value)}\n        />\n      ),\n    [onFieldPreviewChange, shouldShowMappingPreviewForField],\n  );\n\n  return (\n    <>\n      <SearchableColumnHeader\n        title={'Source'}\n        onSearch={onSearch}\n        actions={[\n          onImportDocument && (\n            <ImportAction\n              id=\"Source\"\n              onImport={onImportDocument}\n              key={'import'}\n            />\n          ),\n          onCustomClassSearch && (\n            <EnableJavaClassAction\n              onCustomClassSearch={() => onCustomClassSearch(true)}\n              data-testid={'enable-specific-java-classes-Source-button'}\n              key={'java'}\n            />\n          ),\n        ]}\n      />\n      <NodeRef id={SOURCES_HEIGHT_BOUNDARY_ID}>\n        <ColumnBody>\n          <NodeRef id={SOURCES_WIDTH_BOUNDARY_ID}>\n            <div>\n              <NodeRef\n                id={SOURCES_PROPERTIES_ID}\n                boundaryId={SOURCES_HEIGHT_BOUNDARY_ID}\n                overrideWidth={SOURCES_WIDTH_BOUNDARY_ID}\n              >\n                <Document\n                  title={'Properties'}\n                  startExpanded={sourceProperties ? true : false}\n                  actions={[\n                    <Tooltip\n                      position={'top'}\n                      enableFlip={true}\n                      content={\n                        <div>Create a source property for use in mapping</div>\n                      }\n                      key={'create-property'}\n                      entryDelay={750}\n                      exitDelay={100}\n                    >\n                      <Button\n                        onClick={() => onCreateProperty(isSource)}\n                        variant={'plain'}\n                        aria-label=\"Create a source property for use in mapping\"\n                        data-testid=\"create-source-property-button\"\n                      >\n                        <PlusIcon />\n                      </Button>\n                    </Tooltip>,\n                  ]}\n                  noPadding={!!sourceProperties}\n                >\n                  {sourceProperties ? (\n                    <PropertiesTree\n                      acceptDropType={acceptDropType}\n                      draggableType={draggableType}\n                      isSource={isSource}\n                      onEditProperty={onEditProperty}\n                      onDeleteProperty={onDeleteProperty}\n                      canDrop={canDrop}\n                      onDrop={onDrop}\n                      onShowMappingDetails={onShowMappingDetails}\n                      canAddFieldToSelectedMapping={\n                        canAddFieldToSelectedMapping\n                      }\n                      onAddToSelectedMapping={onAddToSelectedMapping}\n                      canRemoveFromSelectedMapping={\n                        canRemoveFromSelectedMapping\n                      }\n                      onRemoveFromSelectedMapping={onRemoveFromSelectedMapping}\n                      canStartMapping={canStartMapping}\n                      onStartMapping={onStartMapping}\n                      fields={sourceProperties.fields}\n                      showTypes={showTypes}\n                      renderPreview={renderPreview}\n                    />\n                  ) : (\n                    'No source properties'\n                  )}\n                </Document>\n              </NodeRef>\n              <NodeRef\n                id={SOURCES_CONSTANTS_ID}\n                boundaryId={SOURCES_HEIGHT_BOUNDARY_ID}\n                overrideWidth={SOURCES_WIDTH_BOUNDARY_ID}\n              >\n                <Document\n                  title={'Constants'}\n                  startExpanded={constants ? true : false}\n                  actions={[\n                    <Tooltip\n                      position={'top'}\n                      enableFlip={true}\n                      content={<div>Create a constant for use in mapping</div>}\n                      key={'create-constant'}\n                      entryDelay={750}\n                      exitDelay={100}\n                    >\n                      <Button\n                        onClick={onCreateConstant}\n                        variant={'plain'}\n                        aria-label=\"Create a constant for use in mapping\"\n                        data-testid=\"create-constant-button\"\n                      >\n                        <PlusIcon />\n                      </Button>\n                    </Tooltip>,\n                  ]}\n                  noPadding={!!constants}\n                >\n                  {constants ? (\n                    <ConstantsTree\n                      onEditConstant={onEditConstant}\n                      onDeleteConstant={onDeleteConstant}\n                      canDrop={canDrop}\n                      onDrop={onDrop}\n                      onShowMappingDetails={onShowMappingDetails}\n                      canAddFieldToSelectedMapping={\n                        canAddFieldToSelectedMapping\n                      }\n                      onAddToSelectedMapping={onAddToSelectedMapping}\n                      canRemoveFromSelectedMapping={\n                        canRemoveFromSelectedMapping\n                      }\n                      onRemoveFromSelectedMapping={onRemoveFromSelectedMapping}\n                      canStartMapping={canStartMapping}\n                      onStartMapping={onStartMapping}\n                      fields={constants.fields}\n                      renderPreview={renderPreview}\n                    />\n                  ) : (\n                    <p>No constants</p>\n                  )}\n                </Document>\n              </NodeRef>\n              {sources.map((s) => {\n                const documentId = `${SOURCES_DOCUMENT_ID_PREFIX}${s.id}`;\n                return (\n                  <NodeRef\n                    key={s.id}\n                    id={documentId}\n                    boundaryId={SOURCES_HEIGHT_BOUNDARY_ID}\n                    overrideWidth={SOURCES_WIDTH_BOUNDARY_ID}\n                  >\n                    <Document\n                      title={s.name}\n                      startExpanded={true}\n                      footer={\n                        showTypes ? (\n                          <DocumentFooter>\n                            Source document type: {s.type}\n                          </DocumentFooter>\n                        ) : undefined\n                      }\n                      actions={\n                        s.type === DocumentType.CSV\n                          ? [\n                              onCaptureDocumentID && (\n                                <CaptureDocumentIDAction\n                                  id={documentId}\n                                  onClick={() => onCaptureDocumentID(s.id)}\n                                  key={'capture-document-id'}\n                                />\n                              ),\n                              onEditCSVParams && (\n                                <EditCSVParamsAction\n                                  id={documentId}\n                                  onClick={() => onEditCSVParams(s.id, true)}\n                                  key={'on-edit-csv-params'}\n                                />\n                              ),\n                              onDeleteDocument && (\n                                <DeleteDocumentAction\n                                  id={documentId}\n                                  onClick={() => onDeleteDocument(s.id)}\n                                  key={'delete-document'}\n                                />\n                              ),\n                            ]\n                          : [\n                              onCaptureDocumentID && (\n                                <CaptureDocumentIDAction\n                                  id={documentId}\n                                  onClick={() => onCaptureDocumentID(s.id)}\n                                  key={'capture-document-id'}\n                                />\n                              ),\n                              onChangeDocumentName && (\n                                <ChangeDocumentNameAction\n                                  id={documentId}\n                                  onClick={() =>\n                                    onChangeDocumentName(s.id, s.name)\n                                  }\n                                  key={'change-document-name'}\n                                />\n                              ),\n                              onDeleteDocument && (\n                                <DeleteDocumentAction\n                                  id={documentId}\n                                  onClick={() => onDeleteDocument(s.id)}\n                                  key={'delete-document'}\n                                />\n                              ),\n                            ]\n                      }\n                      noPadding={true}\n                    >\n                      <Tree>\n                        <TraverseFields\n                          fields={s.fields}\n                          showTypes={showTypes}\n                          boundaryId={SOURCES_HEIGHT_BOUNDARY_ID}\n                          overrideWidth={SOURCES_WIDTH_BOUNDARY_ID}\n                          parentId={documentId}\n                          idPrefix={SOURCES_FIELD_ID_PREFIX}\n                          acceptDropType={acceptDropType}\n                          draggableType={draggableType}\n                          onDrop={onDrop}\n                          canDrop={canDrop}\n                          renderActions={(field) =>\n                            commonActions({\n                              connectedMappings: field.mappings,\n                              onShowMappingDetails,\n                              canAddFieldToSelectedMapping:\n                                canAddFieldToSelectedMapping(field),\n                              onAddToSelectedMapping: () =>\n                                onAddToSelectedMapping(field),\n                              canRemoveFromSelectedMapping:\n                                canRemoveFromSelectedMapping(field),\n                              onRemoveFromSelectedMapping: () =>\n                                onRemoveFromSelectedMapping(field),\n                              canStartMapping: canStartMapping(field),\n                              onStartMapping: () => onStartMapping(field),\n                            })\n                          }\n                          renderPreview={renderPreview}\n                        />\n                      </Tree>\n                    </Document>\n                  </NodeRef>\n                );\n              })}\n            </div>\n          </NodeRef>\n        </ColumnBody>\n      </NodeRef>\n    </>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  AtlasmapDocumentType,\n  GroupId,\n  IAtlasmapDocument,\n  IAtlasmapField,\n  IAtlasmapMapping,\n} from '../../models';\nimport { Button, Tooltip } from '@patternfly/react-core';\nimport {\n  CaptureDocumentIDAction,\n  ChangeDocumentNameAction,\n  DeleteDocumentAction,\n  EditCSVParamsAction,\n  EnableJavaClassAction,\n  ImportAction,\n} from '../Actions';\nimport {\n  ColumnBody,\n  Document,\n  DocumentFieldPreviewResults,\n  DocumentFooter,\n  IDragAndDropField,\n  NodeRef,\n  SearchableColumnHeader,\n  Tree,\n} from '../../../UI';\nimport { IPropertiesTreeCallbacks, PropertiesTree } from './PropertiesTree';\nimport React, { FunctionComponent, useCallback } from 'react';\nimport {\n  TARGETS_DOCUMENT_ID_PREFIX,\n  TARGETS_FIELD_ID_PREFIX,\n  TARGETS_HEIGHT_BOUNDARY_ID,\n  TARGETS_PROPERTIES_ID,\n  TARGETS_WIDTH_BOUNDARY_ID,\n} from './constants';\n\nimport { DocumentType } from '@atlasmap/core';\nimport { PlusIcon } from '@patternfly/react-icons';\nimport { TraverseFields } from './TraverseFields';\nimport { commonActions } from './commonActions';\n\nexport interface ITargetsColumnCallbacks extends IPropertiesTreeCallbacks {\n  acceptDropType: AtlasmapDocumentType;\n  draggableType: AtlasmapDocumentType;\n  isSource: boolean;\n  onCreateProperty: (isSource: boolean) => void;\n  onCaptureDocumentID?: (id: string) => void;\n  onChangeDocumentName?: (id: string, name: string) => void;\n  onDeleteDocument?: (id: GroupId) => void;\n  onImportDocument?: (selectedFile: File) => void;\n  onCustomClassSearch?: (isSource: boolean) => void;\n  onSearch: (content: string) => void;\n  onDrop: (source: IAtlasmapField, target: IDragAndDropField | null) => void;\n  canDrop: (source: IAtlasmapField, target: IDragAndDropField) => boolean;\n  onShowMappingDetails: (mapping: IAtlasmapMapping) => void;\n  canAddFieldToSelectedMapping: (field: IAtlasmapField) => boolean;\n  onAddToSelectedMapping: (field: IAtlasmapField) => void;\n  canRemoveFromSelectedMapping: (field: IAtlasmapField) => boolean;\n  onRemoveFromSelectedMapping: (field: IAtlasmapField) => void;\n  canStartMapping: (field: IAtlasmapField) => boolean;\n  onStartMapping: (field: IAtlasmapField) => void;\n  shouldShowMappingPreviewForField: (field: IAtlasmapField) => boolean;\n  onFieldPreviewChange: (field: IAtlasmapField, value: string) => void;\n  canAddToSelectedMapping: (isSource: boolean) => boolean;\n  onEditCSVParams: (id: string, isSource: boolean) => void;\n}\n\nexport interface ITargetsColumnData {\n  targetProperties?: IAtlasmapDocument | null;\n  showMappingPreview: boolean;\n  showTypes: boolean;\n  targets: Array<IAtlasmapDocument>;\n}\n\nexport const TargetsColumn: FunctionComponent<\n  ITargetsColumnData & ITargetsColumnCallbacks\n> = ({\n  acceptDropType,\n  draggableType,\n  isSource,\n  onSearch,\n  onImportDocument,\n  onDeleteDocument,\n  onCaptureDocumentID,\n  onChangeDocumentName,\n  onCustomClassSearch,\n  onCreateProperty,\n  onEditCSVParams,\n  onEditProperty,\n  onDeleteProperty,\n  onDrop,\n  canDrop,\n  onShowMappingDetails,\n  canAddFieldToSelectedMapping,\n  onAddToSelectedMapping,\n  canRemoveFromSelectedMapping,\n  onRemoveFromSelectedMapping,\n  canStartMapping,\n  onStartMapping,\n  shouldShowMappingPreviewForField,\n  targets,\n  showTypes,\n  targetProperties,\n}) => {\n  const renderPreviewResult = useCallback(\n    (field: IAtlasmapField) =>\n      shouldShowMappingPreviewForField(field) && (\n        <DocumentFieldPreviewResults id={field.id} value={field.value} />\n      ),\n    [shouldShowMappingPreviewForField],\n  );\n  return (\n    <>\n      <SearchableColumnHeader\n        title={'Target'}\n        onSearch={onSearch}\n        actions={[\n          onImportDocument && (\n            <ImportAction\n              id=\"Target\"\n              onImport={onImportDocument}\n              key={'import'}\n            />\n          ),\n          onCustomClassSearch && (\n            <EnableJavaClassAction\n              onCustomClassSearch={() => onCustomClassSearch(false)}\n              data-testid={'enable-specific-java-classes-Target-button'}\n              key={'java'}\n            />\n          ),\n        ]}\n      />\n      <NodeRef id={TARGETS_HEIGHT_BOUNDARY_ID}>\n        <ColumnBody>\n          <NodeRef id={TARGETS_WIDTH_BOUNDARY_ID}>\n            <div>\n              <NodeRef\n                id={TARGETS_PROPERTIES_ID}\n                boundaryId={TARGETS_HEIGHT_BOUNDARY_ID}\n                overrideWidth={TARGETS_WIDTH_BOUNDARY_ID}\n              >\n                <Document\n                  title={'Properties'}\n                  startExpanded={targetProperties ? true : false}\n                  actions={[\n                    <Tooltip\n                      position={'top'}\n                      enableFlip={true}\n                      content={\n                        <div>Create a target property for use in mapping</div>\n                      }\n                      key={'create-target-property'}\n                      entryDelay={750}\n                      exitDelay={100}\n                    >\n                      <Button\n                        onClick={() => onCreateProperty(isSource)}\n                        variant={'plain'}\n                        aria-label=\"Create a target property for use in mapping\"\n                        data-testid=\"create-target-property-button\"\n                      >\n                        <PlusIcon />\n                      </Button>\n                    </Tooltip>,\n                  ]}\n                  noPadding={!!targetProperties}\n                >\n                  {targetProperties ? (\n                    <PropertiesTree\n                      acceptDropType={acceptDropType}\n                      draggableType={draggableType}\n                      isSource={isSource}\n                      onEditProperty={onEditProperty}\n                      onDeleteProperty={onDeleteProperty}\n                      canDrop={canDrop}\n                      onDrop={onDrop}\n                      onShowMappingDetails={onShowMappingDetails}\n                      canAddFieldToSelectedMapping={\n                        canAddFieldToSelectedMapping\n                      }\n                      onAddToSelectedMapping={onAddToSelectedMapping}\n                      canRemoveFromSelectedMapping={\n                        canRemoveFromSelectedMapping\n                      }\n                      onRemoveFromSelectedMapping={onRemoveFromSelectedMapping}\n                      canStartMapping={canStartMapping}\n                      onStartMapping={onStartMapping}\n                      fields={targetProperties.fields}\n                      showTypes={showTypes}\n                      renderPreview={renderPreviewResult}\n                    />\n                  ) : (\n                    'No target properties'\n                  )}\n                </Document>\n              </NodeRef>\n              {targets.map((t) => {\n                const documentId = `${TARGETS_DOCUMENT_ID_PREFIX}${t.id}`;\n                return (\n                  <NodeRef\n                    key={t.id}\n                    id={documentId}\n                    boundaryId={TARGETS_HEIGHT_BOUNDARY_ID}\n                    overrideWidth={TARGETS_WIDTH_BOUNDARY_ID}\n                  >\n                    <Document\n                      title={t.name}\n                      startExpanded={true}\n                      footer={\n                        showTypes ? (\n                          <DocumentFooter>\n                            Target document type: {t.type}\n                          </DocumentFooter>\n                        ) : undefined\n                      }\n                      actions={\n                        t.type === DocumentType.CSV\n                          ? [\n                              onCaptureDocumentID && (\n                                <CaptureDocumentIDAction\n                                  id={documentId}\n                                  onClick={() => onCaptureDocumentID(t.id)}\n                                  key={'capture-tgt-csv-document-id'}\n                                />\n                              ),\n                              onEditCSVParams && (\n                                <EditCSVParamsAction\n                                  id={documentId}\n                                  onClick={() => onEditCSVParams(t.id, false)}\n                                  key={'on-edit-tgt-csv-params'}\n                                />\n                              ),\n                              onDeleteDocument && (\n                                <DeleteDocumentAction\n                                  id={documentId}\n                                  onClick={() => onDeleteDocument(t.id)}\n                                  key={'delete-tgt-csv-document'}\n                                />\n                              ),\n                            ]\n                          : [\n                              onCaptureDocumentID && (\n                                <CaptureDocumentIDAction\n                                  id={documentId}\n                                  onClick={() => onCaptureDocumentID(t.id)}\n                                  key={'capture-tgt-document-id'}\n                                />\n                              ),\n                              onChangeDocumentName && (\n                                <ChangeDocumentNameAction\n                                  id={documentId}\n                                  onClick={() =>\n                                    onChangeDocumentName(t.id, t.name)\n                                  }\n                                  key={'change-tgt-document-name'}\n                                />\n                              ),\n                              onDeleteDocument && (\n                                <DeleteDocumentAction\n                                  id={documentId}\n                                  onClick={() => onDeleteDocument(t.id)}\n                                  key={'delete-tgt-documents'}\n                                />\n                              ),\n                            ]\n                      }\n                      noPadding={true}\n                    >\n                      <Tree>\n                        <TraverseFields\n                          fields={t.fields}\n                          showTypes={showTypes}\n                          boundaryId={TARGETS_HEIGHT_BOUNDARY_ID}\n                          overrideWidth={TARGETS_WIDTH_BOUNDARY_ID}\n                          parentId={documentId}\n                          idPrefix={TARGETS_FIELD_ID_PREFIX}\n                          acceptDropType={acceptDropType}\n                          draggableType={draggableType}\n                          onDrop={onDrop}\n                          canDrop={canDrop}\n                          renderActions={(field) =>\n                            commonActions({\n                              connectedMappings: field.mappings,\n                              onShowMappingDetails,\n                              canAddFieldToSelectedMapping:\n                                canAddFieldToSelectedMapping(field),\n                              onAddToSelectedMapping: () =>\n                                onAddToSelectedMapping(field),\n                              canRemoveFromSelectedMapping:\n                                canRemoveFromSelectedMapping(field),\n                              onRemoveFromSelectedMapping: () =>\n                                onRemoveFromSelectedMapping(field),\n                              canStartMapping: canStartMapping(field),\n                              onStartMapping: () => onStartMapping(field),\n                            })\n                          }\n                          renderPreview={renderPreviewResult}\n                        />\n                      </Tree>\n                    </Document>\n                  </NodeRef>\n                );\n              })}\n            </div>\n          </NodeRef>\n        </ColumnBody>\n      </NodeRef>\n    </>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, {\n  FunctionComponent,\n  MouseEvent,\n  ReactElement,\n  useMemo,\n} from 'react';\nimport { SOURCES_FIELD_ID_PREFIX, TARGETS_FIELD_ID_PREFIX } from '../Columns';\n\nimport { IAtlasmapMapping } from '../../../Views';\nimport { NodesArc } from '../../../UI';\nimport styles from './SourceTargetLinks.module.css';\nimport { useToggle } from '../../../impl/utils';\n\nexport interface ISourceTargetLinksProps {\n  mappings: IAtlasmapMapping[];\n  selectedMappingId?: string;\n  onSelectMapping: (mapping: IAtlasmapMapping) => void;\n}\n\nexport const SourceTargetLinks: FunctionComponent<ISourceTargetLinksProps> = ({\n  mappings,\n  selectedMappingId,\n  onSelectMapping,\n}) => {\n  const sortedMappings = useMemo(\n    () => mappings.sort((a) => (a.id === selectedMappingId ? 1 : -1)),\n    [mappings, selectedMappingId],\n  );\n\n  return (\n    <svg\n      style={{\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%',\n        pointerEvents: 'none',\n      }}\n    >\n      {sortedMappings.map((m) => (\n        <MappingLines\n          mapping={m}\n          onClick={() => onSelectMapping(m)}\n          isSelected={m.id === selectedMappingId}\n          key={m.id}\n        />\n      ))}\n\n      <NodesArc\n        start={'dnd-start'}\n        end={'dnd-target-field'}\n        color={'var(--pf-global--active-color--400)'}\n      />\n    </svg>\n  );\n};\n\ninterface IMappingLinesProps {\n  mapping: IAtlasmapMapping;\n  isSelected: boolean;\n  onClick: () => void;\n}\n\nconst MappingLines: FunctionComponent<IMappingLinesProps> = ({\n  mapping,\n  isSelected,\n  onClick,\n}) => {\n  const {\n    state: isHovered,\n    toggleOn: toggleHoveredOn,\n    toggleOff: toggleHoveredOff,\n  } = useToggle(false);\n\n  const handleClick = (event: MouseEvent) => {\n    onClick();\n    event.stopPropagation();\n  };\n\n  const color = isSelected ? 'var(--pf-global--active-color--100)' : undefined;\n  const hoverColor = !isSelected\n    ? 'var(--pf-global--active-color--400)'\n    : undefined;\n  const mappingLines = mapping.sourceFields.reduce<ReactElement[]>(\n    (lines, start) => {\n      const linesFromSource = mapping.targetFields.map((end) => (\n        <NodesArc\n          key={`${start.id}${end.id}`}\n          start={`${SOURCES_FIELD_ID_PREFIX}${start.id}`}\n          end={`${TARGETS_FIELD_ID_PREFIX}${end.id}`}\n          color={isHovered ? hoverColor : color}\n          onClick={handleClick}\n          onMouseEnter={toggleHoveredOn}\n          onMouseLeave={toggleHoveredOff}\n          className={styles.arc}\n        />\n      ));\n      return [...lines, ...linesFromSource];\n    },\n    [],\n  );\n  return <g className=\"group\">{mappingLines}</g>;\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  AddFieldTypeahead,\n  Document,\n  ITransformationArgument,\n  MappingField,\n  MappingFields,\n  MappingTransformation,\n} from '../UI';\nimport { Alert, AlertActionCloseButton, Badge } from '@patternfly/react-core';\nimport { IAtlasmapField, IAtlasmapMappedField, INotification } from './models';\nimport React, { FunctionComponent } from 'react';\n\nimport { Field } from '@atlasmap/core/dist/models/field.model';\nimport { MappingDetailsSidebar } from '../Layout';\n\nexport interface IMappingDetailsViewProps {\n  notifications: INotification[];\n  sources: Array<IAtlasmapMappedField | null>;\n  targets: Array<IAtlasmapMappedField | null>;\n  addableSources: IAtlasmapField[];\n  addableTargets: IAtlasmapField[];\n  showSourcesIndex: boolean;\n  showTargetsIndex: boolean;\n  multiplicity?: {\n    name: string;\n    transformationsOptions: { name: string; value: string }[];\n    transformationsArguments?: ITransformationArgument[];\n    onChange: (newName: string) => void;\n    onArgumentChange: (argumentName: string, argumentValue: string) => void;\n  };\n  onClose: () => void;\n  mappingExpressionEnabled: boolean;\n  onRemoveMapping: () => void;\n  onRemoveMappedField: (isSource: boolean, index: number) => void;\n  onIndexChange: (\n    isSource: boolean,\n    currentIndex: number,\n    newIndex: number | Field,\n  ) => void;\n  onNewTransformation: (isSource: boolean, index: number) => void;\n  onTransformationChange: (\n    isSource: boolean,\n    index: number,\n    currentTransformationIndex: number,\n    newTransformationName: string,\n  ) => void;\n  onTransformationArgumentChange: (\n    isSource: boolean,\n    index: number,\n    transformationIndex: number,\n    argumentName: string,\n    argumentValue: string,\n  ) => void;\n  onRemoveTransformation: (\n    isSource: boolean,\n    index: number,\n    currentTransformationIndex: number,\n  ) => void;\n  onAddFieldToMapping: (isSource: boolean, field: IAtlasmapField) => void;\n  onNotificationRead: (id: string) => void;\n  onEditEnum: (cb: any) => void;\n  isEnumMapping: () => boolean;\n  onCreateConstant: (\n    constants: any | null,\n    addToActiveMapping?: boolean,\n  ) => void;\n  onCreateProperty: (\n    isSource: boolean,\n    props: any | null,\n    addToActiveMapping?: boolean,\n  ) => void;\n  canAddToSelectedMapping: (isSource: boolean) => boolean;\n}\n\nexport const MappingDetailsView: FunctionComponent<IMappingDetailsViewProps> =\n  ({\n    notifications,\n    sources,\n    targets,\n    addableSources,\n    addableTargets,\n    showSourcesIndex,\n    showTargetsIndex,\n    onClose,\n    mappingExpressionEnabled,\n    onRemoveMapping,\n    onRemoveMappedField,\n    onIndexChange,\n    onNewTransformation,\n    onTransformationChange,\n    onTransformationArgumentChange,\n    onRemoveTransformation,\n    onAddFieldToMapping,\n    onNotificationRead,\n    onEditEnum,\n    isEnumMapping,\n    onCreateConstant,\n    onCreateProperty,\n    canAddToSelectedMapping,\n    multiplicity,\n  }) => {\n    const formInputGroupStyle = {\n      '--pf-c-form--GridGap': '0',\n      marginTop: '1.0rem',\n    } as React.CSSProperties;\n\n    const mappingAction = multiplicity && (\n      <MappingTransformation\n        name={multiplicity.name}\n        disableTransformation={mappingExpressionEnabled}\n        transformationsOptions={multiplicity.transformationsOptions}\n        transformationsArguments={multiplicity.transformationsArguments}\n        onTransformationChange={multiplicity.onChange}\n        onTransformationArgumentChange={multiplicity.onArgumentChange}\n      />\n    );\n\n    const genericPaddingField: IAtlasmapField = {\n      id: '',\n      name: 'Padding field',\n      value: '',\n      type: '',\n      scope: 'current',\n      path: '',\n      mappings: [],\n      hasTransformations: false,\n      isAttribute: false,\n      isCollection: false,\n      isConnected: false,\n      isInCollection: false,\n      isDisabled: false,\n      amField: {} as IAtlasmapField['amField'],\n      enumeration: false,\n    };\n\n    const renderMappingField = (\n      isSource: boolean,\n      canShowIndex: boolean,\n      f: IAtlasmapMappedField | null,\n      index: number,\n    ) => {\n      return f ? (\n        <MappingField\n          key={f.id}\n          field={f}\n          name={f.name}\n          info={\n            f.scope\n              ? `${f.path} <${f.scope}> (${f.type})`\n              : `${f.path} (${f.type})`\n          }\n          mappingExpressionEnabled={mappingExpressionEnabled}\n          hasTransformations={f.transformations.length > 0}\n          onDelete={() => onRemoveMappedField(isSource, index)}\n          onIndexChange={(value: string | IAtlasmapField) =>\n            typeof value === 'string'\n              ? onIndexChange(isSource, index, parseInt(value, 10))\n              : onIndexChange(isSource, index, value.amField)\n          }\n          onNewTransformation={() => onNewTransformation(isSource, index)}\n          index={index + 1}\n          canShowIndex={canShowIndex}\n        >\n          <div className={'pf-c-form'} style={formInputGroupStyle}>\n            {f.transformations.map((t, transformationIndex) => (\n              <MappingTransformation\n                key={transformationIndex}\n                name={t.name}\n                transformationsOptions={t.options}\n                transformationsArguments={t.arguments}\n                disableTransformation={mappingExpressionEnabled}\n                onTransformationChange={(value) =>\n                  onTransformationChange(\n                    isSource,\n                    index,\n                    transformationIndex,\n                    value,\n                  )\n                }\n                onTransformationArgumentChange={(name, value) =>\n                  onTransformationArgumentChange(\n                    isSource,\n                    index,\n                    transformationIndex,\n                    name,\n                    value,\n                  )\n                }\n                onRemoveTransformation={() => {\n                  onRemoveTransformation(isSource, index, transformationIndex);\n                }}\n              />\n            ))}\n          </div>\n        </MappingField>\n      ) : (\n        <MappingField\n          field={genericPaddingField}\n          key={index}\n          name={'Padding field'}\n          info={'This padding field has been automatically added'}\n          mappingExpressionEnabled={mappingExpressionEnabled}\n          hasTransformations={false}\n          onDelete={() => onRemoveMappedField(isSource, index)}\n          index={index + 1}\n          canShowIndex={showSourcesIndex}\n        />\n      );\n    };\n\n    const renderSourceMappingField = (\n      f: IAtlasmapMappedField | null,\n      index: number,\n    ) => renderMappingField(true, showSourcesIndex, f, index);\n    const renderTargetMappingField = (\n      f: IAtlasmapMappedField | null,\n      index: number,\n    ) => renderMappingField(false, showTargetsIndex, f, index);\n\n    const errors = notifications.filter((n) => n.variant === 'danger');\n    const warnings = notifications.filter((n) => n.variant === 'warning');\n    const messages = notifications.filter(\n      (n) => n.variant !== 'warning' && n.variant !== 'danger',\n    );\n\n    return (\n      <MappingDetailsSidebar\n        onClose={onClose}\n        onDelete={onRemoveMapping}\n        onEditEnum={onEditEnum}\n        isEnumMapping={isEnumMapping}\n      >\n        {errors.length > 0 && (\n          <NotificationsGroup\n            notifications={errors}\n            title={'Errors'}\n            onNotificationRead={onNotificationRead}\n          />\n        )}\n        {warnings.length > 0 && (\n          <NotificationsGroup\n            notifications={warnings}\n            title={'Warnings'}\n            onNotificationRead={onNotificationRead}\n          />\n        )}\n        {messages.length > 0 && (\n          <NotificationsGroup\n            notifications={messages}\n            title={'Messages'}\n            onNotificationRead={onNotificationRead}\n          />\n        )}\n        <div className={'pf-c-form'} style={formInputGroupStyle}>\n          {mappingAction}\n          <MappingFields\n            isSource={true}\n            title={'Sources'}\n            onCreateConstant={onCreateConstant}\n            onCreateProperty={onCreateProperty}\n            canAddToSelectedMapping={canAddToSelectedMapping}\n          >\n            {sources.map(renderSourceMappingField)}\n            {targets.length <= 1 && (\n              <AddFieldTypeahead\n                ariaLabelTypeAhead={'Select source to add to the mapping'}\n                placeholderText={'Select source to add to the mapping'}\n                isSource={true}\n                fields={addableSources.map((s) => ({\n                  label: s.amField.isPropertyOrConstant() ? s.name : s.path,\n                  group: s.amField!.docDef.name,\n                  onAdd: () => onAddFieldToMapping(true, s),\n                }))}\n                data-testid={'add-source-to-mapping'}\n              />\n            )}\n          </MappingFields>\n          <MappingFields\n            isSource={false}\n            title={'Targets'}\n            onCreateConstant={onCreateConstant}\n            onCreateProperty={onCreateProperty}\n            canAddToSelectedMapping={canAddToSelectedMapping}\n          >\n            {targets.map(renderTargetMappingField)}\n            {sources.length <= 1 && (\n              <AddFieldTypeahead\n                ariaLabelTypeAhead={'Select target to add to the mapping'}\n                placeholderText={'Select target to add to the mapping'}\n                isSource={false}\n                fields={addableTargets.map((t) => ({\n                  label: t.amField.isProperty() ? t.name : t.path,\n                  group: t.amField!.docDef.name,\n                  onAdd: () => onAddFieldToMapping(false, t),\n                }))}\n                data-testid={'add-target-to-mapping'}\n              />\n            )}\n          </MappingFields>\n        </div>\n      </MappingDetailsSidebar>\n    );\n  };\n\ninterface INotificationsGroupProps {\n  title: string;\n  notifications: INotification[];\n  onNotificationRead: (id: string) => void;\n}\n\nconst NotificationsGroup: FunctionComponent<INotificationsGroupProps> = ({\n  title,\n  notifications,\n  onNotificationRead,\n}) => {\n  return (\n    <Document\n      title={title}\n      noShadows={true}\n      noPadding={true}\n      actions={[<Badge key={1}>{notifications.length}</Badge>]}\n    >\n      <div style={{ maxHeight: 200, overflow: 'auto' }}>\n        {notifications.map((n, idx) => (\n          <Alert\n            key={idx}\n            variant={n.variant}\n            title={n.description}\n            isInline={true}\n            actionClose={\n              <AlertActionCloseButton\n                title={n.title}\n                variantLabel={`${n.variant} alert`}\n                onClose={() => onNotificationRead(n.id)}\n                data-testid={`dismiss-mapping-notification-${n.id}`}\n              />\n            }\n          />\n        ))}\n      </div>\n    </Document>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  Bullseye,\n  EmptyState,\n  EmptyStateIcon,\n  EmptyStateVariant,\n  Title,\n} from '@patternfly/react-core';\nimport { DocumentFieldPreview, DocumentFieldPreviewResults } from '../UI';\nimport { IAtlasmapField, IAtlasmapMapping } from '../Views';\nimport {\n  ICell,\n  IRow,\n  Table,\n  TableBody,\n  TableHeader,\n} from '@patternfly/react-table';\nimport React, { FunctionComponent, MouseEvent } from 'react';\n\nimport { MainContent } from '../Layout';\nimport { TableIcon } from '@patternfly/react-icons';\nimport styles from './MappingTableView.module.css';\n\nconst emptyContent = [\n  {\n    heightAuto: true,\n    cells: [\n      {\n        props: { colSpan: 8 },\n        title: (\n          <Bullseye>\n            <EmptyState variant={EmptyStateVariant.small}>\n              <EmptyStateIcon icon={TableIcon} />\n              <Title headingLevel=\"h2\" size=\"lg\">\n                No mappings found\n              </Title>\n            </EmptyState>\n          </Bullseye>\n        ),\n      },\n    ],\n  },\n];\n\nexport interface IMappingTableProps {\n  mappings: Array<IAtlasmapMapping>;\n  onSelectMapping: (mapping: IAtlasmapMapping) => void;\n  shouldShowMappingPreview: (field: IAtlasmapMapping) => boolean;\n  onFieldPreviewChange: (field: IAtlasmapField, value: string) => void;\n}\n\nexport const MappingTableView: FunctionComponent<IMappingTableProps> = ({\n  mappings,\n  onSelectMapping,\n  shouldShowMappingPreview,\n  onFieldPreviewChange,\n}) => {\n  const rows =\n    mappings.length === 0\n      ? emptyContent\n      : mappings.map((mapping) => {\n          const sources = mapping.sourceFields.map((source, index) => {\n            const field: IAtlasmapField = source;\n            const { name } = field;\n            return (\n              <div key={index}>\n                {name}\n                {shouldShowMappingPreview(mapping) && (\n                  <DocumentFieldPreview\n                    id={field.id}\n                    value={field.value}\n                    onChange={(value) => onFieldPreviewChange(field, value)}\n                  />\n                )}\n              </div>\n            );\n          });\n          const targets = mapping.targetFields.map((target, index) => {\n            const field: IAtlasmapField = target;\n            const { name } = field;\n            return (\n              <div key={index}>\n                {name}\n                {shouldShowMappingPreview(mapping) && (\n                  <DocumentFieldPreviewResults\n                    id={field.id}\n                    value={field.value}\n                  />\n                )}\n              </div>\n            );\n          });\n          return {\n            cells: [\n              {\n                title: sources,\n                data: mapping.id,\n              },\n              {\n                title: targets,\n              },\n              {\n                title: mapping.name,\n              },\n            ],\n          };\n        });\n\n  const columns = ['Sources', 'Targets', 'Types'];\n\n  const handleSelectMapping = (_event: MouseEvent, row: IRow) => {\n    const mapping: IAtlasmapMapping | undefined = mappings.find(\n      (mapping) => (row.cells?.[0] as ICell).data === mapping.id,\n    );\n    if (mapping) {\n      onSelectMapping(mapping);\n    }\n  };\n\n  return (\n    <MainContent>\n      <Title size=\"lg\" headingLevel={'h1'} className={styles.title}>\n        Mappings\n      </Title>\n      <Table aria-label=\"Mappings\" cells={columns} rows={rows}>\n        <TableHeader />\n        <TableBody onRowClick={handleSelectMapping} />\n      </Table>\n    </MainContent>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  Bullseye,\n  Button,\n  EmptyState,\n  EmptyStateIcon,\n  EmptyStateVariant,\n  Level,\n  LevelItem,\n  Title,\n  Tooltip,\n} from '@patternfly/react-core';\nimport {\n  ICell,\n  IRowData,\n  Table,\n  TableBody,\n  TableHeader,\n  textCenter,\n} from '@patternfly/react-table';\nimport { PlusIcon, TableIcon } from '@patternfly/react-icons';\nimport React, { FunctionComponent, ReactElement } from 'react';\n\nimport { Actions } from '../UI';\nimport { IAtlasmapDocument } from '.';\nimport { MainContent } from '../Layout';\nimport styles from './NamespaceTableView.module.css';\n\nexport interface INamespaceTableProps {\n  sources: IAtlasmapDocument[];\n  onCreateNamespace: (docName: string) => void;\n  onEditNamespace: (\n    docName: string,\n    alias: string,\n    uri: string,\n    locationUri: string,\n    isTarget: boolean,\n  ) => void;\n  onDeleteNamespace: (docName: string, alias: string) => void;\n}\n\nexport const NamespaceTableView: FunctionComponent<INamespaceTableProps> = ({\n  sources,\n  onCreateNamespace,\n  onEditNamespace,\n  onDeleteNamespace,\n}) => {\n  const columns = [\n    'Alias',\n    'URI',\n    'Location URI',\n    {\n      title: 'Target Namespace',\n      transforms: [textCenter],\n      cellTransforms: [textCenter],\n    },\n  ];\n\n  const namespaceTables: ReactElement[] = sources.reduce(\n    (xmlSources: ReactElement[], source: IAtlasmapDocument) => {\n      if (source.type !== 'XML') {\n        return xmlSources;\n      }\n\n      const rows =\n        !source.namespaces || source.namespaces.length === 0\n          ? [\n              {\n                cells: ['<None>'],\n              },\n            ]\n          : source.namespaces.map((namespace) => {\n              return {\n                cells: [\n                  { title: namespace.alias },\n                  { title: namespace.uri },\n                  { title: namespace.locationUri },\n                  {\n                    title: namespace.isTarget ? '\\u2713' : '',\n                  },\n                ],\n              };\n            });\n\n      const actions = [\n        {\n          title: 'Edit',\n          onClick: (_event: any, _rowId: any, row: IRowData, _extra: any) => {\n            onEditNamespace(\n              source.name,\n              (row.cells?.[0] as ICell).title as string,\n              (row.cells?.[1] as ICell).title as string,\n              (row.cells?.[2] as ICell).title as string,\n              ((row.cells?.[3] as ICell).title as string).length > 0\n                ? true\n                : false,\n            );\n          },\n        },\n        {\n          title: 'Remove',\n          onClick: (_event: any, _rowId: any, row: any, _extra: any) =>\n            onDeleteNamespace(source.name, row.alias.title),\n        },\n      ];\n\n      return [\n        ...xmlSources,\n        <Level key=\"level\">\n          <LevelItem key=\"title\">\n            <Title size=\"lg\" headingLevel={'h1'} className={styles.title}>\n              Namespaces for {source.name}\n            </Title>\n          </LevelItem>\n          <LevelItem key=\"actions\">\n            <Actions>\n              <Tooltip\n                position={'top'}\n                enableFlip={true}\n                content={<div>Create a namespace</div>}\n                key={'create-namespace'}\n              >\n                <Button\n                  onClick={() => onCreateNamespace(source.name)}\n                  variant={'plain'}\n                  aria-label=\"Create a namespace\"\n                  data-testid=\"create-namespace-button\"\n                >\n                  <PlusIcon />\n                </Button>\n              </Tooltip>\n            </Actions>\n          </LevelItem>\n        </Level>,\n        <Table\n          key=\"table\"\n          aria-label=\"Namespaces\"\n          cells={columns}\n          rows={rows}\n          actions={\n            source.namespaces && source.namespaces.length > 0\n              ? actions\n              : undefined\n          }\n        >\n          <TableHeader />\n          <TableBody />\n        </Table>,\n      ];\n    },\n    [],\n  );\n\n  return namespaceTables.length === 0 ? (\n    <Bullseye>\n      <EmptyState variant={EmptyStateVariant.small}>\n        <EmptyStateIcon icon={TableIcon} />\n        <Title headingLevel=\"h2\" size=\"lg\">\n          No XML sources found\n        </Title>\n      </EmptyState>\n    </Bullseye>\n  ) : (\n    <MainContent>{namespaceTables}</MainContent>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Column, ColumnMapper, Columns, NodeRefProvider } from '../UI';\nimport {\n  ISourceColumnCallbacks,\n  ISourceTargetLinksProps,\n  ISourcesColumnData,\n  ITargetsColumnCallbacks,\n  ITargetsColumnData,\n  SourceTargetLinks,\n  SourcesColumn,\n  TargetsColumn,\n} from './ColumnMapperView';\nimport React, { FunctionComponent } from 'react';\n\nexport interface ISourceTargetViewProps\n  extends ISourcesColumnData,\n    ITargetsColumnData,\n    ISourceTargetLinksProps {\n  onSelectMapping: ISourceTargetLinksProps['onSelectMapping'];\n  sourceEvents: ISourceColumnCallbacks;\n  targetEvents: ITargetsColumnCallbacks;\n}\n\nexport const SourceTargetView: FunctionComponent<ISourceTargetViewProps> = ({\n  sourceProperties,\n  targetProperties,\n  constants,\n  sources,\n  mappings,\n  targets,\n  showMappingPreview,\n  showTypes,\n  selectedMappingId,\n  onSelectMapping,\n  sourceEvents,\n  targetEvents,\n}) => {\n  return (\n    <>\n      <NodeRefProvider>\n        <ColumnMapper role={'main'}>\n          <Columns>\n            <Column data-testid={'column-source-area'} totalColumns={2}>\n              <SourcesColumn\n                sourceProperties={sourceProperties}\n                constants={constants}\n                sources={sources}\n                showTypes={showTypes}\n                {...sourceEvents}\n              />\n            </Column>\n\n            <Column data-testid={'column-target-area'} totalColumns={2}>\n              <TargetsColumn\n                targetProperties={targetProperties}\n                showMappingPreview={showMappingPreview}\n                showTypes={showTypes}\n                targets={targets}\n                {...targetEvents}\n              />\n            </Column>\n          </Columns>\n        </ColumnMapper>\n        <SourceTargetLinks\n          mappings={mappings}\n          selectedMappingId={selectedMappingId}\n          onSelectMapping={onSelectMapping}\n        />\n      </NodeRefProvider>\n    </>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  BezierCurveIcon,\n  CaretDownIcon,\n  CodeIcon,\n  ColumnsIcon,\n  ExportIcon,\n  EyeIcon,\n  HelpIcon,\n  ImportIcon,\n  InfoIcon,\n  MapIcon,\n  MapMarkedIcon,\n  PficonDragdropIcon,\n  PlusIcon,\n  TableIcon,\n  TrashIcon,\n} from '@patternfly/react-icons';\nimport {\n  Button,\n  Dropdown,\n  DropdownItem,\n  DropdownSeparator,\n  DropdownToggle,\n  ToolbarItem,\n  Tooltip,\n} from '@patternfly/react-core';\nimport React, { FunctionComponent, useEffect, useRef } from 'react';\n\nimport { css } from '@patternfly/react-styles';\nimport styles from './toolbarItems.module.css';\nimport { useFilePicker } from 'react-sage';\nimport { useToggle } from './utils';\n\nexport interface IAtlasmapToolbarItemProps {\n  showImportAtlasFileToolbarItem: boolean;\n  showImportJarFileToolbarItem: boolean;\n  showExportAtlasFileToolbarItem: boolean;\n  showResetToolbarItem: boolean;\n  onImportAtlasFile: (file: File) => void;\n  onImportJarFile: (file: File) => void;\n  onExportAtlasFile: () => void;\n  onResetAtlasmap: () => void;\n}\nexport const AtlasmapToolbarItem: FunctionComponent<IAtlasmapToolbarItemProps> =\n  ({\n    showImportAtlasFileToolbarItem,\n    showImportJarFileToolbarItem,\n    showExportAtlasFileToolbarItem,\n    showResetToolbarItem,\n    onImportAtlasFile,\n    onImportJarFile,\n    onExportAtlasFile,\n    onResetAtlasmap,\n  }) => {\n    const { state: isOpen, toggle: onToggle, toggleOff } = useToggle(false);\n    const runAndClose = (cb: (...args: any[]) => any) => {\n      return (...args: any[]) => {\n        cb(...args);\n        toggleOff();\n      };\n    };\n    const dropdownItems = [\n      showImportAtlasFileToolbarItem && (\n        <ImportAtlasFileToolbarItem\n          onFile={runAndClose(onImportAtlasFile)}\n          key=\"import-catalog\"\n        />\n      ),\n      showImportJarFileToolbarItem && (\n        <ImportJarFileToolbarItem\n          onFile={runAndClose(onImportJarFile)}\n          key=\"import-java-archive\"\n        />\n      ),\n      (showImportAtlasFileToolbarItem || showImportJarFileToolbarItem) && (\n        <DropdownSeparator key=\"import-separator\" />\n      ),\n      showExportAtlasFileToolbarItem && (\n        <ExportAtlasFileToolbarItem\n          onClick={runAndClose(onExportAtlasFile)}\n          key={'export-catalog'}\n        />\n      ),\n      showExportAtlasFileToolbarItem && (\n        <DropdownSeparator key=\"export-separator\" />\n      ),\n      showResetToolbarItem && (\n        <ResetToolbarItem\n          onClick={runAndClose(onResetAtlasmap)}\n          key=\"reset-catalog\"\n        />\n      ),\n    ].filter((f) => f);\n    return (\n      <ToolbarItem>\n        <Dropdown\n          toggle={\n            <DropdownToggle\n              id=\"atlasmap-toggle\"\n              onToggle={onToggle}\n              toggleIndicator={CaretDownIcon}\n              data-testid=\"atlasmap-menu-button\"\n            >\n              AtlasMap\n            </DropdownToggle>\n          }\n          isOpen={isOpen}\n          dropdownItems={dropdownItems}\n          isPlain={true}\n        />\n      </ToolbarItem>\n    );\n  };\n\nexport const ImportAtlasFileToolbarItem: FunctionComponent<{\n  onFile: (file: File) => void;\n}> = ({ onFile }) => {\n  const { files, onClick, HiddenFileInput } = useFilePicker({\n    maxFileSize: 1,\n  });\n  const previouslyUploadedFiles = useRef<File[] | null>(null);\n\n  useEffect(() => {\n    if (previouslyUploadedFiles.current !== files) {\n      previouslyUploadedFiles.current = files;\n      if (files?.length === 1) {\n        previouslyUploadedFiles.current = null;\n        onFile(files[0]);\n      }\n    }\n  }, [files, onFile]);\n\n  return (\n    <DropdownItem\n      icon={<ImportIcon />}\n      onClick={onClick}\n      data-testid=\"import-mappings-button\"\n    >\n      Import a catalog (.adm)\n      <HiddenFileInput accept=\".adm\" multiple={false} />\n    </DropdownItem>\n  );\n};\n\nexport const ImportJarFileToolbarItem: FunctionComponent<{\n  onFile: (file: File) => void;\n}> = ({ onFile }) => {\n  const { files, onClick, HiddenFileInput } = useFilePicker({\n    maxFileSize: 1,\n  });\n  const previouslyUploadedFiles = useRef<File[] | null>(null);\n\n  useEffect(() => {\n    if (previouslyUploadedFiles.current !== files) {\n      previouslyUploadedFiles.current = files;\n      if (files?.length === 1) {\n        previouslyUploadedFiles.current = null;\n        onFile(files[0]);\n      }\n    }\n  }, [files, onFile]);\n\n  return (\n    <DropdownItem\n      icon={<ImportIcon />}\n      onClick={onClick}\n      data-testid=\"import-archive-button\"\n    >\n      Import a Java archive (.jar)\n      <HiddenFileInput accept=\".jar\" multiple={false} />\n    </DropdownItem>\n  );\n};\n\nexport const ExportAtlasFileToolbarItem: FunctionComponent<{\n  onClick: () => void;\n}> = ({ onClick }) => (\n  <DropdownItem\n    icon={<ExportIcon />}\n    onClick={onClick}\n    data-testid=\"export-mappings-button\"\n  >\n    Export the current mappings and support files into a catalog (.adm)\n  </DropdownItem>\n);\n\nexport const ResetToolbarItem: FunctionComponent<{\n  onClick: () => void;\n}> = ({ onClick }) => (\n  <DropdownItem\n    icon={<TrashIcon />}\n    onClick={onClick}\n    data-testid=\"reset-all-button\"\n  >\n    Reset all mappings and clear all imported documents\n  </DropdownItem>\n);\n\nexport const ToggleMappingColumnToolbarItem: FunctionComponent<{\n  toggled: boolean;\n  disabled?: boolean;\n  onClick: () => void;\n}> = ({ toggled, disabled = false, onClick }) => (\n  <ToolbarItem>\n    <Tooltip\n      position={'auto'}\n      enableFlip={true}\n      content={<div>Show mapping column</div>}\n    >\n      <Button\n        variant={'plain'}\n        aria-label=\"Show/hide mapping column\"\n        onClick={onClick}\n        isDisabled={disabled}\n        className={css(toggled && styles.toggled)}\n        data-testid=\"show-hide-mapping-column-button\"\n      >\n        <BezierCurveIcon />\n      </Button>\n    </Tooltip>\n  </ToolbarItem>\n);\n\nexport const ToggleColumnMapperViewToolbarItem: FunctionComponent<{\n  toggled: boolean;\n  disabled?: boolean;\n  onClick: () => void;\n}> = ({ toggled, disabled = false, onClick }) => (\n  <ToolbarItem>\n    <Tooltip\n      position={'auto'}\n      enableFlip={true}\n      content={<div>Show column mapper</div>}\n    >\n      <Button\n        variant={'plain'}\n        aria-label=\"Show column mapper\"\n        onClick={onClick}\n        isDisabled={disabled}\n        className={css(toggled && styles.toggled)}\n        data-testid=\"show-column-mapper-button\"\n      >\n        <ColumnsIcon />\n      </Button>\n    </Tooltip>\n  </ToolbarItem>\n);\n\nexport const ToggleMappingTableViewToolbarItem: FunctionComponent<{\n  toggled: boolean;\n  disabled?: boolean;\n  onClick: () => void;\n}> = ({ toggled, disabled = false, onClick }) => (\n  <ToolbarItem>\n    <Tooltip\n      position={'auto'}\n      enableFlip={true}\n      content={<div>Show mapping table</div>}\n    >\n      <Button\n        variant={'plain'}\n        aria-label=\"Show/hide mapping table\"\n        onClick={onClick}\n        isDisabled={disabled}\n        className={css(toggled && styles.toggled)}\n        data-testid=\"show-hide-mapping-table-button\"\n      >\n        <TableIcon />\n      </Button>\n    </Tooltip>\n  </ToolbarItem>\n);\n\nexport const ToggleNamespaceTableViewToolbarItem: FunctionComponent<{\n  toggled: boolean;\n  disabled?: boolean;\n  onClick: () => void;\n}> = ({ toggled, disabled = false, onClick }) => (\n  <ToolbarItem>\n    <Tooltip\n      position={'auto'}\n      enableFlip={true}\n      content={<div>Show namespace table</div>}\n    >\n      <Button\n        variant={'plain'}\n        aria-label=\"Show/hide namespace table\"\n        onClick={onClick}\n        isDisabled={disabled}\n        className={css(toggled && styles.toggled)}\n        data-testid=\"show-hide-namespace-table-button\"\n      >\n        <CodeIcon />\n      </Button>\n    </Tooltip>\n  </ToolbarItem>\n);\n\nexport const ToggleFreeViewToolbarItem: FunctionComponent<{\n  toggled: boolean;\n  disabled?: boolean;\n  onClick: () => void;\n}> = ({ toggled, disabled = false, onClick }) => (\n  <ToolbarItem>\n    <Tooltip\n      position={'auto'}\n      enableFlip={true}\n      content={<div>Show free view</div>}\n    >\n      <Button\n        variant={'plain'}\n        aria-label=\"Show/hide free view\"\n        onClick={onClick}\n        isDisabled={disabled}\n        className={css(toggled && styles.toggled)}\n        data-testid=\"show-hide-free-view-button\"\n      >\n        <PficonDragdropIcon />\n      </Button>\n    </Tooltip>\n  </ToolbarItem>\n);\n\nexport const ToggleMappingPreviewToolbarItem: FunctionComponent<{\n  toggled: boolean;\n  disabled?: boolean;\n  onClick: () => void;\n}> = ({ toggled, disabled = false, onClick }) => (\n  <ToolbarItem>\n    <Tooltip\n      position={'auto'}\n      enableFlip={true}\n      content={<div>Show/hide mapping preview</div>}\n    >\n      <Button\n        variant={'plain'}\n        aria-label=\"Show/hide mapping preview\"\n        onClick={onClick}\n        isDisabled={disabled}\n        className={css(toggled && styles.toggled)}\n        data-testid=\"show-hide-mapping-preview-button\"\n      >\n        <EyeIcon />\n      </Button>\n    </Tooltip>\n  </ToolbarItem>\n);\n\nexport const ToggleTypesToolbarItem: FunctionComponent<{\n  toggled: boolean;\n  disabled?: boolean;\n  onClick: () => void;\n}> = ({ toggled, disabled = false, onClick }) => (\n  <ToolbarItem>\n    <Tooltip\n      position={'auto'}\n      enableFlip={true}\n      content={<div>Show/hide types</div>}\n    >\n      <Button\n        variant={'plain'}\n        aria-label=\"Show/hide types\"\n        onClick={onClick}\n        isDisabled={disabled}\n        className={css(toggled && styles.toggled)}\n        data-testid=\"show-hide-types-button\"\n      >\n        <InfoIcon />\n      </Button>\n    </Tooltip>\n  </ToolbarItem>\n);\n\nexport const ToggleMappedFieldsToolbarItem: FunctionComponent<{\n  toggled: boolean;\n  disabled?: boolean;\n  onClick: () => void;\n}> = ({ toggled, disabled = false, onClick }) => (\n  <ToolbarItem>\n    <Tooltip\n      position={'auto'}\n      enableFlip={true}\n      content={<div>Show/hide mapped fields</div>}\n    >\n      <Button\n        variant={'plain'}\n        aria-label=\"Show/hide mapped fields\"\n        onClick={onClick}\n        isDisabled={disabled}\n        className={css(toggled && styles.toggled)}\n        data-testid=\"show-hide-mapped-fields-button\"\n      >\n        <MapMarkedIcon />\n      </Button>\n    </Tooltip>\n  </ToolbarItem>\n);\n\nexport const ToggleUnmappedFieldsToolbarItem: FunctionComponent<{\n  toggled: boolean;\n  disabled?: boolean;\n  onClick: () => void;\n}> = ({ toggled, disabled = false, onClick }) => (\n  <ToolbarItem>\n    <Tooltip\n      position={'auto'}\n      enableFlip={true}\n      content={<div>Show/hide unmapped fields</div>}\n    >\n      <Button\n        variant={'plain'}\n        aria-label=\"Show/hide unmapped fields\"\n        onClick={onClick}\n        isDisabled={disabled}\n        className={css(toggled && styles.toggled)}\n        data-testid=\"show-hide-unmapped-fields-button\"\n      >\n        <MapIcon />\n      </Button>\n    </Tooltip>\n  </ToolbarItem>\n);\n\nexport const AddMappingToolbarItem: FunctionComponent<{\n  onClick: () => void;\n}> = ({ onClick }) => (\n  <ToolbarItem>\n    <Tooltip\n      position={'auto'}\n      enableFlip={true}\n      content={<div>Add a new mapping</div>}\n    >\n      <Button\n        variant={'plain'}\n        aria-label=\"Add a new mapping\"\n        onClick={onClick}\n        data-testid=\"add-new-mapping-button\"\n      >\n        <PlusIcon />\n      </Button>\n    </Tooltip>\n  </ToolbarItem>\n);\n\nexport const AboutToolbarItem: FunctionComponent<{\n  onClick: () => void;\n}> = ({ onClick }) => (\n  <ToolbarItem>\n    <Tooltip\n      position={'auto'}\n      enableFlip={true}\n      content={<div>About AtlasMap</div>}\n    >\n      <Button\n        variant={'plain'}\n        aria-label=\"About AtlasMap\"\n        onClick={onClick}\n        data-testid=\"about-button\"\n      >\n        <HelpIcon />\n      </Button>\n    </Tooltip>\n  </ToolbarItem>\n);\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { IAtlasmapDocument, IAtlasmapMapping } from '../../Views';\n\nimport { IAtlasmapField } from './../../Views/models';\n\nexport interface DataAction {\n  type: 'reset' | 'loading' | 'update' | 'error';\n  payload?: DataActionPayload;\n}\n\nexport interface DataActionPayload {\n  pending?: boolean;\n  error?: boolean;\n  sources?: IAtlasmapDocument[];\n  targets?: IAtlasmapDocument[];\n  constants?: IAtlasmapDocument | null;\n  mappings?: IAtlasmapMapping[];\n  selectedMapping?: IAtlasmapMapping | null;\n  sourcesFilter?: string;\n  sourceProperties?: IAtlasmapDocument | null;\n  targetsFilter?: string;\n  targetProperties?: IAtlasmapDocument | null;\n  flatSources?: IAtlasmapField[];\n  flatTargets?: IAtlasmapField[];\n}\n\nexport interface IDataState {\n  pending: boolean;\n  error: boolean;\n  sources: IAtlasmapDocument[];\n  targets: IAtlasmapDocument[];\n  sourceProperties: IAtlasmapDocument | null;\n  targetProperties: IAtlasmapDocument | null;\n  constants: IAtlasmapDocument | null;\n  mappings: IAtlasmapMapping[];\n  selectedMapping: IAtlasmapMapping | null;\n  flatSources: IAtlasmapField[];\n  flatTargets: IAtlasmapField[];\n}\n\nexport function initDataState(): IDataState {\n  return {\n    pending: false,\n    error: false,\n    sourceProperties: null,\n    targetProperties: null,\n    constants: null,\n    sources: [],\n    targets: [],\n    mappings: [],\n    selectedMapping: null,\n    flatSources: [],\n    flatTargets: [],\n  };\n}\n\nexport function dataReducer(state: IDataState, action: DataAction): IDataState {\n  switch (action.type) {\n    case 'reset':\n      return initDataState();\n    case 'loading':\n      return {\n        ...state,\n        pending: true,\n        error: false,\n      };\n    case 'update':\n      return {\n        ...state,\n        ...action.payload,\n      };\n    case 'error':\n      return {\n        ...initDataState(),\n      };\n    default:\n      return state;\n  }\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { INotification } from '../../Views';\n\nexport interface ResetNotificationsAction {\n  type: 'reset';\n}\n\nexport interface UpdateNotificationsAction {\n  type: 'update';\n  payload: {\n    notifications: INotification[];\n  };\n}\n\nexport interface DismissNotificationAction {\n  type: 'dismiss';\n  payload: {\n    id: string;\n  };\n}\n\nexport interface INotificationsState {\n  notifications: INotification[];\n}\n\nexport function initNotificationsState(): INotificationsState {\n  return {\n    notifications: [],\n  };\n}\n\nexport function notificationsReducer(\n  state: INotificationsState,\n  action:\n    | ResetNotificationsAction\n    | UpdateNotificationsAction\n    | DismissNotificationAction,\n): INotificationsState {\n  switch (action.type) {\n    case 'reset':\n      return {\n        notifications: [],\n      };\n    case 'update':\n      return {\n        notifications: action.payload.notifications.map((n) => ({\n          ...n,\n          isRead: state.notifications.find((on) => on.id === n.id)?.isRead,\n        })),\n      };\n    case 'dismiss':\n      return {\n        notifications: state.notifications.map((n) =>\n          n.id === action.payload.id ? { ...n, isRead: true } : n,\n        ),\n      };\n    default:\n      return state;\n  }\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  DataActionPayload,\n  IDataState,\n  INotificationsState,\n  dataReducer,\n  initDataState,\n  initNotificationsState,\n  notificationsReducer,\n} from './reducers';\nimport {\n  DocumentInitializationModel,\n  DocumentType,\n  InspectionType,\n  MappingSerializer,\n  TransitionMode,\n} from '@atlasmap/core';\nimport { IAtlasmapDocument, IAtlasmapField } from '../Views';\nimport React, {\n  FunctionComponent,\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useReducer,\n} from 'react';\nimport {\n  addToCurrentMapping,\n  changeDocumentName,\n  createConstant,\n  createMapping,\n  createNamespace,\n  createProperty,\n  deleteAtlasFile,\n  deleteConstant,\n  deleteNamespace,\n  deleteProperty,\n  deselectMapping,\n  documentExists,\n  editConstant,\n  editNamespace,\n  editProperty,\n  enableCustomClass,\n  errorInfoToNotification,\n  executeFieldSearch,\n  exportADMArchiveFile,\n  fromDocumentDefinitionToFieldGroup,\n  fromFieldToIFieldsNode,\n  fromMappedFieldToIMappingField,\n  fromMappingDefinitionToIMappings,\n  fromMappingModelToImapping,\n  getEnumerationValues,\n  getFieldEnums,\n  getMappingActions,\n  getMappingExpression,\n  getMultiplicityActionDelimiters,\n  getMultiplicityActions,\n  getRuntimeVersion,\n  getUIVersion,\n  handleActionChange,\n  handleIndexChange,\n  handleMultiplicityArgumentChange,\n  handleMultiplicityChange,\n  handleNewTransformation,\n  handleRemoveTransformation,\n  handleTransformationArgumentChange,\n  handleTransformationChange,\n  importADMArchiveFile,\n  importInstanceSchema,\n  importJarFile,\n  initializationService,\n  isEnumerationMapping,\n  mappingExpressionAddField,\n  mappingExpressionClearText,\n  mappingExpressionInit,\n  mappingExpressionInsertText,\n  mappingExpressionObservable,\n  mappingExpressionRemoveField,\n  newMapping,\n  onFieldPreviewChange,\n  removeFromCurrentMapping,\n  removeMappedFieldFromCurrentMapping,\n  removeMapping,\n  resetAtlasmap,\n  selectMapping,\n  setSelectedEnumValue,\n  toggleExpressionMode,\n  toggleMappingPreview,\n  toggleShowMappedFields,\n  toggleShowUnmappedFields,\n  trailerId,\n} from './utils';\n\nimport { LogLevelDesc } from 'loglevel';\nimport { debounceTime } from 'rxjs/operators';\n\n// the document payload with get from Syndesis\nexport interface IExternalDocumentProps {\n  id: string;\n  name: string;\n  description: string;\n  documentType: DocumentType;\n  inspectionType: InspectionType;\n  inspectionSource: string;\n  inspectionParameters: { [key: string]: string };\n  inspectionResult: string;\n  showFields: boolean;\n}\ninterface IAtlasmapContext extends IDataState, INotificationsState {\n  onLoading: () => void;\n  onReset: () => void;\n  markNotificationRead: (id: string) => void;\n}\nconst AtlasmapContext = createContext<IAtlasmapContext | null>(null);\n\nexport interface IAtlasmapProviderProps {\n  baseJavaInspectionServiceUrl: string;\n  baseXMLInspectionServiceUrl: string;\n  baseJSONInspectionServiceUrl: string;\n  baseCSVInspectionServiceUrl: string;\n  baseMappingServiceUrl: string;\n  logLevel: string;\n\n  externalDocument?: {\n    documentId: string;\n    inputDocuments: IExternalDocumentProps[];\n    outputDocument: IExternalDocumentProps;\n    initialMappings?: string;\n  };\n  onMappingChange?: (serializedMappings: string) => void;\n}\nexport const AtlasmapProvider: FunctionComponent<IAtlasmapProviderProps> = ({\n  baseJavaInspectionServiceUrl,\n  baseXMLInspectionServiceUrl,\n  baseJSONInspectionServiceUrl,\n  baseCSVInspectionServiceUrl,\n  baseMappingServiceUrl,\n  externalDocument,\n  onMappingChange,\n  logLevel,\n  children,\n}) => {\n  const [data, dispatchData] = useReducer(dataReducer, {}, initDataState);\n  const [notifications, dispatchNotifications] = useReducer(\n    notificationsReducer,\n    {},\n    initNotificationsState,\n  );\n\n  const onReset = () => {\n    dispatchData({ type: 'reset' });\n    dispatchNotifications({\n      type: 'reset',\n    });\n  };\n\n  const onLoading = () => {\n    dispatchData({ type: 'loading' });\n  };\n\n  const onUpdates = (payload: DataActionPayload) => {\n    dispatchData({\n      type: 'update',\n      payload,\n    });\n  };\n\n  const markNotificationRead = (id: string) =>\n    dispatchNotifications({ type: 'dismiss', payload: { id } });\n\n  useEffect(\n    function onInitializationCb() {\n      onReset();\n      initializationService.resetConfig();\n      const cfg = initializationService.cfg;\n      cfg.logger?.setLevel(logLevel as LogLevelDesc);\n\n      cfg.initCfg.baseMappingServiceUrl = baseMappingServiceUrl;\n      cfg.initCfg.baseJavaInspectionServiceUrl = baseJavaInspectionServiceUrl;\n      cfg.initCfg.baseXMLInspectionServiceUrl = baseXMLInspectionServiceUrl;\n      cfg.initCfg.baseJSONInspectionServiceUrl = baseJSONInspectionServiceUrl;\n      cfg.initCfg.baseCSVInspectionServiceUrl = baseCSVInspectionServiceUrl;\n\n      if (externalDocument) {\n        externalDocument.inputDocuments.forEach((d) => {\n          const inputDoc: DocumentInitializationModel =\n            new DocumentInitializationModel();\n          inputDoc.type = d.documentType;\n          inputDoc.inspectionType = d.inspectionType;\n          inputDoc.inspectionSource = d.inspectionSource;\n          inputDoc.inspectionParameters = d.inspectionParameters;\n          inputDoc.inspectionResult = d.inspectionResult;\n          inputDoc.id = d.id;\n          inputDoc.name = d.name;\n          inputDoc.description = d.description;\n          inputDoc.isSource = true;\n          inputDoc.showFields = d.showFields;\n          cfg.addDocument(inputDoc);\n        });\n\n        const outputDoc: DocumentInitializationModel =\n          new DocumentInitializationModel();\n        outputDoc.type = externalDocument.outputDocument.documentType;\n        outputDoc.inspectionType =\n          externalDocument.outputDocument.inspectionType;\n        outputDoc.inspectionSource =\n          externalDocument.outputDocument.inspectionSource;\n        outputDoc.inspectionParameters =\n          externalDocument.outputDocument.inspectionParameters;\n        outputDoc.inspectionResult =\n          externalDocument.outputDocument.inspectionResult;\n        outputDoc.id = externalDocument.outputDocument.id;\n        outputDoc.name = externalDocument.outputDocument.name;\n        outputDoc.description = externalDocument.outputDocument.description;\n        outputDoc.isSource = false;\n        outputDoc.showFields = externalDocument.outputDocument.showFields;\n        cfg.addDocument(outputDoc);\n\n        if (externalDocument.initialMappings) {\n          cfg.preloadedMappingJson = externalDocument.initialMappings;\n        }\n      }\n\n      initializationService.initialize();\n\n      onLoading();\n    },\n    [\n      baseCSVInspectionServiceUrl,\n      baseJSONInspectionServiceUrl,\n      baseJavaInspectionServiceUrl,\n      baseMappingServiceUrl,\n      baseXMLInspectionServiceUrl,\n      externalDocument,\n      logLevel,\n    ],\n  );\n\n  const configModel = initializationService.cfg;\n\n  const convertSources = useCallback(\n    function convertSourcesCb() {\n      return configModel.sourceDocs\n        .map(fromDocumentDefinitionToFieldGroup)\n        .filter((d: any) => d) as IAtlasmapDocument[];\n    },\n    [configModel],\n  );\n\n  const convertConstants = useCallback(\n    function convertConstantsCb() {\n      return fromDocumentDefinitionToFieldGroup(configModel.constantDoc);\n    },\n    [configModel],\n  );\n\n  const convertSourceProperties = useCallback(\n    function convertPropertiesCb() {\n      return fromDocumentDefinitionToFieldGroup(configModel.sourcePropertyDoc);\n    },\n    [configModel],\n  );\n\n  const convertTargetProperties = useCallback(\n    function convertPropertiesCb() {\n      return fromDocumentDefinitionToFieldGroup(configModel.targetPropertyDoc);\n    },\n    [configModel],\n  );\n\n  const convertTargets = useCallback(\n    function convertTargetsCb() {\n      return configModel.targetDocs\n        .map(fromDocumentDefinitionToFieldGroup)\n        .filter((d) => d) as IAtlasmapDocument[];\n    },\n    [configModel],\n  );\n\n  const convertMappings = useCallback(\n    function convertMappingsCb() {\n      return fromMappingDefinitionToIMappings(configModel.mappings);\n    },\n    [configModel],\n  );\n\n  const convertSelectedMapping = useCallback(\n    function convertSelectedMappingCb() {\n      return fromMappingModelToImapping(configModel.mappings?.activeMapping);\n    },\n    [configModel],\n  );\n\n  const convertSourcesToFlatArray = useCallback(\n    function convertSourcesToFlatArrayCb(): IAtlasmapField[] {\n      return configModel.sourceDocs.flatMap((s) =>\n        s.getAllFields().flatMap((f) => {\n          const af = fromFieldToIFieldsNode(f);\n          return af ? [af] : [];\n        }),\n      );\n    },\n    [configModel],\n  );\n  const convertTargetsToFlatArray = useCallback(\n    function convertTargetsToFlatArrayCb() {\n      return configModel.targetDocs.flatMap((t) =>\n        t.getAllFields().flatMap((f) => {\n          const af = fromFieldToIFieldsNode(f);\n          return af ? [af] : [];\n        }),\n      );\n    },\n    [configModel],\n  );\n\n  const onSubUpdate = useCallback(\n    function onSubUpdateCb(_caller: string) {\n      onUpdates({\n        pending: !configModel.initCfg.initialized,\n        error: configModel.initCfg.initializationErrorOccurred,\n        sources: convertSources(),\n        constants: convertConstants(),\n        sourceProperties: convertSourceProperties(),\n        targets: convertTargets(),\n        targetProperties: convertTargetProperties(),\n        mappings: convertMappings(),\n        selectedMapping: convertSelectedMapping(),\n        flatSources: convertSourcesToFlatArray(),\n        flatTargets: convertTargetsToFlatArray(),\n      });\n      dispatchNotifications({\n        type: 'update',\n        payload: {\n          notifications: configModel.errorService\n            .getErrors()\n            .reverse()\n            .filter((e) => e.level !== 'DEBUG')\n            .map(errorInfoToNotification),\n        },\n      });\n    },\n    [\n      configModel,\n      convertConstants,\n      convertMappings,\n      convertSelectedMapping,\n      convertSources,\n      convertSourceProperties,\n      convertSourcesToFlatArray,\n      convertTargets,\n      convertTargetProperties,\n      convertTargetsToFlatArray,\n    ],\n  );\n\n  useEffect(\n    function subscriptionListener() {\n      const debounceTimeWindow = data.pending ? 1000 : 50;\n      const initializationObservable =\n        initializationService.systemInitializedSource.pipe(\n          debounceTime(debounceTimeWindow),\n        );\n      const lineRefreshObservable =\n        configModel.mappingService.lineRefreshSource.pipe(\n          debounceTime(debounceTimeWindow),\n        );\n      const mappingUpdatedSource =\n        configModel.mappingService.mappingUpdatedSource.pipe(\n          debounceTime(debounceTimeWindow),\n        );\n      const mappingPreview =\n        configModel.previewService.mappingPreviewOutput$.pipe(\n          debounceTime(debounceTimeWindow),\n        );\n\n      const subscriptions = [\n        initializationObservable.subscribe(() =>\n          onSubUpdate('initializationObservable'),\n        ),\n        mappingUpdatedSource.subscribe(() =>\n          onSubUpdate('mappingUpdatedSource'),\n        ),\n        mappingPreview.subscribe(() => onSubUpdate('mappingPreviewOutput$')),\n        lineRefreshObservable.subscribe(() =>\n          onSubUpdate('lineRefreshObservable'),\n        ),\n        configModel.errorService.subscribe(() => onSubUpdate('errorService')),\n      ];\n\n      return () => {\n        subscriptions.forEach((s) => s.unsubscribe());\n      };\n    },\n    [\n      baseJavaInspectionServiceUrl,\n      baseXMLInspectionServiceUrl,\n      baseJSONInspectionServiceUrl,\n      baseCSVInspectionServiceUrl,\n      baseMappingServiceUrl,\n      configModel,\n      data.pending,\n      data.selectedMapping,\n      onSubUpdate,\n    ],\n  );\n\n  useEffect(\n    function onMappingChangeListenerCb() {\n      if (onMappingChange) {\n        configModel.mappingService.mappingUpdatedSource.subscribe(\n          function onMappingChangeListenerSubCb() {\n            if (configModel.initCfg.initialized) {\n              onMappingChange(\n                JSON.stringify(\n                  MappingSerializer.serializeMappings(configModel),\n                ),\n              );\n            }\n          },\n        );\n      }\n    },\n    [configModel, onMappingChange],\n  );\n\n  return (\n    <AtlasmapContext.Provider\n      value={{\n        ...data,\n        ...notifications,\n        onLoading,\n        onReset,\n        markNotificationRead,\n      }}\n    >\n      {children}\n    </AtlasmapContext.Provider>\n  );\n};\n\nexport function useAtlasmap() {\n  const context = useContext(AtlasmapContext);\n\n  if (!context) {\n    throw new Error(\n      `useAtlasmap must be used inside an AtlasmapProvider component`,\n    );\n  }\n\n  const configModel = initializationService.cfg;\n\n  const { onLoading, onReset, ...state } = context;\n\n  const searchSources = useCallback(\n    (term: string) =>\n      configModel.documentService.filterDocumentFields(term, true),\n    [configModel],\n  );\n  const searchTargets = useCallback(\n    (term: string) =>\n      configModel.documentService.filterDocumentFields(term, false),\n    [configModel],\n  );\n\n  const handleImportADMArchiveFile = useCallback(\n    (file: File) => {\n      importADMArchiveFile(file, configModel);\n    },\n    [configModel],\n  );\n\n  const handleImportJarFile = useCallback(\n    (file: File) => {\n      importJarFile(file, configModel);\n    },\n    [configModel],\n  );\n\n  const handleResetAtlasmap = useCallback(() => {\n    onReset();\n    resetAtlasmap();\n  }, [onReset]);\n\n  const onAddToMapping = useCallback((node: IAtlasmapField) => {\n    const field = node.amField;\n    addToCurrentMapping(field);\n  }, []);\n\n  const onRemoveFromMapping = useCallback((node: IAtlasmapField) => {\n    const field = node.amField;\n    removeFromCurrentMapping(field);\n  }, []);\n\n  const onCreateMapping = useCallback(\n    (\n      source: IAtlasmapField | undefined,\n      target: IAtlasmapField | undefined,\n    ) => {\n      const sourceField = source?.amField;\n      const targetField = target?.amField;\n      createMapping(sourceField, targetField);\n    },\n    [],\n  );\n\n  const isMappingExpressionEmpty =\n    configModel.mappings?.activeMapping?.transition?.expression?.nodes\n      .length === 0;\n\n  const mappingHasSourceCollection = useCallback(() => {\n    return configModel.expressionService.willClearOutSourceFieldsOnTogglingExpression();\n  }, [configModel]);\n\n  /**\n   * Return true if it's possible to add a source or target field to the current\n   * mapping from the specified panel, false otherwise.\n   */\n  const canAddToSelectedMapping = useCallback(\n    (isSource: boolean): boolean => {\n      const { selectedMapping } = context;\n      if (\n        !selectedMapping ||\n        (selectedMapping.mapping.transition.mode === TransitionMode.ENUM &&\n          selectedMapping.sourceFields.length > 0 &&\n          selectedMapping.targetFields.length > 0)\n      ) {\n        return false;\n      }\n      if (\n        selectedMapping.sourceFields.length <= 1 &&\n        selectedMapping.targetFields.length <= 1\n      ) {\n        return true;\n      } else if (\n        isSource &&\n        (selectedMapping.targetFields.length <= 1 ||\n          selectedMapping.sourceFields.length === 0)\n      ) {\n        return true;\n      } else if (\n        !isSource &&\n        (selectedMapping.sourceFields.length <= 1 ||\n          selectedMapping.targetFields.length === 0)\n      ) {\n        return true;\n      }\n      return false;\n    },\n    [context],\n  );\n\n  /**\n   * Return true if it's possible to add the specified source field to the current mapping\n   * from the specified panel, false otherwise.\n   */\n  const isFieldAddableToSelection = useCallback(\n    (\n      documentType: 'source' | 'target',\n      field: IAtlasmapField,\n      dropTarget?: IAtlasmapField,\n    ): boolean => {\n      const { selectedMapping } = context;\n      const isSource = documentType === 'source';\n      if (\n        !field ||\n        !field.amField.isTerminal() ||\n        dropTarget?.type === 'UNSUPPORTED' ||\n        (selectedMapping &&\n          selectedMapping.mapping.transition.mode === TransitionMode.ENUM &&\n          selectedMapping.sourceFields.length > 0 &&\n          selectedMapping.targetFields.length > 0)\n      ) {\n        return false;\n      }\n      if (!selectedMapping || (dropTarget && !dropTarget.isConnected)) {\n        return true;\n      }\n      if (\n        selectedMapping.sourceFields.length <= 1 &&\n        selectedMapping.targetFields.length <= 1\n      ) {\n        if (\n          isSource &&\n          !selectedMapping.sourceFields.find((f) => f.id === field.id)\n        ) {\n          return true;\n        } else if (\n          field.isCollection ||\n          field.isInCollection ||\n          (!field.isConnected &&\n            !selectedMapping.targetFields.find((f) => f.id === field.id))\n        ) {\n          return true;\n        }\n      } else if (\n        isSource &&\n        (selectedMapping.targetFields.length <= 1 ||\n          selectedMapping.sourceFields.length === 0) &&\n        !selectedMapping.sourceFields.find((f) => f.id === field.id)\n      ) {\n        return true;\n      } else if (\n        !isSource &&\n        (field.isCollection ||\n          field.isInCollection ||\n          (!field.isConnected &&\n            (selectedMapping.sourceFields.length <= 1 ||\n              selectedMapping.targetFields.length === 0) &&\n            !selectedMapping.targetFields.find((f) => f.id === field.id)))\n      ) {\n        return true;\n      }\n      return false;\n    },\n    [context],\n  );\n\n  const isFieldRemovableFromSelection = useCallback(\n    (documentType: 'source' | 'target', field: IAtlasmapField): boolean =>\n      !!context.selectedMapping &&\n      !!context.selectedMapping[\n        documentType === 'source' ? 'sourceFields' : 'targetFields'\n      ].find((f) => f.id === field.id),\n    [context.selectedMapping],\n  );\n\n  return {\n    ...state,\n    selectMapping,\n    deselectMapping,\n    deleteAtlasFile,\n    exportADMArchiveFile: exportADMArchiveFile,\n    importADMArchiveFile: handleImportADMArchiveFile,\n    importJarFile: handleImportJarFile,\n    resetAtlasmap: handleResetAtlasmap,\n    getUIVersion: getUIVersion,\n    getRuntimeVersion: getRuntimeVersion,\n    mappingExpressionClearText,\n    isMappingExpressionEmpty,\n    executeFieldSearch,\n    getFieldEnums,\n    setSelectedEnumValue,\n    mappingExpressionAddField,\n    mappingExpressionInit,\n    mappingExpressionInsertText,\n    mappingExpressionObservable,\n    mappingExpressionRemoveField,\n    mappingHasSourceCollection,\n    mappingExpressionEnabled:\n      configModel.expressionService.isExpressionEnabledForActiveMapping(),\n    currentMappingExpression:\n      configModel.expressionService.getMappingExpressionStr(\n        true,\n        configModel.mappings?.activeMapping,\n      ),\n    getMappingExpression,\n    toggleExpressionMode,\n    toggleMappingPreview,\n    toggleShowMappedFields,\n    toggleShowUnmappedFields,\n    onFieldPreviewChange,\n    addToCurrentMapping,\n    removeFromCurrentMapping,\n    removeMappedFieldFromCurrentMapping,\n    fromMappedFieldToIMappingField,\n    createMapping,\n    newMapping,\n    removeMapping,\n    documentExists,\n    getMappingActions,\n    getMultiplicityActions,\n    getMultiplicityActionDelimiters,\n    handleActionChange,\n    handleIndexChange,\n    handleNewTransformation,\n    handleRemoveTransformation,\n    handleTransformationChange,\n    handleTransformationArgumentChange,\n    handleMultiplicityChange,\n    handleMultiplicityArgumentChange,\n    createConstant,\n    deleteConstant,\n    editConstant,\n    createProperty,\n    deleteProperty,\n    editProperty,\n    trailerId,\n    canAddToSelectedMapping,\n    isFieldAddableToSelection,\n    isFieldRemovableFromSelection,\n    searchSources,\n    searchTargets,\n    importInstanceSchema,\n    enableCustomClass,\n    createNamespace,\n    editNamespace,\n    deleteNamespace,\n    onAddToMapping,\n    onRemoveFromMapping,\n    onCreateMapping,\n    changeDocumentName,\n    getEnumerationValues,\n    isEnumerationMapping,\n    configModel,\n  };\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { ReactChild, ReactElement, useRef } from 'react';\n\nimport { ConfirmationDialog } from '../../UI';\nimport { TextContent } from '@patternfly/react-core';\nimport { useToggle } from '../utils';\n\nexport function useConfirmationDialog(\n  title: string,\n  content: ReactChild,\n): [ReactElement, (cb: () => void) => void] {\n  const { state, toggleOn, toggleOff } = useToggle(false);\n  const onConfirmCb = useRef<(() => void) | null>(null);\n  const onConfirm = () => {\n    if (onConfirmCb.current) {\n      onConfirmCb.current();\n    }\n    toggleOff();\n  };\n  const openDialog = (confirmCb: () => void) => {\n    onConfirmCb.current = confirmCb;\n    toggleOn();\n  };\n  return [\n    <ConfirmationDialog\n      key={'confirmation-dialog-' + title}\n      title={title}\n      onCancel={toggleOff}\n      onConfirm={onConfirm}\n      isOpen={state}\n    >\n      <TextContent>{content}</TextContent>\n    </ConfirmationDialog>,\n    openDialog,\n  ];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { ConstantDialog, IConstant } from '../../UI';\nimport React, { ReactElement, useCallback, useState } from 'react';\n\nimport { IAtlasmapDocument } from '../../Views';\nimport { constantTypes } from '@atlasmap/core';\nimport { useToggle } from '../utils';\n\ntype ConstantCallback = (constant: IConstant, origName?: string) => void;\n\nexport function useConstantDialog(\n  title: string,\n): [\n  ReactElement,\n  (\n    cb: ConstantCallback,\n    constants: IAtlasmapDocument | null,\n    constant?: IConstant,\n  ) => void,\n] {\n  const [onConstantCb, setOnConstantCb] = useState<ConstantCallback | null>(\n    null,\n  );\n  const [initialConstant, setInitialConstant] = useState<IConstant | null>({\n    name: '',\n    value: '',\n    valueType: constantTypes[0][0],\n  });\n  const [constantsDoc, setConstants] = useState<IAtlasmapDocument | null>(null);\n  const { state, toggleOn, toggleOff } = useToggle(false);\n  const onConfirm = useCallback(\n    (constant: IConstant) => {\n      if (onConstantCb) {\n        if (initialConstant?.name !== constant.name) {\n          onConstantCb(constant, initialConstant?.name);\n        } else {\n          onConstantCb(constant);\n        }\n        toggleOff();\n      }\n    },\n    [initialConstant, onConstantCb, toggleOff],\n  );\n  function onValidation(name: string): boolean {\n    let fieldNameExists = false;\n    if (constantsDoc) {\n      // Ensure constant name is unique\n      const fields = constantsDoc.fields.filter(\n        (fieldOrGroup) => fieldOrGroup.name === name,\n      );\n      fieldNameExists = fields.length > 0;\n    }\n    return name === initialConstant?.name || !fieldNameExists;\n  }\n  const dialog = (\n    <ConstantDialog\n      title={title}\n      isOpen={state}\n      valueTypeOptions={constantTypes.map(([value, label]) => ({\n        value,\n        label,\n      }))}\n      onCancel={toggleOff}\n      onConfirm={onConfirm}\n      onValidation={onValidation}\n      {...(initialConstant || {})}\n    />\n  );\n  const onOpenConstantDialog = useCallback(\n    (\n      callback: ConstantCallback,\n      constantsDoc: IAtlasmapDocument | null,\n      constant?: IConstant,\n    ) => {\n      // we use a closure to set the state here else React will think that callback\n      // is the function to retrieve the state and will call it immediately.\n      setOnConstantCb(() => callback);\n      if (constant) {\n        setInitialConstant(constant);\n      }\n      if (constantsDoc) {\n        setConstants(constantsDoc);\n      }\n      toggleOn();\n    },\n    [toggleOn],\n  );\n  return [dialog, onOpenConstantDialog];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { ReactElement, useCallback, useRef } from 'react';\n\nimport React from 'react';\nimport { TimedToast } from '../../UI';\nimport { copyToClipboard } from '../utils/ui';\nimport { useToggle } from '../utils';\n\nlet docId = '';\n\nfunction useCreateToast(): [ReactElement, (cb: () => void) => void] {\n  const { state, toggleOn, toggleOff } = useToggle(false);\n  const onExecuteCb = useRef<(() => void) | null>(null);\n  const onClose = () => {\n    toggleOff();\n  };\n  const description = 'Document ID ' + docId + ' copied to clipboard.';\n  const openToast = (executeCb: () => void) => {\n    onExecuteCb.current = executeCb;\n    toggleOn();\n  };\n  let toastElement: ReactElement = (\n    <TimedToast\n      variant={'info'}\n      title={'Capture Document ID'}\n      key={docId}\n      onClose={onClose}\n      onTimeout={onClose}\n    >\n      {description}\n    </TimedToast>\n  );\n\n  if (state) {\n    if (onExecuteCb.current) {\n      onExecuteCb.current();\n    }\n  } else {\n    toastElement = <span></span>;\n  }\n  return [toastElement, openToast];\n}\n\nexport function useCaptureDocumentIDToast(): [\n  ReactElement,\n  (documentId: string) => void,\n] {\n  const [captureDocumentIDToast, openCaptureDocumentIDToast] = useCreateToast();\n  const onCaptureDocumentID = useCallback(\n    (documentId: string) => {\n      docId = documentId;\n      openCaptureDocumentIDToast(() => copyToClipboard(documentId));\n    },\n    [openCaptureDocumentIDToast],\n  );\n  return [captureDocumentIDToast, onCaptureDocumentID];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { ReactElement, useCallback, useEffect, useState } from 'react';\nimport { IParameter } from '@atlasmap/core';\nimport { ParametersDialog } from '../../UI';\n\nimport { useToggle } from '../utils';\n\ntype ParametersCallback = (parameters: IParameter[]) => void;\n\nexport function useParametersDialog(\n  title: string,\n): [ReactElement, (cb: ParametersCallback, parameters?: IParameter[]) => void] {\n  const [onParametersCb, setOnParametersCb] =\n    useState<ParametersCallback | null>(null);\n  const [parameters, setParameters] = useState<IParameter[]>([]);\n  const { state, toggleOn, toggleOff } = useToggle(false);\n  const reset = useCallback(() => {\n    setParameters([]);\n  }, []);\n  const onConfirm = useCallback(\n    (parameters: IParameter[]) => {\n      if (onParametersCb) {\n        onParametersCb(parameters);\n        toggleOff();\n      }\n    },\n    [onParametersCb, toggleOff],\n  );\n  const dialog = (\n    <ParametersDialog\n      title={title}\n      isOpen={state}\n      onCancel={toggleOff}\n      onConfirm={onConfirm}\n      parameters={parameters}\n    />\n  );\n  const onOpenParametersDialog = useCallback(\n    (callback: ParametersCallback, parameters?: IParameter[]) => {\n      setOnParametersCb(() => callback);\n      if (parameters) {\n        setParameters(parameters);\n      }\n      toggleOn();\n    },\n    [toggleOn],\n  );\n  useEffect(reset, [reset]);\n  return [dialog, onOpenParametersDialog];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Button, Modal, Radio } from '@patternfly/react-core';\nimport React, { ReactElement, useRef } from 'react';\n\nimport { useToggle } from '../utils';\n\nexport function useSpecifyInstanceSchemaDialog(\n  defaultSchema: boolean,\n): [ReactElement, (cb: (isSchema: boolean) => void) => void] {\n  const dialogState: {\n    state: boolean;\n    toggleOn: () => void;\n    toggleOff: () => void;\n  } = useToggle(false);\n  const isSchema: {\n    state: boolean;\n    toggleOn: () => void;\n    toggleOff: () => void;\n  } = useToggle(defaultSchema);\n  const onConfirmCb = useRef<((isSchema: boolean) => void) | null>(null);\n  const onConfirm = () => {\n    if (onConfirmCb.current) {\n      onConfirmCb.current(isSchema.state);\n    }\n    dialogState.toggleOff();\n  };\n  const openDialog = (confirmCb: (isSchema: boolean) => void) => {\n    onConfirmCb.current = confirmCb;\n    if (defaultSchema) {\n      isSchema.toggleOn();\n    } else {\n      isSchema.toggleOff();\n    }\n    dialogState.toggleOn();\n  };\n  const handleInstanceChange = () => {\n    isSchema.toggleOff();\n  };\n  const handleSchemaChange = () => {\n    isSchema.toggleOn();\n  };\n  return [\n    <Modal\n      key=\"specify-instance-schema-dialog\"\n      variant=\"small\"\n      title={'Specify Instance/ Schema'}\n      description={\n        'Distinguish between instance and schema imported file formats.'\n      }\n      isOpen={dialogState.state}\n      onClose={dialogState.toggleOff}\n      actions={[\n        <Button\n          key={'confirm'}\n          variant={'primary'}\n          onClick={onConfirm}\n          aria-label=\"Ok\"\n          data-testid={'specify-instance-schema-dialog-ok-button-test'}\n          isDisabled={!onConfirm}\n          style={{ display: 'flex', marginLeft: 'auto' }}\n        >\n          OK\n        </Button>,\n      ]}\n    >\n      {\n        <React.Fragment>\n          <Radio\n            isChecked={!isSchema.state}\n            name=\"instance\"\n            onChange={handleInstanceChange}\n            label=\"Instance\"\n            id=\"instance-radio\"\n            data-testid={'instance-radio-button-test'}\n          />\n          <Radio\n            isChecked={isSchema.state}\n            name=\"schema\"\n            onChange={handleSchemaChange}\n            label=\"Schema\"\n            id=\"schema-radio\"\n            data-testid={'schema-radio-button-test'}\n          />\n        </React.Fragment>\n      }\n    </Modal>,\n    openDialog,\n  ];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { INamespace, NamespaceDialog } from '../../UI';\nimport React, { ReactElement, useCallback, useState } from 'react';\n\nimport { useToggle } from '../utils';\n\ntype NamespaceCallback = (namespace: INamespace) => void;\n\nexport function useNamespaceDialog(\n  title: string,\n): [ReactElement, (cb: NamespaceCallback, namespace?: INamespace) => void] {\n  const [onNamespaceCb, setOnNamespaceCb] = useState<NamespaceCallback | null>(\n    null,\n  );\n  const [initialNamespace, setInitialNamespace] = useState<INamespace | null>(\n    null,\n  );\n  const { state, toggleOn, toggleOff } = useToggle(false);\n  const onConfirm = useCallback(\n    (namespace: INamespace) => {\n      if (onNamespaceCb) {\n        onNamespaceCb(namespace);\n        toggleOff();\n      }\n    },\n    [onNamespaceCb, toggleOff],\n  );\n  const dialog = (\n    <NamespaceDialog\n      title={title}\n      isOpen={state}\n      onCancel={toggleOff}\n      onConfirm={onConfirm}\n      {...(initialNamespace || {})}\n    />\n  );\n  const onOpenNamespaceDialog = useCallback(\n    (callback: NamespaceCallback, namespace?: INamespace) => {\n      // we use a closure to set the state here else React will think that callback\n      // is the function to retrieve the state and will call it immediately.\n      setOnNamespaceCb(() => callback);\n      if (namespace) {\n        setInitialNamespace(namespace);\n      }\n      toggleOn();\n    },\n    [toggleOn],\n  );\n  return [dialog, onOpenNamespaceDialog];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { IProperty, PropertyDialog } from '../../UI';\nimport React, { ReactElement, useCallback, useState } from 'react';\n\nimport { IAtlasmapDocument } from '../../Views';\nimport { propertyTypes } from '@atlasmap/core';\nimport { useToggle } from '../utils';\n\ntype PropertyCallback = (property: IProperty) => void;\n\nexport function usePropertyDialog(\n  title: string,\n  scopeOptions: {\n    value: string;\n    label: string;\n  }[],\n): [\n  ReactElement,\n  (\n    cb: PropertyCallback,\n    properties: IAtlasmapDocument | null,\n    property?: IProperty,\n  ) => void,\n] {\n  const [onPropertyCb, setOnPropertyCb] = useState<PropertyCallback | null>(\n    null,\n  );\n  const [initialProperty, setInitialProperty] = useState<IProperty | null>({\n    name: '',\n    valueType: propertyTypes[0][0],\n    scope: scopeOptions[0].value,\n  });\n  const [properties, setProperties] = useState<IAtlasmapDocument | null>(null);\n  const { state, toggleOn, toggleOff } = useToggle(false);\n  const onConfirm = useCallback(\n    (property: IProperty) => {\n      if (onPropertyCb) {\n        onPropertyCb(property);\n        toggleOff();\n      }\n    },\n    [onPropertyCb, toggleOff],\n  );\n  function onValidation(name: string, scope: string): boolean {\n    let fieldNameExists = false;\n    if (properties) {\n      // Ensure proerty name/scope combination is unique\n      const fields = properties.fields.filter(\n        (fieldOrGroup) =>\n          fieldOrGroup.name === name && fieldOrGroup.amField.scope === scope,\n      );\n      fieldNameExists = fields.length > 0;\n    }\n    return (\n      (name === initialProperty?.name && scope === initialProperty.scope) ||\n      !fieldNameExists\n    );\n  }\n  const dialog = (\n    <PropertyDialog\n      title={title}\n      valueTypeOptions={propertyTypes.map(([value, label]) => ({\n        value,\n        label,\n      }))}\n      scopeOptions={scopeOptions}\n      isOpen={state}\n      onCancel={toggleOff}\n      onConfirm={onConfirm}\n      onValidation={onValidation}\n      {...(initialProperty || {})}\n    />\n  );\n  const onOpenPropertyDialog = useCallback(\n    (\n      callback: PropertyCallback,\n      properties: IAtlasmapDocument | null,\n      property?: IProperty,\n    ) => {\n      // we use a closure to set the state here else React will think that callback\n      // is the function to retrieve the state and will call it immediately.\n      setOnPropertyCb(() => callback);\n      if (property) {\n        setInitialProperty(property);\n      }\n      // Set properties even if null to reset values when switching panels.\n      setProperties(properties);\n      toggleOn();\n    },\n    [toggleOn],\n  );\n  return [dialog, onOpenPropertyDialog];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { IConstant, IDocumentName, INamespace, IProperty } from '../UI';\nimport { IParameter, getCsvParameterOptions } from '@atlasmap/core';\nimport React, { useCallback, useMemo, useState } from 'react';\nimport {\n  enableCustomClass,\n  getDocCSVParams,\n  getPropertyScopeOptions,\n  setDocCSVParams,\n} from './utils';\nimport {\n  useAboutDialog,\n  useCaptureDocumentIDToast,\n  useChangeDocumentNameDialog,\n  useConstantDialog,\n  useCustomClassDialog,\n  useDeleteConstantDialog,\n  useDeleteDocumentDialog,\n  useDeleteMappingDialog,\n  useDeletePropertyDialog,\n  useEditMappingEnumerationDialog,\n  useExportADMArchiveDialog,\n  useImportADMArchiveDialog,\n  useImportDocumentDialog,\n  useNamespaceDialog,\n  useParametersDialog,\n  usePropertyDialog,\n  useRemoveMappedFieldDialog,\n  useResetAtlasmapDialog,\n  useSpecifyInstanceSchemaDialog,\n  useToggleExpressionModeDialog,\n} from './dialogs';\n\nimport { IAtlasmapDocument } from '../Views';\nimport { createPortal } from 'react-dom';\nimport { useAtlasmap } from './AtlasmapProvider';\n\nexport interface IUseAtlasmapDialogsProps {\n  modalContainer: HTMLElement;\n}\nexport function useAtlasmapDialogs({\n  modalContainer,\n}: IUseAtlasmapDialogsProps) {\n  const {\n    configModel,\n    selectedMapping,\n    createConstant,\n    editConstant,\n    createProperty,\n    editProperty,\n    createNamespace,\n    editNamespace,\n    deleteNamespace,\n    changeDocumentName,\n  } = useAtlasmap();\n\n  //#region constant dialogs\n  const [createConstantDialog, openCreateConstantDialog] =\n    useConstantDialog('Create Constant');\n  const onCreateConstant = useCallback(\n    (constants: IAtlasmapDocument | null, addToActiveMapping?: boolean) => {\n      openCreateConstantDialog(({ name, value, valueType }) => {\n        createConstant(name, value, valueType, addToActiveMapping);\n      }, constants);\n    },\n    [createConstant, openCreateConstantDialog],\n  );\n  const [editConstantDialog, openEditConstantDialog] =\n    useConstantDialog('Edit Constant');\n  const onEditConstant = useCallback(\n    (constant: IConstant, constants: IAtlasmapDocument | null) => {\n      openEditConstantDialog(\n        ({ name, value, valueType }, origName) => {\n          editConstant(name, value, valueType, origName);\n        },\n        constants,\n        constant,\n      );\n    },\n    [editConstant, openEditConstantDialog],\n  );\n  const [deleteConstantDialog, onDeleteConstant] = useDeleteConstantDialog();\n  //#endregion\n\n  //#region property dialogs\n  const [scopeOptions, setScopeOptions] = useState(\n    getPropertyScopeOptions(true),\n  );\n  const [createPropertyDialog, openCreatePropertyDialog] = usePropertyDialog(\n    'Create Property',\n    scopeOptions,\n  );\n  const onCreateProperty = useCallback(\n    (\n      isSource: boolean,\n      properties: IAtlasmapDocument | null,\n      addToActiveMapping?: boolean,\n    ) => {\n      setScopeOptions(getPropertyScopeOptions(isSource));\n      openCreatePropertyDialog(({ name, valueType, scope }) => {\n        createProperty(name, valueType, scope, isSource, addToActiveMapping);\n      }, properties);\n    },\n    [createProperty, openCreatePropertyDialog],\n  );\n  const [editPropertyDialog, openEditPropertyDialog] = usePropertyDialog(\n    'Edit Property',\n    scopeOptions,\n  );\n  const onEditProperty = useCallback(\n    (\n      property: IProperty,\n      isSource: boolean,\n      properties: IAtlasmapDocument | null,\n    ) => {\n      setScopeOptions(getPropertyScopeOptions(isSource));\n      openEditPropertyDialog(\n        ({ name, valueType, scope }) => {\n          editProperty(\n            property.name,\n            valueType,\n            property.scope,\n            isSource,\n            name,\n            scope,\n          );\n        },\n        properties,\n        property,\n      );\n    },\n    [editProperty, openEditPropertyDialog],\n  );\n  const [deletePropertyDialog, onDeleteProperty] = useDeletePropertyDialog();\n  //#endregion\n\n  //#region atlasmap catalog\n  const [importADMArchiveDialog, onImportADMArchive] =\n    useImportADMArchiveDialog();\n  const [exportADMArchiveDialog, onExportADMArchive] =\n    useExportADMArchiveDialog();\n  const [resetDialog, onResetAtlasmap] = useResetAtlasmapDialog();\n  const [aboutDialog, onAbout] = useAboutDialog();\n  const [toggleExpressionModeDialog, onToggleExpressionMode] =\n    useToggleExpressionModeDialog();\n  //#endregion\n\n  //#region document dialogs\n  const [importDocumentDialog, onImportDocument] = useImportDocumentDialog();\n  const [deleteDocumentDialog, onDeleteDocument] = useDeleteDocumentDialog();\n  const [captureDocumentNameToast, onCaptureDocumentID] =\n    useCaptureDocumentIDToast();\n\n  const [changeDocumentNameDialog, openChangeDocumentNameDialog] =\n    useChangeDocumentNameDialog();\n  const onChangeDocumentName = useCallback(\n    (docNameInfo: IDocumentName) => {\n      openChangeDocumentNameDialog(({ id, name, isSource }) => {\n        changeDocumentName(id, name, isSource);\n      }, docNameInfo);\n    },\n    [changeDocumentName, openChangeDocumentNameDialog],\n  );\n  //#endregion\n\n  //#region namespace table dialogs\n  const [createNamespaceDialog, openCreateNamespaceDialog] =\n    useNamespaceDialog('Create namespace');\n  const onCreateNamespace = useCallback(\n    (docName: string) => {\n      openCreateNamespaceDialog(\n        ({ alias, uri, locationUri, targetNamespace }) =>\n          createNamespace(docName, alias, uri, locationUri, targetNamespace),\n      );\n    },\n    [createNamespace, openCreateNamespaceDialog],\n  );\n  const [editNamespaceDialog, openEditNamespaceDialog] =\n    useNamespaceDialog('Edit namespace');\n  const onEditNamespace = useCallback(\n    (docName: string, namespace: INamespace) => {\n      openEditNamespaceDialog(\n        ({ alias, uri, locationUri, targetNamespace }) =>\n          editNamespace(\n            docName,\n            namespace.alias,\n            alias,\n            uri,\n            locationUri,\n            targetNamespace,\n          ),\n        namespace,\n      );\n    },\n    [editNamespace, openEditNamespaceDialog],\n  );\n  //#endregion\n\n  //#region mapping support dialogs\n  const [removeMappedFieldDialog, onRemoveMappedField] =\n    useRemoveMappedFieldDialog();\n  const [deleteMappingDialog, onDeleteMapping] = useDeleteMappingDialog();\n  const onDeleteSelectedMapping = useCallback(() => {\n    if (selectedMapping) {\n      onDeleteMapping(selectedMapping);\n    }\n  }, [onDeleteMapping, selectedMapping]);\n  const [editMappingEnumerationDialog, onEditMappingEnumeration] =\n    useEditMappingEnumerationDialog();\n  //#endregion\n\n  //#region custom class dialogs\n  const [createEnableCustomClassDialog, openCreateEnableCustomClassDialog] =\n    useCustomClassDialog('Load Java Document From Custom Class');\n  const onEnableCustomClass = useCallback(\n    (isSource: boolean): void => {\n      openCreateEnableCustomClassDialog(({ customClassName, collectionType }) =>\n        enableCustomClass(\n          configModel,\n          customClassName,\n          collectionType,\n          isSource,\n        ),\n      );\n    },\n    [configModel, openCreateEnableCustomClassDialog],\n  );\n  //#endregion\n\n  //#region CSV processing dialogs\n  const [editCSVParamsDialog, openEditCSVParamsDialog] = useParametersDialog(\n    'Edit CSV Processing Parameters',\n  );\n  function initialCSVParams(docId: string, isSource: boolean): IParameter[] {\n    // User-defined CSV parameters.\n    const predefinedParameters: { [key: string]: string } = getDocCSVParams(\n      docId,\n      isSource,\n    );\n\n    // Complete list of available CSV parameters.\n    const initialCSVParameters = getCsvParameterOptions();\n    const predefinedParamNames = Object.keys(predefinedParameters).map(\n      (key) => key,\n    );\n    const predefinedParamValues = Object.values(predefinedParameters).map(\n      (key) => key,\n    );\n\n    // Annotate the initial CSV parameters with the predefined values.\n    for (const { index } of initialCSVParameters.map((value, index) => ({\n      index,\n      value,\n    }))) {\n      for (const { pvalue, pindex } of predefinedParamNames.map(\n        (pvalue, pindex) => ({\n          pindex,\n          pvalue,\n        }),\n      )) {\n        if (initialCSVParameters[index].name === pvalue) {\n          initialCSVParameters[index].value = predefinedParamValues[pindex];\n          initialCSVParameters[index].enabled = true;\n          break;\n        }\n      }\n    }\n    return initialCSVParameters;\n  }\n  const onEditCSVParams = useCallback(\n    (docId: string, isSource: boolean) => {\n      openEditCSVParamsDialog((parameters) => {\n        const inspectionParameters: { [key: string]: string } = {};\n        for (let parameter of parameters) {\n          inspectionParameters[parameter.name] = parameter.value;\n        }\n        setDocCSVParams(docId, isSource, inspectionParameters);\n      }, initialCSVParams(docId, isSource));\n    },\n    [openEditCSVParamsDialog],\n  );\n  //#endregion\n\n  const [specifyInstanceSchemaDialog, onSpecifyInstanceSchema] =\n    useSpecifyInstanceSchemaDialog(false);\n\n  const portal = useMemo(\n    () =>\n      createPortal(\n        <>\n          {importADMArchiveDialog}\n          {exportADMArchiveDialog}\n          {importDocumentDialog}\n          {deleteDocumentDialog}\n          {specifyInstanceSchemaDialog}\n          {captureDocumentNameToast}\n          {changeDocumentNameDialog}\n          {createConstantDialog}\n          {deleteConstantDialog}\n          {editConstantDialog}\n          {createPropertyDialog}\n          {deletePropertyDialog}\n          {editPropertyDialog}\n          {resetDialog}\n          {aboutDialog}\n          {removeMappedFieldDialog}\n          {deleteMappingDialog}\n          {createEnableCustomClassDialog}\n          {createNamespaceDialog}\n          {editNamespaceDialog}\n          {toggleExpressionModeDialog}\n          {editMappingEnumerationDialog}\n          {editCSVParamsDialog}\n        </>,\n        modalContainer,\n      ),\n    [\n      createConstantDialog,\n      createEnableCustomClassDialog,\n      createNamespaceDialog,\n      createPropertyDialog,\n      deleteConstantDialog,\n      deleteDocumentDialog,\n      captureDocumentNameToast,\n      changeDocumentNameDialog,\n      deleteMappingDialog,\n      deletePropertyDialog,\n      editConstantDialog,\n      editNamespaceDialog,\n      editPropertyDialog,\n      exportADMArchiveDialog,\n      importADMArchiveDialog,\n      importDocumentDialog,\n      specifyInstanceSchemaDialog,\n      modalContainer,\n      removeMappedFieldDialog,\n      resetDialog,\n      aboutDialog,\n      toggleExpressionModeDialog,\n      editMappingEnumerationDialog,\n      editCSVParamsDialog,\n    ],\n  );\n\n  return {\n    handlers: {\n      onImportADMArchive: onImportADMArchive,\n      onExportADMArchive: onExportADMArchive,\n      onCreateConstant,\n      onDeleteConstant,\n      onEditConstant,\n      onCreateProperty,\n      onDeleteProperty,\n      onEditProperty,\n      onResetAtlasmap,\n      onAbout,\n      onImportDocument,\n      onDeleteDocument,\n      onSpecifyInstanceSchema,\n      onCaptureDocumentID,\n      onChangeDocumentName,\n      onRemoveMappedField,\n      onDeleteMapping,\n      onDeleteSelectedMapping,\n      onEnableCustomClass,\n      onCreateNamespace,\n      onEditNamespace,\n      deleteNamespace,\n      onToggleExpressionMode,\n      onEditMappingEnumeration,\n      onEditCSVParams,\n    },\n    dialogs: portal,\n  };\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { ReactElement, useCallback } from 'react';\n\nimport { useConfirmationDialog } from './useConfirmationDialog';\n\nexport function useRemoveMappedFieldDialog(): [\n  ReactElement,\n  (cb: () => void) => void,\n] {\n  const [removeMappedFieldDialog, openRemoveMappedFieldDialog] =\n    useConfirmationDialog(\n      'Remove field?',\n      'Are you sure you want to remove this field?',\n    );\n  const onRemoveMappedField = useCallback(\n    (removeMappedField: () => void) =>\n      openRemoveMappedFieldDialog(removeMappedField),\n    [openRemoveMappedFieldDialog],\n  );\n  return [removeMappedFieldDialog, onRemoveMappedField];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { ReactElement, useCallback } from 'react';\n\nimport { useAtlasmap } from '../AtlasmapProvider';\nimport { useConfirmationDialog } from './useConfirmationDialog';\n\nexport function useDeleteConstantDialog(): [\n  ReactElement,\n  (constName: string) => void,\n] {\n  const { deleteConstant } = useAtlasmap();\n  const [deleteConstantDialog, openDeleteConstantDialog] =\n    useConfirmationDialog(\n      'Delete constant?',\n      'Are you sure you want to delete the selected constant and remove any associated mapping references?',\n    );\n  const onDeleteConstant = useCallback(\n    (constName: string) =>\n      openDeleteConstantDialog(() => deleteConstant(constName)),\n    [deleteConstant, openDeleteConstantDialog],\n  );\n  return [deleteConstantDialog, onDeleteConstant];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { ReactElement, useCallback } from 'react';\n\nimport { useAtlasmap } from '../AtlasmapProvider';\nimport { useConfirmationDialog } from './useConfirmationDialog';\n\nexport function useDeletePropertyDialog(): [\n  ReactElement,\n  (propName: string, propScope: string, isSource: boolean) => void,\n] {\n  const { deleteProperty } = useAtlasmap();\n  const [deletePropertyDialog, openDeletePropertyDialog] =\n    useConfirmationDialog(\n      'Delete property?',\n      'Are you sure you want to delete the selected property and remove any associated mapping references?',\n    );\n  const onDeleteProperty = useCallback(\n    (propName: string, propScope: string, isSource: boolean) =>\n      openDeletePropertyDialog(() =>\n        deleteProperty(propName, propScope, isSource),\n      ),\n    [deleteProperty, openDeletePropertyDialog],\n  );\n  return [deletePropertyDialog, onDeleteProperty];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { ReactElement, useCallback } from 'react';\n\nimport { useAtlasmap } from '../AtlasmapProvider';\nimport { useConfirmationDialog } from './useConfirmationDialog';\n\nexport function useImportADMArchiveDialog(): [\n  ReactElement,\n  (file: File) => void,\n] {\n  const { importADMArchiveFile } = useAtlasmap();\n  const [ImportADMArchiveDialog, openImportADMArchiveDialog] =\n    useConfirmationDialog(\n      'Import ADM archive file?',\n      'Importing a new ADM archive file will discard all unsaved changes. To save the current mappings, use the Export feature.',\n    );\n  const onImportADMArchive = useCallback(\n    (file: File) =>\n      openImportADMArchiveDialog(() => importADMArchiveFile(file)),\n    [importADMArchiveFile, openImportADMArchiveDialog],\n  );\n  return [ImportADMArchiveDialog, onImportADMArchive];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { ReactElement, useCallback } from 'react';\n\nimport { ExportCatalogDialog } from '../../UI';\nimport { useAtlasmap } from '../AtlasmapProvider';\nimport { useToggle } from '../utils';\n\nexport function useExportADMArchiveDialog(): [ReactElement, () => void] {\n  const { state, toggleOn, toggleOff } = useToggle(false);\n  const { exportADMArchiveFile } = useAtlasmap();\n  const onExportADMArchiveFile = useCallback(\n    (filename: string) => {\n      exportADMArchiveFile(filename);\n      toggleOff();\n    },\n    [exportADMArchiveFile, toggleOff],\n  );\n  const dialog = (\n    <ExportCatalogDialog\n      isOpen={state}\n      onCancel={toggleOff}\n      onConfirm={onExportADMArchiveFile}\n    />\n  );\n  return [dialog, toggleOn];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { ReactElement, useCallback } from 'react';\n\nimport { useAtlasmap } from '../AtlasmapProvider';\nimport { useConfirmationDialog } from './useConfirmationDialog';\n\nexport function useResetAtlasmapDialog(): [ReactElement, () => void] {\n  const { resetAtlasmap } = useAtlasmap();\n  const [resetDialog, openResetDialog] = useConfirmationDialog(\n    'Reset All Mappings and Imports?',\n    'Are you sure you want to reset all mappings and clear all imported documents?',\n  );\n  const onResetAtlasmap = useCallback(\n    () => openResetDialog(resetAtlasmap),\n    [openResetDialog, resetAtlasmap],\n  );\n\n  return [resetDialog, onResetAtlasmap];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { ReactElement, useCallback, useState } from 'react';\n\nimport { AboutDialog } from '../../UI';\nimport { useAtlasmap } from '../AtlasmapProvider';\nimport { useToggle } from '../utils';\n\nexport function useAboutDialog(): [ReactElement, () => void] {\n  const { getRuntimeVersion, getUIVersion } = useAtlasmap();\n  const uiVersion = getUIVersion();\n  const [runtimeVersion, setRuntimeVersion]: [\n    string,\n    (version: string) => void,\n  ] = useState('0.0');\n  const { state, toggleOn, toggleOff } = useToggle(false);\n\n  const dialog = (\n    <AboutDialog\n      title=\"AtlasMap Data Mapper\"\n      isOpen={state}\n      onClose={toggleOff}\n      uiVersion={uiVersion}\n      runtimeVersion={runtimeVersion}\n    />\n  );\n\n  const onAboutDialog = useCallback(() => {\n    getRuntimeVersion()\n      .then((body: any) => {\n        setRuntimeVersion(body);\n        toggleOn();\n      })\n      .catch((error) => {\n        setRuntimeVersion(error);\n        toggleOn();\n      });\n  }, [toggleOn, getRuntimeVersion]);\n  return [dialog, onAboutDialog];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { ReactElement, useCallback } from 'react';\n\nimport { useAtlasmap } from '../AtlasmapProvider';\nimport { useConfirmationDialog } from './useConfirmationDialog';\n\nexport function useToggleExpressionModeDialog(): [ReactElement, () => void] {\n  const { mappingHasSourceCollection, toggleExpressionMode } = useAtlasmap();\n  const [toggleExpressionModeDialog, openToggleExpressionModeDialog] =\n    useConfirmationDialog(\n      'Disable Expression?',\n      'If you disable an expression with a source collection, all source fields will be removed from the mapping.  Proceed with expression disable?',\n    );\n  const onToggleExpressionMode = useCallback((): void => {\n    if (mappingHasSourceCollection()) {\n      openToggleExpressionModeDialog(toggleExpressionMode);\n    } else {\n      toggleExpressionMode();\n    }\n  }, [\n    mappingHasSourceCollection,\n    openToggleExpressionModeDialog,\n    toggleExpressionMode,\n  ]);\n  return [toggleExpressionModeDialog, onToggleExpressionMode];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { ReactElement, useCallback, useState } from 'react';\nimport { getCsvParameterOptions } from '@atlasmap/core';\nimport { useAtlasmap } from '../AtlasmapProvider';\nimport { useConfirmationDialog } from './useConfirmationDialog';\nimport { useParametersDialog } from './useParametersDialog';\nimport { useSpecifyInstanceSchemaDialog } from './useSpecifyInstanceSchemaDialog';\n\nexport function useImportDocumentDialog(): [\n  ReactElement,\n  (selectedFile: File, isSource: boolean) => void,\n] {\n  const { configModel, documentExists, importInstanceSchema } = useAtlasmap();\n  const [importDialog, openImportDialog] = useConfirmationDialog(\n    'Confirm document import',\n    'A document with the selected name has already been imported into the specified panel. It will appear in addition to the pre-existing document.',\n  );\n  const [parametersDialog, openParametersDialog] = useParametersDialog(\n    'Select CSV Processing Parameters',\n  );\n  const [defaultSchema, setDefaultSchema] = useState(false);\n  const [specifyInstanceSchemaDialog, openSpecifyInstanceSchema] =\n    useSpecifyInstanceSchemaDialog(defaultSchema);\n\n  const importFile = useCallback(\n    (selectedFile: File, isSource: boolean) => {\n      if (selectedFile.name) {\n        const userFileSplit = selectedFile.name.split('.');\n        const userFileSuffix: string =\n          userFileSplit[userFileSplit.length - 1].toUpperCase();\n        if (userFileSuffix === 'CSV') {\n          openParametersDialog((parameters) => {\n            const inspectionParameters: { [key: string]: string } = {};\n            for (let parameter of parameters) {\n              inspectionParameters[parameter.name] = parameter.value;\n            }\n            importInstanceSchema(\n              selectedFile,\n              configModel,\n              isSource,\n              false,\n              inspectionParameters,\n            );\n          }, getCsvParameterOptions());\n          return;\n        }\n\n        setDefaultSchema(userFileSuffix === 'XSD' ? true : false);\n        openSpecifyInstanceSchema((isSchema: boolean) => {\n          importInstanceSchema(selectedFile, configModel, isSource, isSchema);\n        });\n      }\n    },\n    [\n      configModel,\n      importInstanceSchema,\n      openParametersDialog,\n      openSpecifyInstanceSchema,\n    ],\n  );\n\n  const onImportDocument = useCallback(\n    (selectedFile: File, isSource: boolean) => {\n      if (documentExists(selectedFile, isSource)) {\n        openImportDialog(() => importFile(selectedFile, isSource));\n      } else {\n        importFile(selectedFile, isSource);\n      }\n    },\n    [documentExists, importFile, openImportDialog],\n  );\n  return [\n    <>\n      {importDialog}\n      {parametersDialog}\n      {specifyInstanceSchemaDialog}\n    </>,\n    onImportDocument,\n  ];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { ReactElement, useCallback } from 'react';\n\nimport { GroupId } from '../../Views';\nimport { useAtlasmap } from '../AtlasmapProvider';\nimport { useConfirmationDialog } from './useConfirmationDialog';\n\nexport function useDeleteDocumentDialog(): [\n  ReactElement,\n  (id: GroupId, isSource: boolean) => void,\n] {\n  const { deleteAtlasFile } = useAtlasmap();\n  const [deleteDialog, openDeleteDialog] = useConfirmationDialog(\n    'Delete selected document?',\n    'Are you sure you want to delete the selected document and remove any associated mappings?',\n  );\n  const onDeleteDocument = useCallback(\n    (id: GroupId, isSource: boolean) =>\n      openDeleteDialog(() => deleteAtlasFile(id, isSource)),\n    [deleteAtlasFile, openDeleteDialog],\n  );\n  return [deleteDialog, onDeleteDocument];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { ChangeDocumentNameDialog, IDocumentName } from '../../UI';\nimport React, { ReactElement, useCallback, useState } from 'react';\n\nimport { useToggle } from '../utils';\n\ntype ChangeDocumentNameCallback = (documentNameInfo: IDocumentName) => void;\n\nexport function useChangeDocumentNameDialog(): [\n  ReactElement,\n  (cb: ChangeDocumentNameCallback, documentNameInfo: IDocumentName) => void,\n] {\n  const [onDocumentNameCb, setOnChangeDocumentNameCb] =\n    useState<ChangeDocumentNameCallback | null>(null);\n  const [initialDocumentName, setInitialDocumentName] =\n    useState<IDocumentName | null>({\n      id: '',\n      name: '',\n      isSource: false,\n    });\n  const { state, toggleOn, toggleOff } = useToggle(false);\n  const onConfirm = useCallback(\n    (documentNameInfo: IDocumentName) => {\n      if (onDocumentNameCb) {\n        onDocumentNameCb(documentNameInfo);\n        toggleOff();\n      }\n    },\n    [onDocumentNameCb, toggleOff],\n  );\n  const dialog = (\n    <ChangeDocumentNameDialog\n      isOpen={state}\n      onCancel={toggleOff}\n      onConfirm={onConfirm}\n      {...(initialDocumentName || {})}\n    />\n  );\n  const onOpenChangeDocumentNameDialog = useCallback(\n    (callback: ChangeDocumentNameCallback, documentNameInfo: IDocumentName) => {\n      setOnChangeDocumentNameCb(() => callback);\n      setInitialDocumentName(documentNameInfo);\n      toggleOn();\n    },\n    [toggleOn],\n  );\n  return [dialog, onOpenChangeDocumentNameDialog];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { ReactElement, useCallback } from 'react';\n\nimport { IAtlasmapMapping } from '../../Views';\nimport { useAtlasmap } from '../AtlasmapProvider';\nimport { useConfirmationDialog } from './useConfirmationDialog';\n\nexport function useDeleteMappingDialog(): [\n  ReactElement,\n  (mapping: IAtlasmapMapping) => void,\n] {\n  const { removeMapping, deselectMapping } = useAtlasmap();\n  const [deleteMappingDialog, openDeleteMappingDialog] = useConfirmationDialog(\n    'Remove Mapping?',\n    'Are you sure you want to remove the current mapping?',\n  );\n  const onDeleteMapping = useCallback(\n    (mapping: IAtlasmapMapping) => {\n      openDeleteMappingDialog(() => {\n        removeMapping(mapping.mapping);\n        deselectMapping();\n      });\n    },\n    [deselectMapping, openDeleteMappingDialog, removeMapping],\n  );\n\n  return [deleteMappingDialog, onDeleteMapping];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  ConfirmationDialog,\n  LookupTableData,\n  LookupTableDialog,\n} from '../../UI';\nimport React, { ReactElement, useCallback, useState } from 'react';\nimport { getEnumerationValues, updateEnumerationValues } from '../utils';\n\nimport { useToggle } from '../utils';\n\ntype LookupTableCallback = () => void;\n\n/**\n * Enumeration mapping occurs through a \"lookup\" table.\n */\nexport function useEditMappingEnumerationDialog(): [\n  ReactElement,\n  (cb: LookupTableCallback) => void,\n] {\n  const { state, toggleOn, toggleOff } = useToggle(false);\n\n  const [enumerationValues, setEnumerationValues] = useState<\n    LookupTableData[] | null\n  >([]);\n\n  const getEnumValues = () => {\n    setEnumerationValues(getEnumerationValues());\n  };\n\n  const onConfirm = useCallback(() => {\n    updateEnumerationValues(enumerationValues!);\n    toggleOff();\n  }, [enumerationValues, toggleOff]);\n\n  const dialog = (\n    <ConfirmationDialog\n      title={'Map Enumeration Values'}\n      description={'Map enumeration source values to target values.'}\n      onCancel={toggleOff}\n      onConfirm={onConfirm}\n      isOpen={state}\n    >\n      {state &&\n        enumerationValues &&\n        enumerationValues.map((value, idx) => (\n          <div key={idx}>\n            <LookupTableDialog\n              enumerationValue={value}\n              sourceKey={idx}\n              isOpen={state}\n            />\n          </div>\n        ))}\n    </ConfirmationDialog>\n  );\n\n  const onOpenDialog = useCallback(() => {\n    getEnumValues();\n    toggleOn();\n  }, [toggleOn]);\n\n  return [dialog, onOpenDialog];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { CustomClassDialog, ICustomClass } from '../../UI';\nimport React, { ReactElement, useCallback, useState } from 'react';\n\nimport { collectionTypes } from '@atlasmap/core';\nimport { getCustomClassNameOptions } from '../utils/document';\nimport { useToggle } from '../utils';\n\ntype CustomClassCallback = (constant: ICustomClass) => void;\n\nexport function useCustomClassDialog(\n  title: string,\n): [ReactElement, (cb: CustomClassCallback, constant?: ICustomClass) => void] {\n  const [onCustomClassCb, setOnCustomClassCb] =\n    useState<CustomClassCallback | null>(null);\n\n  const [initialCustomClass, setInitialCustomClass] =\n    useState<ICustomClass | null>(null);\n\n  const [customClassNames, setCustomClassNames] = useState<string[] | null>([]);\n\n  const { state, toggleOn, toggleOff } = useToggle(false);\n  const onConfirm = useCallback(\n    (constant: ICustomClass) => {\n      if (onCustomClassCb) {\n        onCustomClassCb(constant);\n        toggleOff();\n      }\n    },\n    [onCustomClassCb, toggleOff],\n  );\n\n  const getCustomClassNames = async () => {\n    setCustomClassNames(await getCustomClassNameOptions());\n  };\n\n  const dialog = (\n    <CustomClassDialog\n      title={title}\n      isOpen={state}\n      customClassName={customClassNames ? customClassNames[0] : ''}\n      customClassNames={customClassNames}\n      collectionTypeOptions={collectionTypes.map(([value, label]) => ({\n        value,\n        label,\n      }))}\n      onCancel={toggleOff}\n      onConfirm={onConfirm}\n      {...(initialCustomClass || { collectionType: 'NONE' })}\n    />\n  );\n  const onOpenCustomClassDialog = useCallback(\n    (callback: CustomClassCallback, constant?: ICustomClass) => {\n      // we use a closure to set the state here else React will think that callback\n      // is the function to retrieve the state and will call it immediately.\n      setOnCustomClassCb(() => callback);\n      if (constant) {\n        setInitialCustomClass(constant);\n      }\n      getCustomClassNames();\n      toggleOn();\n    },\n    [toggleOn],\n  );\n  return [dialog, onOpenCustomClassDialog];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport React, { FunctionComponent } from 'react';\n\nimport { Coords } from './models';\n\nexport interface IArcEdgeProps {\n  start: Coords;\n  end: Coords;\n  strokeWidth?: number;\n  color?: string;\n}\nexport const ArcEdge: FunctionComponent<IArcEdgeProps> = ({\n  start,\n  end,\n  strokeWidth,\n  color,\n}) => {\n  return (\n    <line\n      x1={start.x}\n      y1={start.y}\n      x2={end.x}\n      y2={end.y}\n      stroke={color}\n      strokeWidth={strokeWidth}\n    />\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  CanvasProvider,\n  ConditionalExpressionInput,\n  FieldDragLayer,\n  FieldsDndProvider,\n  TimedToast,\n} from '../UI';\nimport { ExpressionToolbar, MainLayout } from '../Layout';\nimport {\n  IAtlasmapField,\n  IAtlasmapMapping,\n  ISourceColumnCallbacks,\n  ITargetsColumnCallbacks,\n  MappingTableView,\n  NamespaceTableView,\n  SourceTargetView,\n} from '../Views';\nimport { IUseContextToolbarData, useContextToolbar } from './useContextToolbar';\nimport React, { FunctionComponent, useCallback, useMemo } from 'react';\nimport { getConstantType, getPropertyType } from './utils';\n\nimport { AlertGroup } from '@patternfly/react-core';\nimport { useAtlasmap } from './AtlasmapProvider';\nimport { useAtlasmapDialogs } from './useAtlasmapDialogs';\nimport { useSidebar } from './useSidebar';\n\nexport interface IAtlasmapProps {\n  allowImport?: boolean;\n  allowExport?: boolean;\n  allowReset?: boolean;\n  allowDelete?: boolean;\n  allowCustomJavaClasses?: boolean;\n  modalsContainerId?: string;\n  toolbarOptions?: IUseContextToolbarData;\n}\n\nexport const Atlasmap: FunctionComponent<IAtlasmapProps> = ({\n  allowImport = true,\n  allowExport = true,\n  allowReset = true,\n  allowDelete = true,\n  allowCustomJavaClasses = true,\n  modalsContainerId = 'modals',\n  toolbarOptions,\n}) => {\n  const {\n    pending,\n    // error,\n    notifications,\n    markNotificationRead,\n    sourceProperties,\n    targetProperties,\n    constants,\n    sources,\n    targets,\n    mappings,\n    selectedMapping,\n    selectMapping,\n    onFieldPreviewChange,\n    searchSources,\n    searchTargets,\n    importJarFile,\n    // expression\n    currentMappingExpression,\n    executeFieldSearch,\n    getFieldEnums,\n    setSelectedEnumValue,\n    mappingExpressionAddField,\n    mappingExpressionClearText,\n    mappingExpressionInit,\n    mappingExpressionInsertText,\n    mappingExpressionObservable,\n    mappingExpressionRemoveField,\n    mappingExpressionEnabled,\n    isMappingExpressionEmpty,\n    trailerId,\n    canAddToSelectedMapping,\n    isFieldAddableToSelection,\n    isFieldRemovableFromSelection,\n    onAddToMapping,\n    onRemoveFromMapping,\n    onCreateMapping,\n    isEnumerationMapping,\n  } = useAtlasmap();\n\n  const { handlers, dialogs } = useAtlasmapDialogs({\n    modalContainer: document.getElementById(modalsContainerId)!,\n  });\n  const { activeView, showMappingPreview, showTypes, contextToolbar } =\n    useContextToolbar({\n      showImportAtlasFileToolbarItem: allowImport,\n      showImportJarFileToolbarItem: allowImport,\n      showExportAtlasFileToolbarItem: allowExport,\n      showResetToolbarItem: allowReset,\n      ...toolbarOptions,\n      onImportADMArchiveFile: handlers.onImportADMArchive,\n      onImportJarFile: (file) => importJarFile(file),\n      onExportAtlasFile: handlers.onExportADMArchive,\n      onResetAtlasmap: handlers.onResetAtlasmap,\n      onAbout: handlers.onAbout,\n    });\n\n  const shouldShowMappingPreviewForField = useCallback(\n    (field: IAtlasmapField) =>\n      showMappingPreview &&\n      !!selectedMapping &&\n      field.isConnected &&\n      !!field.mappings.find((m) => m.id === selectedMapping.id),\n    [selectedMapping, showMappingPreview],\n  );\n\n  const shouldShowMappingPreview = useCallback(\n    (mapping: IAtlasmapMapping) =>\n      showMappingPreview &&\n      !!selectedMapping &&\n      mapping.id === selectedMapping.id,\n    [selectedMapping, showMappingPreview],\n  );\n\n  const expressionToolbar = (\n    <ExpressionToolbar>\n      <ConditionalExpressionInput\n        mappingExpression={\n          mappingExpressionEnabled ? currentMappingExpression : undefined\n        }\n        executeFieldSearch={executeFieldSearch}\n        getFieldEnums={getFieldEnums}\n        mappingExpressionAddField={mappingExpressionAddField}\n        mappingExpressionClearText={mappingExpressionClearText}\n        isMappingExpressionEmpty={isMappingExpressionEmpty}\n        mappingExpressionInit={mappingExpressionInit}\n        mappingExpressionInsertText={mappingExpressionInsertText}\n        mappingExpressionObservable={mappingExpressionObservable}\n        mappingExpressionRemoveField={mappingExpressionRemoveField}\n        trailerId={trailerId}\n        disabled={!selectedMapping}\n        onToggle={handlers.onToggleExpressionMode}\n        setSelectedEnumValue={setSelectedEnumValue}\n      />\n    </ExpressionToolbar>\n  );\n\n  const sourceEvents = useMemo<ISourceColumnCallbacks>(\n    () => ({\n      isSource: true,\n      acceptDropType: 'target',\n      draggableType: 'source',\n      canDrop: (dt, i) => {\n        return isFieldAddableToSelection(\n          'target',\n          i.payload as IAtlasmapField,\n          dt,\n        );\n      },\n      onDrop: (s, t) => onCreateMapping(s, t?.payload as IAtlasmapField),\n      onShowMappingDetails: selectMapping,\n      onAddToSelectedMapping: onAddToMapping,\n      canAddToSelectedMapping: canAddToSelectedMapping,\n      canAddFieldToSelectedMapping: (f) =>\n        isFieldAddableToSelection('source', f),\n      onAddFieldToSelectedMapping: onAddToMapping,\n      canRemoveFromSelectedMapping: (f) =>\n        isFieldRemovableFromSelection('source', f),\n      onRemoveFromSelectedMapping: onRemoveFromMapping,\n      onCreateConstant: () => handlers.onCreateConstant(constants),\n      onEditConstant: (constName, constValue) => {\n        const name = constName;\n        const value = constValue;\n        const valueType = getConstantType(name);\n\n        handlers.onEditConstant({ name, value, valueType }, constants);\n      },\n      onDeleteConstant: handlers.onDeleteConstant,\n      onCreateProperty: (isSource: boolean) => {\n        handlers.onCreateProperty(isSource, sourceProperties);\n      },\n      onEditProperty: (property, scope, isSource) => {\n        const [leftPart] = property.split(' ');\n        const valueType = getPropertyType(leftPart, scope, isSource);\n        handlers.onEditProperty(\n          {\n            name: leftPart,\n            valueType,\n            scope,\n          },\n          true,\n          sourceProperties,\n        );\n      },\n      onDeleteProperty: handlers.onDeleteProperty,\n      onDeleteDocument: allowDelete\n        ? (id) => handlers.onDeleteDocument(id, true)\n        : undefined,\n      onCaptureDocumentID: (id) => handlers.onCaptureDocumentID(id),\n      onChangeDocumentName: (id, name) =>\n        handlers.onChangeDocumentName({\n          id: id,\n          name: name,\n          isSource: true,\n        }),\n      onCustomClassSearch: allowCustomJavaClasses\n        ? (isSource: boolean) => handlers.onEnableCustomClass(isSource)\n        : undefined,\n      onImportDocument: allowImport\n        ? (id) => handlers.onImportDocument(id, true)\n        : undefined,\n      onSearch: searchSources,\n      shouldShowMappingPreviewForField,\n      onFieldPreviewChange,\n      canStartMapping: () => true, // TODO: check that there is at least one target field unmapped and compatible\n      onStartMapping: (field) => onCreateMapping(field, undefined),\n      onEditCSVParams: (docId, isSource) => {\n        handlers.onEditCSVParams(docId, isSource);\n      },\n    }),\n    [\n      selectMapping,\n      onAddToMapping,\n      onRemoveFromMapping,\n      handlers,\n      constants,\n      allowDelete,\n      allowCustomJavaClasses,\n      allowImport,\n      searchSources,\n      shouldShowMappingPreviewForField,\n      onFieldPreviewChange,\n      onCreateMapping,\n      canAddToSelectedMapping,\n      isFieldAddableToSelection,\n      isFieldRemovableFromSelection,\n      sourceProperties,\n    ],\n  );\n\n  const targetEvents = useMemo<ITargetsColumnCallbacks>(\n    () => ({\n      isSource: false,\n      acceptDropType: 'source',\n      draggableType: 'target',\n      canDrop: (dt, i) => {\n        return isFieldAddableToSelection(\n          'source',\n          i.payload as IAtlasmapField,\n          dt,\n        );\n      },\n      onDrop: (s, t) => onCreateMapping(t?.payload as IAtlasmapField, s),\n      canAddToSelectedMapping: canAddToSelectedMapping,\n      canAddFieldToSelectedMapping: (f) =>\n        isFieldAddableToSelection('target', f),\n      onShowMappingDetails: selectMapping,\n      onAddToSelectedMapping: onAddToMapping,\n      canRemoveFromSelectedMapping: (f) =>\n        isFieldRemovableFromSelection('target', f),\n      onRemoveFromSelectedMapping: onRemoveFromMapping,\n      onCreateProperty: (isSource: boolean) => {\n        handlers.onCreateProperty(isSource, targetProperties);\n      },\n      onEditProperty: (property, scope, isSource) => {\n        const [leftPart] = property.split(' ');\n        const valueType = getPropertyType(leftPart, scope, isSource);\n        handlers.onEditProperty(\n          {\n            name: leftPart,\n            valueType,\n            scope,\n          },\n          false,\n          targetProperties,\n        );\n      },\n      onDeleteProperty: handlers.onDeleteProperty,\n      onDeleteDocument: allowDelete\n        ? (id) => handlers.onDeleteDocument(id, false)\n        : undefined,\n      onCaptureDocumentID: (id) => handlers.onCaptureDocumentID(id),\n      onChangeDocumentName: (id, name) =>\n        handlers.onChangeDocumentName({\n          id: id,\n          name: name,\n          isSource: false,\n        }),\n      onCustomClassSearch: allowCustomJavaClasses\n        ? (isSource: boolean) => handlers.onEnableCustomClass(isSource)\n        : undefined,\n      onImportDocument: allowImport\n        ? (id) => handlers.onImportDocument(id, false)\n        : undefined,\n      onSearch: searchTargets,\n      shouldShowMappingPreviewForField,\n      onFieldPreviewChange,\n      canStartMapping: (field) => !field.isConnected,\n      onStartMapping: (field) => onCreateMapping(undefined, field),\n      onEditCSVParams: (docId, isSource) => {\n        handlers.onEditCSVParams(docId, isSource);\n      },\n    }),\n    [\n      selectMapping,\n      onAddToMapping,\n      onRemoveFromMapping,\n      handlers,\n      allowDelete,\n      allowCustomJavaClasses,\n      allowImport,\n      searchTargets,\n      shouldShowMappingPreviewForField,\n      onFieldPreviewChange,\n      onCreateMapping,\n      canAddToSelectedMapping,\n      isFieldAddableToSelection,\n      isFieldRemovableFromSelection,\n      targetProperties,\n    ],\n  );\n\n  const currentView = useMemo(() => {\n    switch (activeView) {\n      case 'ColumnMapper':\n        return (\n          <SourceTargetView\n            sourceProperties={sourceProperties}\n            targetProperties={targetProperties}\n            constants={constants}\n            sources={sources}\n            mappings={mappings}\n            targets={targets}\n            selectedMappingId={selectedMapping?.id}\n            onSelectMapping={selectMapping}\n            showMappingPreview={showMappingPreview}\n            showTypes={showTypes}\n            sourceEvents={sourceEvents}\n            targetEvents={targetEvents}\n          />\n        );\n      case 'MappingTable':\n        return (\n          <MappingTableView\n            mappings={mappings}\n            onSelectMapping={selectMapping}\n            shouldShowMappingPreview={shouldShowMappingPreview}\n            onFieldPreviewChange={onFieldPreviewChange}\n          />\n        );\n      case 'NamespaceTable':\n        return (\n          <NamespaceTableView\n            sources={sources}\n            onCreateNamespace={handlers.onCreateNamespace}\n            onEditNamespace={(\n              docName: string,\n              alias: string,\n              uri: string,\n              locationUri: string,\n              targetNamespace: boolean,\n            ) =>\n              handlers.onEditNamespace(docName, {\n                alias,\n                uri,\n                locationUri,\n                targetNamespace,\n              })\n            }\n            onDeleteNamespace={handlers.deleteNamespace}\n          />\n        );\n      default:\n        return <>TODO</>;\n    }\n  }, [\n    activeView,\n    constants,\n    handlers,\n    mappings,\n    onFieldPreviewChange,\n    sourceProperties,\n    targetProperties,\n    selectMapping,\n    selectedMapping,\n    shouldShowMappingPreview,\n    showMappingPreview,\n    showTypes,\n    sourceEvents,\n    sources,\n    targetEvents,\n    targets,\n  ]);\n\n  const renderSidebar = useSidebar({\n    onCreateConstant: () => {\n      handlers.onCreateConstant(constants, true);\n    },\n    onCreateProperty: (isSource: boolean) => {\n      if (isSource) {\n        handlers.onCreateProperty(isSource, sourceProperties, true);\n      } else {\n        handlers.onCreateProperty(isSource, targetProperties, true);\n      }\n    },\n    onRemoveMapping: handlers.onDeleteSelectedMapping,\n    onEditEnum: handlers.onEditMappingEnumeration,\n    isEnumMapping: isEnumerationMapping,\n  });\n\n  return (\n    <FieldsDndProvider>\n      <CanvasProvider>\n        <MainLayout\n          loading={pending}\n          contextToolbar={contextToolbar}\n          expressionToolbar={\n            activeView !== 'NamespaceTable' && expressionToolbar\n          }\n          showSidebar={!!selectedMapping}\n          renderSidebar={renderSidebar}\n        >\n          {currentView}\n        </MainLayout>\n        <FieldDragLayer />\n        <AlertGroup isToast>\n          {notifications\n            .filter((n) => !n.isRead && !n.mappingId)\n            .slice(0, 5)\n            .map(({ id, variant, title, description }) => (\n              <TimedToast\n                variant={variant}\n                title={title}\n                key={id}\n                onClose={() => markNotificationRead(id)}\n                onTimeout={() => markNotificationRead(id)}\n              >\n                {description}\n              </TimedToast>\n            ))}\n        </AlertGroup>\n        {dialogs}\n      </CanvasProvider>\n    </FieldsDndProvider>\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  AboutToolbarItem,\n  AddMappingToolbarItem,\n  AtlasmapToolbarItem,\n  ToggleColumnMapperViewToolbarItem,\n  ToggleMappedFieldsToolbarItem,\n  ToggleMappingPreviewToolbarItem,\n  ToggleMappingTableViewToolbarItem,\n  ToggleNamespaceTableViewToolbarItem,\n  ToggleTypesToolbarItem,\n  ToggleUnmappedFieldsToolbarItem,\n} from './toolbarItems';\nimport React, { useMemo, useState } from 'react';\n\nimport { ContextToolbar } from '../Layout';\nimport { ToolbarGroup } from '@patternfly/react-core';\nimport { useAtlasmap } from './AtlasmapProvider';\nimport { useToggle } from './utils';\n\nexport type Views =\n  | 'ColumnMapper'\n  | 'MappingTable'\n  | 'NamespaceTable'\n  | 'FreeView';\n\nexport interface IUseContextToolbarHandlers {\n  onImportADMArchiveFile: (file: File) => void;\n  onImportJarFile: (file: File) => void;\n  onExportAtlasFile: () => void;\n  onResetAtlasmap: () => void;\n  onAbout: () => void;\n}\n\nexport interface IUseContextToolbarData {\n  showImportAtlasFileToolbarItem?: boolean;\n  showImportJarFileToolbarItem?: boolean;\n  showExportAtlasFileToolbarItem?: boolean;\n  showResetToolbarItem?: boolean;\n\n  showColumnMapperViewToolbarItem?: boolean;\n  showMappingTableViewToolbarItem?: boolean;\n  showNamespaceTableViewToolbarItem?: boolean;\n\n  showToggleMappingPreviewToolbarItem?: boolean;\n  showToggleTypesToolbarItem?: boolean;\n  showToggleMappedFieldsToolbarItem?: boolean;\n  showToggleUnmappedFieldsToolbarItem?: boolean;\n  showAddNewMappingToolbarItem?: boolean;\n}\n\nexport function useContextToolbar({\n  showImportAtlasFileToolbarItem = true,\n  showImportJarFileToolbarItem = true,\n  showExportAtlasFileToolbarItem = true,\n  showResetToolbarItem = true,\n\n  showColumnMapperViewToolbarItem = true,\n  showMappingTableViewToolbarItem = true,\n  showNamespaceTableViewToolbarItem = true,\n\n  showToggleMappingPreviewToolbarItem = true,\n  showToggleTypesToolbarItem = true,\n  showToggleMappedFieldsToolbarItem = true,\n  showToggleUnmappedFieldsToolbarItem = true,\n  showAddNewMappingToolbarItem = true,\n\n  onImportADMArchiveFile,\n  onImportJarFile,\n  onExportAtlasFile,\n  onResetAtlasmap,\n  onAbout,\n}: IUseContextToolbarData & IUseContextToolbarHandlers) {\n  const {\n    toggleMappingPreview: amToggleMappingPreview,\n    toggleShowMappedFields: amToggleShowMappedFields,\n    toggleShowUnmappedFields: amToggleShowUnmappedFields,\n    newMapping,\n  } = useAtlasmap();\n\n  const [activeView, setActiveView] = useState<Views>('ColumnMapper');\n  const { state: showMappingPreview, toggle: toggleShowMappingPreview } =\n    useToggle(false, amToggleMappingPreview);\n  const { state: showTypes, toggle: toggleShowTypes } = useToggle(true);\n  const { state: showMappedFields, toggle: toggleShowMappedFields } = useToggle(\n    true,\n    amToggleShowMappedFields,\n  );\n  const { state: showUnmappedFields, toggle: toggleShowUnmappedFields } =\n    useToggle(true, amToggleShowUnmappedFields);\n\n  const contextToolbar = useMemo(\n    () => (\n      <ContextToolbar>\n        {(showImportAtlasFileToolbarItem ||\n          showImportJarFileToolbarItem ||\n          showExportAtlasFileToolbarItem ||\n          showResetToolbarItem) && (\n          <ToolbarGroup variant=\"button-group\" spacer={{ default: 'spacerMd' }}>\n            <AtlasmapToolbarItem\n              showImportAtlasFileToolbarItem={showImportAtlasFileToolbarItem}\n              showImportJarFileToolbarItem={showImportJarFileToolbarItem}\n              showExportAtlasFileToolbarItem={showExportAtlasFileToolbarItem}\n              showResetToolbarItem={showResetToolbarItem}\n              onImportAtlasFile={onImportADMArchiveFile}\n              onImportJarFile={onImportJarFile}\n              onExportAtlasFile={onExportAtlasFile}\n              onResetAtlasmap={onResetAtlasmap}\n            />\n          </ToolbarGroup>\n        )}\n        {(showColumnMapperViewToolbarItem ||\n          showMappingTableViewToolbarItem ||\n          showNamespaceTableViewToolbarItem) && (\n          <ToolbarGroup\n            variant=\"icon-button-group\"\n            spacer={{ default: 'spacerMd' }}\n          >\n            {showColumnMapperViewToolbarItem && (\n              <ToggleColumnMapperViewToolbarItem\n                toggled={activeView === 'ColumnMapper'}\n                onClick={() => setActiveView('ColumnMapper')}\n              />\n            )}\n            {showMappingTableViewToolbarItem && (\n              <ToggleMappingTableViewToolbarItem\n                toggled={activeView === 'MappingTable'}\n                onClick={() => setActiveView('MappingTable')}\n              />\n            )}\n            {showNamespaceTableViewToolbarItem && (\n              <ToggleNamespaceTableViewToolbarItem\n                toggled={activeView === 'NamespaceTable'}\n                onClick={() => setActiveView('NamespaceTable')}\n              />\n            )}\n          </ToolbarGroup>\n        )}\n        <ToolbarGroup variant=\"icon-button-group\">\n          {showToggleMappingPreviewToolbarItem &&\n            (activeView === 'ColumnMapper' ||\n              activeView === 'MappingTable') && (\n              <ToggleMappingPreviewToolbarItem\n                toggled={showMappingPreview}\n                onClick={toggleShowMappingPreview}\n              />\n            )}\n          {showToggleTypesToolbarItem &&\n            (activeView === 'ColumnMapper' ||\n              activeView === 'MappingTable') && (\n              <ToggleTypesToolbarItem\n                toggled={showTypes}\n                onClick={toggleShowTypes}\n              />\n            )}\n          {showToggleMappedFieldsToolbarItem &&\n            activeView === 'ColumnMapper' && (\n              <ToggleMappedFieldsToolbarItem\n                toggled={showMappedFields}\n                onClick={toggleShowMappedFields}\n              />\n            )}\n          {showToggleUnmappedFieldsToolbarItem &&\n            activeView === 'ColumnMapper' && (\n              <ToggleUnmappedFieldsToolbarItem\n                toggled={showUnmappedFields}\n                onClick={toggleShowUnmappedFields}\n              />\n            )}\n          {showAddNewMappingToolbarItem &&\n            (activeView === 'ColumnMapper' ||\n              activeView === 'MappingTable') && (\n              <AddMappingToolbarItem onClick={newMapping} />\n            )}\n          {showAddNewMappingToolbarItem &&\n            (activeView === 'ColumnMapper' ||\n              activeView === 'MappingTable') && (\n              <AboutToolbarItem onClick={onAbout} />\n            )}\n        </ToolbarGroup>\n      </ContextToolbar>\n    ),\n    [\n      showImportAtlasFileToolbarItem,\n      showImportJarFileToolbarItem,\n      showExportAtlasFileToolbarItem,\n      showResetToolbarItem,\n      onImportADMArchiveFile,\n      onImportJarFile,\n      onExportAtlasFile,\n      onResetAtlasmap,\n      onAbout,\n      showColumnMapperViewToolbarItem,\n      showMappingTableViewToolbarItem,\n      showNamespaceTableViewToolbarItem,\n      activeView,\n      showToggleMappingPreviewToolbarItem,\n      showMappingPreview,\n      toggleShowMappingPreview,\n      showToggleTypesToolbarItem,\n      showTypes,\n      toggleShowTypes,\n      showToggleMappedFieldsToolbarItem,\n      showMappedFields,\n      toggleShowMappedFields,\n      showToggleUnmappedFieldsToolbarItem,\n      showUnmappedFields,\n      toggleShowUnmappedFields,\n      showAddNewMappingToolbarItem,\n      newMapping,\n    ],\n  );\n\n  return {\n    activeView,\n    showMappingPreview,\n    showTypes,\n    showMappedFields,\n    showUnmappedFields,\n    contextToolbar,\n  };\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  IAtlasmapField,\n  IMappingDetailsViewProps,\n  MappingDetailsView,\n} from '../Views';\nimport React, { useCallback } from 'react';\n\nimport { CommonUtil } from '@atlasmap/core';\nimport { useAtlasmap } from './AtlasmapProvider';\n\nexport interface IUseSidebarProps {\n  onCreateConstant: (\n    constants: any | null,\n    addToActiveMapping?: boolean,\n  ) => void;\n  onCreateProperty: (\n    isSource: boolean,\n    props: any | null,\n    addToActiveMapping?: boolean,\n  ) => void;\n  onRemoveMapping: () => void;\n  onEditEnum: (cb: any) => void;\n  isEnumMapping: () => boolean;\n}\n\nexport function useSidebar({\n  onCreateConstant,\n  onCreateProperty,\n  onRemoveMapping,\n  onEditEnum,\n  isEnumMapping,\n}: IUseSidebarProps) {\n  const {\n    selectedMapping,\n    deselectMapping,\n    removeMappedFieldFromCurrentMapping,\n    fromMappedFieldToIMappingField,\n    flatSources,\n    flatTargets,\n    constants,\n    sourceProperties,\n    targetProperties,\n    canAddToSelectedMapping,\n    isFieldAddableToSelection,\n    addToCurrentMapping,\n    notifications,\n    markNotificationRead,\n    mappingExpressionEnabled,\n\n    //mapping details\n    getMultiplicityActions,\n    getMultiplicityActionDelimiters,\n    handleIndexChange,\n    handleNewTransformation,\n    handleRemoveTransformation,\n    handleTransformationChange,\n    handleTransformationArgumentChange,\n    handleMultiplicityChange,\n    handleMultiplicityArgumentChange,\n  } = useAtlasmap();\n\n  return useCallback(() => {\n    if (selectedMapping) {\n      const m = selectedMapping.mapping;\n      const sources = m\n        .getMappedFields(true)\n        .map(fromMappedFieldToIMappingField);\n      const targets = m\n        .getMappedFields(false)\n        .map(fromMappedFieldToIMappingField);\n      const showSourcesIndex =\n        sources.length > 1 &&\n        m.transition.isManyToOneMode() &&\n        !m.transition.enableExpression;\n      const showTargetsIndex =\n        targets.length > 1 &&\n        m.transition.isOneToManyMode() &&\n        !m.transition.enableExpression;\n\n      const multiplicityFieldAction = m.transition.transitionFieldAction;\n\n      let multiplicity: IMappingDetailsViewProps['multiplicity'] = undefined;\n      if (multiplicityFieldAction) {\n        const transformations = getMultiplicityActions(m);\n        const transformationsOptions = transformations.map((a) => ({\n          label: CommonUtil.toDisplayable(a.name),\n          name: a.name,\n          value: a.name,\n        }));\n        const delimiters = getMultiplicityActionDelimiters();\n        const delimitersOptions = delimiters.map((a) => ({\n          name: a.prettyName!,\n          value: a.actualDelimiter,\n        }));\n\n        multiplicity = {\n          name: multiplicityFieldAction.name,\n          transformationsOptions,\n          transformationsArguments: multiplicityFieldAction.argumentValues.map(\n            (a) => ({\n              label: CommonUtil.toDisplayable(a.name),\n              name: a.name,\n              type: multiplicityFieldAction.definition?.arguments.find(\n                (arg) => arg.name === a.name,\n              )?.type,\n              value: a.value,\n              options: a.name === 'delimiter' ? delimitersOptions : undefined,\n            }),\n          ),\n          onChange: (name) =>\n            handleMultiplicityChange(multiplicityFieldAction, name),\n          onArgumentChange: (argumentName, arguemntValue) =>\n            handleMultiplicityArgumentChange(\n              multiplicityFieldAction,\n              argumentName,\n              arguemntValue,\n            ),\n        };\n      }\n\n      const handleRemoveMappedField = (isSource: boolean, index: number) => {\n        const amField = selectedMapping.mapping.getMappedFieldForIndex(\n          '' + (index + 1),\n          isSource,\n        );\n        if (amField) {\n          removeMappedFieldFromCurrentMapping(amField);\n        }\n      };\n\n      /**\n       * @todo Field search has to be consolidated when server side field search is implemented,\n       * see {@link MappingExpressionService.executeFieldSearch()} and\n       * {@link DocumentManagementService.filterDocumentFields()}\n       * https://github.com/atlasmap/atlasmap/issues/603\n       */\n      const addableSources = [\n        constants?.fields,\n        sourceProperties?.fields,\n        flatSources,\n      ]\n        .flatMap((fields) => (fields ? (fields as IAtlasmapField[]) : []))\n        .filter((f) => isFieldAddableToSelection('source', f));\n\n      const addableTargets = [targetProperties?.fields, flatTargets]\n        .flatMap((fields) => (fields ? (fields as IAtlasmapField[]) : []))\n        .filter((f) => isFieldAddableToSelection('target', f));\n\n      return (\n        <MappingDetailsView\n          notifications={notifications.filter(\n            (n) => n.mappingId === selectedMapping.id && !n.isRead,\n          )}\n          sources={sources}\n          targets={targets}\n          addableSources={addableSources}\n          addableTargets={addableTargets}\n          onClose={deselectMapping}\n          onRemoveMapping={onRemoveMapping}\n          onRemoveMappedField={handleRemoveMappedField}\n          showSourcesIndex={showSourcesIndex}\n          showTargetsIndex={showTargetsIndex}\n          mappingExpressionEnabled={mappingExpressionEnabled}\n          multiplicity={multiplicity}\n          onIndexChange={handleIndexChange}\n          onNewTransformation={handleNewTransformation}\n          onRemoveTransformation={handleRemoveTransformation}\n          onTransformationChange={handleTransformationChange}\n          onTransformationArgumentChange={handleTransformationArgumentChange}\n          onAddFieldToMapping={(_isSource, f) => addToCurrentMapping(f.amField)}\n          onNotificationRead={markNotificationRead}\n          onEditEnum={onEditEnum}\n          isEnumMapping={isEnumMapping}\n          onCreateConstant={onCreateConstant}\n          onCreateProperty={(isSource) => {\n            if (isSource) {\n              onCreateProperty(isSource, sourceProperties, true);\n            } else {\n              onCreateProperty(isSource, targetProperties, true);\n            }\n          }}\n          canAddToSelectedMapping={canAddToSelectedMapping}\n        />\n      );\n    }\n    return <>TODO: error</>;\n  }, [\n    selectedMapping,\n    fromMappedFieldToIMappingField,\n    constants,\n    sourceProperties,\n    targetProperties,\n    flatSources,\n    flatTargets,\n    notifications,\n    deselectMapping,\n    onRemoveMapping,\n    onEditEnum,\n    isEnumMapping,\n    handleIndexChange,\n    handleNewTransformation,\n    handleRemoveTransformation,\n    handleTransformationChange,\n    handleTransformationArgumentChange,\n    markNotificationRead,\n    getMultiplicityActions,\n    getMultiplicityActionDelimiters,\n    handleMultiplicityChange,\n    handleMultiplicityArgumentChange,\n    removeMappedFieldFromCurrentMapping,\n    isFieldAddableToSelection,\n    addToCurrentMapping,\n    mappingExpressionEnabled,\n    onCreateConstant,\n    onCreateProperty,\n    canAddToSelectedMapping,\n  ]);\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Button, Tooltip } from '@patternfly/react-core';\nimport React, { FunctionComponent } from 'react';\n\nimport { TrashIcon } from '@patternfly/react-icons';\n\nexport interface IDeleteMappingActionProps {\n  id: string;\n  onClick: () => void;\n}\nexport const DeleteMappingAction: FunctionComponent<IDeleteMappingActionProps> =\n  ({ id, onClick }) => (\n    <Tooltip\n      position={'auto'}\n      enableFlip={true}\n      content={<div>Remove the mapping</div>}\n    >\n      <Button\n        variant=\"plain\"\n        onClick={onClick}\n        aria-label=\"Remove the mapping\"\n        data-testid={`remove-${id}-mapping-button`}\n      >\n        <TrashIcon />\n      </Button>\n    </Tooltip>\n  );\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  Dropdown,\n  DropdownItem,\n  DropdownSeparator,\n  DropdownToggle,\n  DropdownToggleAction,\n} from '@patternfly/react-core';\nimport {\n  FolderCloseIcon,\n  FolderOpenIcon,\n  TrashIcon,\n} from '@patternfly/react-icons';\nimport React, { FunctionComponent, useState } from 'react';\n\nexport interface IDocumentActions {\n  onExpandFields: () => void;\n  onCollapseFields: () => void;\n  onDelete: () => void;\n}\n\nexport const DocumentActions: FunctionComponent<IDocumentActions> = ({\n  onExpandFields,\n  onCollapseFields,\n  onDelete,\n}) => {\n  const [showActions, setShowActions] = useState(false);\n  const toggleActions = (open: boolean) => setShowActions(open);\n\n  return (\n    <Dropdown\n      toggle={\n        <DropdownToggle\n          splitButtonItems={[\n            <DropdownToggleAction key=\"action\" onClick={onExpandFields}>\n              <FolderOpenIcon />\n            </DropdownToggleAction>,\n          ]}\n          splitButtonVariant=\"action\"\n          onToggle={toggleActions}\n        />\n      }\n      isOpen={showActions}\n      position={'right'}\n      dropdownItems={[\n        <DropdownItem\n          icon={<FolderCloseIcon />}\n          key={'collapse'}\n          onClick={onCollapseFields}\n        >\n          Collapse all\n        </DropdownItem>,\n        <DropdownSeparator key={'sep-1'} />,\n        <DropdownItem icon={<TrashIcon />} key={'delete'} onClick={onDelete}>\n          Remove instance or schema file\n        </DropdownItem>,\n      ]}\n    />\n  );\n};\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { Button, Tooltip } from '@patternfly/react-core';\nimport React, { FunctionComponent } from 'react';\n\nimport { ExchangeAltIcon } from '@patternfly/react-icons';\n\nexport interface IEditMappingActionProps {\n  id: string;\n  onClick: () => void;\n}\nexport const EditMappingAction: FunctionComponent<IEditMappingActionProps> = ({\n  id,\n  onClick,\n}) => (\n  <Tooltip\n    position={'auto'}\n    enableFlip={true}\n    content={<div>Modify the mapping</div>}\n  >\n    <Button\n      variant=\"plain\"\n      onClick={onClick}\n      aria-label=\"Modify the mapping\"\n      data-testid={`modify-the-mapping-${id}-button`}\n    >\n      <ExchangeAltIcon />\n    </Button>\n  </Tooltip>\n);\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport {\n  Button,\n  FormSelect,\n  FormSelectOption,\n  Label,\n  Modal,\n  TextInput,\n} from '@patternfly/react-core';\nimport React, {\n  FormEvent,\n  ReactPortal,\n  useCallback,\n  useRef,\n  useState,\n} from 'react';\n\nimport { CancelCallback } from './useSingleInputDialog';\nimport { createPortal } from 'react-dom';\nimport styles from './useInputTextSelectDialog.module.css';\n\nexport type ConfirmInputTextCallback = (\n  value1: string,\n  value2: string,\n  selectValue: string,\n) => void;\n\nexport interface IUseInputTextSelectDialogArgs {\n  title: string;\n  textLabel1: string;\n  textValue1: React.MutableRefObject<string>;\n  text1ReadOnly: boolean;\n  textLabel2: string;\n  textValue2: React.MutableRefObject<string>;\n  selectLabel: string;\n  selectValues: string[][];\n  selectDefault: React.MutableRefObject<number>;\n  modalContainer: HTMLElement;\n}\n\nexport function useInputTextSelectDialog({\n  title,\n  textLabel1,\n  textValue1,\n  text1ReadOnly,\n  textLabel2,\n  textValue2,\n  selectLabel,\n  selectValues,\n  selectDefault,\n  modalContainer,\n}: IUseInputTextSelectDialogArgs): [\n  ReactPortal,\n  (onConfirm?: ConfirmInputTextCallback, onCancel?: CancelCallback) => void,\n] {\n  const onConfirm = useRef<ConfirmInputTextCallback | undefined>();\n  const onCancel = useRef<CancelCallback | undefined>();\n  const [isOpen, setIsOpen] = useState(false);\n  const [isValid, setIsValid] = useState(true);\n  const [value1, setValue1] = useState(textValue1.current);\n  const [value2, setValue2] = useState(textValue2.current);\n  const [selectValue, setSelectValue] = useState('');\n  const openModal = (\n    onConfirmCb?: ConfirmInputTextCallback,\n    onCancelCb?: CancelCallback,\n  ) => {\n    onConfirm.current = onConfirmCb;\n    onCancel.current = onCancelCb;\n    setIsOpen(true);\n    setValue1(textValue1.current);\n    setValue2(textValue2.current);\n    setSelectValue(selectValues[selectDefault.current][0]);\n  };\n\n  const closeModal = () => setIsOpen(false);\n\n  const handleTextInputChange = (\n    value: string,\n    event: FormEvent<HTMLInputElement>,\n  ) => {\n    setValue1(value);\n    setIsValid((event.target as HTMLInputElement).reportValidity());\n  };\n\n  const handleTextInputChange2 = (\n    value: string,\n    event: FormEvent<HTMLInputElement>,\n  ) => {\n    setValue2(value);\n    setIsValid((event.target as HTMLInputElement).reportValidity());\n  };\n\n  const handleSelect = (value: string) => {\n    setSelectValue(value);\n  };\n\n  const handleConfirm = useCallback(() => {\n    if (isValid && onConfirm.current) {\n      onConfirm.current(value1, value2, selectValue);\n    }\n    closeModal();\n  }, [onConfirm, value1, value2, selectValue, isValid]);\n\n  const handleCancel = useCallback(() => {\n    if (onCancel.current) {\n      onCancel.current();\n    }\n    closeModal();\n  }, [onCancel]);\n\n  const modal = createPortal(\n    <Modal\n      variant=\"small\"\n      title={title}\n      isOpen={isOpen}\n      onClose={closeModal}\n      actions={[\n        <Button\n          key={'confirm'}\n          variant={'primary'}\n          onClick={handleConfirm}\n          isDisabled={!isValid}\n          aria-label=\"Confirm\"\n          data-testid={'text-select-dialog-confirm-button'}\n        >\n          Confirm\n        </Button>,\n        <Button\n          key={'cancel'}\n          variant={'link'}\n          onClick={handleCancel}\n          aria-label=\"Cancel\"\n          data-testid={'text-select-dialog-cancel-button'}\n        >\n          Cancel\n        </Button>,\n      ]}\n    >\n      {textLabel1 && (\n        <>\n          <TextInput\n            className={styles.iGroupTextLabel}\n            value={value1}\n            type=\"text\"\n            onChange={handleTextInputChange}\n            aria-label={title}\n            isRequired={true}\n            validated={isValid ? 'default' : 'error'}\n            isDisabled={text1ReadOnly}\n            placeholder={textLabel1}\n            data-testid={'itsd-value1-text-input'}\n            autoFocus\n          />\n        </>\n      )}\n      {textLabel2.length > 0 && (\n        <>\n          <TextInput\n            className={styles.iGroupTextLabel}\n            value={value2}\n            type=\"text\"\n            onChange={handleTextInputChange2}\n            aria-label={title}\n            isRequired={true}\n            validated={isValid ? 'default' : 'error'}\n            placeholder={textLabel2}\n            data-testid={'itsd-value2-text-input'}\n          />\n        </>\n      )}\n      {selectLabel && (\n        <>\n          <Label className={styles.iSelectLabel}>{selectLabel}</Label>\n          <FormSelect\n            className={styles.iSelectBody}\n            value={selectValue}\n            id={selectValue}\n            onChange={handleSelect}\n            data-testid={'itsd-form-select'}\n          >\n            {selectValues.map(\n              (selectValue: string[], idx: number | undefined) => (\n                <FormSelectOption\n                  label={selectValue[1]}\n                  value={selectValue[0]}\n                  key={idx}\n                />\n              ),\n            )}\n          </FormSelect>\n        </>\n      )}\n    </Modal>,\n    modalContainer,\n  );\n\n  return [modal, openModal];\n}\n","/*\n    Copyright (C) 2017 Red Hat, Inc.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n            http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\nimport { ReactNode, useCallback, useRef, useState } from 'react';\n\nexport function useLatestValue(): [\n  ReactNode | undefined,\n  (el: ReactNode) => void,\n] {\n  const [element, setElement] = useState<ReactNode | undefined>();\n  const previousElement = useRef<ReactNode | null>();\n  const handleSetElement = useCallback(\n    (newElement: ReactNode) => {\n      if (previousElement.current !== newElement) {\n        previousElement.current = newElement;\n        setElement(previousElement.current);\n      }\n    },\n    [setElement, previousElement],\n  );\n  return [element, handleSetElement];\n}\n"],"names":["setDocCSVParams","docId","isSource","parameters","cfg","ConfigModel","getConfig","getDocDef","inspectionParameters","mappingService","notifyMappingUpdated","fileService","updateDigestFile","importInstanceSchema","selectedFile","isSchema","Promise","resolve","initCfg","initialized","initializationService","updateLoadingStatus","name","documentService","importNonJavaDocument","then","updateStatus","getCustomClassNameOptions","reject","getLibraryClassNames","classNames","removeDocumentRef","docDef","removeDocumentReferenceFromAllMappings","id","CommonUtil","removeItemFromArray","sourceDocs","targetDocs","changeDocumentName","newDocName","createNamespace","docName","alias","uri","locationUri","isTarget","getDocDefByName","namespace","createdByUser","getPrettyLabel","copy","Object","assign","copyFrom","n","namespaces","push","editNamespace","initAlias","getNamespaceForAlias","deleteNamespace","filter","getDocs","match","getName","type","toLowerCase","enableCustomClass","selectedClass","selectedCollection","importJavaDocument","getPropertyScopeOptions","scopeOptions","label","value","propertyDocOption","getDocCSVParams","doc","activeMapping","mappings","_cfg$mappings","ExpressionNode","prefix","uuid","sequence","getUuid","this","TextNode","str","PREFIX","toText","toHTML","replace","FieldNode","mapping","mfield","index","field","getMappedFieldForIndex","toString","getIndexForMappedField","path","getExpression","_cfg$mappings2","expression","transition","setConfigModel","ExpressionModel","generateInitialExpression","updateFieldReference","getMappingExpression","_cfg$mappings3","_cfg$mappings3$active","_cfg$mappings3$active2","enableExpression","copyToClipboard","text","textArea","document","createElement","body","appendChild","select","execCommand","err","errorService","addError","ErrorInfo","message","level","ErrorLevel","ERROR","scope","ErrorScope","APPLICATION","ErrorType","INTERNAL","removeChild","InitializationService","ky","create","headers","configModel","fromFieldToIFieldsGroup","fields","children","map","fromFieldToIFields","f","length","visibleInCurrentDocumentSearch","isCollection","isInCollection","amField","fromFieldToIFieldsNode","partOfMapping","showMappedFields","showUnmappedFields","getFieldLabel","findMappingsForField","fromMappingModelToImapping","d","hasTransformations","partOfTransformation","isAttribute","isConnected","isDisabled","enumeration","fromNamespaceModelToINamespace","fromDocumentDefinitionToFieldGroup","def","fromMappedFieldToIMappingField","mappedField","transformations","actions","a","options","getMappingActions","toDisplayable","arguments","definition","av","idx","serviceObject","title","argumentValues","values","avv","undefined","errorLevelToVariant","INFO","WARN","errorMessageToString","JSON","stringify","errorTypeToString","USER","VALIDATION","PREVIEW","FORM","errorInfoToNotification","e","variant","getPrettyName","description","identifier","mappingId","_e$mapping","m","sourceFields","getUserMappedFields","targetFields","fromMappingDefinitionToIMappings","executeFieldSearch","searchFilter","expressionService","mappingExpressionAddField","selectedDocId","selectedField","newTextNode","atIndex","isTrailer","addFieldToExpression","mappingExpressionInit","getMappedFields","mf","isPadField","forEach","removeMappedField","mappingExpressionClearText","nodeId","startOffset","endOffset","uuidNode","clearText","mappingExpressionInsertText","offset","insertText","mappingExpressionObservable","_initializationServic","_initializationServic2","_initializationServic3","expressionUpdated$","mappingExpressionRemoveField","tokenPosition","removeNext","removeToken","onFieldPreviewChange","toggleExpressionMode","fieldActionService","getActionsAppliesToField","Multiplicity","ONE_TO_ONE","getMultiplicityActions","mode","TransitionMode","ONE_TO_MANY","MANY_TO_ONE","getMultiplicityActionDelimiters","TransitionModel","delimiterModels","handleActionChange","action","populateFieldAction","i","handleIndexChange","currentIndex","target","sourceField","newIndex","mappedFields","maxIndex","addPlaceholders","getMappedFieldForField","moveMappedFieldTo","handleNewTransformation","FieldAction","handleTransformationChange","currentTransformationIndex","newTransformationName","_cfg$mappings4","newAction","find","handleTransformationArgumentChange","transformationIndex","argumentName","argumentValue","_cfg$mappings5","setArgumentValue","handleRemoveTransformation","_cfg$mappings6","handleMultiplicityChange","_cfg$mappings7","handleMultiplicityArgumentChange","multiplicityFieldAction","selectMapping","deselectMapping","createConstant","constName","constValue","constType","addToActiveMapping","deleteConstant","editConstant","origName","getConstantType","createProperty","propName","propType","propScope","deleteProperty","editProperty","newName","newScope","getPropertyType","createMapping","source","ms","MAPPING","exclusionReason","getFieldSelectionExclusionReason","addToCurrentMapping","addNewMapping","newMapping","removeMapping","mappingModel","addFieldToActiveMapping","removeFromCurrentMapping","updateMappedField","removeMappedFieldFromCurrentMapping","getEnumerationValues","_cfg$mappings8","getFieldEnums","getNode","_uuidNode$mappedField","enumValues","setSelectedEnumValue","selectedEnumNodeId","selectedEnumValueIndex","_uuidNode$mappedField2","setEnumFieldValue","updateEnumerationValues","enumerationValues","_cfg$mappings9","isEnumerationMapping","_cfg$mappings10","deleteAtlasFile","fileId","updateInitComplete","documentExists","file","exportADMArchiveFile","fileName","exportADMArchive","importADMArchiveFile","initializeWithADMArchiveFile","importJarFile","resetAtlasmap","resetAtlasMap","getRuntimeVersion","getUIVersion","toggleMappingPreview","enabled","previewService","toggleShowMappedFields","systemInitializedSource","next","toggleShowUnmappedFields","useToggle","initialState","onToggle","useState","state","setState","useEffect","toggle","useCallback","newState","toggleOff","toggleOn","setToggle","CanvasContext","createContext","CanvasProvider","allowPanning","initialWidth","initialHeight","initialZoom","initialPanX","initialPanY","width","height","offsetLeft","offsetTop","canvasDimension","setCanvasDimension","rects","useRef","removeRect","current","r","addRect","rect","getRects","redrawCallbacks","addRedrawListener","cb","removeRedrawListener","c","frame","requestAnimationFrame","loop","len","cancelAnimationFrame","x","y","panX","panY","setPan","zoom","setZoom","updateZoom","tick","currentZoom","Math","max","min","resetZoom","resetPan","isPanning","setIsPanning","bindCanvas","useGesture","onDrag","movement","last","memo","first","onWheel","delta","drag","delay","React","Provider","dimensions","setDimension","pan","useCanvas","context","useContext","Error","xDomain","useMemo","scaleLinear","range","domain","yDomain","CanvasTransforms","transform","noSize","top","left","right","bottom","useDimensions","liveMeasure","previousDimensions","setDimensions","ref","measure","getBoundingClientRect","b","useLayoutEffect","window","addEventListener","removeEventListener","Canvas","className","style","isFilled","props","dimensionsRef","svgStyle","cursor","userSelect","backgroundSize","css","HTMLObject","forwardRef","Arc","start","end","color","hoveredColor","strokeWidth","toggleHoverOn","toggleHoverOff","s","appliedColor","linkHorizontal","linkVertical","link","onMouseEnter","onMouseLeave","pointerEvents","stroke","fill","onClick","useBoundingCanvasRect","convertClientX","convertClientY","convertDOMRectToCanvasRect","getBoundingCanvasRect","element","NodeRefContext","NodeRefProvider","nodes","setRef","key","Date","now","ids","Array","isArray","unsetRef","curId","useNodeRef","useNodeRect","getRect","node","boundaryRect","parentId","boundaryId","overrideWidthRect","overrideWidth","overrideHeightRect","overrideHeight","isXClipped","toJSON","clipped","NodeRef","Children","only","nodeRef","isValidElement","cloneElement","el","leftCoords","rightCoords","bottomCoords","NodesArc","startId","endId","coords","setCoords","linkType","setLinkType","calculateCoords","startRect","endRect","smallRect","bigRect","bottomId","startSideSize","endSideSize","rightId","Column","totalColumns","visible","flex","ColumnBody","Actions","ColumnHeader","Title","headingLevel","size","ColumnMapper","Columns","SearchableColumnHeader","onSearch","searchRef","onSubmit","event","preventDefault","InputGroup","TextInput","onChange","Button","SearchIcon","probablyTouch","matchMedia","matches","TouchAndPointerProvider","DndProvider","backend","TouchBackend","enableMouseEvents","MouseOnlyProvider","HTML5Backend","FieldsDndContext","FieldsDndProvider","hoveredTarget","getHoveredTarget","setHoveredTarget","useFieldsDnd","atContainer","expressionUpdatedSubscription","mappingExprInit","mappingExprObservable","DraggedField","useDragLayer","monitor","draggedField","getItem","currentOffset","getClientOffset","isDragging","DraggableField","onDrop","as","As","useDrag","item","collect","_","didDrop","getDropResult","dragRef","preview","getEmptyImage","captureDraggingState","FieldDropTarget","accept","canDrop","useDrop","isOver","isDroppable","drop","dropRef","wasOver","wasTarget","FieldDragLayer","position","zIndex","Label","AddFieldTypeahead","ariaLabelTypeAhead","placeholderText","_e","valueComps","split","selField","group","onAdd","FormSelect","placeholder","placeholderField","unshift","groups","reduce","optValue","FormSelectOption","isPlaceholder","indexOf","entries","groupName","FormSelectOptionGroup","renderOptions","AutoDropdown","isOpen","toggleOpen","Dropdown","onSelect","selectValue","ExpressionEnumSelect","selectedNodeId","enumCandidates","clearEnumSelect","onEnumSelect","onToggleEnumSelect","toggled","Select","_isPlaceholder","currentTarget","pop","selectField","SelectOption","createSelectOption","ExpressionFieldSearch","clearSearchMode","insertSelectedField","mappedFieldCandidates","onToggleFieldSearch","candidateSrcElement","trackSelection","srcElement","updateCandidate","sibling","backgroundColor","focus","onKeyHandler","_index","_innerIndex","_position","onKeyDown","nextElementSibling","previousElementSibling","firstElementChild","getAttribute","keyHandler","lastUpdatedEvent","markup","searchMode","trailerHTML","trailerID","updateExpressionMarkup","reset","innerHTML","currentExpression","moveCaretToEnd","trailerNode","querySelector","getSelection","rangeCount","getRangeAt","createRange","addRange","selectNode","childNodes","setStart","collapse","restoreCaretPosition","selection","actualNode","initializeMappingExpression","mappingExprObs","subscribe","updatedEvent","ExpressionContent","fieldSearch","getEnums","setSelEnumValue","isMappingExpressionEmpty","mappingExpression","trailerId","disabled","showEnumSelect","toggleEnumSelOn","toggleEnumSelOff","removeTokenAtCaretPosition","before","focusNode","nodeType","TEXT_NODE","focusOffset","textContent","_selection$focusNode$","startContainer","getCaretPositionNodeId","clearAtText","_selection$focusNode","parentElement","firstChild","_startContainer$first","clearAtSign","updateSearchMode","substr","initMappingExpression","unsubscribe","Form","FormGroup","fieldId","Tooltip","content","enableFlip","entryDelay","exitDelay","tabIndex","contentEditable","styles","formControl","suppressContentEditableWarning","_event","onKeyPress","ctrlKey","metaKey","altKey","insertTextAtCaretPosition","onPaste","clipboardData","pasted","getData","paddingLeft","ConditionalExpressionInput","ToolbarGroup","role","ToolbarItem","AboutDialog","onClose","uiVersion","runtimeVersion","Modal","ConfirmationDialog","onCancel","onConfirm","dataTestid","ConstantDialog","initialName","initialValue","valueType","initialValueType","valueTypeOptions","onValidation","setName","setValue","setValueType","isConstantNameUnique","setConstantNameUnique","isConstantValid","setConstantValid","ValidatedOptions","isConstantNameValid","setConstantNameValid","handleOnConfirm","handleOnCancel","handleOnNameChange","validateConstant","test","error","success","isValid","isRequired","autoFocus","validated","CustomClassDialog","customClassName","initialCustomClassName","customClassNames","collectionType","initialCollectionType","collectionTypeOptions","setCustomClassName","setCollectionType","ChangeDocumentNameDialog","documentName","setDocumentName","ExportCatalogDialog","filename","InputGroupText","LookupTableDialog","enumerationValue","sourceKey","selectedTargetEnumValue","targetEnum","setTargetEnum","sourceEnumValue","enumValue","targetEnumValues","NamespaceDialog","initialAlias","initialUri","initialLocationUri","targetNamespace","initialTargetNamespace","setAlias","setUri","setLocationUri","setTargetNamespace","Checkbox","isChecked","PropertyDialog","initialScope","setScope","isPropertyValid","setPropertyValid","isPropertyNameValid","setPropertyNameValid","isNameAndScopeUnique","setNameAndScopeUnique","validateProperty","handleOnScopeChange","ParametersDialog","initialParameters","definedParameters","setDefinedParameters","availableParameters","param","p","includes","required","handleAddParameter","concat","handleRemoveParameter","parameter","handleChangeParameterValue","handleChangeParameter","availableParameterIndex","formLabelParamRequired","marginBottom","formLabelTopPadding","isHorizontal","display","marginLeft","paddingTop","Switch","checked","String","TrashIcon","marginTop","icon","PlusIcon","DelayedBoolean","delayedValue","setDelayedValue","timer","setTimeout","clearTimeout","TruncatedString","Document","footer","selected","dropTarget","dropAccepted","stacked","selectable","noPadding","noShadows","startExpanded","onDeselect","isExpanded","toggleExpanded","handleClick","stopPropagation","handleKey","makeCardSelected","Card","isCompact","isSelected","isSelectable","CardHeader","CardActions","CardTitle","AngleDownIcon","AngleRightIcon","CardBody","DocumentField","statusIcons","showType","isFocused","isHovering","hideActions","showActions","DocumentFieldPreview","debouncedOnChange","useDebouncedCallback","defaultValue","DocumentFieldPreviewResults","DocumentFooter","CardFooter","DocumentGroup","iconTooltip","expanded","spanRef","FolderOpenIcon","FolderCloseIcon","Loading","EmptyState","EmptyStateVariant","full","EmptyStateIcon","component","Spinner","formTransStyle","formTransGroupStyle","formTransTextInputStyle","MappingTransformation","transformationsArguments","disableTransformation","onTransformationArgumentChange","onRemoveTransformation","background","onTransformationChange","transformationsOptions","argId","FieldType","BOOLEAN","renderTransformationArgumentBoolean","arg","isUserDefined","option","userDefinedOption","_arg$options","initialSelected","_arg$options2","initialUserDefined","setIsOpen","setSelected","userDefinedValue","setUserDefinedValue","Split","SplitItem","SelectVariant","single","selectedOption","selections","_arg$options3","optIndx","RenderTransformationArgumentOptions","renderTransformationArgumentText","formTransInputGroup","MappingField","info","canShowIndex","mappingExpressionEnabled","onDelete","onIndexChange","onNewTransformation","payload","InfoAltIcon","BoltIcon","count","MappingFields","onCreateConstant","onCreateProperty","canAddToSelectedMapping","CaretDownIcon","CaretRightIcon","AddCircleOIcon","TimedToast","onTimeout","elapsed","setElapsed","hovering","hoveringOn","hoveringOff","setInterval","Alert","isLiveRegion","actionClose","AlertActionCloseButton","variantLabel","TreeFocusContext","TreeFocusProvider","focusedItem","setFocusedItem","useTreeFocus","isExpandable","collapseTreeitem","expandTreeitem","getFocusableItems","from","closest","querySelectorAll","_el$parentElement","setFocus","setAttribute","setFocusToNextItem","focused","handlers","dispatchEvent","MouseEvent","view","bubbles","cancelable","setFocusToPreviousItem","setFocusToFirstItem","setFocusToLastItem","onBlur","relatedTarget","_ref$current","Tree","firstTreeItem","Accordion","asDefinitionList","TreeGroup","setSize","renderLabel","divRef","setIsExpanded","toggleExpand","toggleExpandNoPropagation","expand","focusHandlers","isPropagationStopped","AccordionItem","AccordionToggle","AccordionContent","isHidden","TreeItem","ContextToolbar","Toolbar","ToolbarContent","ExpressionToolbar","MainContent","Sidebar","show","TopologySideBar","MainLayout","loading","showSidebar","contextToolbar","expressionToolbar","controlBar","sideBar","renderSidebar","containerClasses","Stack","StackItem","MappingDetailsSidebar","onEditEnum","isEnumMapping","CloseIcon","EditIcon","CaptureDocumentIDAction","ClipboardIcon","ChangeDocumentNameAction","DeleteDocumentAction","EditCSVParamsAction","EnableJavaClassAction","onCustomClassSearch","ImportAction","onImport","useFilePicker","maxFileSize","files","HiddenFileInput","previouslyUploadedFiles","ImportIcon","TreeGroupAndNodeRefsAndDnD","showTypes","draggableType","acceptDropType","LayerGroupIcon","TreeItemWithFieldAndNodeRefsAndDnD","renderActions","renderPreview","BullseyeIcon","GripVerticalIcon","CircleIcon","AtIcon","getChildrenIds","idPrefix","TraverseFields","isVisible","FieldOrGroup","maybeGroup","maybeField","commonActions","connectedMappings","onShowMappingDetails","canAddFieldToSelectedMapping","onAddToSelectedMapping","canRemoveFromSelectedMapping","onRemoveFromSelectedMapping","canStartMapping","onStartMapping","DropdownToggle","toggleIndicator","ExchangeAltIcon","isPlain","dropdownItems","DropdownItem","hasGutter","t","UnlinkIcon","LinkIcon","ProjectDiagramIcon","ConstantsTree","onEditConstant","onDeleteConstant","PropertiesTree","onEditProperty","onDeleteProperty","SourcesColumn","onImportDocument","onDeleteDocument","onCaptureDocumentID","onChangeDocumentName","onEditCSVParams","shouldShowMappingPreviewForField","sourceProperties","constants","sources","documentId","DocumentType","CSV","TargetsColumn","targets","targetProperties","renderPreviewResult","SourceTargetLinks","selectedMappingId","onSelectMapping","sortedMappings","sort","MappingLines","isHovered","toggleHoveredOn","toggleHoveredOff","hoverColor","mappingLines","lines","linesFromSource","MappingDetailsView","notifications","addableSources","addableTargets","showSourcesIndex","showTargetsIndex","onRemoveMapping","onRemoveMappedField","onAddFieldToMapping","onNotificationRead","multiplicity","formInputGroupStyle","mappingAction","onArgumentChange","genericPaddingField","renderMappingField","parseInt","errors","warnings","messages","NotificationsGroup","isPropertyOrConstant","isProperty","Badge","maxHeight","overflow","isInline","emptyContent","heightAuto","cells","colSpan","Bullseye","small","TableIcon","MappingTableView","shouldShowMappingPreview","rows","data","Table","TableHeader","TableBody","onRowClick","row","NamespaceTableView","onCreateNamespace","onEditNamespace","onDeleteNamespace","columns","transforms","textCenter","cellTransforms","namespaceTables","xmlSources","_rowId","_extra","_row$cells","_row$cells2","_row$cells3","Level","LevelItem","SourceTargetView","showMappingPreview","targetEvents","sourceEvents","AtlasmapToolbarItem","showImportAtlasFileToolbarItem","showImportJarFileToolbarItem","showExportAtlasFileToolbarItem","showResetToolbarItem","onImportAtlasFile","onImportJarFile","onExportAtlasFile","onResetAtlasmap","runAndClose","ImportAtlasFileToolbarItem","onFile","ImportJarFileToolbarItem","DropdownSeparator","ExportAtlasFileToolbarItem","ResetToolbarItem","multiple","ExportIcon","ToggleColumnMapperViewToolbarItem","ColumnsIcon","ToggleMappingTableViewToolbarItem","ToggleNamespaceTableViewToolbarItem","CodeIcon","ToggleMappingPreviewToolbarItem","EyeIcon","ToggleTypesToolbarItem","InfoIcon","ToggleMappedFieldsToolbarItem","MapMarkedIcon","ToggleUnmappedFieldsToolbarItem","MapIcon","AddMappingToolbarItem","AboutToolbarItem","HelpIcon","initDataState","pending","selectedMapping","flatSources","flatTargets","dataReducer","initNotificationsState","notificationsReducer","isRead","on","_state$notifications$","AtlasmapContext","useAtlasmap","onReset","searchSources","term","filterDocumentFields","searchTargets","handleImportADMArchiveFile","handleImportJarFile","handleResetAtlasmap","onAddToMapping","onRemoveFromMapping","onCreateMapping","mappingHasSourceCollection","willClearOutSourceFieldsOnTogglingExpression","ENUM","isFieldAddableToSelection","documentType","isTerminal","isFieldRemovableFromSelection","isExpressionEnabledForActiveMapping","currentMappingExpression","getMappingExpressionStr","_configModel$mappings6","useConfirmationDialog","onConfirmCb","TextContent","confirmCb","useConstantDialog","onConstantCb","setOnConstantCb","constantTypes","initialConstant","setInitialConstant","constantsDoc","setConstants","constant","fieldNameExists","fieldOrGroup","callback","useParametersDialog","onParametersCb","setOnParametersCb","setParameters","dialog","onOpenParametersDialog","useSpecifyInstanceSchemaDialog","defaultSchema","dialogState","Fragment","Radio","useNamespaceDialog","onNamespaceCb","setOnNamespaceCb","initialNamespace","setInitialNamespace","usePropertyDialog","onPropertyCb","setOnPropertyCb","propertyTypes","initialProperty","setInitialProperty","properties","setProperties","property","useAtlasmapDialogs","openRemoveMappedFieldDialog","onExecuteCb","toastElement","openCaptureDocumentIDToast","modalContainer","createConstantDialog","openCreateConstantDialog","editConstantDialog","openEditConstantDialog","openDeleteConstantDialog","useDeleteConstantDialog","deleteConstantDialog","setScopeOptions","createPropertyDialog","openCreatePropertyDialog","editPropertyDialog","openEditPropertyDialog","openDeletePropertyDialog","useDeletePropertyDialog","deletePropertyDialog","openImportADMArchiveDialog","useImportADMArchiveDialog","importADMArchiveDialog","onImportADMArchive","onExportADMArchiveFile","useExportADMArchiveDialog","exportADMArchiveDialog","onExportADMArchive","openResetDialog","useResetAtlasmapDialog","resetDialog","setRuntimeVersion","useAboutDialog","aboutDialog","onAbout","openToggleExpressionModeDialog","useToggleExpressionModeDialog","toggleExpressionModeDialog","onToggleExpressionMode","importDialog","openImportDialog","parametersDialog","openParametersDialog","setDefaultSchema","specifyInstanceSchemaDialog","openSpecifyInstanceSchema","importFile","userFileSplit","userFileSuffix","toUpperCase","getCsvParameterOptions","useImportDocumentDialog","importDocumentDialog","openDeleteDialog","useDeleteDocumentDialog","deleteDocumentDialog","executeCb","captureDocumentNameToast","onDocumentNameCb","setOnChangeDocumentNameCb","initialDocumentName","setInitialDocumentName","documentNameInfo","useChangeDocumentNameDialog","changeDocumentNameDialog","openChangeDocumentNameDialog","docNameInfo","createNamespaceDialog","openCreateNamespaceDialog","editNamespaceDialog","openEditNamespaceDialog","removeMappedFieldDialog","openDeleteMappingDialog","useDeleteMappingDialog","deleteMappingDialog","onDeleteMapping","onDeleteSelectedMapping","setEnumerationValues","useEditMappingEnumerationDialog","editMappingEnumerationDialog","onEditMappingEnumeration","onCustomClassCb","setOnCustomClassCb","initialCustomClass","setInitialCustomClass","setCustomClassNames","collectionTypes","getCustomClassNames","useCustomClassDialog","createEnableCustomClassDialog","openCreateEnableCustomClassDialog","onEnableCustomClass","editCSVParamsDialog","openEditCSVParamsDialog","predefinedParameters","initialCSVParameters","predefinedParamNames","keys","predefinedParamValues","pvalue","pindex","initialCSVParams","onSpecifyInstanceSchema","portal","createPortal","dialogs","x1","y1","x2","y2","allowImport","allowExport","allowReset","allowDelete","allowCustomJavaClasses","modalsContainerId","toolbarOptions","markNotificationRead","getElementById","showColumnMapperViewToolbarItem","showMappingTableViewToolbarItem","showNamespaceTableViewToolbarItem","showToggleMappingPreviewToolbarItem","showToggleTypesToolbarItem","showToggleMappedFieldsToolbarItem","showToggleUnmappedFieldsToolbarItem","showAddNewMappingToolbarItem","onImportADMArchiveFile","amToggleMappingPreview","amToggleShowMappedFields","amToggleShowUnmappedFields","activeView","setActiveView","toggleShowMappingPreview","toggleShowTypes","spacer","useContextToolbar","dt","onAddFieldToSelectedMapping","leftPart","currentView","isManyToOneMode","isOneToManyMode","transitionFieldAction","delimitersOptions","prettyName","actualDelimiter","_multiplicityFieldAct","_multiplicityFieldAct2","arguemntValue","flatMap","_isSource","useSidebar","AlertGroup","isToast","slice","baseJavaInspectionServiceUrl","baseXMLInspectionServiceUrl","baseJSONInspectionServiceUrl","baseCSVInspectionServiceUrl","baseMappingServiceUrl","externalDocument","onMappingChange","logLevel","useReducer","dispatchData","dispatchNotifications","onLoading","resetConfig","logger","setLevel","inputDocuments","inputDoc","DocumentInitializationModel","inspectionType","inspectionSource","inspectionResult","showFields","addDocument","outputDoc","outputDocument","initialMappings","preloadedMappingJson","initialize","convertSources","convertConstants","constantDoc","convertSourceProperties","sourcePropertyDoc","convertTargetProperties","targetPropertyDoc","convertTargets","convertMappings","convertSelectedMapping","_configModel$mappings","convertSourcesToFlatArray","getAllFields","af","convertTargetsToFlatArray","onSubUpdate","_caller","initializationErrorOccurred","getErrors","reverse","debounceTimeWindow","initializationObservable","pipe","debounceTime","lineRefreshObservable","lineRefreshSource","mappingUpdatedSource","mappingPreview","mappingPreviewOutput$","subscriptions","MappingSerializer","serializeMappings","onExpandFields","onCollapseFields","setShowActions","splitButtonItems","DropdownToggleAction","splitButtonVariant","open","getConstantTypeIndex","fieldPath","Field","getField","getPropertyTypeIndex","textLabel1","textValue1","text1ReadOnly","textLabel2","textValue2","selectLabel","selectValues","selectDefault","setIsValid","value1","setValue1","value2","setValue2","setSelectValue","closeModal","handleConfirm","handleCancel","reportValidity","onCancelCb","setElement","previousElement","newElement"],"mappings":"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"}