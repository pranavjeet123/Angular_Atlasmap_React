"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,i,t,n,r,o,s,a,p=require("file-saver"),l=require("rxjs"),c=require("pako"),u=(e=require("loglevel"))&&"object"==typeof e&&"default"in e?e.default:e;(i=exports.DataSourceType||(exports.DataSourceType={})).SOURCE="SOURCE",i.TARGET="TARGET",(t=exports.CollectionType||(exports.CollectionType={})).ALL="ALL",t.ARRAY="ARRAY",t.LIST="LIST",t.MAP="MAP",t.NONE="NONE",(n=exports.FieldStatus||(exports.FieldStatus={})).SUPPORTED="SUPPORTED",n.UNSUPPORTED="UNSUPPORTED",n.CACHED="CACHED",n.ERROR="ERROR",n.NOT_FOUND="NOT_FOUND",n.EXCLUDED="EXCLUDED",(r=exports.FieldType||(exports.FieldType={})).ANY="ANY",r.ANY_DATE="ANY_DATE",r.BIG_INTEGER="BIG_INTEGER",r.BOOLEAN="BOOLEAN",r.BYTE="BYTE",r.BYTE_ARRAY="BYTE_ARRAY",r.CHAR="CHAR",r.COMPLEX="COMPLEX",r.DATE="DATE",r.DATE_TIME="DATE_TIME",r.DATE_TIME_TZ="DATE_TIME_TZ",r.DATE_TZ="DATE_TZ",r.DECIMAL="DECIMAL",r.DOUBLE="DOUBLE",r.FLOAT="FLOAT",r.INTEGER="INTEGER",r.LONG="LONG",r.NONE="NONE",r.NUMBER="NUMBER",r.SHORT="SHORT",r.STRING="STRING",r.TIME="TIME",r.TIME_TZ="TIME_TZ",r.UNSIGNED_BYTE="UNSIGNED_BYTE",r.UNSIGNED_INTEGER="UNSIGNED_INTEGER",r.UNSIGNED_LONG="UNSIGNED_LONG",r.UNSIGNED_SHORT="UNSIGNED_SHORT",r.UNSUPPORTED="UNSUPPORTED",(o=exports.DocumentType||(exports.DocumentType={})).JAVA="JAVA",o.XML="XML",o.XSD="XSD",o.JSON="JSON",o.CORE="Core",o.CSV="CSV",o.CONSTANT="Constants",o.PROPERTY="Property",(s=exports.InspectionType||(exports.InspectionType={})).JAVA_CLASS="JAVA_CLASS",s.SCHEMA="SCHEMA",s.INSTANCE="INSTANCE",s.UNKNOWN="UNKNOWN",(a=exports.DocumentDefaultName||(exports.DocumentDefaultName={})).CONSTANTS="Constants",a.PROPERTIES="Properties";var d,f,g,h,m,v,E=[[exports.CollectionType[exports.CollectionType.ARRAY],"Array"],[exports.CollectionType[exports.CollectionType.LIST],"List"],[exports.CollectionType[exports.CollectionType.MAP],"Map"],[exports.CollectionType[exports.CollectionType.NONE],"None"]],F=[["STRING","String"],["BOOLEAN","Boolean"],["BIG_INTEGER","Big Integer"],["BYTE","Byte"],["BYTE_ARRAY","ByteArray"],["CHAR","Char"],["COMPLEX","Complex"],["DECIMAL","Decimal"],["DOUBLE","Double"],["FLOAT","Float"],["INTEGER","Integer"],["LONG","Long"],["SHORT","Short"],["TIME","Time"],["DATE","Date"],["DATE_TIME","DateTime"],["DATE_TZ","DateTZ"],["TIME_TZ","TimeTZ"],["DATE_TIME_TZ","DateTimeTZ"],["UNSIGNED_BYTE","Unsigned Byte"],["UNSIGNED_INTEGER","Unsigned Integer"],["UNSIGNED_LONG","Unsigned Long"],["UNSIGNED_SHORT","Unsigned Short"]],T=[["STRING","String"],["ANY","Any"],["BOOLEAN","Boolean"],["BIG_INTEGER","Big Integer"],["BYTE","Byte"],["BYTE_ARRAY","ByteArray"],["CHAR","Char"],["COMPLEX","Complex"],["DECIMAL","Decimal"],["DOUBLE","Double"],["FLOAT","Float"],["INTEGER","Integer"],["LONG","Long"],["SHORT","Short"],["TIME","Time"],["DATE","Date"],["DATE_TIME","DateTime"],["DATE_TZ","DateTZ"],["TIME_TZ","TimeTZ"],["DATE_TIME_TZ","DateTimeTZ"],["UNSIGNED_BYTE","Unsigned Byte"],["UNSIGNED_INTEGER","Unsigned Integer"],["UNSIGNED_LONG","Unsigned Long"],["UNSIGNED_SHORT","Unsigned Short"]];function y(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,i,t){return i&&y(e.prototype,i),t&&y(e,t),e}function x(e,i){e.prototype=Object.create(i.prototype),e.prototype.constructor=e,(Object.setPrototypeOf||function(e,i){return e.__proto__=i,e})(e,i)}function M(e,i){(null==i||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}function A(e,i){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(e,i){if(e){if("string"==typeof e)return M(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?M(e,void 0):void 0}}(e))||i&&e&&"number"==typeof e.length){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(d=exports.Modifier||(exports.Modifier={})).ALL="ALL",d.ABSTRACT="ABSTRACT",d.FINAL="FINAL",d.INTERFACE="INTERFACE",d.NATIVE="NATIVE",d.PACKAGE_PRIVATE="Package Private",d.PUBLIC="PUBLIC",d.PROTECTED="PROTECTED",d.PRIVATE="PRIVATE",d.STATIC="STATIC",d.STRICT="STRICT",d.SYNCHRONIZED="SYNCHRONIZED",d.TRANSIENT="TRANSIENT",d.VOLATILE="VOLATILE",d.NONE="NONE",(f=exports.Multiplicity||(exports.Multiplicity={})).ONE_TO_ONE="ONE_TO_ONE",f.ONE_TO_MANY="ONE_TO_MANY",f.MANY_TO_ONE="MANY_TO_ONE",f.ZERO_TO_ONE="ZERO_TO_ONE",f.MANY_TO_MANY="MANY_TO_MANY",(g=exports.MappingType||(exports.MappingType={})).ALL="ALL",g.COLLECTION="COLLECTION",g.COMBINE="COMBINE",g.LOOKUP="LOOKUP",g.MAP="MAP",g.SEPARATE="SEPARATE",g.NONE="NONE",(h=exports.ValidationScope||(exports.ValidationScope={})).DATA_SOURCE="DATA_SOURCE",h.MAPPING="MAPPING",h.LOOKUP_TABLE="LOOKUP_TABLE",h.CONSTANT="CONSTANT",h.PROPERTY="PROPERTY",(m=exports.ValidationStatus||(exports.ValidationStatus={})).INFO="INFO",m.WARN="WARN",m.ERROR="ERROR",(v=exports.AuditStatus||(exports.AuditStatus={})).INFO="INFO",v.WARN="WARN",v.ERROR="ERROR";var N=function(){function e(){}return e.removeItemFromArray=function(e,i){if(null==e||null==i||0===i.length)return!1;for(var t=0,n=!1;t<i.length;)i[t]===e?(i.splice(t,1),n=!0):t++;return n},e.splitByString=function(e,i){var t=0,n=0,r=null,o=i.length,s=[];if(null===e||0===e.length||null===i||0===o)return[];for(;-1!==t;)t=e.indexOf(i),n=e.indexOf(i,t+1),r=e.substring(t,n),s.push(r),e=e.substring(n+o);return s},e.str2bytes=function(e){for(var i=new Uint8Array(e.length),t=0;t<e.length;t++)i[t]=e.charCodeAt(t);return i},e.readFile=function(e,i){try{return Promise.resolve(new Promise((function(t){i.onload=function(){t(i.result)},i.readAsText(e)})))}catch(e){return Promise.reject(e)}},e.readBinaryFile=function(e,i){try{return Promise.resolve(new Promise((function(t){i.onload=function(){var e=new Int8Array(i.result);t(e)},i.readAsArrayBuffer(e)})))}catch(e){return Promise.reject(e)}},e.writeFile=function(e,i){try{return Promise.resolve(new Promise((function(t){p.saveAs(e,i),t(!0)})))}catch(e){return Promise.reject(e)}},e.toDisplayable=function(e){if(void 0===e||!e||e.indexOf(" ")>=0)return e;for(var i=e.charAt(0).toUpperCase(),t=1;t<e.length;t++){var n=e.charAt(t);n!==n.toLowerCase()&&(i+=" "),i+=n}return i},e.extractDisplayPath=function(e,i){var t=i-4;if(!e||t<=0)return"";if(e.length<=t)return e;var n=e.split("/"),r="/"+n[n.length-1];return r.length>=t?r.substr(0,t):e.substr(0,t-r.length)+"..."+r},e.sanitizeJSON=function(e){return JSON.stringify(e).replace(/[\u007F-\uFFFF]/g,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).substr(-4)}))},e.objectize=function(e){return"string"==typeof e?JSON.parse(e):e},e}(),O=function(){},D=function(){function e(){this.documentField={jsonType:""},this.partOfMapping=!1,this.partOfTransformation=!1,this.visibleInCurrentDocumentSearch=!0,this.enumeration=!1,this.enumValues=[],this.children=[],this.fieldDepth=0,this.collapsed=!0,this.hasUnmappedChildren=!1,this.isCollection=!1,this.isArray=!1,this.isAttribute=!1,this.isPrimitive=!1,this.userCreated=!1,this.uuid=e.uuidCounter.toString(),e.uuidCounter++}e.fieldHasUnmappedChild=function(i){if(null==i)return!1;if(i.isTerminal())return!1===i.partOfMapping;for(var t,n=A(i.children);!(t=n()).done;){var r=t.value;if(r.hasUnmappedChildren||e.fieldHasUnmappedChild(r))return!0}return!1},e.getFieldPaths=function(e){for(var i,t=[],n=A(e);!(i=n()).done;)t.push(i.value.path);return t},e.getFieldNames=function(e){for(var i,t=[],n=A(e);!(i=n()).done;)t.push(i.value.name);return t},e.getField=function(e,i){return i.find((function(i){return e===i.path}))},e.alphabetizeFields=function(e){for(var i,t={},n=[],r=A(e);!(i=r()).done;){var o=i.value,s=o.path;null==t[s]&&(t[s]=o,n.push(s))}n.sort(),e.length=0;for(var a=0,p=n;a<p.length;a++)e.push(t[p[a]]);for(var l,c=A(e);!(l=c()).done;){var u=l.value;u.children&&u.children.length&&this.alphabetizeFields(u.children)}};var i=e.prototype;return i.expandToRoot=function(){for(var e=this;null!=e;)e.collapsed=!1,e.isPropertyOrConstant()&&e.docDef&&(e.docDef.showFields=!0),e=e.parentField},i.getNameWithNamespace=function(){return this.namespaceAlias?this.namespaceAlias+":"+this.name:this.name},i.isParentField=function(){return!(!this.isCollection||this.isPrimitive)||"COMPLEX"===this.type},i.isStringField=function(){return"STRING"===this.type},i.isTerminal=function(){return!!this.enumeration||!(this.isCollection&&!this.isPrimitive)&&"COMPLEX"!==this.type},i.copy=function(){var i=new e;Object.assign(i,this),i.documentField=this.documentField,i.parentField=this.parentField,i.docDef=this.docDef,i.children=[];for(var t,n=A(this.children);!(t=n()).done;)i.children.push(t.value.copy());return i},i.copyFrom=function(e){Object.assign(this,e),this.documentField=e.documentField,this.parentField=e.parentField,this.docDef=e.docDef,this.children=[];for(var i,t=A(e.children);!(i=t()).done;)this.children.push(i.value.copy())},i.getCollectionParentField=function(){for(var e=this;null!=e;){if(e.isCollection)return e;e=e.parentField}},i.isInCollection=function(){return null!=this.getCollectionParentField()},i.getCollectionCount=function(){for(var e=0,i=this;null!=i;)i.isCollection&&e++,i=i.parentField;return e},i.isSource=function(){return null!=this.docDef&&this.docDef.isSource},i.getCollectionType=function(){return this.isCollection?this.isArray?"ARRAY":"LIST":null},i.getFieldLabel=function(e,i){var t="";if(i)t=this.path;else{var n=this.path.split("/");t=this.isAttribute&&n.length>0&&n[n.length-1].startsWith("@")?this.path.split("@")[1]:this.getNameWithNamespace()}return e&&this.type&&!this.isPropertyOrConstant()?t+=" ("+this.type+")":this.isProperty()&&null!=this.value&&(t+=" = "+this.value,e&&this.type&&(t+=" ("+this.type+")")),t||this.parentField||(t="< Document Root >"),t},i.isPropertyOrConstant=function(){return null!=this.docDef&&this.docDef.isPropertyOrConstant},i.isProperty=function(){return null!=this.docDef&&this.docDef.type===exports.DocumentType.PROPERTY},i.isConstant=function(){return null!=this.docDef&&this.docDef.type===exports.DocumentType.CONSTANT},e}();D.uuidCounter=0;var P,I,C,R=function(){function e(){this.createdByUser=!1,this.isTarget=!1}e.getUnqualifiedNamespace=function(){if(null==e.unqualifiedNamespace){var i=new e;i.alias="Unqualified",e.unqualifiedNamespace=i}return e.unqualifiedNamespace};var i=e.prototype;return i.getPrettyLabel=function(){return this===e.getUnqualifiedNamespace()?this.alias:(this.isTarget?"Target":this.alias)+" ["+(null==this.uri?"NO URI":this.uri)+"]"},i.copy=function(){var i=new e;return Object.assign(i,this),i},i.copyFrom=function(e){Object.assign(this,e)},e}(),b=function(e){function i(i){var t;return(t=e.call(this)||this)._isSource=i,t.name="<padding field>",t.classIdentifier="<padding field>",t.type=exports.FieldType.NONE,t.displayName="<padding field>",t.path="",t}return x(i,e),i.prototype.isSource=function(){return this._isSource},i}(D),w=function(){function e(){this.LEFT_BRACKET="[",this.RIGHT_BRACKET="]",this.initialized=!1,this.errorOccurred=!1,this.fields=[],this.allFields=[],this.terminalFields=[],this.complexFieldsByClassIdentifier={},this.enumFieldsByClassIdentifier={},this.fieldsByPath={},this.fieldPaths=[],this.showFields=!0,this.visibleInCurrentDocumentSearch=!0,this.namespaces=[]}var i=e.prototype;return i.getComplexField=function(e){return this.complexFieldsByClassIdentifier[e]},i.getEnumField=function(e){return this.enumFieldsByClassIdentifier[e]},i.getAllFields=function(){return[].concat(this.allFields)},i.fieldExists=function(e,i){for(var t,n=A(this.getAllFields());!(t=n()).done;){var r=t.value;if(r.name===e.name&&r.docDef.type===i)return!0}return!1},i.isFieldsExist=function(e){if(null==e||0===e.length)return!0;var i=this.getFields(D.getFieldPaths(e));return null!=i&&e.length===i.length},i.getFields=function(e){for(var i,t=[],n=A(e);!(i=n()).done;){var r=this.getField(i.value);null!=r&&t.push(r)}return t},i.getName=function(e){var i=this.name;if(e&&!this.isPropertyOrConstant){var t=this.type;t&&(i+=" ("+t+")")}return i},i.getNamespaceForAlias=function(e){return this.namespaces.find((function(i){return e===i.alias}))},i.getField=function(e){if(!e)return null;var i=this.fieldsByPath[e],t=e;if(null!=t&&0===t.indexOf("/")&&(t=t.substring(1)),null==i&&-1!==t.indexOf("/")){for(var n="";-1!==t.indexOf("/");){var r=t.substr(0,t.indexOf("/")),o=this.fieldsByPath[n+="/"+r];if(null==o){if(-1!==t.indexOf("/")){t=t.substr(t.indexOf("/")+1);continue}break}this.populateChildren(o),-1!==t.indexOf("/")&&(t=t.substr(t.indexOf("/")+1))}i=this.fieldsByPath[e]}return i},i.getComplexFields=function(){return this.discoverAllComplexFields(this.fields)},i.getTerminalFields=function(){return[].concat(this.terminalFields)},i.initializeFromFields=function(){this.type===exports.DocumentType.JAVA&&this.prepareComplexFields(),D.alphabetizeFields(this.fields);for(var e,i=A(this.fields);!(e=i()).done;){var t=e.value;this.populateFieldData(t),this.allFields.push(t),this.populateChildren(t)}this.fieldPaths.sort(),this.initialized=!0},i.updateField=function(e,i){D.alphabetizeFields(this.fields),null!=i&&i.length>0&&null!=this.fieldsByPath[i]?(delete this.fieldsByPath[i],N.removeItemFromArray(i,this.fieldPaths)):N.removeItemFromArray(e.path,this.fieldPaths),this.populateFieldData(e),this.fieldPaths.sort()},i.addField=function(e){!e.parentField||this.isPropertyOrConstant?(this.fields.push(e),D.alphabetizeFields(this.fields)):(this.populateChildren(e.parentField),e.parentField.children.push(e),D.alphabetizeFields(e.parentField.children)),this.populateFieldData(e),this.allFields.push(e),this.fieldPaths.sort()},i.populateChildren=function(e){if(e.isTerminal()||e.children.length>0)return!0;var i=this.getComplexField(e.classIdentifier);if(null==i)return!1;for(var t,n=A((i=i.copy()).children);!(t=n()).done;){var r=t.value;(r=r.copy()).parentField=e,this.rewriteFieldPath(r),this.populateFieldData(r),e.children.push(r)}return e.children.length>0&&(this.fieldPaths.sort(),!0)},i.rewriteFieldPath=function(e){var i=e.parentField,t=e.path.split("/");e.path=i.path+"/"+t.slice(-1)[0];for(var n,r=A(e.children);!(n=r()).done;)this.rewriteFieldPath(n.value)},i.clearFields=function(){this.initialized=!1,this.fields=[],this.allFields=[],this.terminalFields=[],this.fieldPaths=[],this.namespaces=[],this.fieldsByPath={},this.complexFieldsByClassIdentifier={},this.enumFieldsByClassIdentifier={}},i.getFieldIndex=function(e,i){for(var t=0;t<i.length;t++)if(i[t].path===e.path)return t;return-1},i.removeField=function(e){if(null!=e){var i=this.getFieldIndex(e,this.fields);i>-1&&this.fields.splice(i,1),(i=this.getFieldIndex(e,this.allFields))>-1&&this.allFields.splice(i,1),(i=this.getFieldIndex(e,this.terminalFields))>-1&&this.terminalFields.splice(i,1);var t=e.path;N.removeItemFromArray(t,this.fieldPaths),delete this.fieldsByPath[t],null!=e.parentField&&N.removeItemFromArray(e,e.parentField.children)}},i.updateFromMappings=function(e){if(null!==e){for(var i,t=A(this.allFields);!(i=t()).done;){var n=i.value;n.partOfMapping=!1,n.hasUnmappedChildren=!1,n.partOfTransformation=!1}for(var r,o=A(e.getAllMappings(!0));!(r=o()).done;)for(var s,a=r.value,p=A(a.getAllFields());!(s=p()).done;)for(var l=s.value,c=l,u=a.getMappedFieldForField(l).actions.length>0;null!=c;)c.partOfMapping=!0,c.partOfTransformation=c.partOfTransformation||u,c=c.parentField;for(var d,f=A(this.allFields);!(d=f()).done;){var g=d.value;g.hasUnmappedChildren=D.fieldHasUnmappedChild(g)}}},i.populateFieldData=function(e){e.docDef=this;var i=e.path;if(this.fieldPaths.push(i),this.fieldsByPath[i]=e,e.enumeration&&(this.enumFieldsByClassIdentifier[e.classIdentifier]=e),e.isTerminal())this.terminalFields.push(e);else for(var t,n=A(e.children);!(t=n()).done;){var r=t.value;this.populateFieldData(r),this.allFields.push(r)}},i.prepareComplexFields=function(){var e=this.fields;for(var i in this.discoverComplexFields(e),this.complexFieldsByClassIdentifier)if(this.complexFieldsByClassIdentifier.hasOwnProperty(i)){for(var t,n=this.complexFieldsByClassIdentifier[i],r=A(n.children);!(t=r()).done;)t.value.children=[];D.alphabetizeFields(n.children)}},i.discoverAllComplexFields=function(e){for(var i,t=[],n=A(e);!(i=n()).done;){var r=i.value;"COMPLEX"!==r.type||"SUPPORTED"!==r.documentField.status&&"CACHED"!==r.documentField.status||t.push(r.copy()),r.children&&(t=t.concat(this.discoverAllComplexFields(r.children)))}return t},i.discoverComplexFields=function(e){for(var i,t=A(e);!(i=t()).done;){var n=i.value;"COMPLEX"===n.type&&("SUPPORTED"===n.documentField.status&&(this.complexFieldsByClassIdentifier[n.classIdentifier]=n.copy()),n.children&&this.discoverComplexFields(n.children))}},S(e,[{key:"type",get:function(){return this._type},set:function(e){this._type=e,this.isPropertyOrConstant=e===exports.DocumentType.CONSTANT||e===exports.DocumentType.PROPERTY}}]),e}(),_=function(){this.dataMapperVersion="0.9.2017.07.28",this.initialized=!1,this.loadingStatus="Loading.",this.admHttpTimeout=3e4,this.initializationErrorOccurred=!1,this.classPathFetchTimeoutInMilliseconds=3e4,this.fieldNameExclusions=[],this.classNameExclusions=[],this.disablePrivateOnlyFields=!1,this.disableProtectedOnlyFields=!1,this.disablePublicOnlyFields=!1,this.disablePublicGetterSetterFields=!1,this.disableMappingPreviewMode=!1,this.disableNavbar=!0,this.mappingInitialized=!1},L=function(){this.showFields=!0},U=function(){function e(){this.initCfg=new _,this.showMappingDetailTray=!1,this.showMappingTable=!1,this.showNamespaceTable=!1,this.showLinesAlways=!0,this.showTypes=!1,this.showMappedFields=!0,this.showUnmappedFields=!0,this._showMappingPreview=!1,this.currentDraggedField=null,this.sourceDocs=[],this.targetDocs=[],this.sourcePropertyDoc=new w,this.targetPropertyDoc=new w,this.constantDoc=new w,this.mappingFiles=[],this.mappingDefinitionId=0,this.mappings=null,this.preloadedMappingJson=null,this.setConstantPropertyDocs()}e.getConfig=function(){return e.cfg},e.setConfig=function(i){e.cfg=i};var i=e.prototype;return i.initializePropertyDoc=function(e,i){e.clearFields(),e.type=exports.DocumentType.PROPERTY,e.name=exports.DocumentDefaultName.PROPERTIES,e.id="DOC."+e.name+"."+Math.floor(1e6*Math.random()+1).toString(),e.isSource=i,e.showFields=!1,e.isPropertyOrConstant=!0},i.setConstantPropertyDocs=function(){this.initializePropertyDoc(this.sourcePropertyDoc,!0),this.initializePropertyDoc(this.targetPropertyDoc,!1),this.constantDoc.clearFields(),this.constantDoc.type=exports.DocumentType.CONSTANT,this.constantDoc.name=exports.DocumentDefaultName.CONSTANTS,this.constantDoc.id="DOC."+this.constantDoc.name+"."+Math.floor(1e6*Math.random()+1).toString(),this.constantDoc.isSource=!0,this.constantDoc.showFields=!1,this.constantDoc.isPropertyOrConstant=!0},i.addDocument=function(e){var i=new w;return i.initModel=e,i.id=e.id,i.type=e.type,i.name=e.name,i.description=e.description,i.isSource=e.isSource,i.showFields=e.showFields,i.inspectionType=e.inspectionType,i.inspectionSource=e.inspectionSource,i.inspectionResult=e.inspectionResult,i.inspectionParameters=e.inspectionParameters,i.selectedRoot=e.selectedRoot,i.type===exports.DocumentType.XSD?i.uri="atlas:xml:"+i.id:i.type===exports.DocumentType.JAVA?(i.uri="atlas:java:"+i.id+"?className="+i.inspectionSource,e.collectionType&&e.collectionType!==exports.CollectionType.NONE&&(i.uri+="&collectionType="+e.collectionType,e.collectionClassName&&(i.uri+="&collectionClassName="+e.collectionClassName))):i.uri="atlas:"+i.type.toLowerCase()+":"+i.id,e.isSource?this.sourceDocs.push(i):this.targetDocs.push(i),i},i.addDocuments=function(e){for(var i,t=[],n=A(e);!(i=n()).done;)t.push(this.addDocument(i.value));return t},i.getDocsWithoutPropertyDoc=function(e){return[].concat(e?this.sourceDocs:this.targetDocs)},i.getDocs=function(e){var i=this.getDocsWithoutPropertyDoc(e);return e?[this.sourcePropertyDoc,this.constantDoc].concat(i):[this.targetPropertyDoc].concat(i)},i.clearDocs=function(){this.sourceDocs=[],this.targetDocs=[],this.sourcePropertyDoc.clearFields(),this.targetPropertyDoc.clearFields(),this.constantDoc.clearFields(),this.mappingFiles=[]},i.hasJavaDocuments=function(){for(var e,i=A(this.getAllDocs());!(e=i()).done;)if(e.value.type===exports.DocumentType.JAVA)return!0;return!1},i.getDocForIdentifier=function(e,i){return this.getDocs(i).find((function(i){return i.id===e}))},i.getFirstXmlDoc=function(e){return this.getDocsWithoutPropertyDoc(e).find((function(e){return e.type===exports.DocumentType.XML}))},i.getAllDocs=function(){return[this.sourcePropertyDoc,this.constantDoc].concat(this.sourceDocs).concat(this.targetPropertyDoc).concat(this.targetDocs)},i.documentsAreLoaded=function(){for(var e,i=A(this.getAllDocs());!(e=i()).done;)if(!e.value.initialized)return!1;return!0},S(e,[{key:"showMappingPreview",get:function(){return this._showMappingPreview},set:function(e){this._showMappingPreview=e}}]),e}();U.cfg=new U,(P=exports.ErrorLevel||(exports.ErrorLevel={})).DEBUG="DEBUG",P.INFO="INFO",P.WARN="WARN",P.ERROR="ERROR",(I=exports.ErrorScope||(exports.ErrorScope={})).APPLICATION="APPLICATION",I.DATA_SOURCE="DATA_SOURCE",I.LOOKUP_TABLE="LOOKUP_TABLE",I.MAPPING="MAPPING",I.FIELD="FIELD",I.FORM="FORM",I.CONSTANT="CONSTANT",I.PROPERTY="PROPERTY",(C=exports.ErrorType||(exports.ErrorType={})).INTERNAL="INTERNAL",C.USER="USER",C.VALIDATION="VALIDATION",C.PREVIEW="PREVIEW",C.FORM="FORM";var j=function(){function e(i){this._identifier=e.errorIdentifierCounter.toString(),e.errorIdentifierCounter++,Object.assign(this,i)}return S(e,[{key:"identifier",get:function(){return this._identifier}}]),e}();j.errorIdentifierCounter=0;var B=function(){};B.pom='\n    <project xmlns="http://maven.apache.org/POM/4.0.0"\n        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n\n        <modelVersion>4.0.0</modelVersion>\n        <groupId>foo.bar</groupId>\n        <artifactId>test.model</artifactId>\n        <version>1.10.0</version>\n        <packaging>jar</packaging>\n        <name>Test :: Model</name>\n\n        <dependencies>\n            <dependency>\n                <groupId>com.fasterxml.jackson.core</groupId>\n                <artifactId>jackson-annotations</artifactId>\n                <version>2.8.5</version>\n            </dependency>\n            <dependency>\n                <groupId>com.fasterxml.jackson.core</groupId>\n                <artifactId>jackson-databind</artifactId>\n                <version>2.8.5</version>\n            </dependency>\n            <dependency>\n                <groupId>com.fasterxml.jackson.core</groupId>\n                <artifactId>jackson-core</artifactId>\n                <version>2.8.5</version>\n            </dependency>\n        </dependencies>\n    </project>\n  ';var J=function(e,i){this.node=e,this.offset=i},V=function(){function e(i){this.uuid=i+e.sequence++}return e.prototype.getUuid=function(){return this.uuid},e}();V.sequence=0;var z=function(e){function i(t){var n;return(n=e.call(this,i.PREFIX)||this).str=t,n}x(i,e);var t=i.prototype;return t.toText=function(){return this.str},t.toHTML=function(){return'<span id="'+this.uuid+'">'+this.str.replace(/ /g,"&nbsp;")+"</span>"},i}(V);z.PREFIX="expression-text-";var G=function(e){function i(t,n,r,o,s){var a;if(void 0===o&&(o=0),(a=e.call(this,i.PREFIX)||this).mapping=t,a.mappedField=n,a.metaStr=r,a.collectionContextPath=s,!n){if(r){var p=r.split(":");a.mappedField=1===p.length?t.getMappedFieldByPath(s?s+p[0]:p[0],!0):t.getMappedFieldByPath(p[1],!0,p[0]),a.mappedField||(a.mappedField=t.getReferenceField(p[0],p[1]))}else{var l;a.mappedField=t.getMappedFieldForIndex(null===(l=o+1)||void 0===l?void 0:l.toString(),!0)}n=a.mappedField}return a}x(i,e);var t=i.prototype;return t.toText=function(){if(!this.mappedField||!this.mappedField.field)return"";if(this.mappedField.field.enumeration)return'"'+this.mappedField.field.enumValues[this.mappedField.field.enumIndexValue?this.mappedField.field.enumIndexValue:0].name+'"';var e,i="${";return this.mappedField.field.parentField&&this.mappedField.field.parentField===(null===(e=this.mapping.referenceFields[0])||void 0===e?void 0:e.field)?i+="/"+this.mappedField.field.name+"}":i+=this.mappedField.field.docDef.id+":"+this.mappedField.field.path+"}",i},t.toHTML=function(){if(this.mappedField&&this.mappedField.field){var e="",i=this.mappedField.field.name;return this.mappedField.field.enumeration&&(i+="."+this.mappedField.field.enumValues[this.mappedField.field.enumIndexValue?this.mappedField.field.enumIndexValue:0].name,e=":  Click to select an enumeration value."),'<span style="font-weight:bold" contenteditable="false" id="'+this.uuid+'" title="'+this.mappedField.field.docDef.name+":"+this.mappedField.field.path+e+'"\n        class="expressionFieldLabel label label-default">'+i+"</span>"}return'<span contenteditable="false" id="'+this.uuid+'"\n        title="Field index \''+(this.mapping.getIndexForMappedField(this.mappedField)-1)+'\' is not available"\n        class="expressionFieldLabel label label-danger">N/A</span>'},t.hasComplexField=function(){var e,i,t,n,r,o;return"COMPLEX"===(null===(e=this.mappedField)||void 0===e||null===(i=e.field)||void 0===i?void 0:i.documentField.fieldType)&&("SUPPORTED"===(null===(t=this.mappedField)||void 0===t||null===(n=t.field)||void 0===n?void 0:n.documentField.status)||"CACHED"===(null===(r=this.mappedField)||void 0===r||null===(o=r.field)||void 0===o?void 0:o.documentField.status))},i}(V);G.PREFIX="expression-field-";var k,Y,X=function(){function e(e,i){this.mapping=e,this.cfg=i,this.expressionHTML="",this.expressionUpdatedSource=new l.Subject,this.expressionUpdated$=this.expressionUpdatedSource.asObservable(),this._nodes=[],this.textCache=""}var i=e.prototype;return i.generateInitialExpression=function(){var e=this;this.mapping.getUserMappedFields(!0).forEach((function(i){return e.appendFieldNode(i)}))},i.getLastNodeIndex=function(){return this._nodes.length-1},i.getLastNode=function(){return this._nodes[this.getLastNodeIndex()]},i.getNode=function(e){return e?this._nodes.find((function(i){return i.getUuid()===e})):this.getLastNode()},i.setConfigModel=function(e){this.cfg=e},i.clearText=function(e,i,t){var n=null;if(e){var r=this._nodes.find((function(i){return i.getUuid()===e}));if(!(r instanceof z&&t))return null;var o=(n=r).str.replace(n.str.substring(i,t),"");n.str=o}else{var s=this.getLastNode();if(!(s instanceof z))return null;var a=s.str.indexOf("@");-1!==a&&((n=s).str=n.str.substring(0,a))}return this.updateCache(),this.expressionUpdatedSource.next(),n},i.insertText=function(e,i,t){this.insertNodes(this.createNodesFromText(e),i,t)},i.insertNodes=function(e,i,t){if(!i){var n,r=this.getLastNode();if(r)if(r instanceof z&&e[0]instanceof z){var o;r.str+=e[0].str,e.splice(0,1,r),(o=this._nodes).splice.apply(o,[this.getLastNodeIndex(),1].concat(e))}else if(r instanceof G&&e[0]instanceof G){var s;(s=this._nodes).splice.apply(s,[this.getLastNodeIndex(),0,new z(" + ")].concat(e))}else{var a;(a=this._nodes).push.apply(a,e)}else(n=this._nodes).push.apply(n,e);return this.updateCache(),void this.expressionUpdatedSource.next()}var p=new J,l=this._nodes.find((function(e){return e.getUuid()===i})),c=this._nodes.indexOf(l);if(l instanceof z){var u;(null==t||t<0)&&(t=l.str.length);var d=l.str.substring(0,t),f=l.str.substring(t);if(d.length>0&&(e[0]instanceof z?(l.str=d+e[0].str,e.splice(0,1,l)):(l.str=d,e.splice(0,0,l))),f.length>0){var g,h=e.length-1;e[h]instanceof z?(d.length>0?(g=e[h]).str+=f:(g=l).str=e[h].str+f,e.splice(h,1,g)):d.length>0?e.push(new z(f)):(l.str=f,e.push(l))}(u=this._nodes).splice.apply(u,[c,1].concat(e));var m=c+e.length-1;if(this._nodes[m]instanceof G&&this.nodes[m+1]instanceof G){var v=new z(" + ");this._nodes.splice(m+1,0,v),p.node=v,p.offset=1}else this._nodes[m]instanceof G?(p.node=this._nodes[m+1],p.offset=0):(p.node=this._nodes[m],p.offset=this._nodes[m].str.length-f.length);return this.updateCache(),void this.expressionUpdatedSource.next(p)}0!==t&&e[0]instanceof G&&e.splice(0,0,new z(" + "));var E,F=0===t?c:c+1,T=this._nodes[F];if(T instanceof z&&e[e.length-1]instanceof z)p.offset=e[e.length-1].str.length,T.str=e[e.length-1].str+T.str,e.pop(),(E=this._nodes).splice.apply(E,[F,1].concat(e)),p.node=T;else if(T instanceof G&&e[e.length-1]instanceof G){var y,S=new z(" + ");(y=this._nodes).splice.apply(y,[F,0].concat(e,[S])),p.node=S,p.offset=1}else{var x;(x=this._nodes).splice.apply(x,[F,0].concat(e)),T instanceof z?(p.node=T,p.offset=0):(p.node=e[e.length-1],p.offset=e[e.length-1].str.length)}this.updateCache(),this.expressionUpdatedSource.next(p)},i.removeToken=function(e,i,t){if(!e){var n=this.getLastNode();if(!n)return;if(n instanceof G){var r=this._nodes.pop();this._nodes.find((function(e){return e instanceof G&&e.mappedField===r.mappedField}))||(this.mapping.removeField(r.mappedField.field),this.cfg.mappingService.updateMappedField(this.mapping))}else n instanceof z&&(n.str.length>0&&(n.str=n.str.substring(0,n.str.length-1)),0===n.str.length&&this._nodes.pop());return this.updateCache(),void this.expressionUpdatedSource.next()}var o=new J,s=this._nodes.find((function(i){return i.getUuid()===e})),a=this._nodes.indexOf(s);if(t&&(a++,s=this._nodes[a]),!s||-1===i){if(a<1)return;i=(s=this._nodes[--a])instanceof z?s.str.length:1}if(s instanceof G){var p=this._nodes.splice(a,1)[0];if(this._nodes.find((function(e){return e instanceof G&&e.mappedField===p.mappedField}))||(this.mapping.removeField(p.mappedField.field),this.cfg.mappingService.updateMappedField(this.mapping)),this._nodes.length>a)if(this._nodes[a-1]instanceof z&&this._nodes[a]instanceof z){var l=this._nodes[a-1].str.length;this._nodes[a-1].str+=this._nodes[a].str,this._nodes.splice(a,1),o.node=this._nodes[a-1],o.offset=l}else if(this._nodes[a-1]instanceof G&&this._nodes[a]instanceof G){var c=new z(" + ");this._nodes.splice(a,0,c),o.node=c,o.offset=3}else this._nodes[a-1]instanceof z?(o.node=this._nodes[a-1],o.offset=this._nodes[a-1].str.length):this._nodes[a]instanceof z&&(o.node=this._nodes[a],o.offset=0);else o=void 0}else{var u=s.str;1===u.length?this._nodes.splice(a,1):(s.str=0===i?u.substr(1):u.substring(0,i)+u.substring(i+1),o.node=s,o.offset=i)}this.updateCache(),this.expressionUpdatedSource.next(o)},i.clearToEnd=function(e){var i=this.getLastNode();i instanceof z&&(i.str=i.str.substring(0,e))},i.updateFieldReference=function(e,i,t){for(var n,r=this,o=e.getUserMappedFields(!0),s=e.getReferenceMappedFields(),a=this._nodes.filter((function(e){return e instanceof G})),p=A(a);!(n=p()).done;){var l=n.value;if(!(o.includes(l.mappedField)||s.includes(l.mappedField)||l.hasComplexField())){var c=this._nodes.indexOf(l);this._nodes.splice(c,1),this._nodes.length>c&&this._nodes[c-1]instanceof z&&this._nodes[c]instanceof z&&(this._nodes[c-1].str+=this._nodes[c].str,this._nodes.splice(c,1))}}a=this._nodes.filter((function(e){return e instanceof G}));for(var u,d=function(){var e=u.value;a.find((function(i){return i.mappedField===e}))||s.find((function(i){return i.field===e.field}))||(i?r.insertNodes([new G(r.mapping,e)],i,t):r.appendFieldNode(e))},f=A(o);!(u=f()).done;)d();this.updateCache(),this.expressionUpdatedSource.next()},i.clear=function(){this._nodes=[],this.updateCache(),this.expressionUpdatedSource.next()},i.toText=function(){return 0===this.textCache.length&&this.updateCache(),this.textCache},i.toHTML=function(){return 0===this.expressionHTML.length&&this.updateCache(),this.expressionHTML},i.addConditionalExpressionNode=function(e,i,t){this.insertNodes([new G(this.mapping,e)],i,t)},i.updateCache=function(){var e="";this._nodes.forEach((function(i){return e+=i.toText()})),this.textCache=e,e="",this._nodes.forEach((function(i){return e+=i.toHTML()})),this.expressionHTML=e},i.createNodesFromText=function(e){for(var i=[],t=-1,n=null;-1!==e.search(/\$\{[a-zA-Z0-9.:/<>[\]_-]+\}/);){0!==(t=e.search(/\$/))&&i.push(new z(e.substring(0,t)));var r,o,s=e.substring(t+2,e.indexOf("}")),a=null;if(isNaN(Number(s))){var p,l;a=n?new G(this.mapping,void 0,s,void 0,null===(p=n.mappedField)||void 0===p||null===(l=p.field)||void 0===l?void 0:l.path):new G(this.mapping,void 0,s)}else{var c=parseInt(s,10);a=new G(this.mapping,void 0,void 0,c)}a&&a.mappedField?(null!==(r=a.mappedField)&&void 0!==r&&null!==(o=r.field)&&void 0!==o&&o.isCollection&&(n=a),i.push(a)):this.cfg.errorService.addError(new j({message:"Unable to map expression element '"+s+"' to a field node.",level:exports.ErrorLevel.ERROR,scope:exports.ErrorScope.MAPPING,type:exports.ErrorType.INTERNAL,mapping:this.mapping})),e=e.substring(e.indexOf("}")+1)}return e.length>0&&i.push(new z(e)),i},i.appendFieldNode=function(e){var i=this._nodes.pop();i instanceof G?this._nodes.push(i,new z(" + ")):i instanceof z&&this._nodes.push(0===i.str.length?new z(" + "):i),this._nodes.push(new G(this.mapping,e))},S(e,[{key:"hasComplexField",get:function(){return this._hasComplexField},set:function(e){this._hasComplexField=e}},{key:"nodes",get:function(){return this._nodes}}]),e}(),q=function(){this.type=exports.FieldType.STRING,this.values=null,this.serviceObject={}},H=function(){},W=function(){function e(){this.arguments=[],this.sourceType=exports.FieldType.NONE,this.targetType=exports.FieldType.NONE,this.multiplicity=exports.Multiplicity.ONE_TO_ONE,this.serviceObject={}}var i=e.prototype;return i.populateFieldAction=function(e){if(e.name=this.name,e.definition=this,null==e.argumentValues||0===e.argumentValues.length){e.argumentValues=[];for(var i,t=A(this.arguments);!(i=t()).done;){var n=i.value;-1!==["LONG","INTEGER","FLOAT","DOUBLE","SHORT","BYTE","DECIMAL","NUMBER"].indexOf(n.type.toUpperCase())?e.setArgumentValue(n.name,"0"):e.setArgumentValue(n.name,"")}}},i.getArgumentForName=function(e){return this.arguments.find((function(i){return i.name===e}))},e}(),K=function(){function e(){this.argumentValues=[]}e.create=function(i){var t=new e;return t.definition=i,t.name=null==i?void 0:i.name,t};var i=e.prototype;return i.getArgumentValue=function(e){for(var i,t=A(this.argumentValues);!(i=t()).done;){var n=i.value;if(n.name===e)return n}var r=new H;return r.name=e,r.value="0",this.argumentValues.push(r),r},i.setArgumentValue=function(e,i){this.getArgumentValue(e).value=i},e}(),Z=function(){function e(e,i){this.cfg=e,this.doc=i}return e.prototype.parseFieldFromDocument=function(e,i){if(null!=e&&"NOT_FOUND"===e.status)return this.cfg.errorService.addError(new j({message:"Ignoring unknown field: "+e.name+" ("+e.path+"), document: "+this.doc.name,level:exports.ErrorLevel.WARN,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.USER})),null;if(null!=e&&"EXCLUDED"===e.status)return null;var t=new D;return t.name=e.name,t.type=e.fieldType,t.path=e.path,t.isPrimitive="COMPLEX"!==e.fieldType,t.documentField=e,"LIST"!==e.collectionType&&"ARRAY"!==e.collectionType||(t.isCollection=!0,"ARRAY"===e.collectionType&&(t.isArray=!0)),null!=i?(t.parentField=i,i.children.push(t)):this.doc.fields.push(t),t},e}(),$=function(e,i){this.cfg=e,this.doc=i},Q=function(e,i){this.cfg=e,this.doc=i,this.headers={"Content-Type":"application/json"},this.searchParams={}},ee=function(e){function i(){var i;return(i=e.apply(this,arguments)||this).request=new ie(i.cfg,i.doc),i}x(i,e);var t=i.prototype;return t.isOnlineInspectionCapable=function(){return null!=this.cfg.initCfg.baseCSVInspectionServiceUrl||(this.cfg.errorService.addError(new j({message:"CSV inspection service is not configured. Document will not be loaded: "+this.doc.name,level:exports.ErrorLevel.WARN,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL,object:this.doc})),!1)},t.parseResponse=function(e){if(void 0!==e.CsvInspectionResponse)this.extractCSVDocumentDefinitionFromInspectionResponse(e.CsvInspectionResponse);else{if(void 0===e.CsvDocument)throw new Error("Unknown CSV inspection result format: "+e);this.extractCSVDocumentDefinition(e.CsvDocument)}},t.extractCSVDocumentDefinitionFromInspectionResponse=function(e){if(e.errorMessage)throw this.doc.errorOccurred=!0,new Error("Could not load JSON document, error: "+e.errorMessage);this.extractCSVDocumentDefinition(e.csvDocument)},t.extractCSVDocumentDefinition=function(e){if(this.doc.description||(this.doc.description=this.doc.id),this.doc.name||(this.doc.name=this.doc.id),this.doc.inspectionParameters){var i=new URLSearchParams(this.doc.inspectionParameters);this.doc.uri=this.doc.uri+"?"+i}for(var t,n=A(e.fields.field);!(t=n()).done;)this.parseCSVFieldFromDocument(t.value,null)},t.parseCSVFieldFromDocument=function(e,i){var t,n,r=this.parseFieldFromDocument(e,i);if(null!=r&&(r.column=e.column,e.fieldType===exports.FieldType.COMPLEX)&&null!==(t=e.csvFields)&&void 0!==t&&null!==(n=t.csvField)&&void 0!==n&&n.length)for(var o,s=A(e.csvFields.csvField);!(o=s()).done;)this.parseCSVFieldFromDocument(o.value,r)},i}(Z),ie=function(e){function i(){var i;return(i=e.apply(this,arguments)||this).url=i.cfg.initCfg.baseCSVInspectionServiceUrl+"inspect",i.options=new te(i.cfg,i.doc),i}return x(i,e),i}($),te=function(e){function i(){var i;return(i=e.apply(this,arguments)||this).body=i.doc.inspectionSource,i.searchParams=i.doc.inspectionParameters,i}return x(i,e),i}(Q),ne=function(e){function i(){var i;return(i=e.apply(this,arguments)||this).request=new re(i.cfg,i.doc),i}x(i,e);var t=i.prototype;return t.isOnlineInspectionCapable=function(){return null!=this.cfg.initCfg.baseJavaInspectionServiceUrl||(this.cfg.errorService.addError(new j({message:"Java inspection service is not configured. Document will not be loaded: "+this.doc.name,level:exports.ErrorLevel.WARN,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL,object:this.doc})),!1)},t.parseResponse=function(e){var i;if(e.ClassInspectionResponse){if(e.errorMessage)throw this.doc.errorOccurred=!0,new Error("Could not load JSON document, error: "+e.errorMessage);i=e.ClassInspectionResponse.javaClass}else i=e.JavaClass;var t=this.doc.id;if(!i||"NOT_FOUND"===i.status)throw this.doc.errorOccurred=!0,new Error("Could not load JAVA document. Document is not found: "+t);this.doc.description||(this.doc.description=i.className),this.doc.name||(this.doc.name=i.className,this.doc.name&&-1!==this.doc.name.indexOf(".")&&(this.doc.name=this.doc.name.substr(this.doc.name.lastIndexOf(".")+1))),!i.uri||this.doc.uri&&0!==this.doc.uri.length||(this.doc.uri=i.uri);var n=null;i.collectionType&&i.collectionType!==exports.CollectionType.NONE.valueOf()&&(this.parseJavaFieldFromDocument(i,null),n=this.doc.fields[0]);for(var r,o=A(i.javaFields.javaField);!(r=o()).done;)this.parseJavaFieldFromDocument(r.value,n)},t.parseJavaFieldFromDocument=function(e,i){var t,n,r,o=this.parseFieldFromDocument(e,i);if(null!=o&&(e.className&&(o.classIdentifier=e.className),e.fieldType===exports.FieldType.COMPLEX)){var s=e;if(o.enumeration=s.enumeration,s.enumeration&&null!==(t=s.javaEnumFields)&&void 0!==t&&t.javaEnumField)for(var a,p=A(s.javaEnumFields.javaEnumField);!(a=p()).done;){var l=a.value,c=new O;c.name=l.name,c.ordinal=l.ordinal,o.enumValues.push(c)}if(null!==(n=s.javaFields)&&void 0!==n&&null!==(r=n.javaField)&&void 0!==r&&r.length)for(var u,d=A(s.javaFields.javaField);!(u=d()).done;)this.parseJavaFieldFromDocument(u.value,o)}},i}(Z),re=function(e){function i(){var i;return(i=e.apply(this,arguments)||this).url=i.cfg.initCfg.baseJavaInspectionServiceUrl+"class",i.options=new oe(i.cfg,i.doc),i}return x(i,e),i}($),oe=function(e){function i(i,t){var n;(n=e.call(this,i,t)||this).cfg=i,n.doc=t;var r={ClassInspectionRequest:{jsonType:"io.atlasmap.java.v2.ClassInspectionRequest",className:n.doc.inspectionSource,disablePrivateOnlyFields:n.cfg.initCfg.disablePrivateOnlyFields,disableProtectedOnlyFields:n.cfg.initCfg.disableProtectedOnlyFields,disablePublicOnlyFields:n.cfg.initCfg.disablePublicOnlyFields,disablePublicGetterSetterFields:n.cfg.initCfg.disablePublicGetterSetterFields}};return n.json=r,n.doc.initModel.collectionType&&n.doc.initModel.collectionType!==exports.CollectionType.NONE&&(r.ClassInspectionRequest.collectionType=n.doc.initModel.collectionType,n.doc.initModel.collectionClassName&&(r.ClassInspectionRequest.collectionClassName=n.doc.initModel.collectionClassName)),n.cfg.initCfg.fieldNameExclusions&&n.cfg.initCfg.fieldNameExclusions.length&&(r.ClassInspectionRequest.fieldNameExclusions={string:n.cfg.initCfg.fieldNameExclusions}),n.cfg.initCfg.classNameExclusions&&n.cfg.initCfg.classNameExclusions.length&&(r.ClassInspectionRequest.classNameExclusions={string:n.cfg.initCfg.classNameExclusions}),n}return x(i,e),i}(Q),se=function(e){function i(){var i;return(i=e.apply(this,arguments)||this).request=new ae(i.cfg,i.doc),i}x(i,e);var t=i.prototype;return t.isOnlineInspectionCapable=function(){return null!=this.cfg.initCfg.baseJSONInspectionServiceUrl||(this.cfg.errorService.addError(new j({message:"JSON inspection service is not configured. Document will not be loaded: "+this.doc.name,level:exports.ErrorLevel.WARN,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL,object:this.doc})),!1)},t.parseResponse=function(e){if(void 0!==e.JsonInspectionResponse)this.extractJSONDocumentDefinitionFromInspectionResponse(e.JsonInspectionResponse);else{if(void 0===e.JsonDocument)throw new Error("Unknown JSON inspection result format: "+e);this.extractJSONDocumentDefinition(e.JsonDocument)}},t.extractJSONDocumentDefinitionFromInspectionResponse=function(e){if(e.errorMessage)throw this.doc.errorOccurred=!0,new Error("Could not load JSON document, error: "+e.errorMessage);this.extractJSONDocumentDefinition(e.jsonDocument)},t.extractJSONDocumentDefinition=function(e){this.doc.description||(this.doc.description=this.doc.id),this.doc.name||(this.doc.name=this.doc.id);for(var i,t=A(e.fields.field);!(i=t()).done;)this.parseJSONFieldFromDocument(i.value,null)},t.parseJSONFieldFromDocument=function(e,i){var t,n,r=this.parseFieldFromDocument(e,i);if(null!=r&&e.fieldType===exports.FieldType.COMPLEX){var o=e;if(r.enumeration=o.enumeration,r.enumeration&&null!==(t=o.jsonEnumFields)&&void 0!==t&&t.jsonEnumField)for(var s,a=A(o.jsonEnumFields.jsonEnumField);!(s=a()).done;){var p=s.value,l=new O;l.name=p.name,l.ordinal=p.ordinal,r.enumValues.push(l)}if(null!==(n=o.jsonFields)&&void 0!==n&&n.jsonField.length)for(var c,u=A(o.jsonFields.jsonField);!(c=u()).done;)this.parseJSONFieldFromDocument(c.value,r)}},i}(Z),ae=function(e){function i(){var i;return(i=e.apply(this,arguments)||this).url=i.cfg.initCfg.baseJSONInspectionServiceUrl+"inspect",i.options=new pe(i.cfg,i.doc),i}return x(i,e),i}($),pe=function(e){function i(){var i;return(i=e.apply(this,arguments)||this).json={JsonInspectionRequest:{jsonType:"io.atlasmap.json.v2.JsonInspectionRequest",type:i.doc.inspectionType,jsonData:i.doc.inspectionSource}},i}return x(i,e),i}(Q),le=function(e){function i(){var i;return(i=e.apply(this,arguments)||this).request=new ce(i.cfg,i.doc),i}x(i,e);var t=i.prototype;return t.isOnlineInspectionCapable=function(){return null!=this.cfg.initCfg.baseXMLInspectionServiceUrl||(this.cfg.errorService.addError(new j({message:"XML inspection service is not configured. Document will not be loaded: "+this.doc.name,level:exports.ErrorLevel.WARN,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL,object:this.doc})),!1)},t.parseResponse=function(e){if(void 0!==e.XmlInspectionResponse)this.extractXMLDocumentDefinitionFromInspectionResponse(e.XmlInspectionResponse);else{if(void 0===e.XmlDocument)throw new Error("Unknown XML inspection result format: "+e);this.extractXMLDocumentDefinition(e.XmlDocument)}},t.extractXMLDocumentDefinitionFromInspectionResponse=function(e){if(e.errorMessage)throw this.doc.errorOccurred=!0,new Error("Could not load XML document, error: "+e.errorMessage);this.extractXMLDocumentDefinition(e.xmlDocument)},t.extractXMLDocumentDefinition=function(e){var i,t;if(this.doc.description||(this.doc.description=this.doc.id),this.doc.name||(this.doc.name=this.doc.id),null!=e&&null!==(i=e.xmlNamespaces)&&void 0!==i&&null!==(t=i.xmlNamespace)&&void 0!==t&&t.length)for(var n,r=A(e.xmlNamespaces.xmlNamespace);!(n=r()).done;){var o=n.value,s=new R;s.alias=o.alias,s.uri=o.uri,s.locationUri=o.locationUri,s.isTarget=o.targetNamespace,this.doc.namespaces.push(s)}for(var a,p=A(e.fields.field);!(a=p()).done;){var l=a.value;if(!this.doc.selectedRoot||this.isSelectedRootElement(l)){this.parseXMLFieldFromDocument(l,null);break}}},t.isSelectedRootElement=function(e){return!!(this.doc.selectedRoot||null!=e&&e.name)&&this.doc.selectedRoot===(-1!==e.name.indexOf(":")?e.name.split(":")[1]:e.name)},t.parseXMLFieldFromDocument=function(e,i){var t,n,r=this.parseFieldFromDocument(e,i);if(null!=r&&(-1!==e.name.indexOf(":")&&(r.namespaceAlias=e.name.split(":")[0],r.name=e.name.split(":")[1]),r.isAttribute=-1!==r.path.indexOf("@"),e.fieldType===exports.FieldType.COMPLEX)){var o=e;if(r.enumeration=o.enumeration,r.enumeration&&null!==(t=o.xmlEnumFields)&&void 0!==t&&t.xmlEnumField)for(var s,a=A(o.xmlEnumFields.xmlEnumField);!(s=a()).done;){var p=s.value,l=new O;l.name=p.name,l.ordinal=p.ordinal,r.enumValues.push(l)}if(null!==(n=o.xmlFields)&&void 0!==n&&n.xmlField.length)for(var c,u=A(o.xmlFields.xmlField);!(c=u()).done;)this.parseXMLFieldFromDocument(c.value,r)}},i}(Z),ce=function(e){function i(){var i;return(i=e.apply(this,arguments)||this).url=i.cfg.initCfg.baseXMLInspectionServiceUrl+"inspect",i.options=new ue(i.cfg,i.doc),i}return x(i,e),i}($),ue=function(e){function i(){var i;return(i=e.apply(this,arguments)||this).json={XmlInspectionRequest:{jsonType:"io.atlasmap.xml.v2.XmlInspectionRequest",type:i.doc.inspectionType,xmlData:i.doc.inspectionSource}},i}return x(i,e),i}(Q),de=function(){this.sourceType=exports.FieldType.STRING,this.targetType=exports.FieldType.STRING},fe=function(){function e(){this.lookupEntry=[],this.name=(new Date).getTime()+"-"+Math.floor(1e6*Math.random()).toString()}var i=e.prototype;return i.getInputOutputKey=function(){return this.sourceIdentifier+":"+this.targetIdentifier},i.getEntryForSource=function(e,i){for(var t,n=A(this.lookupEntry);!(t=n()).done;){var r=t.value;if(r.sourceValue===e)return r}if(i){var o=new de;return o.sourceValue=e,this.lookupEntry.push(o),o}return null},i.toString=function(){var e="Lookup Table, name: "+this.name+", entries: "+this.lookupEntry.length;e+="\nsourceIdentifier: "+this.sourceIdentifier,e+="\n\targetIdentifier: "+this.targetIdentifier;for(var i,t=0,n=A(this.lookupEntry);!(i=n()).done;){var r=i.value;e+="\n\tEntry #"+t+": "+r.sourceValue+" => "+r.targetValue,t+=1}return e},e}();(k=exports.TransitionMode||(exports.TransitionMode={})).ONE_TO_ONE="ONE_TO_ONE",k.ONE_TO_MANY="ONE_TO_MANY",k.ENUM="ENUM",k.MANY_TO_ONE="MANY_TO_ONE",k.FOR_EACH="FOR_EACH",k.EXPRESSION="EXPRESSION",(Y=exports.TransitionDelimiter||(exports.TransitionDelimiter={}))[Y.NONE=0]="NONE",Y[Y.AMPERSAND=1]="AMPERSAND",Y[Y.AT_SIGN=2]="AT_SIGN",Y[Y.BACKSLASH=3]="BACKSLASH",Y[Y.COLON=4]="COLON",Y[Y.COMMA=5]="COMMA",Y[Y.DASH=6]="DASH",Y[Y.EQUAL=7]="EQUAL",Y[Y.HASH=8]="HASH",Y[Y.PERIOD=9]="PERIOD",Y[Y.PIPE=10]="PIPE",Y[Y.SEMICOLON=11]="SEMICOLON",Y[Y.SLASH=12]="SLASH",Y[Y.SPACE=13]="SPACE",Y[Y.UNDERSCORE=14]="UNDERSCORE",Y[Y.USER_DEFINED=15]="USER_DEFINED";var ge=function(e,i,t,n){this.delimiter=exports.TransitionDelimiter.SPACE,this.serializedValue=null,this.prettyName=null,this.actualDelimiter="",this.delimiter=e,this.serializedValue=i,this.prettyName=t,this.actualDelimiter=n},he=function(){function e(){this.mode=exports.TransitionMode.ONE_TO_ONE,this.delimiter=exports.TransitionDelimiter.SPACE,this.userDelimiter="",this.lookupTableName=null,this.enableExpression=!1,this.transitionFieldAction=null,e.initialize()}e.initialize=function(){if(0===e.delimiterModels.length){var i=[];i.push(new ge(exports.TransitionDelimiter.NONE,null,"[None]","")),i.push(new ge(exports.TransitionDelimiter.AMPERSAND,"Ampersand","Ampersand [&]","&")),i.push(new ge(exports.TransitionDelimiter.AT_SIGN,"AtSign","At Sign [@]","@")),i.push(new ge(exports.TransitionDelimiter.BACKSLASH,"Backslash","Backslash [\\]","\\")),i.push(new ge(exports.TransitionDelimiter.COLON,"Colon","Colon [:]",":")),i.push(new ge(exports.TransitionDelimiter.COMMA,"Comma","Comma [,]",",")),i.push(new ge(exports.TransitionDelimiter.DASH,"Dash","Dash [-]","-")),i.push(new ge(exports.TransitionDelimiter.EQUAL,"Equal","Equal [=]","=")),i.push(new ge(exports.TransitionDelimiter.HASH,"Hash","Hash [#]","#")),i.push(new ge(exports.TransitionDelimiter.PERIOD,"Period","Period [.]",".")),i.push(new ge(exports.TransitionDelimiter.PIPE,"Pipe","Pipe [|]","|")),i.push(new ge(exports.TransitionDelimiter.SEMICOLON,"Semicolon","Semicolon [;]",";")),i.push(new ge(exports.TransitionDelimiter.SLASH,"Slash","Slash [/]","/")),i.push(new ge(exports.TransitionDelimiter.SPACE,"Space","Space [ ]"," ")),i.push(new ge(exports.TransitionDelimiter.UNDERSCORE,"Underscore","Underscore [_]","_")),i.push(new ge(exports.TransitionDelimiter.USER_DEFINED,"User defined","User defined","\0")),e.delimiterModels=i}},e.delimiterToModel=function(i){return e.delimiterModels.filter((function(e){return e.actualDelimiter===i}))[0]},e.getMappingModeName=function(e){var i;switch(e){case exports.TransitionMode.ONE_TO_ONE:i="One to One";break;case exports.TransitionMode.MANY_TO_ONE:i="Many to One";break;case exports.TransitionMode.ONE_TO_MANY:i="One to Many";break;case exports.TransitionMode.ENUM:i="ENUM";break;case exports.TransitionMode.FOR_EACH:i="For Each";break;case exports.TransitionMode.EXPRESSION:i="Expression";break;default:i=""}return i};var i=e.prototype;return i.getPrettyName=function(){var i,t="";return this.transitionFieldAction&&(t=" ("+this.transitionFieldAction.name+")"),this.mode===exports.TransitionMode.ONE_TO_MANY||this.mode===exports.TransitionMode.MANY_TO_ONE?e.getMappingModeName(this.mode)+t:this.mode===exports.TransitionMode.ENUM?"Enum (table: "+this.lookupTableName+")":this.mode===exports.TransitionMode.EXPRESSION?"Expression ("+(null===(i=this.expression)||void 0===i?void 0:i.toText())+")":e.getMappingModeName(this.mode)},i.isOneToManyMode=function(){return this.mode===exports.TransitionMode.ONE_TO_MANY},i.isOneToOneMode=function(){return this.mode===exports.TransitionMode.ONE_TO_ONE},i.isManyToOneMode=function(){return this.mode===exports.TransitionMode.MANY_TO_ONE},i.isForEachMode=function(){return this.mode===exports.TransitionMode.FOR_EACH},i.isEnumerationMode=function(){return this.mode===exports.TransitionMode.ENUM},i.isExpressionMode=function(){return this.mode===exports.TransitionMode.EXPRESSION},e}();he.delimiterModels=[];var me=function(){function e(){this.name=null,this.mappings=[],this.activeMapping=null,this.parsedDocs=[],this.templateText=null,this.tables=[],this.tablesBySourceTargetKey={},this.tablesByName={},this.name="UI.0"}var i=e.prototype;return i.templateExists=function(){return null!=this.templateText&&""!==this.templateText},i.addTable=function(e){this.tablesBySourceTargetKey[e.getInputOutputKey()]=e,this.tablesByName[e.name]=e,this.tables.push(e)},i.getTableByName=function(e){return this.tablesByName[e]},i.getTableBySourceTarget=function(e,i){return this.tablesBySourceTargetKey[e+":"+i]},i.getTables=function(){var e=[];for(var i in this.tablesByName)this.tablesByName.hasOwnProperty(i)&&e.push(this.tablesByName[i]);return e},i.removeTableByName=function(e){if(e){var i=this.tablesByName[e],t=i.getInputOutputKey();this.tablesByName[e]&&(delete this.tables[this.tables.indexOf(i)],delete this.tablesByName[e],delete this.tablesBySourceTargetKey[t])}},i.getAllMappings=function(e){var i=[].concat(this.mappings);if(e){if(null==this.activeMapping)return i;for(var t,n=A(i);!(t=n()).done;)if(t.value===this.activeMapping)return i;i.push(this.activeMapping)}return i},i.findMappingsForField=function(e){for(var i,t=[],n=A(this.mappings);!(i=n()).done;){var r=i.value;r.isFieldMapped(e)&&t.push(r)}return t},i.removeMapping=function(e){return e.transition.mode===exports.TransitionMode.ENUM&&this.removeTableByName(e.transition.lookupTableName),N.removeItemFromArray(e,this.mappings)},e}(),ve=function(){function e(){this.actions=[]}e.sortMappedFieldsByPath=function(e){if(null==e||0===e.length)return[];for(var i,t={},n=[],r=A(e);!(i=r()).done;){var o=i.value;if(null!=o&&null!=o.field){var s=o.field.path;t[s]=o,n.push(s)}}n.sort();for(var a=[],p=0,l=n;p<l.length;p++)a.push(t[l[p]]);return a};var i=e.prototype;return i.isPadField=function(){return this.field instanceof b},i.isSource=function(){return!!this.field&&this.field.isSource()},i.removeAction=function(e){N.removeItemFromArray(e,this.actions)},e}(),Ee=function(){function e(){this.sourceFields=[],this.targetFields=[],this.referenceFields=[],this.transition=new he,this.uuid="mapping."+Math.floor(1e6*Math.random()+1).toString(),this.cfg=U.getConfig()}var i=e.prototype;return i.getFirstCollectionField=function(e){for(var i,t=A(e?this.sourceFields:this.targetFields);!(i=t()).done;){var n=i.value;if(n.field&&n.field.isInCollection())return n.field}return null},i.isLookupMode=function(){for(var e,i=A(this.sourceFields.concat(this.targetFields));!(e=i()).done;){var t=e.value;if(t.field&&t.field.enumeration)return!0}return!1},i.addField=function(e,i){var t=this.getMappedFields(e.isSource());if(1===t.length){var n=t[0];if(!n.field)return n.field=e,n}var r=new ve;return r.field=e,i?t.unshift(r):t.push(r),r},i.removeField=function(e){var i=this.getMappedFields(e.isSource());N.removeItemFromArray(i.find((function(i){return i.field===e})),i)},i.getUserFieldCount=function(e){for(var i,t=0,n=A(this.getMappedFields(e.isSource()));!(i=n()).done;)i.value.isPadField()||t++;return t},i.hasMappedField=function(e){return e?this.sourceFields.length>0:this.targetFields.length>0},i.isEmpty=function(){return 0===this.sourceFields.length&&0===this.targetFields.length},i.isFullyMapped=function(){return this.sourceFields.length>0&&this.targetFields.length>0},i.addMappedField=function(e,i){this.getMappedFields(i).push(e)},i.removeMappedField=function(e){e&&e.field&&(e.field.isCollection&&this.removeReferenceField(e),N.removeItemFromArray(e,this.getMappedFields(e.field.isSource())),this.cfg.mappingService.notifyMappingUpdated())},i.getMappedFieldForField=function(e){if(!e||!e.isSource)return null;for(var i,t=A(this.getMappedFields(e.isSource()));!(i=t()).done;){var n=i.value;if(n.field===e)return n}return null},i.getMappedFieldByPath=function(e,i,t){if(!e)return null;for(var n=this.getMappedFields(i),r=0;r<n.length;r++){var o;if((null===(o=n[r].field)||void 0===o?void 0:o.path)===e){var s;if(!t)return n[r];if(t&&(null===(s=n[r].field)||void 0===s?void 0:s.docDef.id)===t)return n[r]}}return null},i.getMappedFieldForIndex=function(e,i){if(!e||0===e.length)return null;var t=this.getMappedFields(i);return+e-1>t.length-1?null:t[+e-1]},i.getIndexForMappedField=function(e){return e&&e.field?this.getMappedFields(e.field.isSource()).indexOf(e)+1:null},i.getField=function(e,i){var t=this.cfg.getDocForIdentifier(e,!0);t||(t=this.cfg.getDocForIdentifier(e,!1));var n=null;return t&&(n=D.getField(i,t.getAllFields())),n},i.createReferenceField=function(e){var i,t,n,r=null;return e?(null!==(i=e.documentField)&&void 0!==i&&i.status&&"SUPPORTED"!==(null===(t=e.documentField)||void 0===t?void 0:t.status)&&"CACHED"!==(null===(n=e.documentField)||void 0===n?void 0:n.status)||((r=new ve).field=e,this.referenceFields.push(r)),r):null},i.removeReferenceField=function(e){e&&N.removeItemFromArray(e,this.referenceFields)},i.referenceFieldExists=function(e,i){if(!e||!i)return!1;for(var t,n=A(this.getReferenceMappedFields());!(t=n()).done;){var r=t.value;if(r.field&&r.field.docDef.id===e&&r.field.path===i)return!0}return!1},i.getReferenceField=function(e,i){if(!e||!i)return null;for(var t,n=A(this.getReferenceMappedFields());!(t=n()).done;){var r=t.value;if(r.field&&r.field.docDef.id===e&&r.field.path===i)return r}var o=this.getField(e,i);return(null==o?void 0:o.type)===exports.FieldType.COMPLEX?(this.transition.expression.hasComplexField=!0,this.createReferenceField(o)):null},i.getUserMappedFields=function(e){for(var i,t=e?this.sourceFields:this.targetFields,n=[new ve],r=A(t);!(i=r()).done;){var o=i.value;o.isPadField()||n.push(o)}return n.shift(),n},i.getReferenceMappedFields=function(){return this.referenceFields},i.getMappedFields=function(e){return e?this.sourceFields:this.targetFields},i.getLastMappedField=function(e){var i=this.getMappedFields(e);return null!=i&&i.length>0?i[i.length-1]:null},i.getFields=function(e){for(var i,t=[],n=A(this.getMappedFields(e));!(i=n()).done;){var r=i.value;null!=r.field&&t.push(r.field)}return t},i.getFieldNames=function(e){var i=this.getFields(e);D.alphabetizeFields(i);for(var t,n=[],r=A(i);!(t=r()).done;)n.push(t.value.name);return n},i.getFieldPaths=function(e){var i=this.getFields(e);D.alphabetizeFields(i);for(var t,n=[],r=A(i);!(t=r()).done;)n.push(t.value.path);return n},i.hasFieldActions=function(){for(var e,i=A(this.getAllMappedFields());!(e=i()).done;)if(e.value.actions.length>0)return!0;return!1},i.getAllFields=function(){return this.getFields(!0).concat(this.getFields(!1))},i.getAllMappedFields=function(){return this.getMappedFields(!0).concat(this.getMappedFields(!1))},i.isFieldMapped=function(e){return null!=this.getMappedFieldForField(e)},i.hasTransformation=function(){for(var e,i=A(this.getAllMappedFields());!(e=i()).done;)if(e.value.actions.length>0)return!0;return!1},i.getMappedTarget=function(e){var i=this.cfg.mappings.mappings;if(e.isSource())return null;for(var t,n=A(i);!(t=n()).done;){var r=t.value;if(0!==r.targetFields.length)for(var o,s=A(r.targetFields);!(o=s()).done;){var a,p,l=o.value;if((null===(a=l.field)||void 0===a?void 0:a.docDef)===e.docDef&&l.field.path===e.path&&r.isFieldMapped(e))return null===(p=r.sourceFields[0])||void 0===p?void 0:p.field.name}}return null},e}(),Fe=function(){function e(){}return e.prototype.then=function(i,t){var n=new e,r=this.s;if(r){var o=1&r?i:t;if(o){try{Te(n,1,o(this.v))}catch(e){Te(n,2,e)}return n}return this}return this.o=function(e){try{var r=e.v;1&e.s?Te(n,1,i?i(r):r):t?Te(n,1,t(r)):Te(n,2,r)}catch(e){Te(n,2,e)}},n},e}();function Te(e,i,t){if(!e.s){if(t instanceof Fe){if(!t.s)return void(t.o=Te.bind(null,e,i));1&i&&(i=t.s),t=t.v}if(t&&t.then)return void t.then(Te.bind(null,e,i),Te.bind(null,e,2));e.s=i,e.v=t;var n=e.o;n&&n(e)}}function ye(e){return e instanceof Fe&&1&e.s}var Se="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function xe(e,i){try{var t=e()}catch(e){return i(e)}return t&&t.then?t.then(void 0,i):t}"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var Me,Ae,Ne=function(){function e(){}return e.fromDocumentDefinition=function(e,i){switch(i.type){case exports.DocumentType.JAVA:return new ne(e,i);case exports.DocumentType.JSON:return new se(e,i);case exports.DocumentType.XSD:case exports.DocumentType.XML:return new le(e,i);case exports.DocumentType.CSV:return new ee(e,i);default:throw new Error("Document type '"+i.type+"' is not supported for inspection")}},e.fromJavaProperties=function(i,t,n,r,o){void 0===r&&(r=exports.CollectionType.NONE);var s=new L;s.id=t;var a=t.split(".").pop();s.name=a||"",s.type=exports.DocumentType.JAVA,s.inspectionType=exports.InspectionType.JAVA_CLASS,s.inspectionSource=t,s.inspectionParameters={"":""},s.isSource=n,s.collectionType=r,s.collectionClassName=o,s.description="Java document class "+t,r&&r!==exports.CollectionType.NONE&&(s.description+=" collection type: "+r,o&&(s.description+=" collection class name: "+o)),e.removeDocumentIfAlreadyExists(i,s.id,n);var p=i.addDocument(s);return new ne(i,p)},e.fromNonJavaProperties=function(i,t,n,r,o,s,a,p){var l=new L;l.name=n,l.id=t,l.type=r,l.inspectionType=o,l.inspectionSource=s,l.inspectionParameters=p||{"":""},l.isSource=a,l.description=a?"Source document ":"Target document ",l.description+=n+" type: "+r,e.removeDocumentIfAlreadyExists(i,l.id,a);var c=i.addDocument(l);return this.fromDocumentDefinition(i,c)},e.removeDocumentIfAlreadyExists=function(e,i,t){var n=e.getDocForIdentifier(i,t);n&&N.removeItemFromArray(n,t?e.sourceDocs:e.targetDocs)},e}(),Oe=function(){function e(){}return e.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var i=16*Math.random()|0;return("x"===e?i:3&i|8).toString(16)}))},e}(),De=function(){},Pe=function(){function e(){}return e.populateMappingLookupTable=function(e,i){if(i.transition.mode===exports.TransitionMode.ENUM&&!i.transition.lookupTableName&&1===i.getFields(!0).length&&1===i.getFields(!1).length){var t,n,r=i.getFields(!0)[0];r&&(t=r.name+"-"+r.docDef.id);var o=i.getFields(!0)[0];if(o&&(n=o.name+"-"+o.docDef.id),t&&n){var s=e.getTableBySourceTarget(t,n);s||((s=new fe).sourceIdentifier=t,s.targetIdentifier=n,e.addTable(s)),i.transition.lookupTableName=s.name}}},e.updateLookupTables=function(i){for(var t,n=A(i.getTables());!(t=n()).done;){var r=t.value;if(!r.sourceIdentifier||!r.targetIdentifier){var o=e.getFirstMappingForLookupTable(i,r.name);if(o&&o.transition.lookupTableName){if(!r.sourceIdentifier){var s=o.getFields(!0)[0];s&&(r.sourceIdentifier=s.classIdentifier)}if(!r.targetIdentifier){var a=o.getFields(!1)[0];a&&(r.targetIdentifier=a.classIdentifier)}}}}for(var p,l=A(i.mappings);!(p=l()).done;)e.populateMappingLookupTable(i,p.value)},e.getFirstMappingForLookupTable=function(e,i){return e.mappings.find((function(e){return e.transition.lookupTableName===i}))},e.errorNoTable=function(e,i){var t;e.errorService.addError(new j({message:"Could not find enumeration lookup table "+(null===(t=i.transition)||void 0===t?void 0:t.lookupTableName)+" for mapping.",scope:exports.ErrorScope.MAPPING,type:exports.ErrorType.INTERNAL,mapping:i}))},e.getEnumerationValues=function(i,t){var n;if(!i||!i.mappings||!t)return[];var r=t.getFields(!1)[0],o=[];o.push("[ None ]");for(var s,a=A(r.enumValues);!(s=a()).done;)o.push(s.value.name);var p=i.mappings.getTableByName(null===(n=t.transition)||void 0===n?void 0:n.lookupTableName);if(!p)return e.errorNoTable(i,t),[];for(var l,c=[],u=A(t.getFields(!0)[0].enumValues);!(l=u()).done;){var d=l.value,f=new De;f.sourceEnumValue=d.name,f.targetEnumValues=o;var g=p.getEntryForSource(f.sourceEnumValue,!1);f.selectedTargetEnumValue=null==g?"[ None ]":g.targetValue,c.push(f)}return c},e.updateEnumerationValues=function(i,t,n){var r;if(i&&i.mappings&&t){var o=i.mappings.getTableByName(null===(r=t.transition)||void 0===r?void 0:r.lookupTableName);if(o){o.lookupEntry=[];for(var s,a=A(n);!(s=a()).done;){var p=s.value;if("[ None ]"!==p.selectedTargetEnumValue){var l=new de;l.sourceValue=p.sourceEnumValue,l.targetValue=p.selectedTargetEnumValue,o.lookupEntry.push(l)}}}else e.errorNoTable(i,t)}},e}(),Ie=function(){function e(){}return e.generateMappingDigest=function(e,i){var t={exportMappings:{value:""},exportMeta:[],exportBlockData:[]},n=JSON.stringify(i);n&&(t.exportMappings.value=N.sanitizeJSON(n));for(var r,o=A(e.getAllDocs());!(r=o()).done;){var s=r.value;s.isPropertyOrConstant||(t.exportMeta.push({name:s.name,dataSourceType:s.type,id:s.id,inspectionType:s.inspectionType,inspectionParameters:s.inspectionParameters,isSource:s.isSource}),t.exportBlockData.push({value:s.inspectionSource}))}return t},e}(),Ce=function(){function e(){}return e.updateMappingsFromDocuments=function(i){for(var t,n=A(i.mappings.mappings);!(t=n()).done;){var r=t.value;e.updateMappedFieldsFromDocuments(r,i,!0),e.updateMappedFieldsFromDocuments(r,i,!1)}for(var o,s=A(i.getAllDocs());!(o=s()).done;){var a=o.value;null==a.id&&(a.id="DOC."+a.name+"."+Math.floor(1e6*Math.random()+1).toString())}},e.updateMappedFieldsFromDocuments=function(i,t,n){for(var r,o=i.getMappedFields(n),s=-1,a=A(o);!(r=a()).done;){var p=r.value,l=null;if(s+=1,!(p.field instanceof b||void 0===p.mappingField)){if(e.isPropertyField(p.mappingField))l=n?t.sourcePropertyDoc:t.targetPropertyDoc,p.mappingField.docId&&(l.id=p.mappingField.docId);else if(e.isConstantField(p.mappingField))l=t.constantDoc,p.mappingField.docId&&(l.id=p.mappingField.docId);else{if(null==p.mappingField.docId){t.errorService.addError(new j({message:"Could not find doc ID for mapped field "+p.mappingField.name,level:exports.ErrorLevel.ERROR,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL}));continue}if(null==(l=t.getDocForIdentifier(p.mappingField.docId,n))){null!=p.mappingField.name&&t.errorService.addError(new j({message:"Could not find document for mapped field '"+p.mappingField.name+"' with ID "+p.mappingField.docId,level:exports.ErrorLevel.ERROR,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL}));continue}l.id=p.mappingField.docId}if(p.mappingField.path){if(p.field=l.getField(p.mappingField.path),null==p.field)if(p.mappingField.path.indexOf("<0>")>=0)p.field=l.getField(p.mappingField.path.replace("<0>","<>"));else if(e.isConstantField(p.mappingField)&&p.mappingField.value&&p.mappingField.fieldType){var c=t.constantDoc.getField(p.mappingField.value);c||(c=new D),c.value=p.mappingField.value,c.type=p.mappingField.fieldType,c.displayName=c.value,c.name=c.value,c.path=c.value,c.userCreated=!0,p.field=c,l.addField(c)}else{if(!(e.isPropertyField(p.mappingField)&&p.mappingField.fieldType&&p.mappingField.name&&p.mappingField.path))return void t.errorService.addError(new j({message:"Could not find field from document '"+l.name+"' for mapped field '"+p.mappingField.name+"'",level:exports.ErrorLevel.ERROR,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL,object:{mappedField:p,doc:l}}));var u=p.mappingField,d=l.getField(u.path);d||(d=new D);var f=u.name;d.type=u.fieldType,u.scope&&(d.scope=u.scope),d.displayName=f,d.name=f,d.path=u.path,d.userCreated=!0,p.field=d,l.addField(d)}var g=+p.mappingField.index;o=i.getMappedFields(n),g<=s?o[s]=p:t.mappingService.addPlaceholders(g-s,i,s,n)}}}},e.removeStaleMappings=function(e){for(var i,t=0,n=[],r=A(e.getDocs(!0));!(i=r()).done;)n=n.concat(D.getFieldPaths(i.value.getAllFields()));for(var o,s=[],a=A(e.getDocs(!1));!(o=a()).done;)s=s.concat(D.getFieldPaths(o.value.getAllFields()));for(;t<e.mappings.mappings.length;)this.isMappingStale(e.mappings.mappings[t],n,s)?e.mappings.mappings.splice(t,1):t++},e.isMappingStale=function(e,i,t){for(var n,r=A(e.getFields(!0));!(n=r()).done;){var o=n.value;if(!(o instanceof b)&&-1===i.indexOf(o.path))return!0}for(var s,a=A(e.getFields(!1));!(s=a()).done;){var p=s.value;if(!(p instanceof b)&&-1===t.indexOf(p.path))return!0}return!1},e.updateDocumentNamespacesFromMappings=function(e){for(var i,t=e.getDocs(!1),n=A(e.mappings.parsedDocs);!(i=n()).done;){var r=i.value;if(r&&!r.isSource&&0!==r.namespaces.length){var o=this.getDocById(r.id,t);null!=o?o.namespaces=[].concat(r.namespaces):e.errorService.addError(new j({message:"Could not find document with identifier '"+r.id+"' for namespace override.",level:exports.ErrorLevel.ERROR,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL,object:{identifier:r.id,parsedDoc:r,docs:t}}))}}},e.getDocById=function(e,i){if(null==e||null==i||!i.length)return null;for(var t,n=A(i);!(t=n()).done;){var r=t.value;if(r.id===e)return r}return null},e.activeMapping=function(e){var i;return!(null==e||null===(i=e.mappings)||void 0===i||!i.activeMapping)},e.hasFieldAction=function(e){for(var i,t=A(e);!(i=t()).done;)if(i.value.actions.length>0)return!0;return!1},e.hasMappedCollection=function(e,i){var t=e.getMappedFields(i);return e.isFullyMapped()&&t[0].field&&t[0].field.isInCollection()},e.isPropertyField=function(e){return"io.atlasmap.v2.PropertyField"===(null==e?void 0:e.jsonType)},e.isConstantField=function(e){return"io.atlasmap.v2.ConstantField"===(null==e?void 0:e.jsonType)},e}(),Re=function(){function e(){}return e.serializeMappings=function(i,t){void 0===t&&(t=!0);for(var n,r=i.mappings,o=[],s=A(r.mappings.filter((function(e){return e.isFullyMapped()})));!(n=s()).done;){var a=n.value;try{var p=e.serializeFieldMapping(i,a,a.uuid,t);p&&(o=o.concat(p))}catch(e){i.errorService.addError(new j({message:"Caught exception while attempting to serialize mapping, skipping. ",level:exports.ErrorLevel.ERROR,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL,object:{input:{mapping:a,"mapping def":r},error:e}}))}}var l=e.serializeLookupTables(i.mappings),c=e.serializeConstants(i.constantDoc),u=e.serializeProperties(i.sourcePropertyDoc),d=e.serializeProperties(i.targetPropertyDoc);return{AtlasMapping:{jsonType:"io.atlasmap.v2.AtlasMapping",dataSource:e.serializeDocuments(i.sourceDocs.concat(i.targetDocs),r),mappings:{mapping:o},name:i.mappings.name?i.mappings.name:void 0,lookupTables:{lookupTable:l},constants:{constant:c},properties:{property:u.concat(d)}}}},e.serializeFieldMapping=function(i,t,n,r){void 0===r&&(r=!0);var o,s=e.serializeFields(t,!0,i,r),a=e.serializeFields(t,!1,i,r),p=i.expressionService.getMappingExpressionStr(!1,t);if(t.transition.isManyToOneMode()||t.transition.isForEachMode()||t.transition.isExpressionMode()){var l=[];t.transition.transitionFieldAction&&(l[0]=this.serializeAction(t.transition.transitionFieldAction,i));var c={jsonType:"io.atlasmap.v2.FieldGroup",actions:l,field:s};o=p.length>0?{jsonType:"io.atlasmap.v2.Mapping",id:n,expression:p,inputFieldGroup:c,outputField:a}:{jsonType:"io.atlasmap.v2.Mapping",id:n,inputFieldGroup:c,outputField:a}}else{if(t.transition.isOneToManyMode()&&t.transition.transitionFieldAction){var u=this.serializeAction(t.transition.transitionFieldAction,i);s[0].actions||(s[0].actions=[]),u&&s[0].actions.unshift(u)}var d;if(p.length>0)if(null!==(d=s[0].jsonType)&&void 0!==d&&d.includes("FieldGroup")){for(var f=s[0],g=1;g<s.length;g++){var h;if(null!==(h=s[g].jsonType)&&void 0!==h&&h.includes("FieldGroup")){var m,v=s[0],E=s[g];E.field&&v.field&&E.field[0].path===v.field[0].path&&(null===(m=f.field)||void 0===m||m.push(E.field[0]))}}o={jsonType:"io.atlasmap.v2.Mapping",id:n,expression:p,inputFieldGroup:f,outputField:a}}else o={jsonType:"io.atlasmap.v2.Mapping",id:n,expression:p,inputField:s,outputField:a};else o={jsonType:"io.atlasmap.v2.Mapping",id:n,inputField:s,outputField:a}}return t.transition.isEnumerationMode()&&(o.mappingType=exports.MappingType.LOOKUP,t.transition.lookupTableName&&(o.lookupTableName=t.transition.lookupTableName)),o},e.deserializeMappingServiceJSON=function(i,t){for(var n,r=A(e.deserializeConstants(i));!(n=r()).done;)t.constantDoc.addField(n.value);for(var o,s=A(e.deserializeProperties(t,i,!0));!(o=s()).done;)t.sourcePropertyDoc.addField(o.value);for(var a,p=A(e.deserializeProperties(t,i,!1));!(a=p()).done;)t.targetPropertyDoc.addField(a.value);t.mappings||(t.mappings=new me),t.mappings.name=this.deserializeAtlasMappingName(i),t.mappings.parsedDocs=t.mappings.parsedDocs.concat(e.deserializeDocs(i,t.mappings)),t.mappings.mappings=t.mappings.mappings.concat(e.deserializeMappings(i,t));for(var l,c=A(e.deserializeLookupTables(i));!(l=c()).done;)t.mappings.addTable(l.value)},e.deserializeAtlasMappingName=function(e){var i;return null!=e&&null!==(i=e.AtlasMapping)&&void 0!==i&&i.name?e.AtlasMapping.name:""},e.addInputFieldGroupFields=function(i,t,n){for(var r,o=A(i);!(r=o()).done;){var s=r.value;"COMPLEX"===s.fieldType?e.addInputFieldGroupFields(s.field,t,n):e.deserializeMappedField(t,s,!0,n)}},e.deserializeFieldMapping=function(i,t){var n=new Ee;n.uuid=i.id,n.sourceFields=[],n.targetFields=[],n.referenceFields=[],n.transition.mode=exports.TransitionMode.ONE_TO_ONE;var r="LOOKUP"===i.mappingType||null!=i.lookupTableName;if(i.mappingType&&i.mappingType!==exports.MappingType.NONE)return this.deserializeFieldMappingFromType(n,i,t),n;if(i.inputFieldGroup)e.deserializeInputFieldGroup(i,n,t);else{var o,s=i.inputField;if(s)for(var a,p=A(s);!(a=p()).done;)e.deserializeMappedField(n,a.value,!0,t);null!==(o=i.outputField)&&void 0!==o&&o.length&&i.outputField.length>1&&(n.transition.mode=exports.TransitionMode.ONE_TO_MANY),t.mappings&&Ce.updateMappedFieldsFromDocuments(n,t,!0)}i.expression&&i.expression.length>0&&(n.transition.enableExpression=!0,n.transition.mode=exports.TransitionMode.EXPRESSION,n.transition.expression=new X(n,t),n.transition.expression.insertText(i.expression));for(var l,c=A(i.outputField);!(l=c()).done;)e.deserializeMappedField(n,l.value,!1,t);return Ce.updateMappedFieldsFromDocuments(n,t,!1),r&&(n.transition.lookupTableName=i.lookupTableName,n.transition.mode=exports.TransitionMode.ENUM),n},e.deserializeInputFieldGroup=function(i,t,n){var r;if(i.inputFieldGroup&&(i.expression&&i.inputFieldGroup.fieldType===exports.FieldType.COMPLEX&&(t.transition.expression.hasComplexField=!0),t.transition.mode=exports.TransitionMode.MANY_TO_ONE,e.addInputFieldGroupFields(i.inputFieldGroup.field,t,n),Ce.updateMappedFieldsFromDocuments(t,n,!0),i.inputFieldGroup.actions&&null!==(r=i.inputFieldGroup.actions[0])&&void 0!==r&&r.delimiter)){var o,s;t.transition.delimiter=null===(o=he.delimiterToModel(null===(s=i.inputFieldGroup.actions[0])||void 0===s?void 0:s.delimiter))||void 0===o?void 0:o.delimiter;var a=i.inputFieldGroup.actions[0];if(a)if(a.Expression||"Expression"===a["@type"])t.transition.enableExpression=!0,t.transition.mode=exports.TransitionMode.EXPRESSION,t.transition.expression=new X(t,n),t.transition.expression.insertText(a.Expression?a.Expression.expression:a.expression);else{t.transition.mode=exports.TransitionMode.MANY_TO_ONE;var p=this.parseAction(a);p.definition=n.fieldActionService.getActionDefinitionForName(p.name,exports.Multiplicity.MANY_TO_ONE),t.transition.transitionFieldAction=p}}},e.deserializeAudits=function(e,i){var t=[];if(null==e||!e.audit)return t;for(var n,r=A(e.audit);!(n=r()).done;){var o=n.value;t.push(new j({message:o.status+"["+o.path+"]: "+o.message,level:exports.ErrorLevel[o.status],scope:exports.ErrorScope.MAPPING,type:i,object:o.value}))}return t},e.createInputFieldGroup=function(e,i,t,n){var r={jsonType:"io.atlasmap.v2.FieldGroup",actions:[],docId:t,path:n,field:e};return i&&(r.fieldType=exports.FieldType.COMPLEX),r},e.serializeDocuments=function(e,i){for(var t,n=[],r=A(e);!(t=r()).done;){var o=t.value,s={jsonType:"io.atlasmap.v2.DataSource",id:o.id,name:o.name,description:o.description,uri:o.uri,dataSourceType:o.isSource?exports.DataSourceType.SOURCE:exports.DataSourceType.TARGET};if(null!=o.characterEncoding&&(s.characterEncoding=o.characterEncoding),null!=o.locale&&(s.locale=o.locale),o.type===exports.DocumentType.XML||o.type===exports.DocumentType.XSD){var a=s;a.jsonType="io.atlasmap.xml.v2.XmlDataSource";for(var p,l=[],c=A(o.namespaces);!(p=c()).done;){var u=p.value;l.push({alias:u.alias,uri:u.uri,locationUri:u.locationUri,targetNamespace:u.isTarget})}!o.isSource&&i.templateText&&(a.template=i.templateText),a.xmlNamespaces={xmlNamespace:l}}else if(o.type===exports.DocumentType.JSON){var d=s;!o.isSource&&i.templateText&&(d.template=i.templateText),d.jsonType="io.atlasmap.json.v2.JsonDataSource"}n.push(s)}return n},e.serializeConstants=function(e){for(var i,t=[],n=A(e.fields);!(i=n()).done;){var r=i.value;t.push({name:r.name,value:r.value,fieldType:r.type})}return t},e.serializeProperties=function(e){for(var i,t=[],n=A(e.fields);!(i=n()).done;){var r=i.value;t.push({name:r.name,fieldType:r.type,scope:r.scope,dataSourceType:e.isSource?exports.DataSourceType.SOURCE:exports.DataSourceType.TARGET})}return t},e.serializeLookupTables=function(e){var i=[],t=e.getTables();if(!t||!t.length)return i;for(var n,r=A(t);!(n=r()).done;){for(var o,s=n.value,a=[],p=A(s.lookupEntry);!(o=p()).done;){var l=o.value;a.push({sourceValue:l.sourceValue,sourceType:l.sourceType,targetValue:l.targetValue,targetType:l.targetType})}i.push({lookupEntry:a,name:s.name})}return i},e.processCollectionPreview=function(i,t,n){t.path=i.path.replace("<>","<0>");var r=e.createInputFieldGroup([t],!0,i.docDef.id,i.path);n.push(r)},e.processActionArguments=function(e,i){var t={};if(null===e)return t;for(var n,r=A(e.argumentValues);!(n=r()).done;){var o,s=n.value;if(null===(o=e.definition)||void 0===o||!o.isCustom||!["methodName","className","name"].includes(s.name)){t[s.name]=s.value;var a=e.definition.getArgumentForName(s.name);null!=a?"INTEGER"===a.type&&(t[s.name]=parseInt(s.value,10)):i.errorService.addError(new j({message:"Cannot find action argument "+s.name+": "+s.value,level:exports.ErrorLevel.ERROR,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL,object:e}))}}return t},e.serializeFields=function(i,t,n,r){void 0===r&&(r=!1);for(var o,s=null,a=null,p=[],l=A(i.getMappedFields(t));!(o=l()).done;){var c,u=o.value;if(u.field&&!u.isPadField()){var d=u.field,f={jsonType:d.documentField.jsonType,name:d.name,path:d.path,fieldType:d.type,docId:d.docDef.id};null!==(c=d.documentField.jsonType)&&void 0!==c&&c.includes("io.atlasmap.xml.v2")&&(f.attribute=d.isAttribute),r&&!d.isConstant()||(f.value=d.value?d.value:""),d.docDef.type===exports.DocumentType.XML||d.docDef.type===exports.DocumentType.XSD?f.userCreated=d.userCreated:d.docDef.type!==exports.DocumentType.JAVA||d.isPrimitive||(f.className=d.classIdentifier),d.isProperty()?(f.jsonType="io.atlasmap.v2.PropertyField",f.name=d.name,f.scope=d.scope,f.path=n.documentService.getPropertyPath(d.scope,d.name)):d.isConstant()?(f.jsonType="io.atlasmap.v2.ConstantField",f.name=d.name):d.enumeration&&(f.jsonType=d.docDef.type===exports.DocumentType.JSON?"io.atlasmap.json.v2.JsonEnumField":d.docDef.type===exports.DocumentType.XML||d.docDef.type===exports.DocumentType.XSD?"io.atlasmap.xml.v2.XmlEnumField":"io.atlasmap.java.v2.JavaEnumField");var g=i.getMappedFields(t).length>1;if((g=g||i.transition.isExpressionMode()&&t)&&(f.index=i.getIndexForMappedField(u)-1),d.docDef.type===exports.DocumentType.CSV&&(f.column=d.column),this.serializeActions(n,u,f),t&&d.isInCollection()){var h=d.getCollectionParentField();if(i.referenceFieldExists(h.docDef.id,h.path)){if(null!==a){a.field.push(f);continue}(a=e.createInputFieldGroup([f],!0,h.docDef.id,h.path)).fieldType=h.documentField.fieldType,r?p.push(a):(a.path=h.path.replace("<>","<0>"),null===s&&(s=e.createInputFieldGroup([a],!0,h.docDef.id,h.path),a.fieldType=h.documentField.fieldType,p.push(s)))}else r?(p.push(f),s=null):e.processCollectionPreview(d,f,p)}else p.push(f),s=null}}return p},e.serializeActions=function(e,i,t){if(i.actions.length){for(var n,r=[],o=A(i.actions);!(n=o()).done;){var s=this.serializeAction(n.value,e);s&&r.push(s)}r.length>0&&(t.actions=r)}},e.serializeAction=function(i,t){var n=e.processActionArguments(i,t);return n["@type"]=i.definition.name,n},e.deserializeDocs=function(e,i){var t=[];if(!e||!e.AtlasMapping||!e.AtlasMapping.dataSource)return null;for(var n,r=A(e.AtlasMapping.dataSource);!(n=r()).done;){var o=n.value,s=new w;s.isSource="SOURCE"===o.dataSourceType,s.uri=o.uri,s.id=o.id,s.name=o.name?o.name:"",s.description=o.description;var a=o;if(a.xmlNamespaces&&a.xmlNamespaces.xmlNamespace)for(var p,l=A(a.xmlNamespaces.xmlNamespace);!(p=l()).done;){var c=p.value,u=new R;u.alias=c.alias,u.uri=c.uri,u.locationUri=c.locationUri,u.isTarget=!!c.targetNamespace&&c.targetNamespace,u.createdByUser=!0,s.namespaces.push(u)}a.template&&(i.templateText=a.template),t.push(s)}return t},e.deserializeMappings=function(i,t){var n,r=[];if(null===(n=i.AtlasMapping.mappings)||void 0===n||!n.mapping)return r;for(var o,s=A(i.AtlasMapping.mappings.mapping);!(o=s()).done;){var a=o.value;if("io.atlasmap.v2.Collection"===a.jsonType)for(var p,l=A(a.mappings.mapping);!(p=l()).done;)r.push(e.deserializeFieldMapping(p.value,t));else r.push(e.deserializeFieldMapping(a,t))}return r},e.deserializeFieldMappingFromType=function(i,t,n){"SEPARATE"===t.mappingType?(i.transition.mode=exports.TransitionMode.ONE_TO_MANY,i.transition.transitionFieldAction=K.create(n.fieldActionService.getActionDefinitionForName("Split",exports.Multiplicity.ONE_TO_MANY)),i.transition.transitionFieldAction.setArgumentValue("delimiter",t.delimiter)):"LOOKUP"===t.mappingType?(i.transition.mode=exports.TransitionMode.ENUM,i.transition.lookupTableName=t.lookupTableName):"COMBINE"===t.mappingType?(i.transition.mode=exports.TransitionMode.MANY_TO_ONE,i.transition.transitionFieldAction=K.create(n.fieldActionService.getActionDefinitionForName("Concatenate",exports.Multiplicity.MANY_TO_ONE)),i.transition.transitionFieldAction.setArgumentValue("delimiter",t.delimiter)):i.transition.mode=exports.TransitionMode.ONE_TO_ONE;for(var r,o=A(t.inputField);!(r=o()).done;)e.deserializeMappedField(i,r.value,!0,n);for(var s,a=A(t.outputField);!(s=a()).done;)e.deserializeMappedField(i,s.value,!1,n);Ce.updateMappedFieldsFromDocuments(i,n,!0)},e.deserializeConstants=function(e){var i,t,n=[];if(null==e||null===(i=e.AtlasMapping)||void 0===i||null===(t=i.constants)||void 0===t||!t.constant)return n;for(var r,o=A(e.AtlasMapping.constants.constant);!(r=o()).done;){var s=r.value,a=new D;a.name=s.name,a.path="/"+a.name,a.value=s.value,a.type=s.fieldType,a.userCreated=!0,a.isAttribute=!1,n.push(a)}return n},e.deserializeProperties=function(e,i,t){var n,r,o=[];if(null==i||null===(n=i.AtlasMapping)||void 0===n||null===(r=n.properties)||void 0===r||!r.property)return o;for(var s,a=A(i.AtlasMapping.properties.property);!(s=a()).done;){var p=s.value;if(!(t&&p.dataSourceType===exports.DataSourceType.TARGET||!t&&p.dataSourceType!==exports.DataSourceType.TARGET)){var l=new D;l.name=p.name,l.type=p.fieldType,l.scope=p.scope,l.path=e.documentService.getPropertyPath(l.scope,l.name),l.userCreated=!0,l.isAttribute=!1,o.push(l)}}return o},e.deserializeLookupTables=function(e){var i=[];if(!(e&&e.AtlasMapping&&e.AtlasMapping.lookupTables&&e.AtlasMapping.lookupTables.lookupTable))return i;for(var t,n=A(e.AtlasMapping.lookupTables.lookupTable);!(t=n()).done;){var r=t.value,o=new fe;o.name=r.name;for(var s,a=A(r.lookupEntry);!(s=a()).done;){var p=s.value,l=new de;l.sourceValue=p.sourceValue,l.sourceType=p.sourceType,l.targetValue=p.targetValue,l.targetType=p.targetType,o.lookupEntry.push(l)}i.push(o)}return i},e.deserializeFieldActions=function(e,i,t,n,r){if(e.actions)for(var o,s=A(e.actions);!(o=s()).done;){var a=o.value,p=this.parseAction(a);p.definition="CustomAction"===a.name?n.fieldActionService.getActionDefinitionForName(a.argumentValues[0].value,exports.Multiplicity.ONE_TO_ONE):n.fieldActionService.getActionDefinitionForName(p.name),null!=p.definition?(p.definition.populateFieldAction(p),r&&(a.Expression||"Expression"===a["@type"])?(t.transition.enableExpression=!0,t.transition.expression=new X(t,n),t.transition.expression.insertText(a.Expression?a.Expression.expression:a.expression)):r&&p.definition&&[exports.Multiplicity.ONE_TO_MANY,exports.Multiplicity.MANY_TO_ONE].includes(p.definition.multiplicity)?(t.transition.transitionFieldAction&&n.logger.warn("Duplicated multiplicity transformations were detected:               "+t.transition.transitionFieldAction.name+" is being overwritten by "+p.name+" ..."),t.transition.transitionFieldAction=p):i.actions.push(p)):n.errorService.addError(new j({message:"Could not find field action definition for action '"+a.name+"'",level:exports.ErrorLevel.ERROR,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL}))}},e.deserializeMappedField=function(e,i,t,n){if(Ce.isConstantField(i))i.docId?n.constantDoc.id=i.docId:i.docId=n.constantDoc.id;else if(Ce.isPropertyField(i)){var r=t?n.sourcePropertyDoc:n.targetPropertyDoc;i.docId?r.id=i.docId:i.docId=r.id,i.path=n.documentService.getPropertyPath(i.scope,i.name)}else if(!i.docId)return n.errorService.addError(new j({message:"Parsed mapping field does not have document id, dropping.",level:exports.ErrorLevel.ERROR,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL,object:i})),null;var o=new ve;return o.mappingField=i,e.addMappedField(o,t),i.actions&&this.deserializeFieldActions(i,o,e,n,t),o},e.parseAction=function(i){return i["@type"]?e.parseNewAction(i):e.parseOldAction(i)},e.parseOldAction=function(e){for(var i=0,t=Object.keys(e);i<t.length;i++){var n=t[i];if(!e.hasOwnProperty(n))return null;var r=new K;r.name=n;var o=e[n];if(o)for(var s=0,a=Object.keys(o);s<a.length;s++){var p=a[s];if(!o.hasOwnProperty(p))return null;var l=new H;l.name=p;var c=o[p];c=null==c?null:c.toString(),l.value=c,r.argumentValues.push(l)}return r}return null},e.parseNewAction=function(e){var i=new K;i.name=e["@type"];for(var t=0,n=Object.entries(e);t<n.length;t++){var r=n[t],o=r[0],s=r[1];if("@type"!==o){var a=new H;a.name=o;var p=null==s?null:s.toString();a.value=p,i.argumentValues.push(a)}}return i},e}(),be=function(){function e(e){this.api=e,this.MAX_SEARCH_MATCH=1e4}var i=e.prototype;return i.initialize=function(){var e=this;this.mappingUpdatedSubscription=this.cfg.mappingService.mappingUpdated$.subscribe((function(){for(var i,t=A(e.cfg.getAllDocs());!(i=t()).done;){var n=i.value;n.initialized&&n.updateFromMappings(e.cfg.mappings)}}))},i.uninitialize=function(){this.mappingUpdatedSubscription.unsubscribe()},i.inspectDocuments=function(){var e=this;return new l.Observable((function(i){for(var t,n=function(){var n=t.value;if(n===e.cfg.sourcePropertyDoc||n===e.cfg.targetPropertyDoc||n===e.cfg.constantDoc)return n.initialized=!0,"continue";var r=Ne.fromDocumentDefinition(e.cfg,n);e.inspectDocument(r).then((function(){i.next(n)})).catch((function(e){i.error(e)}))},r=A(e.cfg.getAllDocs());!(t=r()).done;)n()}))},i.inspectDocument=function(e){var i=this;return new Promise((function(t,n){var r=e.doc;if(r.inspectionResult){var o=JSON.parse(r.inspectionResult);return e.parseResponse(o),r.initializeFromFields(),r.initialized=!0,void t(r)}if(!e.isOnlineInspectionCapable())return r.initialized=!0,r.errorOccurred=!0,void n(r);var s=e.request;i.cfg.logger.debug("Document Inspection Request: "+JSON.stringify(s.options.json)),i.api.post(s.url,s.options).json().then((function(n){i.cfg.logger.debug("Document Inspection Response: "+JSON.stringify(n)),e.parseResponse(n),r.initializeFromFields(),r.initialized=!0,t(r)})).catch((function(e){i.cfg.errorService.addBackendError("Failed to inspect Document: "+r.name+"("+r.id+")",e),n(e)}))}))},i.getLibraryClassNames=function(){var e=this;return new Promise((function(i,t){if(void 0!==e.cfg.initCfg.baseMappingServiceUrl){var n=e.cfg.initCfg.baseMappingServiceUrl+"library/list";e.cfg.logger.debug("Library Class List Service Request: "+n),e.api.get(n).json().then((function(t){e.cfg.logger.debug("Library Class List Service Response: "+JSON.stringify(t)),i(t.ArrayList)})).catch((function(n){204!==n.status?(e.cfg.errorService.addBackendError("Error occurred while accessing the user uploaded JARs from the runtime service.",n),t(n)):i([])}))}else i([])}))},i.importNonJavaDocument=function(e,i,t,n){var r=this;return new Promise((function(o){try{var s=!1,a=function(a){if(s)return a;var l=void 0;try{if(!(l=d))throw new Error(l)}catch(e){return r.handleError("Unrecognized document suffix ("+d+")"),void o(!1)}r.addNonJavaDocument(p,u+"-"+Oe.newGuid(),u,l,t?exports.InspectionType.SCHEMA:exports.InspectionType.INSTANCE,i,n).then((function(i){i?(r.cfg.errorService.addError(new j({message:e.name+" "+d+" import complete.",level:exports.ErrorLevel.INFO,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.USER})),o(!0)):o(!1)}))},p="",l=new FileReader;r.cfg.errorService.clearValidationErrors();var c=e.name.split("."),u=c.slice(0,-1).join("."),d=c[c.length-1].toUpperCase(),f=xe((function(){return Promise.resolve(N.readFile(e,l)).then((function(e){p=e}))}),(function(e){r.cfg.errorService.addError(new j({message:"Unable to import the specified schema document.",level:exports.ErrorLevel.ERROR,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.USER,object:e})),o(!1),s=!0}));return Promise.resolve(f&&f.then?f.then(a):a(f))}catch(e){return Promise.reject(e)}}))},i.importJavaDocument=function(e,i,t,n){return void 0===t&&(t=exports.CollectionType.NONE),this.cfg.errorService.clearValidationErrors(),this.addJavaDocument(e,i,t,n)},i.addNonJavaDocument=function(e,i,t,n,r,o,s){var a=Ne.fromNonJavaProperties(this.cfg,i,t,n,r,e,o,s);return this.doAddDocument(a)},i.addJavaDocument=function(e,i,t,n){void 0===t&&(t=exports.CollectionType.NONE);var r=Ne.fromJavaProperties(this.cfg,e,i,t,n);return this.doAddDocument(r)},i.addDocument=function(e,i,t,n,r,o,s){return n===exports.DocumentType.JAVA?this.addJavaDocument(i,o):this.addNonJavaDocument(e,i,t,n,r,o,s)},i.doAddDocument=function(e){var i=this;return new Promise((function(t){try{var n=e.doc,r=n.isSource;return i.inspectDocument(e).then((function(e){try{return 0===e.fields.length&&N.removeItemFromArray(n,r?i.cfg.sourceDocs:i.cfg.targetDocs),n.updateFromMappings(i.cfg.mappings),t(!0),Promise.resolve()}catch(e){return Promise.reject(e)}})).catch((function(){t(!1)})),Promise.resolve()}catch(e){return Promise.reject(e)}}))},i.handleError=function(e,i){this.cfg.errorService.addError(new j({message:e,level:exports.ErrorLevel.ERROR,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL,object:i}))},i.filterDocumentFields=function(e,i){for(var t,n=U.getConfig(),r=void 0===e||""===e,o=r,s=A(n.getDocs(i));!(t=s()).done;){var a=t.value;a.visibleInCurrentDocumentSearch=o;for(var p,l=A(a.getAllFields());!(p=l()).done;)p.value.visibleInCurrentDocumentSearch=o;if(!r)for(var c,u=0,d=A(a.getAllFields());!(c=d()).done;){var f=c.value;if((!f.visibleInCurrentDocumentSearch||f.collapsed)&&(f.visibleInCurrentDocumentSearch=f.name.toLowerCase().includes(e.toLowerCase()),f.visibleInCurrentDocumentSearch)){a.visibleInCurrentDocumentSearch=!0;for(var g=f.parentField;null!=g&&!g.visibleInCurrentDocumentSearch;)g.visibleInCurrentDocumentSearch=!0,g.collapsed=!1,g=g.parentField,u++;try{this.markChildrenVisible(f)}catch(e){n.errorService.addError(new j({message:e.message,level:exports.ErrorLevel.INFO,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.USER}));break}if(u++>=this.MAX_SEARCH_MATCH){n.errorService.addError(new j({message:"The maximum number of fields matching the specified search filter has beeen exceeded  Try using a longer field filter.",level:exports.ErrorLevel.INFO,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.USER}));break}}}}n.mappingService.notifyLineRefresh()},i.markChildrenVisible=function(e){e.visibleInCurrentDocumentSearch=!0,e.collapsed=!1;for(var i,t=A(e.children);!(i=t()).done;)this.markChildrenVisible(i.value)},i.createConstant=function(e,i,t,n){var r=this.cfg.constantDoc.getField("/"+e);r||(r=new D),r.name=e,r.path="/"+e,r.value=i,r.type=exports.FieldType[t],r.docDef=this.cfg.constantDoc,r.userCreated=!0,this.cfg.constantDoc.addField(r),n&&this.cfg.mappingService.addFieldToActiveMapping(r),this.cfg.mappingService.notifyMappingUpdated()},i.deleteConstant=function(e){var i,t,n=this.cfg.constantDoc.getField("/"+e);if(n){this.cfg.mappingService.removeFieldFromAllMappings(n),this.cfg.constantDoc.removeField(n);var r=null===(i=this.cfg.mappings)||void 0===i?void 0:i.activeMapping,o=null==r||null===(t=r.transition)||void 0===t?void 0:t.expression;r&&o&&o.updateFieldReference(r),this.cfg.mappingService.notifyMappingUpdated()}},i.editConstant=function(e,i,t,n){var r=this.cfg.constantDoc.getField("/"+(n||e));r&&(t.length>0&&(r.type=exports.FieldType[t]),i.length>0&&(r.value=i),n&&n!==e&&(r.name=e,r.path="/"+e,this.cfg.constantDoc.updateField(r,"/"+e)),this.cfg.mappingService.notifyMappingUpdated())},i.getConstantType=function(e){var i=U.getConfig().constantDoc.getField("/"+e);return i?i.type:exports.FieldType.NONE},i.getConstantTypeIndex=function(e){var i=U.getConfig().constantDoc.getField("/"+e);if(!i)return 0;for(var t=0;t<F.length;t++)if(F[t].includes(i.type))return t;return 0},i.createProperty=function(e,i,t,n,r){var o=U.getConfig(),s=this.getPropertyPath(t,e),a=n?o.sourcePropertyDoc.getField(s):o.targetPropertyDoc.getField(s);a||(a=new D),a.name=e,a.type=exports.FieldType[i],a.scope=t,a.path=s,a.userCreated=!0,n?(a.docDef=o.sourcePropertyDoc,o.sourcePropertyDoc.addField(a)):(a.docDef=o.targetPropertyDoc,o.targetPropertyDoc.addField(a)),r&&this.cfg.mappingService.addFieldToActiveMapping(a),o.mappingService.notifyMappingUpdated()},i.deleteProperty=function(e,i,t){var n,r,o=this.getPropertyPath(i,e),s=t?this.cfg.sourcePropertyDoc.getField(o):this.cfg.targetPropertyDoc.getField(o);if(s){this.cfg.mappingService.removeFieldFromAllMappings(s),t?this.cfg.sourcePropertyDoc.removeField(s):this.cfg.targetPropertyDoc.removeField(s);var a=null===(n=this.cfg.mappings)||void 0===n?void 0:n.activeMapping,p=null==a||null===(r=a.transition)||void 0===r?void 0:r.expression;a&&p&&p.updateFieldReference(a),this.cfg.mappingService.notifyMappingUpdated()}},i.editProperty=function(e,i,t,n,r,o){var s=this.getPropertyPath(t,e),a=n?this.cfg.sourcePropertyDoc.getField(s):this.cfg.targetPropertyDoc.getField(s);a&&(r&&(a.name=r),o&&(a.scope=o),a.type=exports.FieldType[i],a.path=this.getPropertyPath(a.scope,a.name),n?this.cfg.sourcePropertyDoc.updateField(a,s):this.cfg.targetPropertyDoc.updateField(a,s),this.cfg.mappingService.notifyMappingUpdated())},i.getPropertyType=function(e,i,t){var n=t?this.cfg.sourcePropertyDoc.getField(this.getPropertyPath(i,e)):this.cfg.targetPropertyDoc.getField(this.getPropertyPath(i,e));return n?n.type:exports.FieldType.NONE},i.getPropertyTypeIndex=function(e,i,t){var n=t?this.cfg.sourcePropertyDoc.getField(this.getPropertyPath(i,e)):this.cfg.targetPropertyDoc.getField(this.getPropertyPath(i,e));if(!n)return 0;for(var r=0;r<T.length;r++)if(T[r].includes(n.type))return r;return 0},i.getPropertyPath=function(e,i){var t="/";return e&&e.length>0&&(t+=e+"/"),t+i},e}(),we=function(){function e(){this.errors=[],this.formErrors=[],this.errorUpdatedSource=new l.Subject}e.filterWith=function(e,i,t){return e&&0!==e.length?e.filter((function(e){return(!e.mapping||i&&e.mapping===i)&&(!t||!e.level||e.level===t)})):[]};var i=e.prototype;return i.addError=function(){for(var e=this,i=arguments.length,t=new Array(i),n=0;n<i;n++)t[n]=arguments[n];t.forEach((function(i){i.object&&i.object.message&&(i.message+="\n"+i.object.message);var t=exports.ErrorScope.FORM===i.scope?e.formErrors:e.errors;t.find((function(e){return e.message===i.message}))||t.unshift(i)})),this.emitUpdatedEvent()},i.addBackendError=function(e,i){this.addError(new j(0===(null==i?void 0:i.status)?{message:"Fatal network error: Unable to connect to the AtlasMap design runtime service.",level:exports.ErrorLevel.ERROR,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL,object:i}:{message:e,level:exports.ErrorLevel.ERROR,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL,object:i}))},i.getErrors=function(){return Object.assign([],this.errors)},i.removeError=function(e,i){i===exports.ErrorScope.FORM&&this.formErrorUpdatedSource&&!this.formErrorUpdatedSource.closed?this.formErrors=this.excludeByIdentifier(this.formErrors,e):this.errors=this.excludeByIdentifier(this.errors,e),this.emitUpdatedEvent()},i.resetAll=function(){this.clearAllErrors(),this.formErrors=[],this.formErrorUpdatedSource&&!this.formErrorUpdatedSource.closed&&this.formErrorUpdatedSource.complete()},i.clearAllErrors=function(){this.errors=[],this.emitUpdatedEvent()},i.clearPreviewErrors=function(){this.errors=this.errors.filter((function(e){return e.type!==exports.ErrorType.PREVIEW})),this.emitUpdatedEvent()},i.clearValidationErrors=function(e){this.errors=this.errors.filter((function(i){return!(i.type===exports.ErrorType.VALIDATION||e&&i.mapping&&i.mapping===e)})),this.emitUpdatedEvent()},i.clearFieldErrors=function(){this.errors=this.errors.filter((function(e){return e.scope!==exports.ErrorScope.FIELD})),this.emitUpdatedEvent()},i.clearFormErrors=function(){this.formErrors=[],this.emitUpdatedEvent(exports.ErrorScope.FORM)},i.subscribe=function(e){return this.errorUpdatedSource.subscribe(e)},i.createFormErrorChannel=function(){var e=this;return this.formErrorUpdatedSource&&!this.formErrorUpdatedSource.closed&&this.formErrorUpdatedSource.complete(),this.formErrors=[],this.formErrorUpdatedSource=new l.Subject,this.formErrorUpdatedSource.subscribe({complete:function(){return e.formErrors=[]}}),this.formErrorUpdatedSource},i.isRequiredFieldValid=function(e,i){return null!=e&&""!==e||(this.addError(new j({message:i+" is required.",level:exports.ErrorLevel.ERROR,scope:exports.ErrorScope.FORM})),this.emitUpdatedEvent(exports.ErrorScope.FORM),!1)},i.emitUpdatedEvent=function(e){exports.ErrorScope.FORM===e?this.formErrorUpdatedSource&&!this.formErrorUpdatedSource.closed&&this.formErrorUpdatedSource.next(this.formErrors):this.errorUpdatedSource.next(this.errors)},i.excludeByIdentifier=function(e,i){return e.filter((function(e){return e.identifier!==i}))},e}(),_e=function(){function e(e){var i;this.api=e,this.cfg=U.getConfig(),this.actions=((i={})[exports.Multiplicity.ONE_TO_ONE]=[],i[exports.Multiplicity.ONE_TO_MANY]=[],i[exports.Multiplicity.MANY_TO_ONE]=[],i[exports.Multiplicity.ZERO_TO_ONE]=[],i[exports.Multiplicity.MANY_TO_MANY]=[],i),this.isInitialized=!1,this.headers={"Content-Type":"application/json; application/octet-stream",Accept:"application/json; application/octet-stream"}}var i=e.prototype;return i.fetchFieldActions=function(){try{var e=this;return Promise.resolve(new Promise((function(i){if(e.cfg.preloadedFieldActionMetadata){if(e.clearActionDefinitions(),e.cfg.preloadedFieldActionMetadata.ActionDetails)for(var t,n=A(e.cfg.preloadedFieldActionMetadata.ActionDetails.actionDetail);!(t=n()).done;){var r=e.extractFieldActionDefinition(t.value);r.multiplicity?"Expression"!==r.name&&e.actions[r.multiplicity].push(r):e.cfg.logger.info("Field action ("+r.name+") is missing multiplicity, ingoring")}return e.sortFieldActionDefinitions(),e.isInitialized=!0,void i(!0)}if(null==e.cfg.mappingService||null==e.cfg.initCfg.baseMappingServiceUrl)return e.cfg.errorService.addError(new j({message:"Mapping service URL is not provided. Field Actions will not be used.",level:exports.ErrorLevel.WARN,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL})),e.isInitialized=!0,void i(!1);e.doFetchFieldActions().then((function(t){1===t.length&&(e.cfg.logger.info("No field action was returned from backend"),i(!1)),e.clearActionDefinitions(),t.forEach((function(i){i.multiplicity?"Expression"!==i.name&&e.actions[i.multiplicity].push(i):e.cfg.logger.info("Field action  ("+i.name+") is missing multiplicity, ignoring")})),e.sortFieldActionDefinitions(),e.isInitialized=!0,i(!0)})).catch((function(t){e.cfg.errorService.addBackendError("Could not load field action configs: ("+t.message+")",t),i(!1)}))})))}catch(e){return Promise.reject(e)}},i.getActionDefinitionForName=function(e,i){if(!this.actions||!e)return null;var t=[];i?t=this.actions[i]:Object.values(this.actions).forEach((function(e){return t=t.concat(e)}));for(var n,r=A(t);!(n=r()).done;){var o=n.value;if(e===o.name)return o}return null},i.getActionsAppliesToField=function(e,i,t){var n=this;return void 0===i&&(i=!0),void 0===t&&(t=exports.Multiplicity.ONE_TO_ONE),e&&this.actions?this.actions[t].filter((function(t){return n.appliesToField(t,e,i)})):[]},i.doFetchFieldActions=function(){var e=this;return new Promise((function(i,t){var n=[],r=e.cfg.initCfg.baseMappingServiceUrl+"fieldActions";e.cfg.logger.debug("Field Action Config Request"),e.api.get(r,{headers:e.headers}).json().then((function(t){var r,o;if(e.cfg.logger.debug("Field Action Config Response: "+JSON.stringify(t)),null!=t&&null!==(r=t.ActionDetails)&&void 0!==r&&null!==(o=r.actionDetail)&&void 0!==o&&o.length)for(var s,a=A(t.ActionDetails.actionDetail);!(s=a()).done;){var p=e.extractFieldActionDefinition(s.value);n.push(p)}i(n)})).catch((function(e){t(e)}))}))},i.extractFieldActionDefinition=function(e){this.cfg.logger.trace("Deserializing field action definition: "+JSON.stringify(e));var i=new W;if(i.name=e.name,i.isCustom=e.custom,i.sourceType=e.sourceType,i.targetType=e.targetType,i.method=e.method,i.multiplicity=e.multiplicity,i.serviceObject=e,e.actionSchema)for(var t=0,n=Object.keys(e.actionSchema.properties);t<n.length;t++){var r=n[t],o=e.actionSchema.properties[r];if("@type"!==r){var s=o.type.toUpperCase(),a=s?exports.FieldType[s]:exports.FieldType.STRING,p=new q;p.name=r,p.type=a,o.enum&&(p.values=o.enum),p.serviceObject=o,i.arguments.push(p)}else i.name=o.const}return i},i.sortFieldActionDefinitions=function(){var e=this;Object.keys(this.actions).forEach((function(i){var t=e.actions[i],n=[];if(null!=t&&0!==t.length){for(var r,o={},s=[],a=A(t);!(r=a()).done;){var p=r.value,l=p.name,c=o[l];c||(c=[],s.push(l)),c.push(p),o[l]=c}s.sort();for(var u=0,d=s;u<d.length;u++)for(var f,g=A(o[d[u]]);!(f=g()).done;)n.push(f.value);e.actions[i]=n}}))},i.appliesToField=function(e,i,t){if(null==i)return!1;var n=this.getActualField(i,!0),r=this.getActualField(i,!1);return!(t&&null==n||!t&&null==r)&&(t?this.appliesToSourceField(e,i,n):this.appliesToTargetField(e,i,r))},i.getActualField=function(e,i){return e.getFields(i).find((function(e){return"<padding field>"!==e.name}))},i.appliesToSourceField=function(e,i,t){return!!this.matchesDate(e.sourceType,t.type)||!!this.matchesNumeric(e.sourceType,t.type)||"ANY"===e.sourceType||t.type===e.sourceType},i.appliesToTargetField=function(e,i,t){return!(null==t||e.multiplicity!==exports.Multiplicity.ONE_TO_ONE||!(this.matchesDate(e.sourceType,t.type)&&this.matchesDate(e.targetType,t.type)||this.matchesNumeric(e.sourceType,t.type)&&this.matchesNumeric(e.targetType,t.type))&&("ANY"!==e.sourceType&&e.sourceType!==t.type||"ANY"!==e.targetType&&t.type!==e.targetType))},i.matchesDate=function(e,i){return"ANY"===e||"ANY_DATE"===e&&-1!==["DATE","DATE_TIME","DATE_TIME_TZ","TIME"].indexOf(i)},i.matchesNumeric=function(e,i){return"ANY"===e||"NUMBER"===e&&-1!==["LONG","INTEGER","FLOAT","DOUBLE","SHORT","BYTE","DECIMAL","NUMBER"].indexOf(i)},i.clearActionDefinitions=function(){var e=this;Object.keys(exports.Multiplicity).forEach((function(i){return e.actions[i]=[]}))},e}();(Me=exports.FileName||(exports.FileName={})).DIGEST="Mapping digest file",Me.ADM="ADM archive file",Me.JAR="Jar file",(Ae=exports.FileType||(exports.FileType={})).DIGEST="GZ",Ae.ADM="ZIP",Ae.JAR="JAR";var Le=function(){function e(e){this.api=e}var i=e.prototype;return i.findMappingFiles=function(e){var i=this;return new Promise((function(t,n){var r=i.cfg.initCfg.baseMappingServiceUrl+"mappings"+(null==e?"":"?filter="+e);i.cfg.logger.debug("Mapping List Request"),i.api.get(r).json().then((function(e){i.cfg.logger.debug("Mapping List Response: "+JSON.stringify(e)),t(e.StringMap.stringMapEntry.map((function(e){return e.name})))})).catch((function(e){204!==e.status&&(i.cfg.errorService.addBackendError("Error occurred while accessing the current mapping files from the runtime service.",e),n(e))}))}))},i.getCurrentMappingDigest=function(){var e=this;return new Promise((function(i,t){e.getCurrentFile(exports.FileName.DIGEST,exports.FileType.DIGEST).then((function(e){if(e){var t=c.inflate(e),n=new Uint8Array(t).reduce((function(e,i){return e+String.fromCharCode(i)}),""),r=N.objectize(n);i(r)}else i(null)})).catch((function(e){t(e)}))}))},i.getCurrentADMArchive=function(){return this.getCurrentFile(exports.FileName.ADM,exports.FileType.ADM)},i.getCurrentFile=function(e,i){var t=this;return new Promise((function(n,r){var o=t.cfg.initCfg.baseMappingServiceUrl+"mapping/"+i+"/";t.cfg.logger.debug("Get Current "+e+" Request: "+o),t.api.get(o,{headers:{"Content-Type":"application/octet-stream",Accept:"application/octet-stream","Response-Type":"application/octet-stream"}}).arrayBuffer().then((function(i){t.cfg.logger.debug("Get Current "+e+" Response: "+JSON.stringify(i)),n(i.byteLength?new Uint8Array(i):null)})).catch((function(i){204!==i.status&&(t.cfg.errorService.addBackendError("Error occurred while accessing the "+e+" from the runtime service.",i),r(i))}))}))},i.resetMappings=function(){var e=this;return new Promise((function(i){var t=e.cfg.initCfg.baseMappingServiceUrl+"mapping/RESET";e.cfg.logger.debug("Reset Mappings Request"),e.api.delete(t).arrayBuffer().then((function(t){return e.cfg.logger.debug("Reset Mappings Response: "+JSON.stringify(t)),i(!0),t})).catch((function(t){e.cfg.errorService.addBackendError("Error occurred while resetting mappings.",t),i(!1)}))}))},i.resetLibs=function(){var e=this;return new Promise((function(i){var t=e.cfg.initCfg.baseMappingServiceUrl+"mapping/resetLibs";e.cfg.logger.debug("Reset Libs Request"),e.api.delete(t).arrayBuffer().then((function(t){return e.cfg.logger.debug("Reset Libs Response: "+JSON.stringify(t)),i(!0),t})).catch((function(t){e.cfg.errorService.addBackendError("Error occurred while resetting user-defined JAR libraries.",t),i(!1)}))}))},i.resetAll=function(){var e=this;return new Promise((function(i){e.cfg.errorService.resetAll(),e.cfg.fileService.resetMappings().then((function(){try{return e.cfg.mappings=null,e.cfg.clearDocs(),e.cfg.fileService.resetLibs().then((function(e){i(e)})).catch((function(t){e.cfg.errorService.addBackendError("Failed to remove jar files: "+t.message,t),i(!1)})),Promise.resolve()}catch(e){return Promise.reject(e)}})).catch((function(t){e.cfg.errorService.addBackendError("Failed to remove mappings: "+t.message,t),i(!1)}))}))},i.setMappingToService=function(e){var i=JSON.stringify(e);return this.setMappingStringToService(i)},i.setMappingStringToService=function(e){var i=this;return new Promise((function(t){var n=i.cfg.initCfg.baseMappingServiceUrl+"mapping/JSON";i.cfg.logger.debug("Set Mapping Request (set mapping): "+e),i.api.put(n,{headers:{"Content-Type":"application/json",Accept:"application/json","Response-Type":"application/json"},body:e}).arrayBuffer().then((function(e){i.cfg.logger.debug("Set Mapping Response: "+JSON.stringify(e)),t(!0)})).catch((function(e){i.cfg.errorService.addBackendError("Unable to update the mappings file to the AtlasMap design runtime service. "+e.status+" "+e.statusText,e),t(!1)}))}))},i.setMappingDigestToService=function(e){var i=this;return new Promise((function(t){var n,r=JSON.stringify(e),o=N.str2bytes(r);try{n=c.gzip(o)}catch(e){return i.cfg.errorService.addError(new j({message:"Unable to compress the current data mappings.",level:exports.ErrorLevel.ERROR,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL,object:e})),void t(!1)}var s=i.cfg.initCfg.baseMappingServiceUrl+"mapping/GZ/0",a=new Blob([n],{type:"application/octet-stream"});i.setBinaryFileToService(a,s,exports.FileName.DIGEST).then((function(e){t(e)}))}))},i.setADMArchiveFileToService=function(e){var i=this.cfg.initCfg.baseMappingServiceUrl+"mapping/ZIP/",t=new Blob([e],{type:"application/octet-stream"});return this.setBinaryFileToService(t,i,exports.FileName.ADM)},i.setBinaryFileToService=function(e,i,t){var n=this;return new Promise((function(r){n.cfg.logger.debug("Set "+t+" Request"),n.api.put(i,{body:e}).arrayBuffer().then((function(e){n.cfg.logger.debug("Set "+t+" Response: "+JSON.stringify(e)),r(!0)})).catch((function(e){n.cfg.errorService.addBackendError("Unable to update the "+t+" to the AtlasMap design runtime service.\n              "+e.status+" "+e.statusText,e),r(!1)}))}))},i.importJarFile=function(e){var i=this;return new Promise((function(t){try{var n=i.cfg.initCfg.baseMappingServiceUrl+"library",r=new Blob([e],{type:"application/octet-stream"});return Promise.resolve(i.setBinaryFileToService(r,n,exports.FileName.JAR)).then((function(e){var n=function(){if(e&&i.cfg.mappingService)return i.cfg.mappingService.notifyMappingUpdated(),Promise.resolve(i.cfg.fieldActionService.fetchFieldActions()).then((function(){t(!0)}));t(!1)}();if(n&&n.then)return n.then((function(){}))}))}catch(e){return Promise.reject(e)}}))},i.updateDigestFile=function(){var e=this;return new Promise((function(i){try{var t=xe((function(){function t(){var t=Ie.generateMappingDigest(e.cfg,n);e.setMappingDigestToService(t).then((function(e){i(e)}))}var n=void 0,r=function(){if(e.cfg.mappings)return Promise.resolve(e.getCurrentMappingJson()).then((function(e){n=e}))}();return r&&r.then?r.then(t):t()}),(function(t){e.cfg.errorService.addError(new j({message:"Unable to update mapping digest file.",level:exports.ErrorLevel.ERROR,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL,object:t})),i(!1)}));return Promise.resolve(t&&t.then?t.then((function(){})):void 0)}catch(e){return Promise.reject(e)}}))},i.exportADMArchive=function(e){var i=this;return new Promise((function(t){i.updateDigestFile().then((function(){i.getCurrentADMArchive().then((function(n){try{if(null===n)return t(!1),Promise.resolve();"adm"!==e.split(".").pop()&&(e=e.concat(".adm"));var r=new Blob([n],{type:"application/octet-stream"});return N.writeFile(r,e).then((function(e){t(e)})).catch((function(e){i.cfg.errorService.addError(new j({message:"Unable to save the current data mappings.",level:exports.ErrorLevel.ERROR,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL,object:e})),t(!1)})),Promise.resolve()}catch(e){return Promise.reject(e)}}))}))}))},i.importADMArchive=function(e){var i=this;return new Promise((function(t){i.resetAll().then((function(){var n=new FileReader;N.readBinaryFile(e,n).then((function(e){i.setADMArchiveFileToService(e).then((function(e){t(e)}))})).catch((function(n){i.cfg.errorService.addError(new j({message:"Unable to import the specified ADM file '"+e.name+"'",level:exports.ErrorLevel.ERROR,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL,object:n})),t(!1)}))}))}))},i.getCurrentMappingJson=function(){var e=this;return new Promise((function(i,t){if(null!==e.cfg.mappings){e.cfg.mappingFiles[0]=e.cfg.mappings.name;var n=e.cfg.initCfg.baseMappingServiceUrl+"mapping/JSON/";e.cfg.logger.debug("Get Current Mapping Request"),e.api.get(n).json().then((function(t){e.cfg.logger.debug("Get Current Mapping Response: "+JSON.stringify(t)),i(t)})).catch((function(n){204!==n.status?(e.cfg.errorService.addBackendError("Error occurred while accessing the current mappings from the backend service.",n),t(n)):i(void 0)}))}else t()}))},S(e,[{key:"cfg",get:function(){return this._cfg},set:function(e){this._cfg=e,this._cfg.logger||(this._cfg.logger=u.getLogger("file-management"))}}]),e}(),Ue=function(){function e(){}var i=e.prototype;return i.willClearOutSourceFieldsOnTogglingExpression=function(){var e,i;return!(null===(e=this.cfg.mappings)||void 0===e||null===(i=e.activeMapping)||void 0===i||!i.transition.enableExpression)&&null!=this.cfg.mappings.activeMapping.getFirstCollectionField(!0)},i.isExpressionEnabledForActiveMapping=function(){var e,i,t;return!(null===(e=this.cfg.mappings)||void 0===e||null===(i=e.activeMapping)||void 0===i||null===(t=i.transition)||void 0===t||!t.enableExpression)},i.toggleExpressionMode=function(){var e=this;if(this.cfg.mappings&&this.cfg.mappings.activeMapping&&this.cfg.mappings.activeMapping.transition){var i,t=this.cfg.mappings.activeMapping;t.transition.mode!==exports.TransitionMode.ONE_TO_MANY?(this.willClearOutSourceFieldsOnTogglingExpression()&&t.sourceFields.splice(0,t.sourceFields.length),t.transition.enableExpression=!t.transition.enableExpression,t.transition.enableExpression?(t.transition.mode=exports.TransitionMode.EXPRESSION,t.transition.transitionFieldAction=null,this.mappingUpdatedSubscription=this.cfg.mappingService.mappingUpdated$.subscribe((function(){e.cfg&&e.cfg.mappings&&e.cfg.mappings.activeMapping&&e.cfg.mappings.activeMapping.isFullyMapped()&&e.updateExpression(e.cfg.mappings.activeMapping)})),t.transition.expression&&this.cfg.mappings.activeMapping.transition.expression.expressionUpdatedSource.next()):(null===(i=this.mappingUpdatedSubscription)||void 0===i||i.unsubscribe(),t.transition.mode=exports.TransitionMode.ONE_TO_ONE,this.cfg.mappingService.updateActiveMappingTransition())):this.cfg.errorService.addError(new j({message:"Cannot establish a conditional mapping expression when multiple target fields are selected.\n        Please select only one target field and try again.",level:exports.ErrorLevel.WARN,scope:exports.ErrorScope.MAPPING,type:exports.ErrorType.USER,mapping:t}))}else this.cfg.errorService.addError(new j({message:"Please select a mapping first.",level:exports.ErrorLevel.INFO,scope:exports.ErrorScope.MAPPING,type:exports.ErrorType.USER}))},i.updateExpression=function(e,i,t){var n;null===(n=e.transition.expression)||void 0===n||n.updateFieldReference(e,i,t)},i.addFieldToExpression=function(e,i,t,n,r,o){var s,a=e.getMappedFieldByPath(t,!0,i);if(!a&&!(a=e.getReferenceField(i,t))){var p=this.cfg.getDocForIdentifier(i,!0),l=D.getField(t,null==p?void 0:p.getAllFields());if(l&&(this.updateExpression(e,n.getUuid(),o?n.toText().length:r),this.cfg.mappingService.addFieldToActiveMapping(l)),!(a=e.getMappedFieldByPath(t,!0,i)))return}null===(s=e.transition.expression)||void 0===s||s.addConditionalExpressionNode(a,n.getUuid(),o?n.str.length:r)},i.executeFieldSearch=function(e,i,t){var n=e.mappings.activeMapping;if(!n)return[];for(var r,o=[],s=[],a=A(e.getDocs(t));!(r=a()).done;){var p=r.value;s=(s=p.getTerminalFields()).concat(p.getComplexFields()),D.alphabetizeFields(s);for(var l,c="",u=-1,d=A(s);!(l=d()).done;){var f=l.value,g=[""],h=null==f?"":f.getFieldLabel(e.showTypes,!0);if(null==i||""===i||-1!==h.toLowerCase().indexOf(i.toLowerCase())){if(!e.mappingService.isFieldSelectable(n,f)&&f.type!==exports.FieldType.COMPLEX)continue;if(c!==f.docDef.name){if(0===u){o.pop();continue}var m=[""];m[0]=c=f.docDef.name,m[1]=f.docDef.id,u=0,o.push(m)}h=N.extractDisplayPath(f.path,100),g[0]=f.docDef.id,g[1]=f.path,u++,o.push(g)}if(o.length>19)break}}return o},i.getMappingExpressionStr=function(e,i){if(!i&&!Ce.activeMapping(this.cfg))return"";var t;if(i||(i=null===(t=this.cfg.mappings)||void 0===t?void 0:t.activeMapping),!i.transition.expression){if(!i.transition.enableExpression||!Ce.hasFieldAction(i.sourceFields))return"";this.createMappingExpression(i)}return i.transition.expression&&i.transition.enableExpression?e?i.transition.expression.expressionHTML:i.transition.expression.toText(!0):""},i.createMappingExpression=function(e){var i,t,n,r,o="",s=e.getMappedFields(!0),a=Ce.hasMappedCollection(e,!0),p=e.getMappedFields(!1),l=Ce.hasMappedCollection(e,!1);return s.length>1||a&&(null===(i=e.transition.transitionFieldAction)||void 0===i||null===(t=i.definition)||void 0===t?void 0:t.multiplicity)===exports.Multiplicity.MANY_TO_ONE?(o="Concatenate (",o+=this.fieldActionsToExpression(e),o+=", '"+he.delimiterModels[e.transition.delimiter].actualDelimiter+"')"):(p.length>1||l)&&(null===(n=e.transition.transitionFieldAction)||void 0===n||null===(r=n.definition)||void 0===r?void 0:r.multiplicity)===exports.Multiplicity.ONE_TO_MANY?(o="Split (",o+=this.fieldActionsToExpression(e),o+=")"):o+=this.fieldActionsToExpression(e),e.transition.expression=new X(e,this.cfg),e.transition.expression.insertText(o),o},i.qualifiedExpressionRef=function(e){var i,t,n,r;return null!==(null===(i=e.field)||void 0===i?void 0:i.path)?"${"+(null===(t=e.field)||void 0===t||null===(n=t.docDef)||void 0===n?void 0:n.id)+":"+(null===(r=e.field)||void 0===r?void 0:r.path)+"}":"null"},i.fieldActionArgumentToExpression=function(e,i){return"string"===i?"'"+e.value+"'":e.value},i.fieldActionToExpression=function(e,i){var t=e.actions[i],n=t.name+" (";if(i<e.actions.length-1?(i++,n+=this.fieldActionToExpression(e,i)):n+=this.qualifiedExpressionRef(e),t.argumentValues.length>0)for(var r=0;r<t.argumentValues.length;r++)n+=", "+this.fieldActionArgumentToExpression(t.argumentValues[r],t.definition.arguments[r].type);return n+")"},i.fieldActionsToExpression=function(e){for(var i,t="",n=0;n<e.sourceFields.length;n++)(i=e.sourceFields[n]).actions.length>0?t+=this.fieldActionToExpression(i,0):t+=this.qualifiedExpressionRef(i),n!==e.sourceFields.length-1&&(t+=", ");return t},e}(),je=function(){function e(e){this.api=e,this.lineRefreshSource=new l.Subject,this.lineRefresh$=this.lineRefreshSource.asObservable(),this.mappingUpdatedSource=new l.Subject,this.mappingUpdated$=this.mappingUpdatedSource.asObservable(),this.mappingSelectionRequiredSource=new l.Subject,this.mappingSelectionRequired$=this.mappingSelectionRequiredSource.asObservable()}var i=e.prototype;return i.fetchMappings=function(e,i){var t=this;return new Promise((function(e){t.cfg.fileService.getCurrentMappingJson().then((function(n){try{return n?(t.cfg.mappings=i,Re.deserializeMappingServiceJSON(n,t.cfg),t.updateMappingsTransition(),e(!0),Promise.resolve()):(e(!1),Promise.resolve())}catch(e){return Promise.reject(e)}})).catch((function(i){t.cfg.errorService.addBackendError("Failed to load mapping definition from backend:",i),e(!1)}))}))},i.updateMappingsTransition=function(){var e=this;this.cfg.mappings.getAllMappings(!0).forEach((function(i){return e.updateTransition(i)}))},i.updateActiveMappingTransition=function(){var e,i;null!==(e=this.cfg.mappings)&&void 0!==e&&e.activeMapping&&this.updateTransition(null===(i=this.cfg.mappings)||void 0===i?void 0:i.activeMapping)},i.removeMapping=function(e){try{var i=this;return Promise.resolve(new Promise((function(t){try{var n=function(){t(!0)},r=i.cfg.mappings.removeMapping(e),o=function(){if(r)return i.deselectMapping(),Promise.resolve(i.notifyMappingUpdated()).then((function(){}));i.deselectMapping()}();return Promise.resolve(o&&o.then?o.then(n):n())}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}},i.removeAllMappings=function(){try{var e=this;return Promise.resolve(new Promise((function(i){try{for(var t,n=A(e.cfg.mappings.getAllMappings(!0));!(t=n()).done;)e.cfg.mappings.removeMapping(t.value),e.deselectMapping();return Promise.resolve(e.notifyMappingUpdated()).then((function(){i(!0)}))}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}},i.updateMappedField=function(e){try{var i=this;return Promise.resolve(new Promise((function(t){try{return e.isEmpty()?(i.cfg.mappings.removeMapping(e),i.deselectMapping()):i.updateTransition(e),Promise.resolve(i.notifyMappingUpdated()).then((function(){t(!0)}))}catch(e){return Promise.reject(e)}})))}catch(e){return Promise.reject(e)}},i.moveMappedFieldTo=function(e,i,t){if(e&&i){var n=e.getMappedFields(i.isSource());n.splice(e.getIndexForMappedField(i)-1,1),n.splice(t-1,0,i),this.clearExtraPaddingFields(n,!0),this.notifyMappingUpdated()}},i.addPlaceholders=function(e,i,t,n){for(var r=null,o=0;o<e;o++)(r=new ve).field=new b(n),n?i.sourceFields.splice(t+o,0,r):i.targetFields.splice(t+o,0,r)},i.addFieldToActiveMapping=function(e){var i=this.cfg.mappings.activeMapping;if(i){var t=this.getFieldSelectionExclusionReason(i,e);null==t?(i.addField(e,!1),this.updateTransition(i),(i.sourceFields.length>0||i.targetFields.length>0)&&this.notifyMappingUpdated()):this.cfg.errorService.addError(new j({message:"The field '"+e.name+"' cannot be selected, "+t+".",level:exports.ErrorLevel.ERROR,mapping:i,scope:exports.ErrorScope.MAPPING,type:exports.ErrorType.USER}))}else this.cfg.errorService.addError(new j({message:"No mapping is selected to add a field '"+e.name+"'",level:exports.ErrorLevel.ERROR,scope:exports.ErrorScope.MAPPING,type:exports.ErrorType.USER}))},i.getFieldSelectionExclusionReason=function(e,i){if(!i.isTerminal())return"field is a parent field";if(0===e.getAllMappedFields().length)return null;var t=e.getMappedTarget(i);return null==t||i.isInCollection?e.isLookupMode()?i.enumeration?null:"only Enumeration fields are valid for this mapping":i.enumeration?"Enumeration fields are not valid for this mapping":e.transition.enableExpression&&!i.isSource()&&e.getMappedFields(!1).length>0?"cannot add multiple target fields when conditional mapping is enabled.":null:"it is already the target of another mapping ("+t+"). "},i.isFieldSelectable=function(e,i){return null==this.getFieldSelectionExclusionReason(e,i)},i.addNewMapping=function(e,i){i||this.deselectMapping();var t=new Ee;null!=e?(t.addField(e,!1),this.updateTransition(t),this.selectMapping(t),this.notifyMappingUpdated()):this.selectMapping(t)},i.newMapping=function(){this.deselectMapping();var e=new Ee;this.updateTransition(e),this.selectMapping(e),this.notifyMappingUpdated()},i.selectMapping=function(e){null!=e?(this.cfg.mappings.activeMapping=e,this.cfg.showMappingDetailTray=!0,this.mappingUpdatedSource.next()):this.deselectMapping()},i.deselectMapping=function(){this.cfg.showMappingDetailTray=!1,this.cfg.mappings.activeMapping=null,this.notifyMappingUpdated()},i.removeDocumentReferenceFromAllMappings=function(e){for(var i,t=A(this.cfg.mappings.getAllMappings(!0));!(i=t()).done;)for(var n,r=i.value,o=A(r.getAllFields());!(n=o()).done;){var s=n.value;s instanceof b||s.docDef.id!==e||(this.removeFieldFromAllMappings(s),0!==r.sourceFields.length&&0!==r.targetFields.length||(this.cfg.mappings.removeMapping(r),r===this.cfg.mappings.activeMapping&&this.cfg.mappingService.deselectMapping()))}},i.removeFieldFromAllMappings=function(e){for(var i,t=A(this.cfg.mappings.getAllMappings(!0));!(i=t()).done;){var n=i.value,r=n.getMappedFieldForField(e);null!=r&&(n.removeMappedField(r),n.isEmpty()&&this.cfg.mappings.removeMapping(n))}},i.validateMappings=function(e){try{var i=this;return Promise.resolve(new Promise((function(t){if(null!==i.cfg.initCfg.baseMappingServiceUrl&&null!==i.cfg.mappings){i.cfg.errorService.clearValidationErrors();var n=i.cfg.initCfg.baseMappingServiceUrl+"mapping/validate/"+i.cfg.mappingDefinitionId;i.cfg.logger.debug("Validation Service Request: "+JSON.stringify(e)+"\n"),i.api.put(n,{json:e}).json().then((function(e){i.cfg.logger.debug("Validation Service Response: "+JSON.stringify(e)+"\n"),i.processValidationResponse(e,t)})).catch((function(){i.cfg.logger.warn("Unable to fetch validation data."),t(!1)}))}else t(!1)})))}catch(e){return Promise.reject(e)}},i.processValidationResponse=function(e,i){var t,n=this;if(null!==this.cfg.mappings){var r=[];if(e&&e.Validations&&e.Validations.validation)for(var o,s=function(){var e=o.value,i=exports.ErrorLevel[e.status?e.status:"ERROR"],t=exports.ErrorScope[e.scope?e.scope:"MAPPING"],s=void 0;t&&t===exports.ErrorScope.MAPPING&&e.id?(t=exports.ErrorScope.MAPPING,n.cfg.mappings&&n.cfg.mappings.mappings&&(s=n.cfg.mappings.mappings.find((function(i){return i.uuid===e.id})))):t=exports.ErrorScope.APPLICATION,r.push(new j({message:e.message,level:i,scope:t,mapping:s,type:exports.ErrorType.VALIDATION}))},a=A(e.Validations.validation);!(o=a()).done;)s();(t=this.cfg.errorService).addError.apply(t,r),i(!0)}else i(!1)},i.notifyLineRefresh=function(){var e=this;setTimeout((function(){e.lineRefreshSource.next()}),1)},i.notifyMappingUpdated=function(){var e=this;return new Promise((function(i){try{var t=function(){e.mappingUpdatedSource.next(),e.notifyLineRefresh(),i(!0)},n=function(){if(e.cfg.mappings){var i=e.cfg.mappings.activeMapping;i&&-1===e.cfg.mappings.mappings.indexOf(i)&&e.cfg.mappings.mappings.push(i);var t=Re.serializeMappings(e.cfg);return Promise.resolve(e.validateMappings(t)).then((function(i){var n=function(){if(i)return Promise.resolve(e.cfg.fileService.setMappingToService(t)).then((function(){}))}();if(n&&n.then)return n.then((function(){}))}))}}();return Promise.resolve(n&&n.then?n.then(t):t())}catch(e){return Promise.reject(e)}}))},i.updateTransition=function(e){if(!e.transition.enableExpression){for(var i,t=A(e.getAllFields());!(i=t()).done;)if(i.value.enumeration)return e.transition.mode=exports.TransitionMode.ENUM,void Pe.populateMappingLookupTable(this.cfg.mappings,e);var n=e.getMappedFields(!0),r=Ce.hasMappedCollection(e,!0),o=e.getMappedFields(!1),s=Ce.hasMappedCollection(e,!1);if(r&&s)e.transition.mode=exports.TransitionMode.FOR_EACH;else{if(n.length>1||r)return e.transition.mode=exports.TransitionMode.MANY_TO_ONE,void(e.transition.transitionFieldAction&&e.transition.transitionFieldAction.definition&&e.transition.transitionFieldAction.definition.multiplicity===exports.Multiplicity.MANY_TO_ONE||(e.transition.transitionFieldAction=K.create(this.cfg.fieldActionService.getActionDefinitionForName("Concatenate",exports.Multiplicity.MANY_TO_ONE)),e.transition.transitionFieldAction.setArgumentValue("delimiter"," "),e.transition.transitionFieldAction.setArgumentValue("delimitingEmptyValues","true")));var a;if(o.length>1||s)return e.transition.mode=exports.TransitionMode.ONE_TO_MANY,void(e.transition.transitionFieldAction&&(null===(a=e.transition.transitionFieldAction.definition)||void 0===a?void 0:a.multiplicity)===exports.Multiplicity.ONE_TO_MANY||(e.transition.transitionFieldAction=K.create(this.cfg.fieldActionService.getActionDefinitionForName("Split",exports.Multiplicity.ONE_TO_MANY)),e.transition.transitionFieldAction.setArgumentValue("delimiter"," "),e.transition.transitionFieldAction.setArgumentValue("collapseRepeatingDelimiters","false")));e.transition.mode=exports.TransitionMode.ONE_TO_ONE,e.transition.transitionFieldAction=null}}},i.clearExtraPaddingFields=function(e,i){var t=0,n=null;for(t=e.length-1;t>=0;t--)if((n=e[t]).isPadField())N.removeItemFromArray(n,e);else if(i)break},i.getEnumerationValues=function(e,i){return Pe.getEnumerationValues(e,i)},i.setEnumFieldValue=function(e,i){e.enumIndexValue=i},i.updateEnumerationValues=function(e,i,t){Pe.updateEnumerationValues(e,i,t),this.notifyMappingUpdated()},i.isEnumerationMapping=function(e){return e.transition.mode===exports.TransitionMode.ENUM},S(e,[{key:"cfg",get:function(){return this._cfg},set:function(e){var i=this;this._cfg=e,this._cfg.logger||(this._cfg.logger=u.getLogger("mapping-management")),this._cfg.logger.getLevel()<=this._cfg.logger.levels.DEBUG&&this.mappingUpdated$.subscribe((function(){i.cfg.mappings&&i.cfg.mappings&&i.cfg.mappings.activeMapping&&i.cfg.logger.info("mapping updated: "+JSON.stringify(Re.serializeMappings(i.cfg)))}))}}]),e}(),Be=function(){function e(e){this.api=e,this.mappingPreviewInputSource=new l.Subject,this.mappingPreviewInput$=this.mappingPreviewInputSource.asObservable(),this.mappingPreviewOutputSource=new l.Subject,this.mappingPreviewOutput$=this.mappingPreviewOutputSource.asObservable(),this.mappingPreviewErrorSource=new l.Subject,this.mappingPreviewError$=this.mappingPreviewErrorSource.asObservable()}var i=e.prototype;return i.enableMappingPreview=function(){null!=this.cfg.initCfg.baseMappingServiceUrl&&(this.cfg.showMappingPreview=!0,this.mappingPreviewInputSubscription=this.createMappingPreviewSubscription(),this.mappingUpdatedSubscription=this.createMappingUpdatedSubscription())},i.createMappingPreviewSubscription=function(){var e=this;return this.mappingPreviewInput$.subscribe((function(i){if(i&&i.isFullyMapped()){for(var t,n=!1,r=A(i.getFields(!0));!(t=r()).done;)if(t.value.value){n=!0;break}if(!n)for(var o,s=A(i.getFields(!1));!(o=s()).done;)if(o.value.value){n=!0;break}if(n){var a=e.createPreviewRequestBody(i);e.cfg.logger.debug("Process Mapping Preview Request: "+JSON.stringify(a)),e.api.put(e.cfg.initCfg.baseMappingServiceUrl+"mapping/process",{json:a}).json().then((function(t){e.cfg.logger.debug("Process Mapping Preview Response: "+JSON.stringify(t)),e.processPreviewResponse(i,t)})).catch((function(t){e.cfg.mappings&&e.cfg.mappings.activeMapping&&e.cfg.mappings.activeMapping===i&&e.cfg.errorService.addError(new j({message:t,level:exports.ErrorLevel.ERROR,mapping:i,scope:exports.ErrorScope.MAPPING,type:exports.ErrorType.PREVIEW})),e.mappingPreviewErrorSource.next([new j({message:t,level:exports.ErrorLevel.ERROR})])}))}}}))},i.createPreviewRequestBody=function(e){return{ProcessMappingRequest:{jsonType:"io.atlasmap.v2.ProcessMappingRequest",mapping:Re.serializeFieldMapping(this.cfg,e,"preview",!1)}}},i.processPreviewResponse=function(e,i){for(var t,n=Re.deserializeFieldMapping(i.ProcessMappingResponse.mapping,this.cfg),r=A(e.targetFields);!(t=r()).done;)for(var o,s=t.value,a=A(n.targetFields);!(o=a()).done;){var p,l,c,u,d,f=o.value;if((null===(p=s.field)||void 0===p||null===(l=p.docDef)||void 0===l?void 0:l.id)===(null===(c=f.field)||void 0===c?void 0:c.docDef.id)&&(null===(u=s.field)||void 0===u?void 0:u.path)===(null===(d=f.field)||void 0===d?void 0:d.path)){var g;s.field.value=null===(g=f.mappingField)||void 0===g?void 0:g.value;var h=n.targetFields.indexOf(f);if(-1!==h){n.targetFields.splice(h,1);break}}}this.mappingPreviewOutputSource.next(n);var m,v=Re.deserializeAudits(i.ProcessMappingResponse.audits,exports.ErrorType.PREVIEW);this.cfg.mappings.activeMapping===e&&(v.forEach((function(i){return i.mapping=e})),(m=this.cfg.errorService).addError.apply(m,v)),this.mappingPreviewErrorSource.next(v)},i.createMappingUpdatedSubscription=function(){var e=this;return this.cfg.mappingService.mappingUpdated$.subscribe((function(){e.cfg&&e.cfg.mappings&&e.cfg.mappings.activeMapping&&e.cfg.mappings.activeMapping.isFullyMapped()&&e.mappingPreviewInputSource.next(e.cfg.mappings.activeMapping)}))},i.disableMappingPreview=function(){var e,i,t=!1;if(this.cfg.showMappingPreview=!1,null!==(e=this.cfg.mappings)&&void 0!==e&&null!==(i=e.activeMapping)&&void 0!==i&&i.isFullyMapped())for(var n,r=A(this.cfg.mappings.getAllMappings(!0));!(n=r()).done;)for(var o,s=A(n.value.getAllFields());!(o=s()).done;){var a,p=o.value;(null===(a=p.value)||void 0===a?void 0:a.length)>0&&!p.isConstant()&&(p.value="",t=!0)}t&&this.cfg.mappingService.notifyMappingUpdated(),this.mappingUpdatedSubscription&&(this.mappingUpdatedSubscription.unsubscribe(),this.mappingUpdatedSubscription=void 0),this.mappingPreviewInputSubscription&&(this.mappingPreviewInputSubscription.unsubscribe(),this.mappingPreviewInputSubscription=void 0)},i.toggleMappingPreview=function(e){return e?this.enableMappingPreview():this.disableMappingPreview(),e},e}();u.setDefaultLevel(u.levels.WARN);var Je=function(){function e(e){this.api=e,this.cfg=U.getConfig(),this.systemInitializedSource=new l.Subject,this.systemInitialized$=this.systemInitializedSource.asObservable(),this.initializationStatusChangedSource=new l.Subject,this.initializationStatusChanged$=this.initializationStatusChangedSource.asObservable(),this.documentService=new be(this.api),this.mappingService=new je(this.api),this.errorService=new we,this.fieldActionService=new _e(this.api),this.fileService=new Le(this.api),this.previewService=new Be(this.api),this.expressionService=new Ue,this.resetConfig(),this.documentService.initialize()}var i=e.prototype;return i.resetConfig=function(){this.cfg=new U,this.cfg.documentService=this.documentService,this.cfg.documentService.cfg=this.cfg,this.cfg.mappingService=this.mappingService,this.cfg.mappingService.cfg=this.cfg,this.cfg.errorService=this.errorService,this.cfg.fieldActionService=this.fieldActionService,this.cfg.fieldActionService.cfg=this.cfg,this.cfg.fileService=this.fileService,this.cfg.fileService.cfg=this.cfg,this.cfg.previewService=this.previewService,this.cfg.previewService.cfg=this.cfg,this.cfg.expressionService=this.expressionService,this.cfg.expressionService.cfg=this.cfg,this.cfg.initializationService=this,this.cfg.logger=u.getLogger("config"),U.setConfig(this.cfg)},i.initialize=function(){var e=this;return new Promise((function(i){try{var t=!1,n=function(n){if(t)return n;e.updateLoadingStatus("Loading source/target documents."),e.cfg.documentService.inspectDocuments().subscribe({next:function(){e.updateStatus()}}),e.initializeWithMappingDigest().finally((function(){e.updateStatus()})),i(!0)};if(e.cfg.setConstantPropertyDocs(),e.cfg.errorService.resetAll(),e.cfg.fieldActionService.isInitialized=!1,e.cfg.initCfg.initialized=!1,e.cfg.initCfg.mappingInitialized=!1,null==e.cfg.mappingService?e.cfg.errorService.addError(new j({message:"Mapping service is not configured, validation service will not be used.",level:exports.ErrorLevel.WARN,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL})):null==e.cfg.initCfg.baseMappingServiceUrl&&e.cfg.errorService.addError(new j({message:"Mapping service URL is not configured, validation service will not be used.",level:exports.ErrorLevel.WARN,scope:exports.ErrorScope.APPLICATION,type:exports.ErrorType.INTERNAL})),!e.cfg.fieldActionService)return e.handleError("FieldActionService is not configured"),i(!1),Promise.resolve();var r=xe((function(){return Promise.resolve(e.runtimeServiceActive()).then((function(n){n||(e.handleError("The AtlasMap runtime service is not available."),i(!1),t=!0)}))}),(function(){e.handleError("The AtlasMap runtime service is not available."),i(!1),t=!0}));return Promise.resolve(r&&r.then?r.then(n):n(r))}catch(e){return Promise.reject(e)}}))},i.runtimeServiceActive=function(){var e=this;return new Promise((function(i,t){var n=e.cfg.initCfg.baseMappingServiceUrl+"ping";e.cfg.logger.debug("Runtime Service Ping Request"),e.api.get(n).json().then((function(t){e.cfg.logger.debug("Runtime Service Ping Response: "+t.String),i("pong"===(null==t?void 0:t.String))})).catch((function(e){t(e)}))}))},i.getRuntimeVersion=function(){var e=this,i=this.cfg.initCfg.baseMappingServiceUrl+"version";return new Promise((function(t,n){e.api.get(i).json().then((function(i){e.cfg.logger.debug("Runtime Service Version Response: "+i.String),t(i.String)})).catch((function(e){n(e)}))}))},i.initializeWithMappingDigest=function(){var e=this;return new Promise((function(i){e.cfg.fileService.getCurrentMappingDigest().then((function(t){try{var n=!1,r=function(r){return n?r:Promise.resolve(e.addDocumentsFromMappingDigest(t)).then((function(){if(t&&t.exportMappings){var n=Re.deserializeAtlasMappingName(N.objectize(t.exportMappings.value));e.cfg.fileService.findMappingFiles("UI").then((function(r){try{return Promise.resolve(e.cfg.fileService.setMappingDigestToService(t)).then((function(){return Promise.resolve(e.cfg.fieldActionService.fetchFieldActions()).then((function(){function o(){return Promise.resolve(e.cfg.fieldActionService.fetchFieldActions()).then((function(){e.fetchMappings().then((function(e){i(e)}))}))}var s=function(){if(n!==r[0])return Promise.resolve(e.cfg.fileService.setMappingStringToService(t.exportMappings.value)).then((function(){}))}();return s&&s.then?s.then(o):o()}))}))}catch(e){return Promise.reject(e)}})).catch((function(){i(!1)}))}else i(!1)}))},o=function(){if(!t)return null===e.cfg.mappings&&(e.cfg.mappings=new me),Promise.resolve(e.cfg.fieldActionService.fetchFieldActions()).then((function(){e.updateStatus(),i(!0),n=!0}))}();return Promise.resolve(o&&o.then?o.then(r):r(o))}catch(e){return Promise.reject(e)}})).catch((function(){i(!1)}))}))},i.addDocumentsFromMappingDigest=function(e){var i=this;return new Promise((function(t){try{var n=function(){i.cfg.mappingService.notifyMappingUpdated(),t(!0)};i.cfg.errorService.resetAll();var r=0,o=function(e,i,t){if("function"==typeof e[Se]){var n,r,o,s=e[Se]();if(function e(t){try{for(;!(n=s.next()).done;)if((t=i(n.value))&&t.then){if(!ye(t))return void t.then(e,o||(o=Te.bind(null,r=new Fe,2)));t=t.v}r?Te(r,1,t):r=t}catch(e){Te(r||(r=new Fe),2,e)}}(),s.return){var a=function(e){try{n.done||s.return()}catch(e){}return e};if(r&&r.then)return r.then(a,(function(e){throw a(e)}));a()}return r}if(!("length"in e))throw new TypeError("Object is not iterable");for(var p=[],l=0;l<e.length;l++)p.push(e[l]);return function(e,i,t){var n,r,o=-1;return function t(s){try{for(;++o<e.length;)if((s=i(o))&&s.then){if(!ye(s))return void s.then(t,r||(r=Te.bind(null,n=new Fe,2)));s=s.v}n?Te(n,1,s):n=s}catch(e){Te(n||(n=new Fe),2,e)}}(),n}(p,(function(e){return i(p[e])}))}(e.exportMeta,(function(t){var n=e.exportBlockData[r].value,o=t.id?t.id:t.name,s=t.dataSourceType?t.dataSourceType:t.documentType,a="string"==typeof t.isSource?"true"===t.isSource.toLowerCase():t.isSource;return Promise.resolve(i.cfg.documentService.addDocument(n,o,t.name,s,t.inspectionType,a,t.inspectionParameters)).then((function(){i.updateStatus(),r++}))}));return Promise.resolve(o&&o.then?o.then(n):n())}catch(e){return Promise.reject(e)}}))},i.fetchMappings=function(){var e=this;return new Promise((function(i){try{var t=function(){0===n.length&&i(!1),e.cfg.mappingService.fetchMappings(n,e.cfg.mappings).then((function(){e.cfg.initCfg.mappingInitialized=!0,e.updateStatus(),e.cfg.mappingService.notifyMappingUpdated().then((function(){return i(!0)}))}))};if(null!=e.cfg.mappings)return i(!0),Promise.resolve();e.cfg.mappings=new me;var n=e.cfg.mappingFiles,r=function(){if(!e.cfg.mappingFiles||0===e.cfg.mappingFiles.length)return Promise.resolve(e.cfg.fileService.findMappingFiles("UI")).then((function(e){n=e}))}();return Promise.resolve(r&&r.then?r.then(t):t())}catch(e){return Promise.reject(e)}}))},i.updateStatus=function(){for(var e,i=this.cfg.getAllDocs().length,t=0,n=A(this.cfg.getAllDocs());!(e=n()).done;){var r=e.value;(r.initialized||r.errorOccurred)&&t++}if(i===t&&this.cfg.fieldActionService.isInitialized){if(this.cfg.preloadedMappingJson&&(Re.deserializeMappingServiceJSON(JSON.parse(this.cfg.preloadedMappingJson),this.cfg),this.cfg.preloadedMappingJson=null),this.cfg.mappings){Pe.updateLookupTables(this.cfg.mappings),Ce.updateDocumentNamespacesFromMappings(this.cfg),Ce.updateMappingsFromDocuments(this.cfg);for(var o,s=A(this.cfg.getAllDocs());!(o=s()).done;)o.value.updateFromMappings(this.cfg.mappings);Ce.removeStaleMappings(this.cfg),this.cfg.mappingService.updateMappingsTransition()}this.updateInitComplete()}},i.handleError=function(e,i){this.cfg.errorService.addError(new j({message:e="Data Mapper UI Initialization Error: "+e,scope:exports.ErrorScope.APPLICATION,level:exports.ErrorLevel.ERROR,type:exports.ErrorType.INTERNAL,object:i})),this.updateLoadingStatus(e),this.cfg.initCfg.initializationErrorOccurred=!0,this.cfg.initCfg.initialized=!0,this.systemInitializedSource.next()},i.updateInitComplete=function(){this.updateLoadingStatus("Initialization complete."),this.cfg.initCfg.initialized=!0,this.systemInitializedSource.next()},i.updateLoadingStatus=function(e){this.cfg.initCfg.loadingStatus=e,this.initializationStatusChangedSource.next()},i.initializeWithADMArchiveFile=function(e){var i=this;return new Promise((function(t){i.updateLoadingStatus("Importing ADM archive file"),i.cfg.fileService.importADMArchive(e).then((function(){i.initialize().then((function(e){t(e)}))}))}))},i.resetAtlasMap=function(){var e=this;return new Promise((function(i){e.cfg.fileService.resetAll().then((function(t){e.initialize().then((function(e){i(t&&e)}))}))}))},e}();exports.ATLAS_MAPPING_JSON_TYPE="io.atlasmap.v2.AtlasMapping",exports.COLLECTION_JSON_TYPE="io.atlasmap.v2.Collection",exports.CONSTANT_FIELD_JSON_TYPE="io.atlasmap.v2.ConstantField",exports.CommonUtil=N,exports.ConfigModel=U,exports.CsvInspectionModel=ee,exports.CsvInspectionRequestModel=ie,exports.CsvInspectionRequestOptions=te,exports.DATA_SOURCE_JSON_TYPE="io.atlasmap.v2.DataSource",exports.DataMapperInitializationModel=_,exports.DocumentDefinition=w,exports.DocumentInitializationModel=L,exports.DocumentInspectionModel=Z,exports.DocumentInspectionRequestModel=$,exports.DocumentInspectionRequestOptions=Q,exports.DocumentInspectionUtil=Ne,exports.DocumentManagementService=be,exports.EnumValue=O,exports.ErrorHandlerService=we,exports.ErrorInfo=j,exports.Examples=B,exports.ExpressionModel=X,exports.ExpressionNode=V,exports.ExpressionUpdatedEvent=J,exports.FIELD_GROUP_JSON_TYPE="io.atlasmap.v2.FieldGroup",exports.FIELD_PATH_SEPARATOR="/",exports.Field=D,exports.FieldAction=K,exports.FieldActionArgument=q,exports.FieldActionArgumentValue=H,exports.FieldActionDefinition=W,exports.FieldActionService=_e,exports.FieldNode=G,exports.FileManagementService=Le,exports.Guid=Oe,exports.HTTP_STATUS_NO_CONTENT=204,exports.HTTP_STATUS_OK=200,exports.InitializationService=Je,exports.JAVA_CLASS_JSON_TYPE="io.atlasmap.java.v2.JavaClass",exports.JAVA_ENUM_FIELD_JSON_TYPE="io.atlasmap.java.v2.JavaEnumField",exports.JAVA_INSPECTION_REQUEST_JSON_TYPE="io.atlasmap.java.v2.ClassInspectionRequest",exports.JAVA_MODEL_PACKAGE_PREFIX="io.atlasmap.java.v2",exports.JSON_DATA_SOURCE_JSON_TYPE="io.atlasmap.json.v2.JsonDataSource",exports.JSON_ENUM_FIELD_JSON_TYPE="io.atlasmap.json.v2.JsonEnumField",exports.JSON_INSPECTION_REQUEST_JSON_TYPE="io.atlasmap.json.v2.JsonInspectionRequest",exports.JSON_MODEL_PACKAGE_PREFIX="io.atlasmap.json.v2",exports.JavaInspectionModel=ne,exports.JavaInspectionRequestModel=re,exports.JavaInspectionRequestOptions=oe,exports.JsonInspectionModel=se,exports.JsonInspectionRequestModel=ae,exports.JsonInspectionRequestOptions=pe,exports.LookupTable=fe,exports.LookupTableData=De,exports.LookupTableEntry=de,exports.LookupTableUtil=Pe,exports.MAPPING_JSON_TYPE="io.atlasmap.v2.Mapping",exports.MODEL_PACKAGE_PREFIX="io.atlasmap.v2",exports.MappedField=ve,exports.MappingDefinition=me,exports.MappingDigestUtil=Ie,exports.MappingExpressionService=Ue,exports.MappingManagementService=je,exports.MappingModel=Ee,exports.MappingSerializer=Re,exports.MappingUtil=Ce,exports.NamespaceModel=R,exports.PROCESS_MAPPING_REQUEST_JSON_TYPE="io.atlasmap.v2.ProcessMappingRequest",exports.PROPERTY_FIELD_JSON_TYPE="io.atlasmap.v2.PropertyField",exports.PaddingField=b,exports.TextNode=z,exports.TransitionDelimiterModel=ge,exports.TransitionModel=he,exports.XML_DATA_SOURCE_JSON_TYPE="io.atlasmap.xml.v2.XmlDataSource",exports.XML_ENUM_FIELD_JSON_TYPE="io.atlasmap.xml.v2.XmlEnumField",exports.XML_INSPECTION_REQUEST_JSON_TYPE="io.atlasmap.xml.v2.XmlInspectionRequest",exports.XML_MODEL_PACKAGE_PREFIX="io.atlasmap.xml.v2",exports.XmlInspectionModel=le,exports.XmlInspectionRequestModel=ce,exports.XmlInspectionRequestOptions=ue,exports.collectionTypes=E,exports.constantTypes=F,exports.getCsvParameterOptions=function(){return[{name:"format",label:"CSV File Format",value:"Default",options:[{label:"Default",value:"Default"},{label:"Excel",value:"Excel"},{label:"InformixUnload",value:"InformixUnload"},{label:"InformixUnloadCsv",value:"InformixUnloadCsv"},{label:"MongoDBCsv",value:"MongoDBCsv"},{label:"MongoDBTsv",value:"MongoDBTsv"},{label:"MySQL",value:"MySQL"},{label:"Oracle",value:"Oracle"},{label:"PostgreSQLCsv",value:"PostgreSQLCsv"},{label:"PostgreSQLText",value:"PostgreSQLText"},{label:"RFC4180",value:"RFC4180"},{label:"TDF",value:"TDF"}],required:!0},{name:"allowDuplicateHeaderNames",label:"Allow Duplicate Header Names",value:"true",boolean:!0,required:!1},{name:"allowMissingColumnNames",label:"Allow Missing Column Names",value:"true",boolean:!0,required:!1},{name:"commentMarker",label:"Comment Marker",value:"",required:!1},{name:"delimiter",label:"Delimiter",value:"",required:!1},{name:"escape",label:"Escape",value:"",required:!1},{name:"firstRecordAsHeader",label:"First Record As Header",value:"true",boolean:!0,required:!1},{name:"headers",label:"Headers",value:"",required:!1},{name:"ignoreEmptyLines",label:"Ignore Empty Lines",value:"true",boolean:!0,required:!1},{name:"ignoreHeaderCase",label:"Ignore Header Case",value:"true",boolean:!0,required:!1},{name:"ignoreSurroundingSpaces",label:"Ignore Surrounding Spaces",value:"true",boolean:!0,required:!1},{name:"nullString",label:"Null String",value:"",required:!1},{name:"skipHeaderRecord",label:"Skip Header Record",value:"true",boolean:!0,required:!1}]},exports.propertyTypes=T;
//# sourceMappingURL=core.cjs.production.min.js.map
